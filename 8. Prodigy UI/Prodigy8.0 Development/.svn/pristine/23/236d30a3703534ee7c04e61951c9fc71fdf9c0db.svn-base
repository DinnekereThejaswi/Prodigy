{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{\"5Pkn\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='.modal {\\r\\n    text-align: right;\\r\\n  }\\r\\n  \\r\\n  @media screen and (min-width: 768px) { \\r\\n    .modal:before {\\r\\n      display: inline-block;\\r\\n      vertical-align: middle;\\r\\n      content: \" \";\\r\\n      height: 100%;\\r\\n    }\\r\\n  }\\r\\n  \\r\\n  .modal-dialog {\\r\\n    display: inline-block;\\r\\n    text-align: left;\\r\\n    vertical-align: middle;\\r\\n  }'},GFhY:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\");let NumbersPipe=class{transform(value){var result=(value=Math.round(value)).toString().split(\".\"),lastThree=result[0].substring(result[0].length-3),otherNumbers=result[0].substring(0,result[0].length-3);\"\"!=otherNumbers&&\"-\"!=otherNumbers&&(lastThree=\",\"+lastThree);var output=otherNumbers.replace(/\\B(?=(\\d{2})+(?!\\d))/g,\",\")+lastThree;return output+=\".00\"}};NumbersPipe=tslib_es6.a([Object(core.Pipe)({name:\"currencyFormat\"})],NumbersPipe);let SearchPipe=class{transform(records,searchText){return searchText&&\"\"!=searchText?records.filter(rec=>Object.keys(rec).some(x=>String(rec[x]).toLowerCase().includes(searchText.toLowerCase()))):records}};SearchPipe=tslib_es6.a([Object(core.Pipe)({name:\"search\"})],SearchPipe);var EmailValidatorDirective_1,fesm2015_forms=__webpack_require__(\"3Pt+\"),common=__webpack_require__(\"ofXK\"),ngx_pagination=__webpack_require__(\"oOf3\"),router=__webpack_require__(\"tyNb\"),ngx_bootstrap_datepicker=__webpack_require__(\"hzby\");let EmailValidatorDirective=EmailValidatorDirective_1=class{constructor(){}validate(control){const validEmail=/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/i.test(control.value);return control.value<1||validEmail?null:{EmailFieldValidator:!0}}};var AlphabetValidatorDirective_1;EmailValidatorDirective=EmailValidatorDirective_1=tslib_es6.a([Object(core.Directive)({selector:\"[EmailFieldValidator]\",providers:[{provide:fesm2015_forms.NG_VALIDATORS,useExisting:EmailValidatorDirective_1,multi:!0}]}),tslib_es6.c(\"design:paramtypes\",[])],EmailValidatorDirective);let AlphabetValidatorDirective=AlphabetValidatorDirective_1=class{constructor(el){this.el=el,this.regex=new RegExp(/^[a-zA-Z ]+$/i),this.specialKeys=[\"Backspace\",\"Tab\",\"End\",\"Home\",\"Space\"]}onKeyDown(event){if(-1!==this.specialKeys.indexOf(event.key))return;const next=this.el.nativeElement.value.concat(event.key);next&&!String(next).match(this.regex)&&event.preventDefault()}validate(control){const validAlpha=/^[a-zA-Z ]+$/i.test(control.value);return control.value<1||validAlpha?null:{AlphabetFieldValidator:!0}}};var IntegerDecimalValidatorDirective_1;AlphabetValidatorDirective.ctorParameters=()=>[{type:core.ElementRef}],tslib_es6.a([Object(core.HostListener)(\"keydown\",[\"$event\"]),tslib_es6.c(\"design:type\",Function),tslib_es6.c(\"design:paramtypes\",[KeyboardEvent]),tslib_es6.c(\"design:returntype\",void 0)],AlphabetValidatorDirective.prototype,\"onKeyDown\",null),AlphabetValidatorDirective=AlphabetValidatorDirective_1=tslib_es6.a([Object(core.Directive)({selector:\"[AlphabetFieldValidator]\",providers:[{provide:fesm2015_forms.NG_VALIDATORS,useExisting:AlphabetValidatorDirective_1,multi:!0}]}),tslib_es6.c(\"design:paramtypes\",[core.ElementRef])],AlphabetValidatorDirective);let IntegerDecimalValidatorDirective=IntegerDecimalValidatorDirective_1=class{constructor(el){this.el=el,this.regex=new RegExp(/^[0-9]+([0-9.]*)$/g),this.specialKeys=[\"Backspace\",\"Tab\",\"End\",\"Home\"]}onKeyDown(event){if(-1!==this.specialKeys.indexOf(event.key))return;const next=this.el.nativeElement.value.concat(event.key);next&&!String(next).match(this.regex)&&event.preventDefault()}validate(control){const validDecimal=/^[1-9]\\d*(\\.\\d{3})?$/g.test(control.value);return control.value<1||validDecimal?null:{IntegerDecimalFieldValidator:!0}}};var MobileValidatorDirective_1;IntegerDecimalValidatorDirective.ctorParameters=()=>[{type:core.ElementRef}],tslib_es6.a([Object(core.HostListener)(\"keydown\",[\"$event\"]),tslib_es6.c(\"design:type\",Function),tslib_es6.c(\"design:paramtypes\",[KeyboardEvent]),tslib_es6.c(\"design:returntype\",void 0)],IntegerDecimalValidatorDirective.prototype,\"onKeyDown\",null),IntegerDecimalValidatorDirective=IntegerDecimalValidatorDirective_1=tslib_es6.a([Object(core.Directive)({selector:\"[IntegerDecimalFieldValidator]\",providers:[{provide:fesm2015_forms.NG_VALIDATORS,useExisting:IntegerDecimalValidatorDirective_1,multi:!0}]}),tslib_es6.c(\"design:paramtypes\",[core.ElementRef])],IntegerDecimalValidatorDirective);let MobileValidatorDirective=MobileValidatorDirective_1=class{constructor(el){this.el=el,this.regex=new RegExp(/^[6-9]+([0-9]*)$/g),this.specialKeys=[\"Backspace\",\"Tab\",\"End\",\"Home\"]}onKeyDown(event){if(-1!==this.specialKeys.indexOf(event.key))return;const next=this.el.nativeElement.value.concat(event.key);next&&!String(next).match(this.regex)&&event.preventDefault()}validate(control){const validMobile=/^[6-9][0-9]{9}$/g.test(control.value);return control.value<1||validMobile?null:{MobileFieldValidator:!0}}};MobileValidatorDirective.ctorParameters=()=>[{type:core.ElementRef}],tslib_es6.a([Object(core.HostListener)(\"keydown\",[\"$event\"]),tslib_es6.c(\"design:type\",Function),tslib_es6.c(\"design:paramtypes\",[KeyboardEvent]),tslib_es6.c(\"design:returntype\",void 0)],MobileValidatorDirective.prototype,\"onKeyDown\",null),MobileValidatorDirective=MobileValidatorDirective_1=tslib_es6.a([Object(core.Directive)({selector:\"[MobileFieldValidator]\",providers:[{provide:fesm2015_forms.NG_VALIDATORS,useExisting:MobileValidatorDirective_1,multi:!0}]}),tslib_es6.c(\"design:paramtypes\",[core.ElementRef])],MobileValidatorDirective);let NumberFieldvalidatorDirective=class{constructor(el){this.el=el,this.regex=new RegExp(\"^[0-9]+$\"),this.specialKeys=[\"Backspace\",\"Tab\",\"End\",\"Home\",\"ArrowLeft\",\"ArrowRight\",\"Delete\"]}onKeyDown(event){if(-1!==this.specialKeys.indexOf(event.key))return;const next=this.el.nativeElement.value.concat(event.key);next&&!String(next).match(this.regex)&&event.preventDefault()}};var PanValidatorDirective_1;NumberFieldvalidatorDirective.ctorParameters=()=>[{type:core.ElementRef}],tslib_es6.a([Object(core.HostListener)(\"keydown\",[\"$event\"]),tslib_es6.c(\"design:type\",Function),tslib_es6.c(\"design:paramtypes\",[KeyboardEvent]),tslib_es6.c(\"design:returntype\",void 0)],NumberFieldvalidatorDirective.prototype,\"onKeyDown\",null),NumberFieldvalidatorDirective=tslib_es6.a([Object(core.Directive)({selector:\"[NumberFieldvalidator]\"}),tslib_es6.c(\"design:paramtypes\",[core.ElementRef])],NumberFieldvalidatorDirective);let PanValidatorDirective=PanValidatorDirective_1=class{constructor(){}validate(control){const validPan=/^[A-Za-z]{5}\\d{4}[A-Za-z]{1}/g.test(control.value);return control.value<1||validPan?null:{PanFieldValidator:!0}}};var PincodeValidatorDirective_1;PanValidatorDirective=PanValidatorDirective_1=tslib_es6.a([Object(core.Directive)({selector:\"[PanFieldValidator]\",providers:[{provide:fesm2015_forms.NG_VALIDATORS,useExisting:PanValidatorDirective_1,multi:!0}]}),tslib_es6.c(\"design:paramtypes\",[])],PanValidatorDirective);let PincodeValidatorDirective=PincodeValidatorDirective_1=class{constructor(){}validate(control){const validPin=/^[0-9]{6}$/g.test(control.value);return control.value<1||validPin?null:{PincodeFieldValidator:!0}}};PincodeValidatorDirective=PincodeValidatorDirective_1=tslib_es6.a([Object(core.Directive)({selector:\"[PincodeFieldValidator]\",providers:[{provide:fesm2015_forms.NG_VALIDATORS,useExisting:PincodeValidatorDirective_1,multi:!0}]}),tslib_es6.c(\"design:paramtypes\",[])],PincodeValidatorDirective);let NumberToWordsPipe=class{constructor(){this.a=[\"\",\"One \",\"Two \",\"Three \",\"Four \",\"Five \",\"Six \",\"Seven \",\"Eight \",\"Nine \",\"Ten \",\"Eleven \",\"Twelve \",\"Thirteen \",\"Fourteen \",\"Fifteen \",\"Sixteen \",\"Seventeen \",\"Eighteen \",\"Nineteen \"],this.b=[\"\",\"\",\"Twenty\",\"Thirty\",\"Forty\",\"Fifty\",\"Sixty\",\"Seventy\",\"Eighty\",\"Ninety\"]}transform(value){if(value){let number=parseFloat(value).toFixed(2).split(\".\"),num=parseInt(number[0]),digit=parseInt(number[1]);if(num){if(num.toString().length>9)return\"\";const n=(\"000000000\"+num).substr(-9).match(/^(\\d{2})(\\d{2})(\\d{2})(\\d{1})(\\d{2})$/),d=(\"00\"+digit).substr(-2).match(/^(\\d{2})$/);if(!n)return\"\";let str=\"\";return str+=0!==Number(n[1])?(this.a[Number(n[1])]||this.b[n[1][0]]+\" \"+this.a[n[1][1]])+\"Crore \":\"\",str+=0!==Number(n[2])?(this.a[Number(n[2])]||this.b[n[2][0]]+\" \"+this.a[n[2][1]])+\"Lakh \":\"\",str+=0!==Number(n[3])?(this.a[Number(n[3])]||this.b[n[3][0]]+\" \"+this.a[n[3][1]])+\"Thousand \":\"\",str+=0!==Number(n[4])?(this.a[Number(n[4])]||this.b[n[4][0]]+\" \"+this.a[n[4][1]])+\"Hundred \":\"\",str+=0!==Number(n[5])?(this.a[Number(n[5])]||this.b[n[5][0]]+\" \"+this.a[n[5][1]])+\"Rupee \":\"\",str+=0!==Number(d[1])?(\"\"!==str?\" Rupees and \":\"\")+(this.a[Number(d[1])]||this.b[d[1][0]]+\" \"+this.a[d[1][1]])+\"Paise Only\":\"Rupees Only\",str}return\"\"}return\"\"}};NumberToWordsPipe=tslib_es6.a([Object(core.Pipe)({name:\"numberToWords\"})],NumberToWordsPipe);let PaymentPipe=class{transform(records,searchText){let payment;switch(searchText){case\"Q\":payment=\"Cheque\";break;case\"D\":payment=\"DD\";break;case\"C\":payment=\"Cash\";break;case\"R\":payment=\"Card\";break;case\"CT\":payment=\"Scheme Adj.\";break;case\"BC\":payment=\"OGS\";break;case\"EP\":payment=\"E-Payment\";break;case\"GV\":payment=\"Gift Vou\";break;case\"SR\":payment=\"SR Bill\";break;case\"OP\":payment=\"Order Adj.\";break;case\"PE\":payment=\"PUR. Est.\";break;case\"PB\":payment=\"PUR. Bill\";break;case\"SE\":payment=\"SR EST\";break;case\"SP\":payment=\"Sales Promotion\";break;case\"UPI\":payment=\"UPI Payment\";break;case\"CN\":payment=\"CREDIT NOTE\";break;default:payment=\"Invalid\"}return payment}};PaymentPipe=tslib_es6.a([Object(core.Pipe)({name:\"payment\"})],PaymentPipe);let DotToHashPipe=class{transform(value){return value.toString().replace(\".\",\"#\")}};DotToHashPipe=tslib_es6.a([Object(core.Pipe)({name:\"dotToHashFormat\"})],DotToHashPipe);let NumberDirective=class{constructor(_el){this._el=_el}onInputChange(event){const initalValue=this._el.nativeElement.value;this._el.nativeElement.value=initalValue.replace(/[^0-9]*/g,\"\"),initalValue!==this._el.nativeElement.value&&event.stopPropagation()}};NumberDirective.ctorParameters=()=>[{type:core.ElementRef}],tslib_es6.a([Object(core.HostListener)(\"input\",[\"$event\"]),tslib_es6.c(\"design:type\",Function),tslib_es6.c(\"design:paramtypes\",[Object]),tslib_es6.c(\"design:returntype\",void 0)],NumberDirective.prototype,\"onInputChange\",null),NumberDirective=tslib_es6.a([Object(core.Directive)({selector:\"input[numbersOnly]\"}),tslib_es6.c(\"design:paramtypes\",[core.ElementRef])],NumberDirective);let IDTypePipe=class{transform(records,searchText){let payment;switch(searchText){case\"AAD\":payment=\"ADHAAR\";break;case\"ARM\":payment=\"Arms License\";break;case\"DRI\":payment=\"Driving License\";break;case\"OTH\":payment=\"Others\";break;case\"PAN\":payment=\"Income Tax PAN\";break;case\"PAS\":payment=\"Passport\";break;case\"RAT\":payment=\"Ration Card\";break;case\"VOT\":payment=\"Voter ID\";break;default:payment=\"Invalid\"}return payment}};IDTypePipe=tslib_es6.a([Object(core.Pipe)({name:\"IDType\"})],IDTypePipe);let NumbersOnlyDirective=class{constructor(el){this.el=el,this.regex=new RegExp(/^-?[0-9]+(\\.[0-9]*){0,1}$/g),this.specialKeys=[\"Backspace\",\"Tab\"]}onKeyDown(event){if(-1!==this.specialKeys.indexOf(event.key))return;const next=this.el.nativeElement.value.concat(event.key);next&&!String(next).match(this.regex)&&event.preventDefault()}};NumbersOnlyDirective.ctorParameters=()=>[{type:core.ElementRef}],tslib_es6.a([Object(core.HostListener)(\"keydown\",[\"$event\"]),tslib_es6.c(\"design:type\",Function),tslib_es6.c(\"design:paramtypes\",[KeyboardEvent]),tslib_es6.c(\"design:returntype\",void 0)],NumbersOnlyDirective.prototype,\"onKeyDown\",null),NumbersOnlyDirective=tslib_es6.a([Object(core.Directive)({selector:\"[appNumbersOnly]\"}),tslib_es6.c(\"design:paramtypes\",[core.ElementRef])],NumbersOnlyDirective);let RoundPipe=class{transform(input){return Math.round(input)}};RoundPipe=tslib_es6.a([Object(core.Pipe)({name:\"round\"})],RoundPipe);var http=__webpack_require__(\"tk/3\"),crypto_js=__webpack_require__(\"NFKh\"),AppConfigService=__webpack_require__(\"qlSq\");let lastdocno_service_LastdocnoService=class{constructor(_http,appConfigService){this._http=_http,this.appConfigService=appConfigService,this.ccode=\"\",this.bcode=\"\",this.apiBaseUrl=this.appConfigService.apiBaseUrl,this.password=this.appConfigService.Pwd,this.getCB()}getCB(){this.ccode=crypto_js.AES.decrypt(localStorage.getItem(\"ccode\"),this.password.trim()).toString(crypto_js.enc.Utf8),this.bcode=crypto_js.AES.decrypt(localStorage.getItem(\"bcode\"),this.password.trim()).toString(crypto_js.enc.Utf8)}getLastDocNum(docType){return this._http.get(this.apiBaseUrl+\"api/docmgmt/last-series?companyCode=\"+this.ccode+\"&branchCode=\"+this.bcode+\"&docType=\"+docType)}};lastdocno_service_LastdocnoService.ctorParameters=()=>[{type:http.b},{type:AppConfigService.a}],lastdocno_service_LastdocnoService=tslib_es6.a([Object(core.Injectable)({providedIn:\"root\"}),tslib_es6.c(\"design:paramtypes\",[http.b,AppConfigService.a])],lastdocno_service_LastdocnoService);var moment=__webpack_require__(\"wd/R\");let lastdocno_component_LastdocnoComponent=class{constructor(_router,lastDocNoService){this._router=_router,this.lastDocNoService=lastDocNoService,this.EnableLastDocNo=!1,this.EnableLastDocNo=!1}ngOnInit(){this.CurrentFinancialYear=moment(new Date).format(\"YY\")}LastDocNo(){switch(this.routeUrl=this._router.url,this.routeUrl){case\"/orders\":this.DocType=\"ORDNO\",this.getLastDocNo(\"Last Order No\",this.DocType);break;case\"/estimation\":this.DocType=\"SALEST\",this.getLastDocNo(\"Last Est No\",this.DocType);break;case\"/purchase\":this.DocType=\"PUREST\",this.getLastDocNo(\"Last Est No\",this.DocType);break;case\"/salesreturn\":this.DocType=\"SREST\",this.getLastDocNo(\"Last SR Est.No\",this.DocType);break;case\"/sales-billing\":this.DocType=\"SALINV\",this.getLastDocNo(\"Last Bill No\",this.DocType);break;case\"/repair/repair-delivery\":this.DocType=\"REPISS\",this.getLastDocNo(\"Last Delivery No\",this.DocType);break;case\"/repair/repair-receipts\":this.DocType=\"REPREC\",this.getLastDocNo(\"Last Repair No\",this.DocType);break;case\"/purchase/purchase-billing\":this.DocType=\"PURINV\",this.getLastDocNo(\"Last Bill No\",this.DocType);break;case\"/orders/OrderReceipt\":this.DocType=\"ORDREC\",this.getLastDocNo(\"Last Order Receipt No\",this.DocType);break;case\"/salesreturn/ConfirmSalesReturn\":this.DocType=\"SRINV\",this.getLastDocNo(\"Last SR No\",this.DocType);break;case\"/credit-receipt/credit-receipt\":this.DocType=\"CREINV\",this.getLastDocNo(\"Last Receipt No\",this.DocType);break;case\"/stocks/stock-taking\":this.DocType=\"STKBAT\",this.getLastDocNo(\"Last Batch No\",this.DocType)}}getLastDocNo(docText,docType){this.lastDocNoService.getLastDocNum(docType).subscribe(response=>{this.lastNo=response,null!=this.lastNo&&0!=this.lastNo&&(this.lastDocNo=\"SALEST\"==docType||\"PUREST\"==docType||\"SREST\"==docType?docText+\" : \"+this.lastNo.DocumentNo:docText+\" : \"+this.CurrentFinancialYear+this.lastNo.DocumentNo,$(\"#LastDocumentNo\").modal(\"show\"))})}};lastdocno_component_LastdocnoComponent.ctorParameters=()=>[{type:router.c},{type:lastdocno_service_LastdocnoService}],lastdocno_component_LastdocnoComponent=tslib_es6.a([Object(core.Component)({selector:\"app-lastdocno\",template:tslib_es6.b(__webpack_require__(\"aRvg\")).default,styles:[tslib_es6.b(__webpack_require__(\"5Pkn\")).default]}),tslib_es6.c(\"design:paramtypes\",[router.c,lastdocno_service_LastdocnoService])],lastdocno_component_LastdocnoComponent);let PurchasePipe=class{transform(records,searchText){let payment;switch(searchText){case\"DM\":payment=\"DORMANT CUSTOMER ORDER\";break;case\"N\":payment=\"NORMAL\";break;case\"SN\":payment=\"SINDHOORA\";break;case\"BN\":payment=\"BANDHAN\";break;default:payment=\"\"}return payment}};PurchasePipe=tslib_es6.a([Object(core.Pipe)({name:\"purchasePlan\"})],PurchasePipe),__webpack_require__.d(__webpack_exports__,\"a\",(function(){return FullModule}));let FullModule=class{};FullModule=tslib_es6.a([Object(core.NgModule)({declarations:[EmailValidatorDirective,AlphabetValidatorDirective,IntegerDecimalValidatorDirective,MobileValidatorDirective,NumberFieldvalidatorDirective,PanValidatorDirective,PincodeValidatorDirective,SearchPipe,NumbersPipe,NumberToWordsPipe,PaymentPipe,DotToHashPipe,NumberDirective,IDTypePipe,RoundPipe,NumbersOnlyDirective,lastdocno_component_LastdocnoComponent,PurchasePipe],imports:[common.CommonModule,router.d,fesm2015_forms.ReactiveFormsModule,fesm2015_forms.FormsModule,ngx_pagination.a,ngx_bootstrap_datepicker.b.forRoot()],providers:[lastdocno_service_LastdocnoService],exports:[EmailValidatorDirective,AlphabetValidatorDirective,IntegerDecimalValidatorDirective,MobileValidatorDirective,NumbersOnlyDirective,RoundPipe,NumberFieldvalidatorDirective,PanValidatorDirective,PincodeValidatorDirective,SearchPipe,NumbersPipe,NumberToWordsPipe,PaymentPipe,DotToHashPipe,NumberDirective,IDTypePipe,lastdocno_component_LastdocnoComponent,PurchasePipe]})],FullModule)},aRvg:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<a href=\\'javascript: void(0);\\' (click)=\\'LastDocNo()\\'>Last Doc No.</a>\\n\\n\\n<div class=\"modal fade\" id=\"LastDocumentNo\" tabindex=\"-10\" role=\"dialog\" data-backdrop=\"static\" data-keyboard=\"false\"\\n  aria-labelledby=\"LastDocumentNoTabLabel\" aria-hidden=\"true\">\\n  <div class=\"modal-dialog \" style=\"max-width: 300px;\">\\n    <div class=\"modal-content\">\\n      \\x3c!-- Modal Header --\\x3e\\n      <div class=\"modal-header\">\\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\\n      </div>\\n      <div class=\"modal-body\">\\n        <pre>{{lastDocNo}}</pre>\\n      </div>\\n    </div>\\n  </div>\\n</div>'}}]);","extractedComments":[]}