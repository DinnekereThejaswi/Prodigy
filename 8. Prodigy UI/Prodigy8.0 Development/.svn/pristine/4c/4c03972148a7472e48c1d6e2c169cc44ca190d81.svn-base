<div style="color: brown; text-align: right; font-style: italic;">
  <app-lastdocno [routerUrl]="routerUrl"></app-lastdocno>
</div>
<br>
<div class="card">
  <div class="card-body">
    <form class="form-horizontal">
      <div class="row">
        <div class="col-md-2 ">
          <div class="form-group">
            <label for="OrderNo">Order No</label>
            <input type="number" min="0" class="form-control"
              oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
              onKeyPress="if(this.value.length==7) return false;" name="OrderNo" GreenBorder
              placeholder="Enter Order No" #OrderNo>
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <div class="input-group">
              <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary" type="submit"
                (click)="getOrderDetails(OrderNo.value)" style="margin-top: 22px;">Search</button>
              <button class="btn btn-warning waves-effect waves-light btn-rounded btn-secondary" type="button"
                (click)="cancel()" style="margin-top: 22px;"><i class="fal fa-close"></i>&nbsp;Clear</button>
            </div>
          </div>
        </div>
        <div class="col-md-3 float-right" *ngIf="hasOrderDetails">
          <div class="">
            <div class="text-right"><i class="fas fa-file-invoice"></i>&nbsp; <span class="text-muted">
                Order No</span>
              <h1 class="font-light">{{orderDetails.OrderNo}}</h1>
            </div>
          </div>
        </div>
        <div class="col-md-4 float-right" *ngIf="hasOrderDetails">
          <div class="">
            <div class="text-right"><i class="fal fa-rupee-sign"></i>&nbsp; <span class="text-muted">
                Advance Amount</span>
              <h1 class="font-light">{{previousPaymentDetails | number : '1.2-2' }}</h1>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<div id="accordian" class="accordion">
  <div class="card mb-0">
    <div class="card-header Pointer" (click)="ToggleCustomerData()"
      [attr.data-toggle]="EnableCustomerTab ? '':'collapse'" href="#Customer"
      style="background-color: #fdfdfd; box-shadow: 1px 2px 0px 0px rgba(0, 0, 0, 0.52);"
      [ngClass]="EnableCustomerTab ? 'collapsed' : ''">
      <div class="row">
        <div class="col-md-2 ">
          <a class="card-title align-middle Pointer" style="color:#0096FF">
            <i class="fas fa-2x fa-users mr-2 align-middle"></i>
            <span class="align-middle Pointer"><ins>Customer Details </ins>
              <div class="tooltipdesign"> <i class="fal fa-question-circle"></i>
                <span class="tooltiptext tooltip-top">Capture the New customer
                  information and Existing customer information</span>
              </div>
            </span>
          </a>
        </div>
        <!-- <ng-container *ngIf=" ToggleCustomer"> -->
        <ng-container *ngIf="ToggleCustomer">
          <div class="col-md-4 pull-right">
            <h4><span class="align-middle"> Customer: {{Customer.CustName}} </span></h4>
          </div>
          <div class="col-md-4 pull-right">
            <h4><span class="align-middle"> MobileNo: {{Customer.MobileNo}} </span></h4>
          </div>

        </ng-container>
        <!-- </ng-container> -->
      </div>
    </div>
    <div id="Customer" class="card-body collapse" [hidden]="EnableCustomerTab">
      <app-customer>
      </app-customer>
    </div>
  </div>
  <br>
  <div class="card mb-0">
    <div class="card-header Pointer" href="#Payment" [ngClass]="EnablePaymentsTab ? 'collapsed' : ''"
      [attr.data-toggle]="EnablePaymentsTab ? '':'collapse'"
      style="background-color: #fdfdfd; box-shadow: 1px 2px 0px 0px rgba(0, 0, 0, 0.52);" (click)="TogglePaymentData()">
      <div class="row">
        <div class="col-md-2 ">
          <a class="card-title align-middle" style="color:#005BFF">
            <!-- <i class="fal fa-cash-register "></i> -->
            <i class="fal fa-rupee-sign fa-2x mr-2 align-middle"></i>
            <span class="align-middle Pointer"><ins>Receipt Details </ins>
              <div class="tooltipdesign"> <i class="fal fa-question-circle"></i>
                <span class="tooltiptext tooltip-top">Capture additional payment advance receiving
                  details</span>
              </div>
            </span>
          </a>
        </div>
        <div class="col-md-4 pull-right">
        </div>
        <div class="col-md-4 pull-right">
          <ng-container *ngIf="paymentPaidAmt > 0">
            <h4><span class="align-middle"> Amount: {{paymentPaidAmt | number : '1.2-2'}} </span></h4>
          </ng-container>
        </div>
      </div>
    </div>
    <div id="Payment" class="card-body collapse" [hidden]="EnablePaymentsTab">
      <app-payment [argPageName]="pageName"></app-payment>
    </div>
  </div>
</div>
<br>
<div class="row ">
  <div class="col-lg-6 col-md-6">
    <ng-container *ngIf="ifPaymentDetails">
      <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"
        (click)="submitPost()">Submit</button>
      <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" (click)="cancel()"
        type="button">Cancel</button>
    </ng-container>
  </div>
  <div class="col-lg-6 col-md-6" *ngIf="hasOrderDetails">
    <div class="card">
      <div class="row">
        <div class="col-12">
          <div class="social-widget">
            <div class="soc-header box-facebook" style="padding: 3px;">
              <h3 class="text-white">Summary</h3>
            </div>
            <div class="soc-content">
              <div class="col-4 b-r">
                <h3 class="font-medium"> {{previousPaymentDetails | number : '1.2-2'}} <h1 class="float-right">+</h1>
                </h3>
                <h5 class="text-black">Previous Advance Amount </h5>
              </div>
              <div class="col-4 b-r">
                <h3 class="font-medium"> {{paymentPaidAmt | number : '1.2-2'}}<h1 class="float-right">=</h1>
                </h3>
                <h5 class="text-black">Receipt Amount</h5>
              </div>
              <div class="col-4 b-r">
                <h3 class="font-medium"><b>{{totalOrderAmt | number : '1.2-2'}}</b></h3>
                <h5 class="text-black">Total Order Amount</h5>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="UpdatePan" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Update PAN No</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="OrderNo">Update Pan</label>
          <input type="text" min="0" class="form-control" #PANNo name="PANNo" maxlength="10"
            placeholder="e.g. AAAPL0000C">
        </div>
        <div class="form-group">
          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"
            (click)="updatePan(PANNo.value)"> Update</button>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<ng-container *ngIf="EnableReprintReceipt">
  <app-reprint-order></app-reprint-order>
</ng-container>
<ng-container *ngIf="EnableJson">
  <pre>{{orderDetails| json}}</pre>
</ng-container>