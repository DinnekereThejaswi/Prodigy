function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,s=function(){};return{s:s,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"2is8":function(t,e,n){"use strict";n.r(e),e.default='<div class="card">\n  <div class="card-body">\n    <form [formGroup]="PurchaseCancelForm" class="form-horizontal">\n      <div class="row">\n        <div class="col-md-2">\n          <div class="form-group">\n            <label for="OrderNo">Bill No</label>\n            <input type="number" formControlName="BillNo" class="form-control" #BillNo name="BillNo" placeholder="Enter Bill Number">\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <div class="input-group">\n              <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary mt-4"\n                (click)="getPurchaseDetails(BillNo.value)"><i class="fal fa-search"></i> Search</button>\n                <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary mt-4" (click)="Clear()"><i\n                  class="fal fa-clear"></i> Clear</button>  \n            </div>            \n          </div>\n        </div>\n        <div class="col-md-3 float-right" *ngIf="hasPurchaseDetails">\n          <div class="">\n            <div class="text-right"><i class="fal fa-rupee-sign"></i>&nbsp; <span class="text-muted">\n                Bill Amount</span>\n              <h1 class="font-light">{{PurchaseBillData.TotalPurchaseAmount | number : \'1.2-2\'}}</h1>              \n            </div>\n          </div>\n        </div>\n        <div class="col-md-3 float-right" *ngIf="hasPurchaseDetails">\n          <div class="">\n            <div class="text-right"><i class="fal fa-calendar-alt"></i>&nbsp; <span class="text-muted">Bill Date</span>\n              <h1 class="font-light">{{PurchaseBillData.PDate | date:\'dd/MM/yyyy\'}}</h1>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="row" *ngIf="hasPurchaseDetails">\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="CustomerID">Name</label>\n            <div class="input-group">\n              <input class="form-control" formControlName="CustName" [(ngModel)]="PurchaseBillData.CustName" type="text"\n                readonly>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="City">Address3</label>\n            <div class="input-group">\n              <input class="form-control" [(ngModel)]="PurchaseBillData.Address3" formControlName="Address3" type="text"\n                readonly>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="Name">Address1</label>\n            <div class="input-group">\n              <input class="form-control" formControlName="Address1" [(ngModel)]="PurchaseBillData.Address1" type="text"\n                readonly>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="Name">Phone</label>\n            <div class="input-group">\n              <input class="form-control" type="text"\n                readonly>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="Address">Address2</label>\n            <div class="input-group">\n              <input class="form-control" formControlName="Address2" [(ngModel)]="PurchaseBillData.Address2" type="text"\n                readonly>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="Name">Mobile</label>\n            <div class="input-group">\n              <input class="form-control" formControlName="Mobile" [(ngModel)]="PurchaseBillData.Mobile_no" type="text"\n                readonly>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <div class="form-group">\n              <label for="Advance">Remarks</label>\n              <div class="input-group">\n                <input class="form-control" formControlName="Remarks" [(ngModel)]="PurchaseCancelObj.CancelRemarks"\n                  type="text">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="row" *ngIf="hasPurchaseDetails">\n        <div class="col-md-3">\n          <div class="form-group">\n            <div class="input-group">\n              <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" (click)="submitPost()">\n                <i class="far fa-window-close"></i> Cancel Purchase Bill</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n\x3c!-- <pre>{{PurchaseCancelObj | json}}</pre> --\x3e'},HGwx:function(t,e,n){"use strict";n.r(e),e.default='<div class="row" style="display:block;margin: auto;width: 30%;">\n  <ng-container *ngIf="isReprint">\n    <form class="form-horizontal">\n      <div class="col-md-12">\n        <div class="card">\n          <div class="card-body">\n            <div class="row">\n              <div class="col-md-12">\n                <div class="form-group">\n                  <label for="OrderNo">Bill Date</label>\n                  <input type="text" class="form-control" [(ngModel)]="disAppDate"\n                    [ngModelOptions]="{standalone: true}" readonly />\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-md-12">\n                <div class="form-group">\n                  <div class="input-group">\n                    <select class="form-control mr-auto mt-2 mt-lg-0"\n                        [(ngModel)]="reprintHeaders.selectedOption" [ngModelOptions]="{standalone: true}">\n                        <option [ngValue]="null">Select Bill No</option>\n                        <option *ngFor="let _BillList of BillList" [value]="_BillList.BillNo">\n                            {{_BillList.BillNo}} - {{_BillList.CustName}}\n                        </option>\n                    </select>\n                </div>\n                </div>\n                <div class="form-group">\n                  <ul class="list-group">\n                    <li class="list-group-item">\n                      Cancelled Bills\n                      <div class="material-switch pull-right">\n                        <input id="someSwitchOptionDefault" (change)="isChecked($event)" name="someSwitchOption001"\n                          type="checkbox" />\n                        <label for="someSwitchOptionDefault" class="label-default"></label>\n                      </div>\n                    </li>\n                  </ul>\n                </div>\n                <div class="form-group">\n                  <button class="printMe btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n                    (click)="onPrint(reprintHeaders.selectedOption)"><i class="fal fa-print"></i>\n                    Reprint </button>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n  <div class="modal fade" id="ReprintPurchaseBillingModal" tabindex="-1" data-backdrop="static" data-keyboard="false" role="dialog"\n    aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button"\n            class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n            id="exampleModalLabel" (click)=print()><i class="fal fa-print"></i> Print</button>\n          <button type="button" class="close" (click)="closePurBillTab()" data-dismiss="modal" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n          </button>\n        </div>\n        <span>\n          <div id="DisplayData" class="center" [innerHTML]=\'PrintDetails\'></div>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Added for Plain Text printing--\x3e\n\n<div class="modal fade" id="PurBillPlainTextTab" tabindex="-1" role="dialog" aria-labelledby="PurBillPlainTextTabLabel"\n    aria-hidden="true">\n    <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button"\n                    class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n                    id="PurBillPlainTextTabLabel" (click)=printPurBillPlainText()><i class="fal fa-print"></i> Print</button>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="container invoice-box htmlPrint" id="print-closed-section" style="max-width: 900px;border-width: 2em">\n                   <pre>{{purBillPlainTextDetails}}</pre>                \n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Ends here --\x3e'},HWQx:function(t,e,n){"use strict";n.r(e),e.default=".table-responsive {\r\n    display: block;\r\n    width: 99.9% !important;\r\n    overflow-x: auto;\r\n    -ms-overflow-style: -ms-autohiding-scrollbar;\r\n}\r\n\r\n.hiddenRow {\r\n    padding: 0 !important;\r\n  }\r\n\r\n.wrapper{\r\n    margin: auto 3em auto 3em;\r\n  }\r\n\r\n@media (min-width:2200px) and (max-width: 2440px) {\r\n    .table-responsive {\r\n     overflow-x: hidden !important;\r\n  \r\n}\r\n}\r\n\r\n@media (min-width: 300px) and (max-width: 2200px) {\r\n    .table-responsive {\r\n    overflow-x: auto !important;\r\n  \r\n}}"},LFAR:function(t,e,n){"use strict";n.r(e),e.default='.card-header{\r\n    border-radius: 15px !important;\r\n  }\r\n  .card{\r\n    border-radius: 15px !important;\r\n  \r\n  }\r\n  .card-body{ \r\n    padding: 10px 30px 0px 30px !important; \r\n    border-bottom: 2px solid black;\r\n    border-radius: 15px;\r\n  }\r\n  .p-38 { height: 38px; }\r\n  .text-white { color: white;}\r\n  .Pointer { cursor: pointer; }\r\n  .footer {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n  }\r\n  .hide{\r\n   display: hide;\r\n  }\r\n  .show{\r\n    display: block;\r\n  }\r\n  .accordion .card-header.collapsed:after {\r\n    /* symbol for "collapsed" panels */\r\n    content: "\\f067"; \r\n    position: absolute;\r\n    right: 20px;\r\n    font-size: 20px;\r\n    font-weight: 400;\r\n  \r\n    line-height: 1;\r\n    margin-top: -25px;\r\n    transition: .3s transform ease-in-out;\r\n  }\r\n  .accordion .card-header:after {\r\n    font-family: \'FontAwesome\';  \r\n    content: "\\f068";\r\n    position: absolute;\r\n    right: 20px;\r\n    font-size: 20px;\r\n    font-weight: 400;\r\n    line-height: 1;\r\n    margin-top: -25px;\r\n  }\r\n  .text-red{\r\n    color:red;\r\n  }\r\n  .text-green{\r\n  color:#16d616; \r\n  }\r\n  \r\n  \r\n  '},Tsp1:function(t,e,n){"use strict";n.r(e);var a=n("mrSG"),s=n("fXoL"),i=n("ofXK"),r=n("3Pt+"),l=n("5nbR"),o=n("tyNb"),d=n("db5x"),c=n("E2Nj"),u=n("SlBg"),h=n("NFKh"),m=n("eya4"),p=n("qLqq"),b=n("3TGi"),f=n("GUC0"),y=n.n(f),g=function(){function t(e,n,a,s,i,r){_classCallCheck(this,t),this._CustomerService=e,this._purchaseService=n,this._router=a,this._paymentService=s,this._estmationService=i,this._masterService=r,this.autoFetchAmount=0,this.toggle=!1,this.filterRadioBtns=!1,this.PaymentHeader="",this.SalesData={},this.PurchaseData={},this.OrderAttachmentSummaryData={},this.SRAttachmentSummaryData={},this.OldGoldAttachmentSummaryData={},this.pageName="OC",this.NoRecordsCustomer=!1,this.NoRecordsPurchase=!1,this.EnableReprint=!1,this.EnableDisablePayment=!1,this.password=p.a.Pwd,this.model={option:"Payment"},this.ccode="",this.bcode="",this.today=new Date,this.estDate="",this.ordDate="",this.ShowHide=!0,this.NewEstimation=!1,this.ExistingEstimation=!1,this.OrderNo=!1,this.ApplicationDate="",this.estDetails=[],this.SalesPerson="",this.purchaseDetails=[],this.customerDtls=[],this.SalesManList=[],this.ParentJSON=[],this.EnableSubmitButton=!0,this.NoRecordsPaymentSummary=!1,this.PaymentSummary=[],this.PaidAmount=0,this.ToggleTotal=!0,this.CollapseCustomerTab=!0,this.CollapseCustomerDetailsTab=!0,this.EnableSalesTab=!1,this.EnableOrderAttachmentTab=!0,this.EnableSRAttachmentTab=!0,this.EnableOldGoldAttachmentTab=!0,this.NoRecordsSales=!1,this.NoSummarySales=!1,this.NoSummaryOrder=!1,this.NoSummaryPurchase=!1,this.NoSummarySalesReturn=!1,this.NoSummaryOldGold=!1,this.NoRecordsAttachSR=!1,this.NoRecordsAttachOldGold=!1,this.ToggleAttachOrder=!0,this.NoRecordsAttachOrder=!1,this.ReceivableAmount=0,this.TogglePurchase=!1,this.EnablePurchaseTab=!1,this.PurchaseBilling={CompanyCode:"",BranchCode:"",EstNo:null,OperatorCode:localStorage.getItem("Login"),BillCounter:null,Type:"PE",BillNo:0,CustName:null,PaidAmount:0,CancelRemarks:null,lstOfPayment:[]},this.PurchaseTotAmount=0,this.NoRecordsPayments=!0,this.EnablePaymentsTab=!0,this.BalAmount=0,this.radioItems=["Payment","Adjust"],this.getCB()}return _createClass(t,[{key:"ngOnInit",value:function(){this.PurchaseData={Amount:0},this.NewEstimation=!0,$((function(){$("#datepicker").datepicker()})),this.GetCustomerDetsFromCustComp(),this.GetPurchaseDetsFromPurchaseComp(),this.GetParentJson(),this.GetPaymentSummary(),this.getSalesMan(),this.getApplicationdate()}},{key:"getPurchaseEstimationDetails",value:function(t){var e=this;this.EnableDisablePayment=!1,null!=t&&"0"!=t&&this._purchaseService.getPurchaseDetailsfromAPI(t).subscribe((function(n){e.purchaseDetails=n,null!=e.purchaseDetails&&(e.PurchaseBilling.CompanyCode=e.ccode,e.PurchaseBilling.BranchCode=e.bcode,e.SalesPerson=e.purchaseDetails.lstPurchaseEstDetailsVM[0].SalCode,e.PurchaseBilling.EstNo=t,"Payment"==e.model.option?e.EnableDisablePayment=!0:e.EnableDisablePayment=!1,e._estmationService.SendEstNo(t),e._CustomerService.getCustomerDtls(e.purchaseDetails.CustID).subscribe((function(t){e.customerDtls=t,e._CustomerService.sendCustomerDtls_To_Customer_Component(e.customerDtls),e._paymentService.inputData(e.PurchaseBilling)})))}))}},{key:"getSalesMan",value:function(){var t=this;this._masterService.getSalesMan().subscribe((function(e){t.SalesManList=e}))}},{key:"getApplicationdate",value:function(){var t=this;this._masterService.getApplicationDate().subscribe((function(e){var n=e;t.ordDate=n.applcationDate,t.ApplicationDate=Object(i.formatDate)(t.ordDate,"dd/MM/yyyy","en_GB")}))}},{key:"GetParentJson",value:function(){var t=this;this._paymentService.castParentJSON.subscribe((function(e){t.ParentJSON=e}))}},{key:"GetPaymentSummary",value:function(){var t=this;this._paymentService.CastPaymentSummaryData.subscribe((function(e){t.PaymentSummary=e,0==t.isEmptyObject(t.PaymentSummary)&&null!=t.isEmptyObject(t.PaymentSummary)?null==t.PaymentSummary.Amount?(t.NoRecordsPaymentSummary=!1,t.EnableSubmitButton=!0):(t.NoRecordsPaymentSummary=!0,t.EnableSubmitButton=!1,t.PaidAmount=t.PaymentSummary.Amount):(t.NoRecordsPaymentSummary=!1,t.EnableSubmitButton=!0)}))}},{key:"ToggleTotalFunction",value:function(){this.ToggleTotal=!this.ToggleTotal}},{key:"ToggleCustomerData",value:function(){1==this.NoRecordsCustomer&&(this.filterRadioBtns=!0,this.CollapseCustomerTab=!this.CollapseCustomerTab,this.CollapseCustomerDetailsTab=!this.CollapseCustomerDetailsTab)}},{key:"TogglePurchaseData",value:function(){this.EnablePurchaseTab=!this.EnablePurchaseTab}},{key:"ngOnDestroy",value:function(){this._CustomerService.SendCustDataToEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this._purchaseService.sendPurchaseDatatoEstComp(null),this._estmationService.SendEstNo(null),this._estmationService.SendOldGoldAttachmentSummaryData(null),this._paymentService.outputData(null),this._paymentService.inputData(null),this._paymentService.OutputParentJSONFunction(null),this._paymentService.SendPaymentSummaryData(null),this.model.option="Payment",this.PurchaseBilling={CompanyCode:"",BranchCode:"",EstNo:null,OperatorCode:localStorage.getItem("Login"),BillCounter:null,Type:"PE",BillNo:0,CustName:null,PaidAmount:0,CancelRemarks:null,lstOfPayment:[]},this.ClearValues()}},{key:"isEmptyObject",value:function(t){return t&&0===Object.keys(t).length}},{key:"getCB",value:function(){this.ccode=h.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(h.enc.Utf8),this.bcode=h.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(h.enc.Utf8),this.PurchaseBilling.CompanyCode=this.ccode,this.PurchaseBilling.BranchCode=this.bcode}},{key:"EnablePurchase",value:function(){this.EnableSalesTab=!1,this.EnablePurchaseTab=!1,this.NoRecordsSales=!1,this.TogglePurchase=!1,this.NoRecordsPurchase=!1}},{key:"GetCustomerDetsFromCustComp",value:function(){var t=this;this._CustomerService.cast.subscribe((function(e){t.CustomerName=e,0==t.isEmptyObject(t.CustomerName)&&null!=t.isEmptyObject(t.CustomerName)?(t.EnableSalesTab=!1,t.CollapseCustomerTab=!0,t.NoRecordsCustomer=!0,t.NoRecordsSales=!0,t.CollapseCustomerDetailsTab=!0):(t.EnableSalesTab=!0,t.CollapseCustomerTab=!1,t.NoRecordsCustomer=!1,t.NoRecordsSales=!1,t.EnablePurchaseTab=!0)}))}},{key:"GetPurchaseDetsFromPurchaseComp",value:function(){var t=this;this._purchaseService.cast.subscribe((function(e){t.PurchaseData=e,0==t.isEmptyObject(t.PurchaseData)&&null!=t.isEmptyObject(t.PurchaseData)?(t.NoRecordsPurchase=!0,t.TogglePurchase=!0,t.EnablePurchaseTab=!0,t.NoSummaryPurchase=!0,t.indicator="P"):(t.NoRecordsPurchase=!1,t.TogglePurchase=!1,t.EnablePurchaseTab=!0,t.NoSummaryPurchase=!1)}))}},{key:"PurchaseTotalAmountCalculation",value:function(t){this.PurchaseTotAmount=Math.round(t)}},{key:"TogglePaymentData",value:function(){0==this.NoRecordsPayments?y()("Warning","Please select Item Details ","warning"):this.EnablePaymentsTab=!1}},{key:"BalanceAmount",value:function(){return this.BalAmount=Math.round(this.PurchaseTotAmount)-this.PaidAmount,this.autoFetchAmount=this.BalAmount,this.BalAmount}},{key:"PaidTotalAmountCalculation",value:function(t){this.PaidAmount=t,this.PurchaseBilling.PaidAmount=this.PaidAmount,this.BalanceAmount()}},{key:"OnRadioBtnChnge",value:function(t){"Adjust"==t?(this.EnableDisablePayment=!1,this.model.option=t):(this.EnableDisablePayment=!0,this.model.option=t)}},{key:"Submit",value:function(){"Payment"==this.model.option?0==this.BalAmount||0==this.BalAmount?this.SavePurchaseBilling():this.BalAmount<0?y()("Warning","Paid amount Should not be greater than the balance amount","warning"):this.BalAmount>0&&y()("Warning","Please make full payment to save the bill","warning"):this.SavePurchaseBilling()}},{key:"SavePurchaseBilling",value:function(){var t=this;confirm("Do you want to save??")&&null==this.BillNo&&this._purchaseService.postPurchaseBilling(this.PurchaseBilling).subscribe((function(e){t.BillNo=e,null!=t.BillNo.billNo&&0!=t.BillNo.billNo&&(t.EnableReprint=!0,y()("Submitted!","Bill No: "+t.BillNo.billNo+" generated successfully!","success"),t.ngOnDestroy())}))}},{key:"ClearValues",value:function(){this.ReceivableAmount=0,this.PaidAmount=0,this.PurchaseTotAmount=0,this.BalAmount=0,this.pageName="",this.EnableDisablePayment=!1,this.EnablePurchaseTab=!0,this.SalesManList=[],this.getSalesMan(),this.GetCustomerDetsFromCustComp(),this.GetPurchaseDetsFromPurchaseComp(),this.GetParentJson(),this.GetPaymentSummary(),this.getApplicationdate(),this.getCB(),this.pageName="OC"}}]),t}();g.ctorParameters=function(){return[{type:c.a},{type:d.a},{type:o.c},{type:b.a},{type:u.a},{type:m.a}]},g=a.a([Object(s.Component)({selector:"app-purchase-billing",template:a.b(n("x3mp")).default,styles:[a.b(n("LFAR")).default]}),a.c("design:paramtypes",[c.a,d.a,o.c,b.a,u.a,m.a])],g);var v=n("NQ5e"),P=n("5eHb"),S=function(){function t(e,n,a,i,r,l,o,d){_classCallCheck(this,t),this._purchaseService=e,this.formBuilder=n,this.toastr=a,this._CustomerService=i,this._salesService=r,this._router=l,this._masterService=o,this._estimationService=d,this.count=0,this.Rate=0,this.CustomerDets=[],this.purchaseDetails=[],this.DmCarats=0,this.LinesDetails=[],this.EnableReprint=!1,this.EnableDisablectrls=!0,this.StoneCarats=0,this.EnableDisablePurPer=!1,this.leavePage=!1,this.valueChange=new s.EventEmitter,this.ccode="",this.bcode="",this.password=p.a.Pwd,this.model={option:"New Estimation"},this.NewEstimation=!0,this.PurchaseSummaryData={GrossWt:null,NtWt:null,StoneWt:null,carats:null,Amount:0},this.ToggleTotal=!0,this.CollapseCustomerTab=!0,this.CollapseCustomerDetailsTab=!0,this.ToggleEstimation=!1,this.PurchaseAmount=0,this.PurchaseTotalAmount=0,this.PurchaseAmountChange=new s.EventEmitter,this.DiamondAmount=0,this.ItemAmount=0,this.StoneAmount=0,this.ifPurchase=!1,this.EnableDisableSalesPerson=!1,this.ReprintData={EstNo:null,EstType:null},this.arrayObj=[],this.customerDtls=[],this.ShowHidePurEst=!0,this.RateTypeData=[{name:"Exchange Rate",value:"E"},{name:"Cash Rate",value:"C"}],this.EnablePurchaseRate=!1,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableRateType=!1,this.EnableSubmitButton=!0,this.fieldArray=[],this.newAttribute={SalCode:null,GSCode:null,ItemName:null,GrossWt:null,StneWt:null,NetWt:null,PurityPercent:null,MeltingPercent:null,CompanyCode:this.ccode,BranchCode:this.bcode,MeltingLoss:null,PurchaseRate:null,DiamondAmount:null,Dcts:null,GoldAmount:null,ItemAmount:null,lstPurchaseEstStoneDetailsVM:[],lstPurchaseEstDiamondDetailsVM:[]},this.StandardMeltingLoss=2,this.PurityPercent=0,this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.CopyEditedRow=[],this.EnableDiamondTab=!1,this.EnableStoneTab=!1,this.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]},this.purchaseEstimationPlainTextDetails=[],this.stwt=0,this.dcts=0,this.Flag=!1,this.rndoff=0,this.radioItems=["New Estimation","Existing Estimation"],this.getCB(),this.EnableRateTypeBasedonRoute()}return _createClass(t,[{key:"ToggleCustomerData",value:function(){this.CollapseCustomerTab=!this.CollapseCustomerTab,this.CollapseCustomerDetailsTab=!this.CollapseCustomerDetailsTab}},{key:"OnRadioBtnChnge",value:function(t){var e=this;"New Estimation"==t?this._router.navigateByUrl("/redirect",{skipLocationChange:!0}).then((function(){e._router.navigate(["/purchase"]),e.model.option=t,e.ToggleEstimation=!1,e.NewEstimation=!0,e.ShowHidePurEst=!0})):(this.model.option=t,this.ToggleEstimation=!0,this._CustomerService.SendCustDataToEstComp(null),this.NewEstimation=!1,this.ShowHidePurEst=!1)}},{key:"valueChanged",value:function(t){this.PurchaseAmount=t,this.valueChange.emit(this.PurchaseAmount)}},{key:"confirmBeforeLeave",value:function(){return 1!=this.leavePage||!!confirm("You have unsaved changes! If you leave, your changes will be lost.")&&(this.leavePage=!1,!0)}},{key:"PurchaseAmountChanged",value:function(t){this.PurchaseTotalAmount=t,this.PurchaseAmountChange.emit(this.PurchaseTotalAmount)}},{key:"receiveStoneDiamondAmt",value:function(){for(var t in this.fieldArray){if(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length>0)for(var e=0;e<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length;e++)this.DiamondAmount+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM[e].Amount);else this.DiamondAmount=0;if(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstStoneDetailsVM.length>0)for(e=0;e<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstStoneDetailsVM.length;e++)this.StoneAmount+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstStoneDetailsVM[e].Amount);else this.StoneAmount=0;this.fieldArray[t].DiamondAmount=this.DiamondAmount+this.StoneAmount,this.recalculate(t),this.DiamondAmount=0,this.StoneAmount=0}}},{key:"EnableDisableStnBtn",value:function(t){this.EnableStneSubmit=t}},{key:"EnableDisableDmdBtn",value:function(t){this.EnableDmdSubmit=t}},{key:"ngOnInit",value:function(){var t=this;this.getApplicationDate(),this.PurchaseSummaryData={GrossWt:null,NtWt:null,StoneWt:null,carats:null,Amount:0},"/purchase"===this._router.url?(this.ifPurchase=!0,this.EnableDisableSalesPerson=!1,this.PurSalCode="A",this._CustomerService.cast.subscribe((function(e){t.customerDtls=e}))):this.EnableDisableSalesPerson=!0,this._salesService.EstNo.subscribe((function(e){t.SalesEstNo=e})),this._estimationService.SubjectEstNo.subscribe((function(e){t.SalesEstNo=e,null!=t.SalesEstNo&&"0"!=t.SalesEstNo&&"/purchase"!=t._router.url&&t._estimationService.getEstimationDetailsfromAPI(t.SalesEstNo).subscribe((function(e){t.arrayObj=e,null!=t.arrayObj&&(t.PurSalCode=t.arrayObj.salesEstimatonVM[0].SalCode)}))})),this.Index=-1,this.PurchaseForm=this.formBuilder.group({GS:[null,r.Validators.required],SalCode:[null,r.Validators.required],RateType:["E",r.Validators.required],Item:[null,r.Validators.required],RatePerGram:[null,r.Validators.required]}),this.getGSList(),this.getSalesMan(),this._CustomerService.cast.subscribe((function(e){t.CustomerDets=e,null!=t.CustomerDets?(t.PurchaseLinesPost.CustID=t.CustomerDets.ID,t.PurchaseLinesPost.MobileNo=t.CustomerDets.MobileNo,t.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),t.PurchaseLinesPost.CompanyCode=t.ccode,t.PurchaseLinesPost.BranchCode=t.bcode):(t.PurchaseLinesPost.CustID=null,t.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),t.PurchaseLinesPost.CompanyCode=t.ccode,t.PurchaseLinesPost.BranchCode=t.bcode)})),this._estimationService.SubjectEstNo.subscribe((function(e){t.SalesEstNo=e,null!=t.SalesEstNo&&"0"!=t.SalesEstNo&&t._purchaseService.getPurchaseDetailsfromAPI(t.SalesEstNo).subscribe((function(e){if(t.purchaseDetails=e,null!=t.purchaseDetails){if(t.purchaseDetails.lstPurchaseEstDetailsVM.length>0){for(var n in t.fieldArray=t.purchaseDetails.lstPurchaseEstDetailsVM,t._purchaseService.sendPurchaseDatatoEstComp(t.PurchaseSummaryData),t.getItemExistingList(t.fieldArray[0].GSCode),t.fieldArray)t.EnableEditDelbtn[n]=!0,t.EnableSaveCnlbtn[n]=!1,t.readonly[n]=!0;t.PurchaseForm.controls.GS.setValue(t.fieldArray[0].GSCode),t.PurchaseForm.controls.SalCode.setValue(t.fieldArray[0].SalCode),t.PurchaseForm.controls.Item.setValue(t.purchaseDetails.PurItem),t.PurchaseForm.controls.RateType.setValue("E"),t.Rate=t.purchaseDetails.TodayRate,t.EnableDropdown=!0,t.PurchaseLinesPost.TotalPurchaseAmount=t.purchaseDetails.TotalPurchaseAmount,t.PurchaseLinesPost.GrandTotal=t.purchaseDetails.GrandTotal,t.PurchaseLinesPost.TodayRate=t.Rate,t.PurchaseLinesPost.PType=t.PurchaseForm.value.RateType,t.PurchaseLinesPost.PurItem=t.PurchaseForm.value.Item,t.PurchaseLinesPost.EstNo=t.SalesEstNo,t.PurchaseLinesPost.lstPurchaseEstDetailsVM=t.fieldArray,t.EnableSubmitButton=!1}}else t.fieldArray=[],t.PurchaseForm.reset()}),(function(e){404===e.status&&(t.PurchaseForm.reset(),t.PurchaseForm=t.formBuilder.group({GS:[null,r.Validators.required],SalCode:[null,r.Validators.required],RateType:["E",r.Validators.required],Item:[null,r.Validators.required],RatePerGram:[null,r.Validators.required]}),t.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:"E",CompanyCode:t.ccode,BranchCode:t.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]})}))})),"/sales-billing"!=this._router.url&&"/purchase/purchase-billing"!=this._router.url||(this.EnableDisablectrls=!1),"/estimation"==this._router.url&&(this.EnableDisablectrls=!0)}},{key:"getApplicationDate",value:function(){var t=this;this._masterService.getApplicationDate().subscribe((function(e){var n=e;t.applicationDate=n.applcationDate}))}},{key:"EstimationDetails",value:function(t){var e=this;this.SalesEstNo=t,null!=this.SalesEstNo&&"0"!=this.SalesEstNo&&""!=this.SalesEstNo&&this._purchaseService.getPurchaseDetailsfromAPI(this.SalesEstNo).subscribe((function(t){e.purchaseDetails=t,null!=e.purchaseDetails?(e.leavePage=!0,e.ShowHidePurEst=!0,e._estimationService.SendEstNo(e.SalesEstNo),e._CustomerService.getCustomerDtls(e.purchaseDetails.CustID).subscribe((function(t){for(var n in e.customerDtls=t,e._CustomerService.sendCustomerDtls_To_Customer_Component(e.customerDtls),e.fieldArray=e.purchaseDetails.lstPurchaseEstDetailsVM,e._purchaseService.sendPurchaseDatatoEstComp(e.PurchaseSummaryData),e.getItemExistingList(e.fieldArray[0].GSCode),e.fieldArray)e.EnableEditDelbtn[n]=!0,e.EnableSaveCnlbtn[n]=!1,e.readonly[n]=!0;e.PurchaseForm.controls.GS.setValue(e.fieldArray[0].GSCode),e.PurchaseForm.controls.SalCode.setValue(e.fieldArray[0].SalCode),e.PurchaseForm.controls.Item.setValue(e.purchaseDetails.PurItem),e.PurchaseForm.controls.RateType.setValue("E"),e.Rate=e.purchaseDetails.TodayRate,e.EnableDropdown=!0,e.PurchaseLinesPost.TotalPurchaseAmount=e.purchaseDetails.TotalPurchaseAmount,e.PurchaseLinesPost.GrandTotal=e.purchaseDetails.GrandTotal,e.PurchaseLinesPost.TodayRate=e.Rate,e.PurchaseLinesPost.PType=e.PurchaseForm.value.RateType,e.PurchaseLinesPost.PurItem=e.PurchaseForm.value.Item,e.PurchaseLinesPost.EstNo=e.SalesEstNo,e.PurchaseLinesPost.lstPurchaseEstDetailsVM=e.fieldArray,e.EnableSubmitButton=!1,e.EnableRateTypeBasedonRoute()}))):"/purchase"==e._router.url&&(e.toastr.warning("Purchase Estimation No does not exists.","Alert!"),e.ShowHidePurEst=!1,e.ClearValues())}),(function(t){if(404===t.status){var n=t.error;"Estimation No Does Not Exist"!=n.description&&(y()("Warning!",n.description,"warning"),e.ShowHidePurEst=!1,e.ClearValues())}}))}},{key:"ngOnDestroy",value:function(){this._salesService.SendEstNo_To_Purchase(null),this._purchaseService.sendPurchaseDatatoEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this._CustomerService.SendCustDataToEstComp(null),this._estimationService.SendEstNo(0)}},{key:"getGSList",value:function(){var t=this;this._masterService.getNewGsList().subscribe((function(e){t.GSList=e,t.PurchaseForm.controls.GS.setValue("OGO"),t.getItemList(t.PurchaseForm)}))}},{key:"getItemList",value:function(t){var e=this;this.PurchaseLinesPost.PurItem=t.value.GS,this._masterService.getItemfromAPI(t.value).subscribe((function(t){e.ItemList=t}))}},{key:"getItemExistingList",value:function(t){var e=this;this._masterService.getItemfromExistingAPI(t).subscribe((function(t){e.ItemList=t}))}},{key:"getSalesMan",value:function(){var t=this;this._masterService.getSalesMan().subscribe((function(e){t.SalesManList=e}))}},{key:"toggleRateType",value:function(t){this.Rate=0}},{key:"AJAXRateperGram",value:function(t,e){var n=this;this.ItemType=t,this.Karat=this.ItemList.filter((function(e){return e.Item_code===t})),this.ItemName=this.Karat[0].Karat,this.Rate=null,this._masterService.RefreshRateperGram(this.PurchaseForm.value,this.ItemName).subscribe((function(t){n.Rate=t,n.Rate=n.Rate.Rate,n.EnableDisablePurPer=!1,n.fieldArray[e].PurityPercent=0,n.fieldArray[e].GrossWt=null,n.fieldArray[e].StneWt=null,n.fieldArray[e].Dcts=null,n.fieldArray[e].NetWt=null,n.fieldArray[e].MeltingPercent=0,n.fieldArray[e].MeltingLoss=0,n.fieldArray[e].PurchaseRate=0,n.fieldArray[e].ItemAmount=0,"24K"!=n.fieldArray[e].ItemName?n.EnableDisablePurPer=!0:n.EnableDisablePurPer=!1,n.EnableDisablePurRate()}),(function(t){if(400===t.status){var e=t.error;alert(e.description)}}))}},{key:"EnableDisablePurRate",value:function(){"/purchase"==this._router.url?this.EnablePurchaseRate=!1:this.EnablePurchaseRate=!0}},{key:"ItemAmountCalc",value:function(t){this.fieldArray[t].PurchaseRate>this.Rate?(this.toastr.warning("Purchase rate should not be greater than "+this.Rate+".00","Alert!"),this.fieldArray[t].ItemAmount=0):this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)}},{key:"getRateperGram",value:function(t){var e=this;this.Rate=null,this._masterService.RefreshRateperGram(t.value,this.ItemName).subscribe((function(t){e.Rate=t,e.Rate=e.Rate.Rate}),(function(t){if(400===t.status){var e=t.error;alert(e.description)}}))}},{key:"add",value:function(t){null==t.value.SalCode?this.toastr.warning("Please select Sales Person","Alert!"):null==t.value.GS?this.toastr.warning("Please select GS","Alert!"):this.addrow()}},{key:"getCB",value:function(){this.ccode=h.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(h.enc.Utf8),this.bcode=h.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(h.enc.Utf8)}},{key:"addrow",value:function(){this.newAttribute={SalCode:null,GSCode:null,ItemName:null,GrossWt:null,StneWt:null,NetWt:null,PurityPercent:null,MeltingPercent:null,CompanyCode:this.ccode,BranchCode:this.bcode,MeltingLoss:null,PurchaseRate:null,DiamondAmount:null,Dcts:null,GoldAmount:null,ItemAmount:null,lstPurchaseEstStoneDetailsVM:[],lstPurchaseEstDiamondDetailsVM:[]},this.fieldArray.push(this.newAttribute);var t,e=_createForOfIteratorHelper(this.fieldArray);try{for(e.s();!(t=e.n()).done;)_objectDestructuringEmpty(t.value),this.count++}catch(n){e.e(n)}finally{e.f()}this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableRateTypeBasedonRoute(),this.leavePage=!0}},{key:"GetNetWT",value:function(t){this.fieldArray[t].PurityPercent=0;var e=this.fieldArray[t].GrossWt,n=this.fieldArray[t].StneWt;parseInt(n)>parseInt(e)?(y()("Input Error","Stone Wt cannot be greater than Gross Wt.","error"),this.fieldArray[t].StneWt=null):(this.fieldArray[t].NetWt=Number(e-n),"OG24K"!=this.fieldArray[t].ItemName&&"OGOL"!=this.fieldArray[t].ItemName&&"OGCN24K"!=this.fieldArray[t].ItemName&&"OGCN"!=this.fieldArray[t].ItemName?(this.GetMLLoss_MLPercentage(t),this.EnableDisablePurPer=!0):this.EnableDisablePurPer=!1)}},{key:"recalculate",value:function(t){if("OG24K"==this.fieldArray[t].ItemName||"OGOL"==this.fieldArray[t].ItemName||"OGCN24K"==this.fieldArray[t].ItemName||"OGCN"==this.fieldArray[t].ItemName?("OG24K"==this.fieldArray[t].ItemName||"OGCN"==this.fieldArray[t].ItemName||this.fieldArray[t].ItemName,this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)):("BJOR"==this.fieldArray[t].ItemName||"OG22"==this.fieldArray[t].ItemName||"OG18"==this.fieldArray[t].ItemName||"BJ18K"==this.fieldArray[t].ItemName)&&(this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].PurchaseRate*this.fieldArray[t].NetWt)),null!=this.fieldArray[t].DiamondAmount){var e=this.fieldArray[t].DiamondAmount,n=this.fieldArray[t].ItemAmount;this.fieldArray[t].ItemAmount=parseFloat((+n+ +e).toFixed(2))}}},{key:"GetMLLoss_MLPercentage",value:function(t){this.fieldArray[t].PurityPercent>100?(y()("Input Error","Purity Percentage should not be greater than 100 %","error"),this.fieldArray[t].PurityPercent=null,this.PurityPercent=null):this.fieldArray[t].PurityPercent>=100&&"OG24K"!=this.fieldArray[t].ItemName?(y()("Input Error","Purity Percentage has to be less than 100","error"),this.fieldArray[t].PurityPercent=null,this.PurityPercent=null):("OG24K"==this.fieldArray[t].ItemName||"OGOL"==this.fieldArray[t].ItemName||"OGCN24K"==this.fieldArray[t].ItemName||"OGCN"==this.fieldArray[t].ItemName?(this.PurityPercent=this.fieldArray[t].PurityPercent,this.EnableDisablePurPer=!1,"OG24K"==this.fieldArray[t].ItemName?(this.fieldArray[t].PurchaseRate=Number(this.Rate*this.PurityPercent/100).toFixed(2),this.fieldArray[t].MeltingPercent=Number(100*(this.Rate-this.fieldArray[t].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[t].MeltingLoss=Math.abs(Number(this.fieldArray[t].NetWt*this.fieldArray[t].MeltingPercent/100)).toFixed(3),this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)):"OGCN"==this.fieldArray[t].ItemName?(this.fieldArray[t].PurchaseRate=Number(this.Rate*this.PurityPercent/91.6).toFixed(2),this.fieldArray[t].MeltingPercent=Number(100*(this.Rate-this.fieldArray[t].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[t].MeltingLoss=Math.abs(Number(this.fieldArray[t].NetWt*this.fieldArray[t].MeltingPercent/100)).toFixed(3),this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)):"OGCN24K"==this.fieldArray[t].ItemName?(this.fieldArray[t].PurchaseRate=Number(this.Rate*this.PurityPercent/100).toFixed(2),this.fieldArray[t].MeltingPercent=Number(100*(this.Rate-this.fieldArray[t].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[t].MeltingLoss=Math.abs(Number(this.fieldArray[t].NetWt*this.fieldArray[t].MeltingPercent/100)).toFixed(3),this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)):(this.fieldArray[t].PurchaseRate=Math.abs(Number(this.Rate*this.PurityPercent/100)-Number(this.Rate*this.PurityPercent*.02/100)).toFixed(2),this.fieldArray[t].MeltingPercent=Number(100*(this.Rate-this.fieldArray[t].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[t].MeltingLoss=Number(this.fieldArray[t].NetWt*this.fieldArray[t].MeltingPercent/100).toFixed(3),this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2))):"BJOR"==this.fieldArray[t].ItemName||"OG22"==this.fieldArray[t].ItemName?(this.PurityPercent=91.6,this.fieldArray[t].PurityPercent=this.PurityPercent,this.fieldArray[t].MeltingPercent=0,this.fieldArray[t].MeltingLoss=0,this.fieldArray[t].PurchaseRate=this.Rate,this.fieldArray[t].ItemAmount=Number(this.Rate*this.fieldArray[t].NetWt)):"OG18"==this.fieldArray[t].ItemName||"BJ18K"==this.fieldArray[t].ItemName?(this.PurityPercent=75,this.fieldArray[t].PurityPercent=this.PurityPercent,this.fieldArray[t].MeltingPercent=0,this.fieldArray[t].MeltingLoss=0,this.fieldArray[t].PurchaseRate=this.Rate,this.fieldArray[t].ItemAmount=Number(this.Rate*this.fieldArray[t].NetWt)):"OSSL"==this.fieldArray[t].ItemName&&(this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].PurchaseRate*this.fieldArray[t].NetWt)),null!=this.fieldArray[t].DiamondAmount&&(this.fieldArray[t].ItemAmount+=this.fieldArray[t].DiamondAmount))}},{key:"editFieldValue",value:function(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):("OG24K"!=this.fieldArray[t].ItemName&&"OGOL"!=this.fieldArray[t].ItemName&&"OGCN24K"!=this.fieldArray[t].ItemName&&"OGCN"!=this.fieldArray[t].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.ItemType=this.fieldArray[t].ItemName,this.CopyEditedRow[t]=Object.assign({},this.fieldArray[t]),this.EnableEditDelbtn[t]=!1,this.EnableSaveCnlbtn[t]=!0,this.readonly[t]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableRateTypeBasedonRoute())}},{key:"saveDataFieldValue",value:function(t){null==this.fieldArray[t].ItemName||0==this.fieldArray[t].ItemName?this.toastr.warning("Please Select ItemName from Drop Down","Alert!"):null==this.fieldArray[t].GrossWt||0==this.fieldArray[t].GrossWt?this.toastr.warning("Please Enter Gross Wt","Alert!"):"OP"==this.PurchaseLinesPost.PurItem||"OS"==this.PurchaseLinesPost.PurItem||null!=this.fieldArray[t].PurityPercent&&0!=this.fieldArray[t].PurityPercent?("OP"==this.PurchaseLinesPost.PurItem||"OS"==this.PurchaseLinesPost.PurItem)&&this.fieldArray[t].PurchaseRate>this.Rate?(this.toastr.warning("Purchase rate should not be greater than "+this.Rate+".00","Alert!"),this.fieldArray[t].ItemAmount=0):null==this.fieldArray[t].ItemAmount||0==this.fieldArray[t].ItemAmount?this.toastr.warning("Amount should not empty. Please select proper item from dropdown","Alert!"):(this.leavePage=!0,this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t]=this.fieldArray[t],this.PurchaseLinesPost.TotalPurchaseAmount=this.PurchaseSummaryData.Amount,this.PurchaseLinesPost.GrandTotal=this.PurchaseSummaryData.Amount,this.PurchaseLinesPost.TodayRate=this.Rate,this.PurchaseLinesPost.PType=this.PurchaseForm.value.RateType,this.PurchaseLinesPost.PurItem=this.PurchaseForm.value.GS,this.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),1==this.NewEstimation&&"/purchase"===this._router.url?(this.SalesEstNo="0",this.PurchaseLinesPost.EstNo=this.SalesEstNo):this.PurchaseLinesPost.EstNo=this.SalesEstNo,this.fieldArray[t].GSCode=this.PurchaseForm.value.GS,this.fieldArray[t].SalCode=this.PurchaseForm.value.SalCode,this.DmCarats=this.fieldArray[t].Dcts,this.StoneCarats=this.fieldArray[t].StneWt,"OG24K"!=this.fieldArray[t].ItemName&&"OGOL"!=this.fieldArray[t].ItemName&&"OGCN24K"!=this.fieldArray[t].ItemName&&"OGCN"!=this.fieldArray[t].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.EnableDisableRateType()):this.toastr.warning("Please Enter Purity Percentage","Alert!")}},{key:"EnableDisableRateType",value:function(){this.fieldArray.length>0?this.EnableRateType=!0:this.EnableRateType=!1}},{key:"EnableRateTypeBasedonRoute",value:function(){"/purchase"==this._router.url&&this.EnableDisableRateType(),"/estimation"!=this._router.url&&"/sales-billing"!=this._router.url||(this.EnableRateType=!0)}},{key:"cancelDataFieldValue",value:function(t){this.EnableAddRow=!1,null!=this.CopyEditedRow[t]?("OG24K"!=this.fieldArray[t].ItemName&&"OGOL"!=this.fieldArray[t].ItemName&&"OGCN24K"!=this.fieldArray[t].ItemName&&"OGCN"!=this.fieldArray[t].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.fieldArray[t]=this.CopyEditedRow[t],this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t]=this.CopyEditedRow[t],this.CopyEditedRow[t]=null,this.EnableSaveCnlbtn[t]=!1,this.EnableEditDelbtn[t]=!0,this.readonly[t]=!0,this.CopyEditedRow=[]):(this.fieldArray.splice(t,1),this.PurchaseLinesPost.lstPurchaseEstDetailsVM.splice(t,1)),this.EnableRateTypeBasedonRoute(),this.EnableDisableSubmit()}},{key:"EnableDisableSubmit",value:function(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0)}},{key:"cancelPurchaseEst",value:function(){var t=this;confirm("Do you want to cancel")&&("/purchase"==this._router.url?this._router.navigateByUrl("/redirect",{skipLocationChange:!0}).then((function(){t._router.navigate(["/purchase"])})):(this.Rate=0,this.EnableDropdown=!1,this.fieldArray=[],this.PurchaseForm.reset(),this.PurchaseLinesPost={CustID:0,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]},this.PurchaseForm=this.formBuilder.group({GS:[null,r.Validators.required],SalCode:[null,r.Validators.required],RateType:["E",r.Validators.required],Item:[null,r.Validators.required],RatePerGram:[null,r.Validators.required]}),this._CustomerService.cast.subscribe((function(e){t.CustomerDets=e,null!=t.CustomerDets?(t.PurchaseLinesPost.CustID=t.CustomerDets.ID,t.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),t.PurchaseLinesPost.CompanyCode=t.ccode,t.PurchaseLinesPost.BranchCode=t.bcode):(t.PurchaseLinesPost.CustID=null,t.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),t.PurchaseLinesPost.CompanyCode=t.ccode,t.PurchaseLinesPost.BranchCode=t.bcode)}))))}},{key:"deleteFieldValue",value:function(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):confirm("Do you want to delete")&&(this.fieldArray.splice(t,1),this.EnableDisableSubmit(),this.EnableRateTypeBasedonRoute())}},{key:"SendPurchaseDataToEstComp",value:function(){this._purchaseService.sendPurchaseDatatoEstComp(this.PurchaseSummaryData)}},{key:"sendDataToStoneComp",value:function(t,e){this.Index=e===this.Index?-1:e,("/purchase"===this._router.url||""!=this.SalesEstNo)&&(1==this.EnableSaveCnlbtn[e]?(this.toastr.warning("Please save purchase lines","Alert!"),this.EnableStoneTab=!1,this.EnableDiamondTab=!1):null==this.fieldArray[e].StneWt||0==this.fieldArray[e].StneWt?(this.toastr.warning("Please enter stone carrat","Alert!"),this.EnableStoneTab=!1,this.EnableDiamondTab=!1):(this.EnableStoneTab=!0,this._purchaseService.SendStoneDetailsFromPurchaseComp(t.lstPurchaseEstStoneDetailsVM),this.LinesDetails=t,this.EnableDiamondTab=!1))}},{key:"sendDataToDiamondComp",value:function(t,e){this.Index=e===this.Index?-1:e,"/purchase"===this._router.url?1==this.EnableSaveCnlbtn[e]?(this.toastr.warning("Please save purchase lines","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):null!=this.fieldArray[e].Dcts&&0!=this.fieldArray[e].Dcts||"OG24K"==this.fieldArray[e].ItemName||"OGCN"==this.fieldArray[e].ItemName||"OGCN24K"==this.fieldArray[e].ItemName?"OG24K"==this.fieldArray[e].ItemName||"OGCN"==this.fieldArray[e].ItemName||"OGCN24K"==this.fieldArray[e].ItemName?(this.toastr.warning(this.fieldArray[e].ItemName+" has no Diamond details","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):"OSSL"==this.fieldArray[e].ItemName?this.toastr.warning("OSSL has no Diamond details","Alert!"):(this.EnableDiamondTab=!0,this._purchaseService.SendDiamondDetailsFromPurchaseComp(t.lstPurchaseEstDiamondDetailsVM),this.LinesDetails=t,this.EnableStoneTab=!1):(this.toastr.warning("Please enter diamond carrat","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):""!=this.SalesEstNo&&(1==this.EnableSaveCnlbtn[e]?(this.toastr.warning("Please save purchase lines","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):null==this.fieldArray[e].Dcts||0==this.fieldArray[e].Dcts?(this.toastr.warning("Please enter diamond carrat","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):"OSSL"==this.fieldArray[e].ItemName?this.toastr.warning("OSSL has no Diamond details","Alert!"):(this.EnableDiamondTab=!0,this._purchaseService.SendDiamondDetailsFromPurchaseComp(t.lstPurchaseEstDiamondDetailsVM),this.LinesDetails=t,this.EnableStoneTab=!1))}},{key:"SavePurchaseEst",value:function(){var t,e=this;if(null!=this.PurchaseLinesPost.CustID&&0!=this.PurchaseLinesPost.CustID||"/purchase"!=this._router.url)if(1==this.EnableSubmitButton)this.toastr.warning("Please enter/save item details to submit","Alert!");else if(1==this.EnableStneSubmit)this.toastr.warning("Please save stone details to submit","Alert!");else if(1==this.EnableDmdSubmit)this.toastr.warning("Please save diamond details to submit","Alert!");else if(1==this.validateDiamondCarats())this.toastr.warning("Please enter valid diamond details","Alert!");else{var n=confirm("Do you want to save??");this.SendPurchaseDataToEstComp(),n&&this._purchaseService.post(this.PurchaseLinesPost).subscribe((function(n){t=n,y()("Saved!","Purchase Estimation number "+t.EstMationNo+" Saved","success"),"/purchase"===e._router.url?(e.EnableReprint=!0,e.ReprintData={EstNo:t.EstMationNo,EstType:"P"},e._purchaseService.SendReprintPurchaseData(e.ReprintData),e.ClearValues(),e.EnableRateType=!1,e.leavePage=!1,e.PurchaseForm=e.formBuilder.group({GS:[null,r.Validators.required],SalCode:[null,r.Validators.required],RateType:["E",r.Validators.required],Item:[null,r.Validators.required],RatePerGram:[null,r.Validators.required]})):(e.EnableReprint=!1,e.ReprintData={EstNo:t.EstMationNo,EstType:"P"},e._estimationService.SendReprintData(e.ReprintData))}))}else this.toastr.warning("Please select the customer","Alert!")}},{key:"getPurchaseEstPlainText",value:function(t){var e=this;this._purchaseService.PrintPurEstDotMatrix(t).subscribe((function(t){e.purchaseEstimationPlainTextDetails=t,$("#PurchaseEstimationPlainTextTab").modal("show")}))}},{key:"printPurchaseEstimationPlainText",value:function(){this._masterService.printPlainText(this.purchaseEstimationPlainTextDetails)}},{key:"validateDiamondCarats",value:function(){this.Flag=!1;for(var t=0;t<this.PurchaseLinesPost.lstPurchaseEstDetailsVM.length;t++)if(this.dcts=0,this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length>0){for(var e=0;e<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length;e++)this.dcts+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM[e].Carrat);this.dcts<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].Dcts?this.Flag=!0:this.Flag=!1}else null!=this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].Dcts&&0!=this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].Dcts&&0==this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length?this.Flag=!0:this.Flag=!1;return 1==this.Flag}},{key:"GrossWtTotal",value:function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.GrossWt)})),this.PurchaseSummaryData.GrossWt=parseFloat(e),e}},{key:"StneWt",value:function(t){var e=0;return t.forEach((function(t){0!=t.StneWt&&null!=t.StneWt&&(e+=parseFloat(t.StneWt))})),this.PurchaseSummaryData.StoneWt=parseFloat(e),e}},{key:"Dcts",value:function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.Dcts)})),this.PurchaseSummaryData.carats=parseFloat(e),e}},{key:"NetWt",value:function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.NetWt)})),this.PurchaseSummaryData.NtWt=parseFloat(e),e}},{key:"Amount",value:function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.ItemAmount)})),this.PurchaseSummaryData.Amount=parseFloat(e),this.PurchaseAmountChanged(e),this.PurchaseLinesPost.GrandTotal=e,this.PurchaseLinesPost.TotalPurchaseAmount=e,this.rndoff=Math.round(e)-e,e}},{key:"ClearValues",value:function(){this.Rate=0,this.EnableDropdown=!1,this.fieldArray=[],this.PurchaseForm.reset(),this._CustomerService.SendCustDataToEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]}}}]),t}();S.ctorParameters=function(){return[{type:d.a},{type:r.FormBuilder},{type:P.b},{type:c.a},{type:v.a},{type:o.c},{type:m.a},{type:u.a}]},a.a([Object(s.Output)(),a.c("design:type",Object)],S.prototype,"valueChange",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],S.prototype,"PurchaseAmountChange",void 0),S=a.a([Object(s.Component)({selector:"app-purchase",template:a.b(n("W3e5")).default,styles:[a.b(n("HWQx")).default]}),a.c("design:paramtypes",[d.a,r.FormBuilder,P.b,c.a,v.a,o.c,m.a,u.a])],S);var D=function(){function t(e,n,a,s,i){_classCallCheck(this,t),this._estmationService=e,this._purchaseService=n,this._router=a,this.toastr=s,this._masterService=i,this.estPurchaseDetails=[],this.EnablePurchaseReprintHeaders=!1,this.ShowHide=!0,this.PurchaseDetails=[],this.purEstPlainTextDetails=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;"/purchase/reprintpurchaseestimation"==this._router.url?this.ShowHide=!0:this._purchaseService.castReprintPurchaseData.subscribe((function(e){t.ReprintData=e,0==t.isEmptyObject(t.ReprintData)&&null!=t.isEmptyObject(t.ReprintData)&&(t.getPurEstPlainText(t.ReprintData.EstNo),t._purchaseService.SendReprintPurchaseData(null)),t.ShowHide=!1}))}},{key:"isEmptyObject",value:function(t){return t&&0===Object.keys(t).length}},{key:"getPurchaseEstimationDetails",value:function(t){""==t?this.toastr.warning("Please enter the estimation","Alert!"):this.getPurEstPlainText(t)}},{key:"printPurchase",value:function(){var t,e;t=document.getElementById("print-sectionPurchase").innerHTML,(e=window.open("","_blank","top=0,left=0,height=100%,width=auto")).document.open(),e.document.write('\n      <html>\n        <head>\n          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">\n          <title>Print tab</title>\n          <style>\n         .htmlPrint{display:none;}\n\n          @media print {\n            .table-bordered\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        .margin{\n          margin-top:-24px;\n        }\n        .mb{\n          vertical-align:middle;position:absolute;\n        }\n        tr.spaceUnder>td {\n          padding-bottom: 40px !important;\n        }\n        .top {\n          margin-top:10px;\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .modal-content{\n          font-family: "Times New Roman", Times, serif;\n\n        }\n       .padding-top {\n         padding-top:20px;\n       }\n        .watermark{\n          -webkit-transform: rotate(331deg);\n          -moz-transform: rotate(331deg);\n          -o-transform: rotate(331deg);\n          transform: rotate(331deg);\n          font-size: 15em;\n          color: rgba(255, 5, 5, 0.37);\n          position: absolute;\n          text-transform:uppercase;\n          padding-left: 10%;\n          margin-top:-10px;\n        }\n        .right{\n          text-align:left;\n        }\n        .px-2 {\n          padding-left: 10px !important;\n        }\n        thead > tr\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        table tr td.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr td.borderLeft{\n          border-left: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr td.bottom{\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr th.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        .divborder {\n          border-right: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .lastdivborder{\n          line-height: 1.6;\n        }\n    .border{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n      border-bottom: 3px solid rgb(0, 0, 0) !important;\n    }\n\n    .tdborder{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n    }\n        .invoice {\n          margin-top: 250px;\n      }\n        .card{\n          border-style: solid;\n          border-width: 5px;\n          border: 3px solid rgb(0, 0, 0);\n      }\n        .printMe {\n          display: none !important;\n        }\n      }\n      body{\n            font-size: 15px;\n            line-height: 18px;\n      }\n </style>\n        </head>\n    <body onload="window.print();window.close()">\n\n    '.concat(t,"</body>\n      </html>")),e.document.close()}},{key:"closePurEstTab",value:function(){this.getPurEstPlainText(this.PurEstNum)}},{key:"getPurEstPlainText",value:function(t){var e=this;this._purchaseService.PrintPurEstDotMatrix(t).subscribe((function(t){e.purEstPlainTextDetails=t,""!=e.purEstPlainTextDetails?$("#PurEstPlainTextTab").modal("show"):(e.toastr.warning("Purchase Estimation No does not exists.","Alert!"),$("#PurEstPlainTextTab").modal("hide"))}))}},{key:"printPurEstPlainText",value:function(){this._masterService.printPlainText(this.purEstPlainTextDetails)}}]),t}();D.ctorParameters=function(){return[{type:u.a},{type:d.a},{type:o.c},{type:P.b},{type:m.a}]},D=a.a([Object(s.Component)({selector:"app-reprint-purchaseestimation",template:a.b(n("aTHM")).default,styles:[a.b(n("yByz")).default]}),a.c("design:paramtypes",[u.a,d.a,o.c,P.b,m.a])],D);var A=function(){function t(e,n,a){_classCallCheck(this,t),this.fb=e,this._PurchaseService=n,this._CustomerService=a,this.orderDetails=[],this.hasPurchaseDetails=!1,this.customerDtls=[],this.ccode="",this.bcode="",this.password=p.a.Pwd,this.PurchaseCancelObj={CompanyCode:null,BranchCode:null,EstNo:null,OperatorCode:null,BillCounter:null,Type:null,BillNo:0,CustName:null,PaidAmount:null,CancelRemarks:null,lstOfPayment:[]},this.getCB()}return _createClass(t,[{key:"ngOnInit",value:function(){this.PurchaseCancelForm=this.fb.group({BillNo:null,BillAmount:null,GST:null,CustName:null,Phone:null,Address1:null,Address2:null,Address3:null,Mobile:null,Remarks:null})}},{key:"getPurchaseDetails",value:function(t){var e=this;""==t?alert("Enter Bill Number"):this._PurchaseService.getPurchaseBill(t).subscribe((function(n){e.PurchaseBillData=n,null!=e.PurchaseBillData&&(e.hasPurchaseDetails=!0,e.PurchaseCancelObj.CompanyCode=e.ccode,e.PurchaseCancelObj.BranchCode=e.bcode,e.PurchaseCancelObj.BillNo=t,e.PurchaseCancelObj.OperatorCode=localStorage.getItem("Login"),e.PurchaseCancelObj.CustName=e.PurchaseBillData.CustName,e.PurchaseCancelObj.PaidAmount=e.PurchaseBillData.TotalPurchaseAmount)}),(function(t){if(404===t.status){var n=t.error;y()("Warning!",n.description,"warning"),e.hasPurchaseDetails=!1}if(400===t.status){var a=t.error;y()("Warning!",a.description,"warning"),e.hasPurchaseDetails=!1}}))}},{key:"getCB",value:function(){this.ccode=h.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(h.enc.Utf8),this.bcode=h.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(h.enc.Utf8)}},{key:"ngOnDestroy",value:function(){this._CustomerService.sendCustomerDtls_To_Customer_Component(null)}},{key:"submitPost",value:function(){var t=this;""==this.PurchaseCancelObj.CancelRemarks||null==this.PurchaseCancelObj.CancelRemarks?alert("Please enter the remarks"):confirm("Do you want to cancel Purchase Bill No."+this.PurchaseCancelObj.BillNo+"??")&&this._PurchaseService.CancelPurchaseBill(this.PurchaseCancelObj).subscribe((function(e){y()("Cancelled!","Purchase Bill No. "+t.PurchaseCancelObj.BillNo+" Cancelled Successfully","success"),t.PurchaseCancelForm.reset(),t.hasPurchaseDetails=!1}))}},{key:"Clear",value:function(){this.BillNo.nativeElement.value="",this.hasPurchaseDetails=!1,this.PurchaseBillData=null,this.PurchaseCancelObj={CompanyCode:null,BranchCode:null,EstNo:null,OperatorCode:null,BillCounter:null,Type:null,BillNo:0,CustName:null,PaidAmount:null,CancelRemarks:null,lstOfPayment:[]}}}]),t}();A.ctorParameters=function(){return[{type:r.FormBuilder},{type:d.a},{type:c.a}]},a.a([Object(s.ViewChild)("BillNo",{static:!0}),a.c("design:type",s.ElementRef)],A.prototype,"BillNo",void 0),A=a.a([Object(s.Component)({selector:"app-purchase-cancel",template:a.b(n("2is8")).default,styles:[a.b(n("VZds")).default]}),a.c("design:paramtypes",[r.FormBuilder,d.a,c.a])],A);var E=function(){function t(e,n,a,s){_classCallCheck(this,t),this.formBuilder=e,this._router=n,this._masterService=a,this._purchaseService=s,this.ordDate="",this.isActive=!1,this.today=new Date,this.isReprint=!0,this.billNo="",this.isCheckedCHBX=!1,this.reprintHeaders={selectedOption:null,applicationDate:null},this.BillList=[],this.PrintDetails=[],this.purBillPlainTextDetails=[],this.ordDate=Object(i.formatDate)(this.today,"MM-DD-YYYY","en-US","+0530"),this.datePickerConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,maxDate:new Date(2020,7,28),dateInputFormat:"YYYY-MM-DD"})}return _createClass(t,[{key:"isChecked",value:function(t){var e=this;this.isCheckedCHBX=t.target.checked,this.reprintHeaders.selectedOption=null,this.getApplicationDate(),this._purchaseService.AllPurchaseBill(this.applicationDate,this.isCheckedCHBX).subscribe((function(t){e.BillList=t}))}},{key:"getApplicationDate",value:function(){var t=this;this._masterService.getApplicationDate().subscribe((function(e){var n=e;t.applicationDate=n.applcationDate,t.disAppDate=Object(i.formatDate)(n.applcationDate,"dd/MM/yyyy","en_GB"),t.getAllPurchaseBill(t.applicationDate)}))}},{key:"ngOnInit",value:function(){var t=this;this.getApplicationDate(),"/purchase/reprint-purchasebill"===this._router.url&&(this.isReprint=!0),"/purchase/purchase-billing"==this._router.url&&(this.isReprint=!1,null!=this.BillNo.billNo&&""!=this.BillNo.billNo&&this._purchaseService.PrintPurchaseBill(this.BillNo.billNo).subscribe((function(e){t.PrintDetails=e,t.PurBillNum=t.BillNo.billNo,$("#ReprintPurchaseBillingModal").modal("show"),$("#DisplayData").html(t.PrintDetails)})))}},{key:"onPrint",value:function(t){var e=this;null==this.reprintHeaders.selectedOption?(alert("Please enter the bill no."),$("#ReprintPurchaseBillingModal").modal("hide")):(this.PurBillNum=t,this._purchaseService.PrintPurchaseBill(t).subscribe((function(t){e.PrintDetails=t,$("#ReprintPurchaseBillingModal").modal("show"),$("#DisplayData").html(e.PrintDetails)})))}},{key:"getAllPurchaseBill",value:function(t){var e=this;this._purchaseService.AllPurchaseBill(t,this.isCheckedCHBX).subscribe((function(t){e.BillList=t}))}},{key:"print",value:function(){var t,e;t=document.getElementById("DisplayData").innerHTML,(e=window.open("","_blank","top=0,left=0,height=100%,width=auto")).document.open(),e.document.write('\n      <html>\n        <head>\n          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">\n          <title>Print tab</title>\n          <style>\n         .htmlPrint{display:none;}\n\n          @media print {\n            .table-bordered\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        .margin{\n          margin-top:-24px;\n        }\n        .mb{\n          vertical-align:middle;position:absolute;\n        }\n        tr.spaceUnder>td {\n          padding-bottom: 40px !important;\n        }\n        .top {\n          margin-top:10px;\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .modal-content{\n          font-family: "Times New Roman", Times, serif;\n\n        }\n       .padding-top {\n         padding-top:20px;\n       }\n        .watermark{\n          -webkit-transform: rotate(331deg);\n          -moz-transform: rotate(331deg);\n          -o-transform: rotate(331deg);\n          transform: rotate(331deg);\n          font-size: 15em;\n          color: rgba(255, 5, 5, 0.37);\n          position: absolute;\n          text-transform:uppercase;\n          padding-left: 10%;\n          margin-top:-10px;\n        }\n        .right{\n          text-align:left;\n        }\n        .px-2 {\n          padding-left: 10px !important;\n        }\n        thead > tr\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        table tr td.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr td.bottom{\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr th.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        .divborder {\n          border-right: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .lastdivborder{\n          line-height: 1.6;\n        }\n    .border{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n      border-bottom: 3px solid rgb(0, 0, 0) !important;\n    }\n\n    .tdborder{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n    }\n        .invoice {\n          margin-top: 250px;\n      }\n        .card{\n          border-style: solid;\n          border-width: 5px;\n          border: 3px solid rgb(0, 0, 0);\n      }\n        .printMe {\n          display: none !important;\n        }\n      }\n      body{\n            font-size: 15px;\n            line-height: 18px;\n      }\n </style>\n        </head>\n    <body onload="window.print();window.close()">\n    '.concat(t,"</body>\n      </html>")),e.document.close()}},{key:"closePurBillTab",value:function(){"/purchase/purchase-billing"===this._router.url?this.getPurBillPlainText(this.PurBillNum):$("#PurBillPlainTextTab").modal("hide")}},{key:"getPurBillPlainText",value:function(t){var e=this;this._purchaseService.PrintPurBillDotMatrix(t).subscribe((function(t){e.purBillPlainTextDetails=t,$("#PurBillPlainTextTab").modal("show")}))}},{key:"printPurBillPlainText",value:function(){this._masterService.printPlainText(this.purBillPlainTextDetails)}}]),t}();E.ctorParameters=function(){return[{type:r.FormBuilder},{type:o.c},{type:m.a},{type:d.a}]},a.a([Object(s.Input)(),a.c("design:type",Object)],E.prototype,"BillNo",void 0),E=a.a([Object(s.Component)({selector:"app-reprint-purchasebill",template:a.b(n("HGwx")).default,styles:[a.b(n("jrbh")).default]}),a.c("design:paramtypes",[r.FormBuilder,o.c,m.a,d.a])],E);var C=n("09Xa"),x=[{path:"",canActivate:[l.a],canActivateChild:[l.a],canDeactivate:[C.a],component:S,data:{title:"Purchase Estimation",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Purchase Estimation"}]}},{path:"reprintpurchaseestimation",canActivate:[l.a],canActivateChild:[l.a],component:D,data:{title:"Reprint Purchase Estimation",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Reprint Purchase Estimation"}]}},{path:"purchase-billing",canActivate:[l.a],canActivateChild:[l.a],component:g,data:{title:"Purchase Billing",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Purchase Billing"}]}},{path:"purchase-cancel",canActivate:[l.a],canActivateChild:[l.a],component:A,data:{title:"Cancel Purchase Bill",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Cancel Purchase Bill"}]}},{path:"reprint-purchasebill",canActivate:[l.a],canActivateChild:[l.a],component:E,data:{title:"Reprint Purchase Bill",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Reprint Purchase Bill"}]}}],N=function t(){_classCallCheck(this,t)};N=a.a([Object(s.NgModule)({imports:[o.d.forChild(x)],exports:[o.d]})],N);var w=function(){function t(e,n,a,i){var r=this;_classCallCheck(this,t),this.toastr=e,this._purchaseService=n,this._estimationService=a,this._router=i,this.ccode="",this.bcode="",this.ShowHide=!0,this.password=p.a.Pwd,this.fieldArray=[],this.PurchaseLinesDetails=[],this.SalesEstNo="",this.ItemList=[],this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.count=0,this.Rate=0,this.purchaseDetails=[],this.DiamondCarrat=0,this.diamondAmount=new s.EventEmitter,this.EnableDmdBtn=new s.EventEmitter,this.EstNo=0,this.DmCarats=0,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableSubmitButton=!0,this.EnableDiamondTab=!1,this.OldDiamondDtls={estno:null,item_sno:null,type:"p",Name:null,Qty:null,Carrat:null,OrgRate:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.CopyEditedRow=[],this.DiamondCount=0,this.Diamondtotal=0,this.Indicator="",this._purchaseService.castDiamondDetails.subscribe((function(t){for(var e in r.fieldArray=t,r.fieldArray)r.EnableEditDelbtn[e]=!0,r.EnableSaveCnlbtn[e]=!1,r.readonly[e]=!0})),this.getCB(),"/purchase"==this._router.url||"/estimation"==this._router.url?this.ShowHide=!0:this.ShowHide=!1}return _createClass(t,[{key:"getCB",value:function(){this.ccode=h.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(h.enc.Utf8),this.bcode=h.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(h.enc.Utf8)}},{key:"ngOnInit",value:function(){this.getDiamondDets(),this.getDiamondName()}},{key:"getDiamondName",value:function(){var t=this;this._purchaseService.getOldDmdName().subscribe((function(e){t.ItemList=e}))}},{key:"getDiamondDets",value:function(){var t=this;this._purchaseService.getOldDiamond().subscribe((function(e){t.OldDiamondList=e}))}},{key:"addrow",value:function(){this.OldDiamondDtls={estno:this.EstNo,item_sno:null,type:"p",Name:null,Qty:null,Carrat:null,Rate:null,OrgRate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.fieldArray.push(this.OldDiamondDtls);var t,e=_createForOfIteratorHelper(this.fieldArray);try{for(e.s();!(t=e.n()).done;)_objectDestructuringEmpty(t.value),this.count++}catch(n){e.e(n)}finally{e.f()}this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableDisableDiamondBtn()}},{key:"GetAmount",value:function(t){if(0!=this.fieldArray[t].OrgRate)if(this.fieldArray[t].Rate>this.fieldArray[t].OrgRate)this.toastr.warning("Entered Diamond Carat Rate is greater than the Max Diamond Carat Rate.","Alert!");else{var e=this.fieldArray[t].Carrat,n=this.fieldArray[t].Rate;this.fieldArray[t].Amount=Number(e*n)}else{var a=this.fieldArray[t].Carrat,s=this.fieldArray[t].Rate;this.fieldArray[t].Amount=Number(a*s)}}},{key:"GetItemName",value:function(t){this.ItemName=t}},{key:"GetStnDmdRate",value:function(t){var e=this,n=this.fieldArray[t].Carrat;this._purchaseService.getStnDmdRate(this.ItemName,n).subscribe((function(a){e.stnDmdRate=a,e.fieldArray[t].Rate=e.stnDmdRate.OrgRate,e.fieldArray[t].OrgRate=e.stnDmdRate.OrgRate,e.fieldArray[t].Amount=Number(n*e.fieldArray[t].Rate)}))}},{key:"editFieldValue",value:function(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):(this.CopyEditedRow[t]=Object.assign({},this.fieldArray[t]),this.EnableEditDelbtn[t]=!1,this.EnableSaveCnlbtn[t]=!0,this.readonly[t]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDisableDiamondBtn())}},{key:"saveDataFieldValue",value:function(t){null==this.fieldArray[t].Name||0==this.fieldArray[t].Name?this.toastr.warning("Please select the Item Name","Alert!"):null==this.fieldArray[t].Qty||0==this.fieldArray[t].Qty?this.toastr.warning("Please Enter Qty","Alert!"):null==this.fieldArray[t].Carrat||0==this.fieldArray[t].Carrat?this.toastr.warning("Please Enter Carrat","Alert!"):null==this.fieldArray[t].Rate||0==this.fieldArray[t].Rate?this.toastr.warning("Please Enter Rate","Alert!"):0!=this.fieldArray[t].OrgRate&&this.fieldArray[t].Rate>this.fieldArray[t].OrgRate?this.toastr.warning("Entered Diamond Carat Rate is greater than the Max Diamond Carat Rate.","Alert!"):(this.DiamondCarrat=this.PurchaseLinesDetails.Dcts,1==this.DiamondCarratTotal(this.fieldArray)?(this.DmCarats=this.fieldArray[t].Dcts,""==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstDiamondDetailsVM[t]=this.fieldArray[t]),this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendDiamondAmtToPurComp(),this.EnableDisableDiamondBtn()):("A"==this.Indicator?this.toastr.error("Entered Diamond Carat is greater than the Purchase Diamond Carat","Alert!"):"B"==this.Indicator&&"/estimation"==this._router.url?this.toastr.error("Entered Diamond Carat is lesser than the Purchase Diamond Carat","Alert!"):(this.DmCarats=this.fieldArray[t].Dcts,""==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstDiamondDetailsVM[t]=this.fieldArray[t]),this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendDiamondAmtToPurComp()),this.EnableDisableDiamondBtn()))}},{key:"cancelDataFieldValue",value:function(t){this.EnableAddRow=!1,null!=this.CopyEditedRow[t]?(this.fieldArray[t]=this.CopyEditedRow[t],this.CopyEditedRow[t]=null,this.EnableSaveCnlbtn[t]=!1,this.EnableEditDelbtn[t]=!0,this.readonly[t]=!0,this.CopyEditedRow=[]):this.fieldArray.splice(t,1),this.EnableDisableSubmit()}},{key:"EnableDisableSubmit",value:function(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0),this.EnableDisableDiamondBtn()}},{key:"deleteFieldValue",value:function(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):(this.fieldArray.splice(t,1),this.EnableDisableSubmit(),this.SendDiamondAmtToPurComp())}},{key:"Amount",value:function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.Amount)})),this.diamondValue=e,this.SendDiamondAmtToPurComp(),e}},{key:"SendDiamondAmtToPurComp",value:function(){this.diamondAmount.emit(this.diamondValue)}},{key:"EnableDisableDiamondBtn",value:function(){this.EnableDmdBtn.emit(this.EnableSubmitButton)}},{key:"DiamondCarratTotal",value:function(t){var e,n=_createForOfIteratorHelper((this.Diamondtotal=0,t));try{for(n.s();!(e=n.n()).done;){e.value;this.Diamondtotal+=Number(this.fieldArray[this.DiamondCount].Carrat),this.DiamondCount++}}catch(a){n.e(a)}finally{n.f()}return this.DiamondCount=0,this.Diamondtotal>this.DiamondCarrat?(this.Indicator="A",!1):!(this.Diamondtotal<this.DiamondCarrat&&(this.Indicator="B",1))}}]),t}();w.ctorParameters=function(){return[{type:P.b},{type:d.a},{type:u.a},{type:o.c}]},a.a([Object(s.Input)(),a.c("design:type",Object)],w.prototype,"PurchaseLinesDetails",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],w.prototype,"diamondAmount",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],w.prototype,"EnableDmdBtn",void 0),a.a([Object(s.Input)(),a.c("design:type",Number)],w.prototype,"EstNo",void 0),a.a([Object(s.Input)(),a.c("design:type",Number)],w.prototype,"DmCarats",void 0),a.a([Object(s.Input)(),a.c("design:type",Boolean)],w.prototype,"EnableDiamondTab",void 0),w=a.a([Object(s.Component)({selector:"app-diamond",template:a.b(n("lo/J")).default,styles:[a.b(n("esxm")).default]}),a.c("design:paramtypes",[P.b,d.a,u.a,o.c])],w);var O=n("GFhY"),T=n("OclH"),R=n("+Cnu"),I=function(){function t(e,n,a,i,r,l){_classCallCheck(this,t),this._PurchaseService=e,this.formBuilder=n,this._estimationService=a,this._salesService=i,this._CustomerService=r,this._router=l,this.EnableDisablectrls=!0,this.ccode="",this.bcode="",this.password=p.a.Pwd,this.PostOldGoldAttchJson=[],this.submitted=!1,this.SelectedOldGoldList=[],this.EnableSubmitButton=!0,this.SalesEstNo=null,this.OrderJson={SeriesNo:null,RefBillNo:null,OperatorCode:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.OldGoldAttachmentSummaryData={Quantity:null,Amount:0},this.valueChange=new s.EventEmitter,this.OldGoldAmount=0,this.pagenumber=1,this.top=10,this.skip=(this.pagenumber-1)*this.top,this.OGTotalAmount=0,this.OGAmountChange=new s.EventEmitter,this.enableBtnIfSalesEstNo=!0,this.ReprintData={EstNo:null,EstType:null},this.getCB()}return _createClass(t,[{key:"getCB",value:function(){this.ccode=h.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(h.enc.Utf8),this.bcode=h.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(h.enc.Utf8)}},{key:"ngOnInit",value:function(){var t=this;this.OldGoldAttachmentSummaryData={Quantity:null,Amount:0},this._salesService.EstNo.subscribe((function(e){t.SalesEstNo=e})),this._estimationService.SubjectEstNo.subscribe((function(e){t.SalesEstNo=e,null!=t.SalesEstNo&&"0"!=t.SalesEstNo&&"/purchase"!=t._router.url&&t._PurchaseService.getOldGoldttachedList(t.SalesEstNo).subscribe((function(e){if(t.SelectedOldGoldList=[],t.PostOldGoldAttchJson=[],t.SelectedOldGoldList=e,null!=t.SelectedOldGoldList){if(t.SelectedOldGoldList.length>0){t._estimationService.SendOldGoldAttachmentSummaryData(t.OldGoldAttachmentSummaryData),console.log(t.OldGoldAttachmentSummaryData);for(var n=0;n<t.SelectedOldGoldList.length;n++)t.OrderJson.SeriesNo=t.SalesEstNo,t.OrderJson.RefBillNo=t.SelectedOldGoldList[n].EstNo,t.OrderJson.OperatorCode=localStorage.getItem("Login"),t.OrderJson.CompanyCode=t.ccode,t.OrderJson.BranchCode=t.bcode,t.PostOldGoldAttchJson.push(t.OrderJson),t.OrderJson={}}}else t.SelectedOldGoldList=[],t.PostOldGoldAttchJson=[]}))})),this.AttachOldGoldForm=this.formBuilder.group({searchby:[null,r.Validators.required],searchText:[null,r.Validators.required]}),this._PurchaseService.getSearchParams().subscribe((function(e){t.SearchParamsList=e})),this.getSalesEstNofromSalesService(),this.LoadCustomerDetails(),"/sales-billing"==this._router.url&&(this.EnableDisablectrls=!1),"/estimation"==this._router.url&&(this.EnableDisablectrls=!0)}},{key:"LoadCustomerDetails",value:function(){var t=this;this._CustomerService.cast.subscribe((function(e){t.CustomerName=e}))}},{key:"openModal",value:function(){$("#myOldGoldModal").modal("show"),this.getOGList(this.top,this.skip)}},{key:"onPageChange",value:function(t){this.pagenumber=t;var e=(this.pagenumber-1)*this.top;this.getOGList(this.top,e)}},{key:"getOGList",value:function(t,e){var n=this;this._PurchaseService.getOldGoldList(t,e).subscribe((function(t){n.AttachOldGoldList=t}))}},{key:"valueChanged",value:function(t){this.OldGoldAmount=t,this.valueChange.emit(this.OldGoldAmount)}},{key:"OGAmountChanged",value:function(t){this.OGTotalAmount=t,this.OGAmountChange.emit(this.OGTotalAmount)}},{key:"getSalesEstNofromSalesService",value:function(){var t=this;this._salesService.EstNo.subscribe((function(e){t.SalesEstNo=e,null!=t.SalesEstNo&&""!=t.SalesEstNo&&(t.enableBtnIfSalesEstNo=!1)}))}},{key:"Submit",value:function(){var t=this;this._PurchaseService.PostAttachementOldGold(this.PostOldGoldAttchJson).subscribe((function(e){t.Saved=e,t._estimationService.SendOldGoldAttachmentSummaryData(t.OldGoldAttachmentSummaryData),y()("Saved!","Old Gold est adjusted against Estimation number "+t.SalesEstNo,"success"),t.ReprintData={EstNo:t.SalesEstNo,EstType:"OG"},t._estimationService.SendReprintData(t.ReprintData)}))}},{key:"onSubmit",value:function(){this.submitted=!0,this.AttachOldGoldForm.invalid}},{key:"DeleteRow",value:function(t){var e=this;confirm("Do you want to delete")&&(1==this.SelectedOldGoldList.length&&this._PurchaseService.deleteOldGoldAttachment(this.SalesEstNo).subscribe((function(t){e.Saved=t})),this.valueChanged(this.SelectedOldGoldList[t].Amount),this.SelectedOldGoldList.splice(t,1),this.PostOldGoldAttchJson.splice(t,1),this.EnableDisableSubmitBtn())}},{key:"selectRecord",value:function(t){null!=this.SelectedOldGoldList.find((function(e){return e.EstNo==t.EstNo}))?y()("error","Old Gold Estimation already attached","error"):(this.SelectedOldGoldList.push(t),$("#myOldGoldModal").modal("hide"),this.AttachOldGoldForm.reset(),this.AttachOldGoldList=[],this.OrderJson.SeriesNo=this.SalesEstNo,this.OrderJson.RefBillNo=t.EstNo,this.OrderJson.OperatorCode=localStorage.getItem("Login"),this.OrderJson.CompanyCode=this.ccode,this.OrderJson.BranchCode=this.bcode,this.PostOldGoldAttchJson.push(this.OrderJson),this.OrderJson={},this.EnableDisableSubmitBtn())}},{key:"EnableDisableSubmitBtn",value:function(){this.SelectedOldGoldList.length<=0?this.EnableSubmitButton=!0:this.EnableSubmitButton=!1}},{key:"ngOnDestroy",value:function(){this._CustomerService.SendCustDataToEstComp(null),this._estimationService.SendSRAttachmentSummaryData(null)}},{key:"Cancel",value:function(){$("#myOldGoldModal").modal("hide"),this.AttachOldGoldForm.reset(),this.AttachOldGoldList=[]}},{key:"getSearchParams",value:function(t){var e=this;null!=t.value.searchby&&null!=t.value.searchText&&this._PurchaseService.getAttachOldGoldList(t.value.searchby,t.value.searchText).subscribe((function(t){e.AttachOldGoldList=t}))}},{key:"Amount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;return t.forEach((function(t){e+=Number(t.Amount)})),this.OldGoldAttachmentSummaryData.Amount=e,this.OGAmountChanged(e),e}},{key:"Quantity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;return t.forEach((function(t){e+=t.Qty})),this.OldGoldAttachmentSummaryData.Quantity=e,e}}]),t}();I.ctorParameters=function(){return[{type:d.a},{type:r.FormBuilder},{type:u.a},{type:v.a},{type:c.a},{type:o.c}]},a.a([Object(s.Output)(),a.c("design:type",Object)],I.prototype,"valueChange",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],I.prototype,"OGAmountChange",void 0),I=a.a([Object(s.Component)({selector:"app-attacholdgold",template:a.b(n("jCgZ")).default,styles:[a.b(n("vMFa")).default]}),a.c("design:paramtypes",[d.a,r.FormBuilder,u.a,v.a,c.a,o.c])],I);var k=function(){function t(e,n,a,i){var r=this;_classCallCheck(this,t),this.toastr=e,this._purchaseService=n,this._estimationService=a,this._router=i,this.ccode="",this.bcode="",this.ShowHide=!0,this.password=p.a.Pwd,this.EnableStnBtn=new s.EventEmitter,this.fieldArray=[],this.PurchaseLinesDetails=[],this.SalesEstNo="",this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.count=0,this.Rate=0,this.purchaseDetails=[],this.StoneCarrat=0,this.stoneAmount=new s.EventEmitter,this.EstNo=0,this.StoneCarats=0,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableSubmitButton=!0,this.EnableStoneTab=!1,this.StoneDtls={estno:this.EstNo,item_sno:null,type:"p",Name:"Old Diamond",Qty:null,StWt:null,Carrat:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.CopyEditedRow=[],this.StoneCount=0,this.Stonetotal=0,this.Indicator="",this._purchaseService.castStoneDetails.subscribe((function(t){for(var e in r.fieldArray=t,r.fieldArray)r.EnableEditDelbtn[e]=!0,r.EnableSaveCnlbtn[e]=!1,r.readonly[e]=!0,r.fieldArray[e].StWt=Number(r.fieldArray[e].Carrat/5)})),this.getCB(),"/purchase"==this._router.url||"/estimation"==this._router.url?this.ShowHide=!0:this.ShowHide=!1}return _createClass(t,[{key:"getCB",value:function(){this.ccode=h.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(h.enc.Utf8),this.bcode=h.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(h.enc.Utf8)}},{key:"EnableDisableStoneBtn",value:function(){this.EnableStnBtn.emit(this.EnableSubmitButton)}},{key:"myfunction",value:function(t){var e=t.which?t.which:t.keyCode;e>31&&(e<48||e>57)&&t.preventDefault()}},{key:"ngOnInit",value:function(){this.getStoneDets()}},{key:"getStoneDets",value:function(){var t=this;this._purchaseService.getOldStone().subscribe((function(e){t.OldStoneList=e}))}},{key:"addrow",value:function(){this.StoneDtls={estno:this.EstNo,item_sno:null,type:"p",Name:"Old Stone",Qty:null,StWt:null,Carrat:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.fieldArray.push(this.StoneDtls);var t,e=_createForOfIteratorHelper(this.fieldArray);try{for(e.s();!(t=e.n()).done;)_objectDestructuringEmpty(t.value),this.count++}catch(n){e.e(n)}finally{e.f()}this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableDisableStoneBtn()}},{key:"GetAmount",value:function(t){var e=this.fieldArray[t].Carrat,n=this.fieldArray[t].Rate;this.fieldArray[t].Amount=Number(e*n)}},{key:"GetStoneKarat",value:function(t){this.fieldArray[t].Carrat=Number(5*this.fieldArray[t].StWt),this.GetAmount(t)}},{key:"editFieldValue",value:function(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):(this.CopyEditedRow[t]=Object.assign({},this.fieldArray[t]),this.EnableEditDelbtn[t]=!1,this.EnableSaveCnlbtn[t]=!0,this.readonly[t]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDisableStoneBtn())}},{key:"saveDataFieldValue",value:function(t){null==this.fieldArray[t].Qty||0==this.fieldArray[t].Qty?this.toastr.warning("Please Enter Qty","Alert!"):null==this.fieldArray[t].Carrat||0==this.fieldArray[t].Carrat?this.toastr.warning("Please Enter Carrat","Alert!"):null==this.fieldArray[t].Rate||0==this.fieldArray[t].Rate?this.toastr.warning("Please Enter Rate","Alert!"):(this.StoneCarrat=this.PurchaseLinesDetails.StneWt,1==this.StoneCarratTotal(this.fieldArray)?(this.StoneCarats=this.fieldArray[t].StneWt,""==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstStoneDetailsVM[t]=this.fieldArray[t]),this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendStoneAmtToPurComp(),this.EnableDisableStoneBtn()):("A"==this.Indicator?this.toastr.error("Entered Stone wt is greater than the Purchase stone wt","Alert!"):"B"==this.Indicator&&"/estimation"==this._router.url?this.toastr.error("Entered Stone wt is lesser than the Purchase stone wt","Alert!"):(this.StoneCarats=this.fieldArray[t].StneWt,""==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstStoneDetailsVM[t]=this.fieldArray[t]),this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendStoneAmtToPurComp()),this.EnableDisableStoneBtn()))}},{key:"cancelDataFieldValue",value:function(t){this.EnableAddRow=!1,null!=this.CopyEditedRow[t]?(this.fieldArray[t]=this.CopyEditedRow[t],this.CopyEditedRow[t]=null,this.EnableSaveCnlbtn[t]=!1,this.EnableEditDelbtn[t]=!0,this.readonly[t]=!0,this.CopyEditedRow=[]):this.fieldArray.splice(t,1),this.EnableDisableSubmit()}},{key:"EnableDisableSubmit",value:function(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0),this.EnableDisableStoneBtn()}},{key:"deleteFieldValue",value:function(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):(this.fieldArray.splice(t,1),this.EnableDisableSubmit(),this.SendStoneAmtToPurComp())}},{key:"Amount",value:function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.Amount)})),this.stoneValue=e,this.SendStoneAmtToPurComp(),e}},{key:"SendStoneAmtToPurComp",value:function(){this.stoneAmount.emit(this.stoneValue)}},{key:"StoneCarratTotal",value:function(t){var e,n=_createForOfIteratorHelper((this.Stonetotal=0,t));try{for(n.s();!(e=n.n()).done;){e.value;this.Stonetotal+=Number(this.fieldArray[this.StoneCount].StWt),this.StoneCount++}}catch(a){n.e(a)}finally{n.f()}return this.StoneCount=0,this.Stonetotal>this.StoneCarrat?(this.Indicator="A",!1):!(this.Stonetotal<this.StoneCarrat&&(this.Indicator="B",1))}}]),t}();k.ctorParameters=function(){return[{type:P.b},{type:d.a},{type:u.a},{type:o.c}]},a.a([Object(s.Output)(),a.c("design:type",Object)],k.prototype,"EnableStnBtn",void 0),a.a([Object(s.Input)(),a.c("design:type",Object)],k.prototype,"PurchaseLinesDetails",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],k.prototype,"stoneAmount",void 0),a.a([Object(s.Input)(),a.c("design:type",Number)],k.prototype,"EstNo",void 0),a.a([Object(s.Input)(),a.c("design:type",Number)],k.prototype,"StoneCarats",void 0),a.a([Object(s.Input)(),a.c("design:type",Boolean)],k.prototype,"EnableStoneTab",void 0),k=a.a([Object(s.Component)({selector:"app-stone",template:a.b(n("tt6M")).default,styles:[a.b(n("VNmN")).default]}),a.c("design:paramtypes",[P.b,d.a,u.a,o.c])],k);var _=n("oOf3"),G=n("NSaA");n.d(e,"PurchaseModule",(function(){return B}));var B=function t(){_classCallCheck(this,t)};B=a.a([Object(s.NgModule)({declarations:[S,w,I,k,D,g,A,E],imports:[i.CommonModule,N,r.ReactiveFormsModule,r.FormsModule,T.CustomerModule,R.b,_.a,G.a,O.a],exports:[S,I,D],schemas:[s.CUSTOM_ELEMENTS_SCHEMA]})],B)},VNmN:function(t,e,n){"use strict";n.r(e),e.default=""},VZds:function(t,e,n){"use strict";n.r(e),e.default="\r\n.profile-card {\r\n    position: relative;\r\n    box-shadow: 0px 3px 6px rgba(0,0,0,.05);\r\n\r\n}\r\n\r\n.profile-card .btn-edit {\r\n    position: absolute;\r\n    top: 1rem;\r\n    right: 1.2rem;\r\n    font-size: 1.4rem;\r\n}\r\n\r\n.profile-card .profile-picture {\r\n    width: 7.4rem;\r\n}\r\n\r\n.profile-card .quote-text {\r\n    font-size: .85rem;\r\n    line-height: 1.55rem;\r\n}\r\n\r\n.profile-card .social-section {\r\n    margin-top: 1rem;\r\n}\r\n\r\n.profile-card .social-section a {\r\n    font-size: 1rem;\r\n    line-height: 2.15rem;\r\n    width: 2.2rem;\r\n    height: 2.2rem;\r\n    border: 1px solid #d6d6d6;\r\n    color: #d6d6d6;\r\n    border-radius: 50%;\r\n    margin: 0 .5rem;\r\n}\r\n\r\n.profile-card .social-section a:hover {\r\n    background-color: #007bff;\r\n    border-color: #007bff;\r\n    color: #fff;\r\n}\r\n\r\n.card-header{\r\n    border-radius: 15px !important;\r\n  }\r\n\r\n.card{\r\n    border-radius: 15px !important;\r\n  \r\n  }\r\n\r\n.card-body{ \r\n    padding: 10px 30px 0px 30px !important; \r\n    border-bottom: 2px solid black;\r\n    border-radius: 15px;\r\n  }"},W3e5:function(t,e,n){"use strict";n.r(e),e.default='<ng-container *ngIf="ifPurchase">\r\n    <div style="color: brown; text-align: right; font-style: italic;">\r\n        <app-lastdocno></app-lastdocno>\r\n    </div>\r\n</ng-container>\r\n<div class="row" *ngIf="ifPurchase">\r\n    <div class="col-md-12">\r\n        <label *ngFor="let radiobutton of radioItems" class="form-check-inline">\r\n            <input type="radio" name="option" (click)="OnRadioBtnChnge(radiobutton)" class="form-check-input"\r\n                [value]="radiobutton" [checked]="radiobutton === model.option">\r\n            <h3 style="margin-top: 5px;">{{radiobutton}}</h3>\r\n        </label>\r\n    </div>\r\n</div>\r\n\r\n<div id="accordian" class="accordion" *ngIf="ifPurchase">\r\n    <div class="card" *ngIf="ToggleEstimation">\r\n        <div id="header" class="card-body show">\r\n\r\n            <div class="row">\r\n                <div class="col-md-3 ">\r\n                    <div class="form-group">\r\n                        <label for="exampleAccount">Est no</label>\r\n                        <input type="number" class="form-control"\r\n                            oninput="this.value = this.value.replace(/[^0-9.]/g, \'\').replace(/(\\..*)\\./g, \'$1\');"\r\n                            onKeyPress="if(this.value.length==7) return false;" placeholder="Est No"\r\n                            (change)="EstimationDetails(estNo.value)" #estNo>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-3 ">\r\n                    <div class="form-group">\r\n                        <label for="barcode"></label>\r\n                        <div class="input-group">\r\n                            <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary"\r\n                                style="margin-top: 5px;" (click)="EstimationDetails(estNo.value)"><i\r\n                                    class="fal fa-search"></i> Search</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \x3c!-- <div class="col-md-3">\r\n                    <div class="card-body">\r\n                        <div class="text-right"><i class="fal fa-calendar-alt"></i>&nbsp; <span class="text-muted">Order\r\n                                Date</span>\r\n                            <h1 class="font-light"></h1>\r\n                        </div>\r\n                    </div>\r\n                </div> --\x3e\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <ng-container *ngIf="ShowHidePurEst">\r\n        <br *ngIf="ToggleEstimation">\r\n        <div class="card mb-0">\r\n            <div class="card-header collapsed" style="background-color: #0878A4;color:white">\r\n                <a class="card-title align-middle Pointer text-white" (click)="ToggleCustomerData()"\r\n                    data-toggle="collapse" href="#Customer">\r\n                    <i class="fas fa-2x fa-users mr-2 align-middle"></i>\r\n                    <span class="align-middle Pointer"><ins>Customer Details</ins></span>\r\n                </a>\r\n                \x3c!-- <ng-container *ngIf=" ToggleCustomer"> --\x3e\r\n                <ng-container *ngIf="CollapseCustomerTab">\r\n                    <ng-container *ngIf="CustomerDets">\r\n                        <div class="col-md-4 pull-right">\r\n                            <h4 class="text-white"><span class="align-middle"> ID: {{customerDtls.ID}}</span></h4>\r\n                        </div>\r\n                        <div class="col-md-4 pull-right">\r\n                            <h4 class="text-white"><span class="align-middle"> Customer:\r\n                                    {{customerDtls.CustName}}</span>\r\n                            </h4>\r\n                        </div>\r\n                    </ng-container>\r\n                </ng-container>\r\n                \x3c!-- </ng-container> --\x3e\r\n                \x3c!-- </ng-container> --\x3e\r\n            </div>\r\n            <div id="Customer" class="card-body collapse" [collapse]="CollapseCustomerDetailsTab">\r\n                <app-customer>\r\n                </app-customer>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</div>\r\n<br>\r\n\r\n<ng-container *ngIf="ShowHidePurEst">\r\n    <div class="card">\r\n        <div class="card-body">\r\n            <form [formGroup]="PurchaseForm" class="form-horizontal">\r\n                <div class="row">\r\n                    <div class="col-md-2 ">\r\n                        <div class="form-group">\r\n                            <label for="SalCode">Sales Person</label>\r\n                            <div class="form-group">\r\n                                <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="SalCode"\r\n                                    [(ngModel)]="PurSalCode">\r\n                                    <option [disabled]="EnableDisableSalesPerson" [ngValue]="null">Select</option>\r\n                                    <option [disabled]="EnableDisableSalesPerson" *ngFor="let _salesman of SalesManList"\r\n                                        [value]="_salesman.sal_code">\r\n                                        {{_salesman.CodeName}}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 ">\r\n                        <div class="form-group">\r\n                            <label for="GS">GS Type</label>\r\n                            <div class="form-group">\r\n                                <select class="form-control mr-auto mt-2 mt-lg-0" #GS formControlName="GS"\r\n                                    (change)="getItemList(PurchaseForm)">\r\n                                    <option [ngValue]="null" [disabled]="EnableDropdown">Select</option>\r\n                                    <option *ngFor="let _GSList of GSList" [value]="_GSList.gs_code"\r\n                                        [disabled]="EnableDropdown">\r\n                                        {{_GSList.item_level1_name}}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 ">\r\n                        <div class="form-group">\r\n                            <label for="RateType">Rate Type</label>\r\n                            <div class="input-group">\r\n                                <select class="form-control mr-auto mt-2 mt-lg-0" #RateType formControlName="RateType"\r\n                                    (change)="toggleRateType(PurchaseForm)">\r\n                                    <option *ngFor="let _RateTypeData of RateTypeData" [ngValue]="_RateTypeData.value"\r\n                                        [disabled]="EnableRateType">\r\n                                        {{_RateTypeData.name}}\r\n                                    </option>\r\n                                    \x3c!-- <option *ngFor="let _RateTypeData of RateTypeData" [ngValue]="_RateTypeData.value">\r\n                                    {{_RateTypeData.name}}\r\n                                </option> --\x3e\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 " *ngIf="EnableDisablectrls">\r\n                        <div class="form-group float-left" style="margin-top: 2px;">\r\n                            <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\r\n                                style="margin-top: 1.2rem !important;" [disabled]="EnableAddRow"\r\n                                (click)="add(PurchaseForm)">\r\n                                <i class="far fa-plus-circle"></i> Add</button>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 float-right">\r\n                        <div class="form-group">\r\n                            <div class="text-right"><i class="fal fa-rupee-sign"></i>&nbsp; <span\r\n                                    class="text-muted">Date</span>\r\n                                <h1 class="font-light">{{applicationDate | date:\'dd/MM/yyyy\'}}</h1>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 float-right">\r\n                        <div class="form-group">\r\n                            <div class="text-right"><i class="fal fa-rupee-sign"></i>&nbsp; <span\r\n                                    class="text-muted">Rate/Gram</span>\r\n                                <h1 class="font-light">{{Rate | number : \'1.2-2\'}}</h1>\r\n                                \x3c!-- <div class="form-group">\r\n                    <input style="width: 80px;" class="form-control" id="RatePerGram" formControlName="RatePerGram" [(ngModel)]="RatePerGram"\r\n                        placeholder="RatePerGram"type="number" [ngModelOptions]="{standalone: true}"  (change)=" RateperGram()">\r\n                </div> --\x3e\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n            <div class="table-responsive">\r\n                <table class="table table-bordered" style="width: 2000px;">\r\n                    <thead class="topbar">\r\n                        <tr>\r\n                            <th></th>\r\n                            <th>Item</th>\r\n                            <th>Gr. Wt</th>\r\n                            <th>St. Wt</th>\r\n                            <th>DM. Ct</th>\r\n                            <th>Nt.Wt</th>\r\n                            <th>Purity %</th>\r\n                            <th>Melting %</th>\r\n                            <th>M. Loss</th>\r\n                            <th>Purchase Rate</th>\r\n                            <th>Di/St.Amt</th>\r\n                            <th>Amount</th>\r\n                            <th *ngIf="EnableDisablectrls">Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody *ngFor="let field of fieldArray; let i = index">\r\n                        <tr>\r\n                            <td style="width:150px;">\r\n                                <h3><a href="javascript:void(0)" (click)="sendDataToDiamondComp(field,i)"\r\n                                        data-toggle="collapse" [attr.data-target]="\'#collapse\'+ i"\r\n                                        id=\'panels\'>Diamond</a>\r\n                                    / <a href="javascript:void(0)" (click)="sendDataToStoneComp(field,i)"\r\n                                        data-toggle="collapse" [attr.data-target]="\'#collapseStone\'+ i"\r\n                                        id=\'panels\'>Stone</a>\r\n                                </h3>\r\n                            </td>\r\n                            <td style="width:300px;">\r\n                                <select class="form-control mr-auto mt-2 mt-lg-0" #Item name="{{field.ItemName}}"\r\n                                    (change)="AJAXRateperGram(Item.value,i);" [(ngModel)]="field.ItemName">\r\n                                    <option [ngValue]="null" [disabled]="readonly[i]">Select</option>\r\n                                    \x3c!-- <option *ngFor="let _ItemList of ItemList" [value]="_ItemList.Karat"\r\n                                    [disabled]="readonly[i]">\r\n                                    {{_ItemList.Item}}\r\n                                </option> --\x3e\r\n                                    <option *ngFor="let _ItemList of ItemList" [value]="_ItemList.Item_code"\r\n                                        [disabled]="readonly[i]">\r\n                                        {{_ItemList.Item}}\r\n                                    </option>\r\n                                </select>\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <input [(ngModel)]="field.GrossWt" [readonly]="readonly[i]" class="form-control"\r\n                                    type="text" (change)="GetNetWT(i);" appNumbersOnly min="0" name="{{field.GrossWt}}"\r\n                                    placeholder="0.000" />\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <ng-container\r\n                                    *ngIf="ItemType != \'OGCN24K\' && ItemType != \'OGCN\' && ItemType != \'OG24K\'">\r\n                                    <input [(ngModel)]="field.StneWt" [readonly]="readonly[i]" class="form-control"\r\n                                        type="text" min="0" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.StneWt}}" (change)="GetNetWT(i);" placeholder="0.000"\r\n                                        appNumbersOnly />\r\n                                </ng-container>\r\n                                <ng-container\r\n                                    *ngIf="ItemType == \'OGCN24K\' || ItemType == \'OGCN\' || ItemType == \'OG24K\'">\r\n                                    <h3 [(ngModel)]="field.StneWt" ngDefaultControl\r\n                                        [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                        {{field.StneWt || "0.00" | number}}</h3>\r\n                                </ng-container>\r\n                            </td>\r\n                            <ng-container\r\n                                *ngIf="ItemType == \'OSSL\' || ItemType == \'OG24K\' || ItemType == \'OGCN\' || ItemType == \'OGCN24K\'">\r\n                                <td style="width:150px;">\r\n                                    <input [(ngModel)]="field.Dcts" class="form-control" type="text" min="0"\r\n                                        [ngModelOptions]="{standalone: true}" name="{{field.Dcts}}" placeholder="0.000"\r\n                                        readonly />\r\n                                </td>\r\n                            </ng-container>\r\n                            <ng-container\r\n                                *ngIf="ItemType != \'OSSL\' && ItemType != \'OG24K\' && ItemType != \'OGCN\' && ItemType != \'OGCN24K\'">\r\n                                <td style="width:150px;">\r\n                                    <input [(ngModel)]="field.Dcts" class="form-control" type="text" min="0"\r\n                                        [readonly]="readonly[i]" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.Dcts}}" placeholder="0.000" appNumbersOnly />\r\n                                </td>\r\n                            </ng-container>\r\n                            <td style="width:150px;">\r\n                                <h3 [(ngModel)]="field.NetWt" ngDefaultControl [ngModelOptions]="{standalone: true}"\r\n                                    class="align-middle">{{field.NetWt || "0.00" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <ng-Container *ngIf="EnableDisablePurPer">\r\n                                    <h3 [(ngModel)]="field.PurityPercent" ngDefaultControl\r\n                                        [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                        {{field.PurityPercent || "0.00" | number}}</h3>\r\n                                </ng-Container>\r\n                                <ng-Container *ngIf="!EnableDisablePurPer">\r\n                                    <input [(ngModel)]="field.PurityPercent" [readonly]="readonly[i]"\r\n                                        class="form-control" type="text" min="0" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.PurityPercent}}" (change)="GetMLLoss_MLPercentage(i);"\r\n                                        placeholder="0" appNumbersOnly />\r\n                                </ng-Container>\r\n                            </td>\r\n                            <td style="width:125px;">\r\n                                \x3c!-- <input [(ngModel)]="field.MeltingPercent" class="form-control" readonlytype="number" readonly\r\n                        [ngModelOptions]="{standalone: true}" name="{{field.MeltingPercent}}" placeholder="0.00" /> --\x3e\r\n\r\n                                <h3 [(ngModel)]="field.MeltingPercent" ngDefaultControl\r\n                                    [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                    {{field.MeltingPercent || "0.00" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:125px;">\r\n                                \x3c!-- <input [(ngModel)]="field.MeltingLoss" class="form-control" type="number" readonly readonly\r\n                        [ngModelOptions]="{standalone: true}" name="{{field.MeltingLoss}}" placeholder="0.00" /> --\x3e\r\n\r\n                                <h3 [(ngModel)]="field.MeltingLoss" ngDefaultControl\r\n                                    [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                    {{field.MeltingLoss || "0.000" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <ng-container\r\n                                    *ngIf="ItemType != \'OGPP\' && ItemType != \'OSSL\' && ItemType != \'OG22\' && EnablePurchaseRate">\r\n                                    <input [(ngModel)]="field.PurchaseRate" class="form-control" type="text"\r\n                                        [readonly]="readonly[i]" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.PurchaseRate}}" appNumbersOnly placeholder="0.00"\r\n                                        (change)="ItemAmountCalc(i);" />\r\n                                </ng-container>\r\n                                <ng-container *ngIf="ItemType == \'OGPP\' || ItemType == \'OSSL\'">\r\n                                    <input [(ngModel)]="field.PurchaseRate" class="form-control" type="text"\r\n                                        [readonly]="readonly[i]" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.PurchaseRate}}" appNumbersOnly placeholder="0.00"\r\n                                        (change)="ItemAmountCalc(i);" />\r\n\r\n                                </ng-container>\r\n                                <ng-container\r\n                                    *ngIf="ItemType != \'OGPP\' && ItemType != \'OSSL\' && ItemType != \'OG22\' && !EnablePurchaseRate">\r\n                                    <h3 [(ngModel)]="field.PurchaseRate" ngDefaultControl\r\n                                        [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                        {{field.PurchaseRate || "0.00" | number}}</h3>\r\n                                </ng-container>\r\n                                <ng-container *ngIf="ItemType == \'OG22\'">\r\n                                    <h3 [(ngModel)]="field.PurchaseRate" ngDefaultControl\r\n                                        [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                        {{field.PurchaseRate || "0.00" | number}}</h3>\r\n                                </ng-container>\r\n                            </td>\r\n                            <td style="width:125px;">\r\n                                \x3c!-- <input [(ngModel)]="field.DiamondAmount" class="form-control" type="number" readonly\r\n                        [ngModelOptions]="{standalone: true}" name="{{field.DiamondAmount}}" placeholder="0.00" /> --\x3e\r\n                                <h3 [(ngModel)]="field.DiamondAmount" ngDefaultControl\r\n                                    [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                    {{field.DiamondAmount || "0.00" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:125px;">\r\n                                \x3c!-- <input [(ngModel)]="field.ItemAmount" class="form-control" type="number" readonly\r\n                        [ngModelOptions]="{standalone: true}" name="{{field.ItemAmount}}" placeholder="0.00" /> --\x3e\r\n                                <h3 [(ngModel)]="field.ItemAmount" ngDefaultControl\r\n                                    [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                    {{field.ItemAmount || "0.00" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <ng-container *ngIf="EnableDisablectrls">\r\n                                    <ng-container *ngIf="EnableEditDelbtn[i]">\r\n                                        <button class="btn btn-default btn-rounded" type="button"\r\n                                            (click)="editFieldValue(i)"><i class="fal fa-pencil-alt"></i> Edit</button>\r\n                                        <button class="btn btn-danger btn-rounded" type="button"\r\n                                            (click)="deleteFieldValue(i)"><i class="fal fa-trash-alt"></i>\r\n                                            Delete</button>\r\n                                    </ng-container>\r\n                                    <ng-container *ngIf="EnableSaveCnlbtn[i]">\r\n                                        <button class="btn btn-success btn-rounded" type="button"\r\n                                            (click)="saveDataFieldValue(i)"><i class="fal fa-save"></i> Save</button>\r\n                                        <button class="btn btn-warning btn-rounded" type="button"\r\n                                            (click)="cancelDataFieldValue(i)"><i class="far fa-window-close"></i>\r\n                                            Cancel</button>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan="11" class="hiddenRow" *ngIf="i === Index">\r\n                                <div class="collapse wrapper" id="collapse{{i}}" data-parent="#panels">\r\n                                    <app-diamond (diamondAmount)="receiveStoneDiamondAmt()"\r\n                                        (EnableDmdBtn)="EnableDisableDmdBtn($event)"\r\n                                        [PurchaseLinesDetails]="LinesDetails" [EnableDiamondTab]="EnableDiamondTab"\r\n                                        [EstNo]="SalesEstNo" [DmCarats]="DmCarats"></app-diamond>\r\n                                </div>\r\n                                <div class="collapse wrapper" id="collapseStone{{i}}" data-parent="#panels">\r\n                                    <app-stone (stoneAmount)="receiveStoneDiamondAmt()"\r\n                                        (EnableStnBtn)="EnableDisableStnBtn($event)"\r\n                                        [PurchaseLinesDetails]="LinesDetails" [EnableStoneTab]="EnableStoneTab"\r\n                                        [EstNo]="SalesEstNo" [StoneCarats]="StoneCarats"></app-stone>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <br>\r\n            \x3c!-- Row --\x3e\r\n            <div class="row">\r\n                \x3c!-- Column --\x3e\r\n                <div class="col-lg-4 col-md-6">\r\n                    <div class="card">\r\n                        <div class="row">\r\n                            <div class="col-12">\r\n                                <div class="social-widget">\r\n                                    <div class="soc-content">\r\n                                        <div class="col-6 b-r">\r\n                                            <h3 class="font-medium">{{GrossWtTotal(fieldArray) || "0.00" | number}}</h3>\r\n                                            <h5 class="text-muted">Total Gr. Wt.</h5>\r\n                                        </div>\r\n                                        <div class="col-6">\r\n                                            <h3 class="font-medium">{{StneWt(fieldArray) || "0.000" | number}}</h3>\r\n                                            <h5 class="text-muted">Total St. Wt.</h5>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \x3c!-- Column --\x3e\r\n                \x3c!-- Column --\x3e\r\n                <div class="col-lg-4 col-md-6">\r\n                    <div class="card">\r\n                        <div class="row">\r\n                            <div class="col-12">\r\n                                <div class="social-widget">\r\n                                    <div class="soc-content">\r\n                                        <div class="col-6 b-r">\r\n                                            <h3 class="font-medium">{{NetWt(fieldArray) || "0.00" | number}}</h3>\r\n                                            <h5 class="text-muted">Total Net Wt.</h5>\r\n                                        </div>\r\n                                        <div class="col-6">\r\n                                            <h3 class="font-medium">{{Dcts(fieldArray) || "0.00" | number}}</h3>\r\n                                            <h5 class="text-muted">Total Carats</h5>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \x3c!-- Column --\x3e\r\n                \x3c!-- Column --\x3e\r\n                <div class="col-lg-4 col-md-6">\r\n                    <div class="card">\r\n                        <div class="row">\r\n                            <div class="col-12">\r\n                                <div class="social-widget">\r\n                                    <div class="soc-content">\r\n                                        <div class="col-4 b-r">\r\n                                            <h3 class="font-medium">{{Amount(fieldArray) | number: \'1.2-2\'}}</h3>\r\n                                            <h5 class="text-muted">Item Total</h5>\r\n                                        </div>\r\n                                        <div class="col-4 b-r">\r\n                                            <h3 class="font-medium">{{rndoff | number: \'1.2-2\'}}</h3>\r\n                                            <h5 class="text-muted">Round Off</h5>\r\n                                        </div>\r\n                                        <div class="col-6 b-r">\r\n                                            <h3 class="font-medium">{{Amount(fieldArray) | currencyFormat}}</h3>\r\n                                            <h5 class="text-muted">Est. Total</h5>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf="EnableDisablectrls">\r\n                <div class="row pt-1">\r\n                    <div class="col-md-4">\r\n                        <button\r\n                            class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary "\r\n                            (click)="SavePurchaseEst()">\r\n                            <i class="far fa-save"></i> Submit</button>\r\n                        <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" type="button"\r\n                            (click)="cancelPurchaseEst()"><i class="far fa-window-close"></i>&nbsp;Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n            <ng-container *ngIf="EnableReprint">\r\n                <app-reprint-purchaseestimation></app-reprint-purchaseestimation>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</ng-container>\r\n\r\n\r\n<span *ngIf="ifPurchase" style="color: red;">Note : All weights are in grams and Amount in INR</span>\r\n\r\n\r\n\r\n\x3c!--         \r\n        <div class="row">\r\n    <div class="col-md-3">\r\n        <p>{{SalesEstNo}}</p>\r\n    </div>\r\n   \r\n    <div class="col-md-6">\r\n        <pre>{{fieldArray | json}}</pre>\r\n    </div>\r\n</div> --\x3e\r\n\r\n\x3c!-- Row --\x3e\r\n\r\n\x3c!-- <div class="col-md-3">\r\n            <pre>{{PurchaseLinesPost | json}}</pre>\r\n        </div> --\x3e\r\n\r\n\r\n\x3c!-- Added for Plain Text printing related to Purchase Estimation--\x3e\r\n\r\n\x3c!-- <div class="modal fade" id="PurchaseEstimationPlainTextTab" tabindex="-1" role="dialog" aria-labelledby="PurchaseEstimationPlainTextTabLabel"\r\naria-hidden="true">\r\n<div class="modal-dialog modal-lg" role="document" style="max-width: 900px">\r\n    <div class="modal-content">\r\n        <div class="modal-header">\r\n            <button type="button"\r\n                class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\r\n                id="PurchaseEstimationPlainTextTabLabel" (click)=printPurchaseEstimationPlainText()><i class="fal fa-print"></i> Print</button>\r\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                <span aria-hidden="true">&times;</span>\r\n            </button>\r\n        </div>\r\n        <div class="container invoice-box htmlPrint" id="print-closed-section" style="max-width: 900px;border-width: 2em">\r\n               <pre>{{purchaseEstimationPlainTextDetails}}</pre>                \r\n        </div>\r\n    </div>\r\n</div>\r\n</div> --\x3e\r\n\r\n\x3c!-- Ends here --\x3e'},aTHM:function(t,e,n){"use strict";n.r(e),e.default='<div class="row" style="display:block;margin: auto;width: 30%;" *ngIf="ShowHide">\n  <form class="form-horizontal">\n    <div class="col-md-12">\n      <div class="card">\n        <div class="card-body">\n          <div class="row">\n            <div class="col-md-12">\n              <div class="form-group">\n                <label for="exampleAccount">Purchase Est No:</label>\n                <div class="input-group">\n                  <input class="form-control" id="exampleAccount" placeholder="Est No" type="number" #estNo>\n                </div>\n              </div>\n              <div class="form-group">\n                <button class="printMe btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n                  (click)="getPurchaseEstimationDetails(estNo.value)"><i class="fal fa-print"></i>\n                  Reprint </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n\x3c!-- <div class="modal fade" id="PurchaseModal"  data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"\n  aria-hidden="true" *ngIf="EnablePurchaseReprintHeaders">\n  <div class="modal-dialog modal-lg" role="document" style="max-width: 1100px;">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n          id="exampleModalLabel" (click)=printPurchase()><i class="fal fa-print"></i> Print</button>\n        <button type="button" class="close" (click)="closePurEstTab()" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="container invoice-box htmlPrint" id="print-sectionPurchase"\n        style="max-width: 1100px;border-width: 2em">\n        <div class="invoice">\n          <h3 style="text-align:center">{{heading}}</h3>\n          <div class="card">\n            <div class="card-body">\n              <div class="row mb-4 ">\n                <div class="col-md-6 ">\n                  <h5 class="mb-3 "> CustName: <span>{{estPurchaseDetails.CustName}}</span></h5>\n                </div>\n                <div class="col-md-5 ">\n                  <h5 class="mb-3 ">Purchase Estimate: <span>{{estPurchaseDetails.EstNo}}</span></h5>\n                </div>\n                <div class="col-md-1">\n                </div>\n              </div>\n              <div class="row margin">\n                <div class="col-lg-12">\n                  <div class="table-responsive-sm">\n                    <table class="table table-bordered table-striped">\n                      <thead>\n                        <tr>\n                          <th class="classname">Description</th>\n                          <th class="classname">Rate</th>\n                          <th class="classname">Gr.Wt</th>\n                          <th class="classname">St.Wt</th>\n                          <th class="classname">Net Wt</th>\n                          <th class="classname">St.Amt</th>\n                          <th class="classname">Amount</th>\n                        </tr>\n                      </thead>\n                      <tbody *ngIf="PurchaseDetails">\n                        <tr *ngFor="let _PurchaseDetails of PurchaseDetails">\n                          <td class="classname">{{_PurchaseDetails.ItemDescription}}</td>\n                          <td class="classname">{{_PurchaseDetails.PurchaseRate | number : \'1.2-2\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.GrossWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.StneWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.NetWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.DiamondAmount | number : \'1.2-2\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.ItemAmount | number : \'1.2-2\'}}</td>\n                        </tr>\n                        <tr *ngIf="getPurchaseTotForPrint">\n                          <td class="classname">Grand Total</td>\n                          <td class="classname"></td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].GrossWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].StneWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].NetWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].DiamondAmount | number : \'1.2-2\'}}</td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].ItemAmount | number : \'1.2-2\'}}</td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n              <div class="card-body">\n                <div class="row mb-4 margin">\n                  <div class="col-md-5">\n                    <h5 class="mb-3"> EstDate:\n                      <span>{{estPurchaseDetails.PDate | date :\'dd-MMM-yy h:mm:ss a \'}}</span></h5>\n                  </div>\n                  <div class="col-md-3">\n                    <h5 class="mb-3">SalCode: <span>{{PurchaseDetails[0].SalCode}}</span></h5>\n                  </div>\n                  <div class="col-md-2">\n                    <h5 class="mb-3"> OpCode: <span>{{estPurchaseDetails.OperatorCode}}</span></h5>\n                  </div>\n                  <div class="col-md-2">\n                  </div>\n                </div>\n              </div>\n              <div class="card-body">\n                <ng-container\n                  *ngFor="let _PurchaseStoneDetails of PurchaseDetails[0].lstPurchaseEstStoneDetailsVM;let i=index">\n                  <div class="row mb-2 margin">\n                    <div class="col-md-6">\n                      <h5 class="mb-3">\n                        # {{_PurchaseStoneDetails.Name}}\\{{_PurchaseStoneDetails.Rate | number : \'1.2-2\'}} *\n                        {{_PurchaseStoneDetails.Carrat | number : \'1.3-3\'}}</h5>\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                  </div>\n                </ng-container>\n                <ng-container\n                  *ngFor="let _PurchaseDiamondDetails of PurchaseDetails[0].lstPurchaseEstDiamondDetailsVM;let i=index">\n                  <div class="row mb-2 margin">\n                    <div class="col-md-6">\n                      <h5 class="mb-3">\n                        # {{_PurchaseDiamondDetails.Name}}\\{{_PurchaseDiamondDetails.Rate | number : \'1.2-2\'}} *\n                        {{_PurchaseDiamondDetails.Carrat | number : \'1.3-3\'}}</h5>\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                  </div>\n                </ng-container>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div> --\x3e\n\n\n\n\x3c!-- Added for Plain Text printing--\x3e\n\n<div class="modal fade" id="PurEstPlainTextTab" tabindex="-1" role="dialog" aria-labelledby="PurEstPlainTextTabLabel"\n    aria-hidden="true">\n    <div class="modal-dialog modal-lg" role="document" style="max-width: 900px">\n        <div class="modal-content">\n            <<div class="modal-header">\n                <button type="button"\n                    class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n                    id="PurEstPlainTextTabLabel" (click)=printPurEstPlainText()><i class="fal fa-print"></i> Print</button>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="container invoice-box htmlPrint" id="print-closed-section" style="max-width: 900px;border-width: 2em">\n                   <pre>{{purEstPlainTextDetails}}</pre>                \n            </div>>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Ends here --\x3e\n\n\n\x3c!-- {{PurchaseDetails | json}} --\x3e'},esxm:function(t,e,n){"use strict";n.r(e),e.default=".hiddenRow {\r\n    padding: 0 !important;\r\n  }\r\n  \r\n  .wrapper{\r\n    margin: auto 3em auto 3em;\r\n  }\r\n  \r\n  .table-responsive {\r\n    display: block;\r\n    width: 99.9999% !important;\r\n    overflow-x: auto;\r\n}\r\n  \r\n  fieldset.scheduler-border {\r\n\tborder: 2px groove #ddd !important;\r\n\tpadding: 0 1.4em 1.4em 1.4em !important;\r\n\tmargin: 0 0 1.5em 0 !important;\r\n\tbox-shadow:  0px 0px 0px 0px #000;\r\n\t\tborder-radius: 15px;\r\n  }\r\n  \r\n  legend.scheduler-border {\r\n\t  font-size: 20px !important;\r\n\t  text-align: left !important;\r\n\t  width:auto;\r\n\t  padding:0 10px;\r\n\t  border-bottom:none;\r\n\t}\r\n  "},jCgZ:function(t,e,n){"use strict";n.r(e),e.default='<ng-container *ngIf="EnableDisablectrls">\n<button type="button"\n  class="btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\n  data-toggle="modal" data-target="#myOldGoldModal" (click)="openModal()">\n  Attach Old GOld Estimate\n</button>\n</ng-container>\n<br>\n<br>\n<div class="table-responsive">\n  <table class="table table-bordered">\n    <thead class="topbar">\n      <tr>\n        <th *ngIf="EnableDisablectrls">Action</th>\n        <th>S.No</th>\n        <th>Est No</th>\n        <th>Qty</th>\n        <th>Gr.Wt</th>\n        <th>Total Amt</th>\n      </tr>\n    </thead>\n\n    <tbody *ngFor="let _SelectOldGoldList of SelectedOldGoldList; let i = index;">\n      <tr>\n        <td *ngIf="EnableDisablectrls"><i class="far fa-trash-alt fa-1-5x pointer" style=\'color: red; font-size: 1.5em !important;\'\n            (click)="DeleteRow(i)"></i>\n        </td>\n        <td>{{i + 1 }}</td>\n        <td>{{_SelectOldGoldList.EstNo}}</td>\n        <td>{{_SelectOldGoldList.Qty}}</td>\n        <td>{{_SelectOldGoldList.GrossWt | number : \'1.3-3\'}}</td>\n        <td>{{_SelectOldGoldList.Amount | number : \'1.2-2\'}}</td>\n      </tr>\n    </tbody>\n    <tr>\n      <td *ngIf="EnableDisablectrls" class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none">No. of items:</td>\n      <td class="border-none"></td>\n      <td class="border-none"><b>Total:</b></td>\n      <td class="border-none">{{Amount(SelectedOldGoldList) | number : \'1.2-2\'}}</td>\n    </tr>\n  </table>\n</div>\n<ng-container *ngIf="EnableDisablectrls">\n<button class="btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pb-10p" style="margin-bottom: 25px;" type="button"\n  (click)="Submit()" [disabled]="EnableSubmitButton"><i class="fal fa-save"></i> Submit</button>\n</ng-container>  \n\n<form [formGroup]="AttachOldGoldForm" class="form-horizontal" (ngSubmit)="onSubmit()">\n  <div class="modal fade" id="myOldGoldModal">\n    <div class="modal-dialog " style="max-width: 900px;">\n      <div class="modal-content">\n\n        \x3c!-- Modal Header --\x3e\n        <div class="modal-header">\n          <h4 class="modal-title">Attach Old Gold Estimate</h4>\n          <button type="button" class="close" data-dismiss="modal">&times;</button>\n        </div>\n\n        \x3c!-- Modal body --\x3e\n        <div class="modal-body">\n          <div class="">\n            <div class="row">\n              <div class="col-md-4">\n                <div class="form-group">\n                  <label for="salesPerson">Search By</label>\n                  <div class="form-group">\n                    <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="searchby">\n                      <option [ngValue]="null">Select</option>\n                      <option *ngFor="let _searchParamsList of SearchParamsList" [value]="_searchParamsList.Key">\n                        {{_searchParamsList.Value}}\n                      </option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n              <div class="col-md-4">\n                <div class="form-group">\n                  <label for="searchText">Search Text</label>\n                  <div class="input-group">\n                    <input class="form-control" id="searchText" formControlName="searchText" placeholder="Search Text"\n                      type="text">\n                  </div>\n                </div>\n              </div>\n              <div class="col-md-4">\n                <div class="form-group">\n                  <label for="Search"></label>\n                  <div class="input-group">\n                    <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary"\n                      (click)="getSearchParams(AttachOldGoldForm)"><i class="fal fa-search"></i> Search</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-md-12">\n                <div class="table-responsive">\n                  <table class="table table-bordered">\n                    <thead class="topbar">\n                      <tr>\n                        <th>S.No</th>\n                        <th>EstNo</th>\n                        <th>Customer</th>\n                        <th>Date</th>\n                        <th>Amount</th>\n                        <th>Gross Wt</th>\n                        <th>Quantity</th>\n                        <th>CustId</th>\n                        <th>GSTAmount</th>\n                      </tr>\n                    </thead>\n\n                    <tbody *ngFor="let _OldGoldList of AttachOldGoldList | paginate: { itemsPerPage:top, totalItems:totalItems, currentPage: pagenumber }; let i = index;">\n                      <tr (click)="selectRecord(_OldGoldList)" class="pointer">\n                        <td>{{i + 1 }}</td>\n                        <td>{{_OldGoldList.EstNo}}</td>\n                        <td>{{_OldGoldList.Customer}}</td>\n                        <td>{{_OldGoldList.Date | date:\'MM/dd/yyyy\'}}</td>\n                        <td>{{_OldGoldList.Amount | number : \'1.2-2\'}}</td>\n                        <td>{{_OldGoldList.GrossWt | number : \'1.3-3\'}}</td>\n                        <td>{{_OldGoldList.Qty}}</td>\n                        <td>{{_OldGoldList.CustID}}</td>\n                        <td>{{_OldGoldList.GSTAmount | number : \'1.2-2\'}}</td>\n                      </tr>                      \n                    </tbody>\n                  </table>\n                </div>\n                <div >\n                  <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \x3c!-- Modal footer --\x3e\n        <div class="modal-footer">\n          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n\x3c!-- <pre>{{PostOldGoldAttchJson|json}}</pre> --\x3e'},jrbh:function(t,e,n){"use strict";n.r(e),e.default='body{\r\n    font-size: 5px;\r\n    line-height: 18px;\r\n}\r\n\r\n.modal {\r\n  overflow-y:auto;\r\n}\r\n\r\n.watermark {\r\n  transform: rotate(331deg);\r\n  font-size: 10em;\r\n  color: rgba(255, 5, 5, 0.37);\r\n  position: absolute;\r\n  text-transform:uppercase;\r\n  padding-left: 10%;\r\n}\r\n\r\n.center {\r\n  margin: auto;\r\n  width: 70%;\r\n  padding: 5px;\r\n}\r\n\r\nthead > tr {\r\n  color:black !important;\r\n  font-weight: 300;\r\n  background-color: blanchedalmond;\r\n}\r\n\r\n.modal-header{\r\npadding-left: 20rem !important;\r\n}\r\n\r\n.material-switch > input[type="checkbox"] {\r\ndisplay: none;   \r\n}\r\n\r\ntr.spaceUnder>td {\r\npadding-bottom: 0px;\r\n}\r\n\r\n.material-switch > label {\r\ncursor: pointer;\r\nheight: 0px;\r\nposition: relative; \r\nwidth: 40px;  \r\n}\r\n\r\n.material-switch > label::before {\r\nbackground: rgb(0, 0, 0);\r\nbox-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\r\nborder-radius: 8px;\r\ncontent: \'\';\r\nheight: 16px;\r\nmargin-top: -8px;\r\nposition:absolute;\r\nopacity: 0.3;\r\ntransition: all 0.4s ease-in-out;\r\nwidth: 40px;\r\n}\r\n\r\n.material-switch > label::after {\r\nbackground: rgb(255, 255, 255);\r\nborder-radius: 16px;\r\nbox-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\r\ncontent: \'\';\r\nheight: 24px;\r\nleft: -4px;\r\nmargin-top: -8px;\r\nposition: absolute;\r\ntop: -4px;\r\ntransition: all 0.3s ease-in-out;\r\nwidth: 24px;\r\n}\r\n\r\n.material-switch > input[type="checkbox"]:checked + label::before {\r\nbackground: inherit;\r\nopacity: 0.5;\r\n}\r\n\r\n.material-switch > input[type="checkbox"]:checked + label::after {\r\nbackground: inherit;\r\nleft: 20px;\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n  .columns {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n@media (min-width:2200px) and (max-width: 2440px) {\r\n  .table-responsive {\r\n   overflow-x: hidden !important;\r\n\r\n}\r\n}\r\n\r\n@media (min-width: 300px) and (max-width: 2200px) {\r\n  .table-responsive {\r\n  overflow-x: auto !important;\r\n\r\n}}'},"lo/J":function(t,e,n){"use strict";n.r(e),e.default='<ng-container *ngIf="EnableDiamondTab">\n  <fieldset class="scheduler-border">\n    <legend class="scheduler-border"><i class="fas fa-gem align-middle"></i> Diamond Details</legend>\n\n    <div class="table-responsive">\n      <table class="table" id=\'panels\' style="width: 1200px;">\n        <thead class="topbar">\n          <tr>\n            <th>GS Name</th>\n            <th>Item Name</th>\n            <th>Qty</th>\n            <th>Carats</th>\n            <th>Max Rate/Carat</th>\n            <th>Rate/Carat</th>\n            <th>Amount</th>\n            <th *ngIf="ShowHide">Action</th>\n            <th *ngIf="ShowHide"><button class="mt-2  btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\n              [disabled]="EnableAddRow" (click)="addrow()">\n              <i class="far fa-plus-circle"></i> Add</button></th>\n          </tr>\n        </thead>\n        <tbody *ngFor="let field of fieldArray; let i = index">\n          <tr>\n            <td style="width: 30%;">\n              <select class="form-control mr-auto mt-2 mt-lg-0">\n                <option [ngValue]="OD" [disabled]="readonly[i]">OLD DIAMOND</option>\n          </select>\n            </td>\n            <td style="width: 30%;">\n              <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="field.Name" (change)="GetItemName(ItemName.value);" #ItemName>\n                <option [ngValue]="null" [disabled]="readonly[i]">Select</option>\n                <option *ngFor="let _ItemList of ItemList" [value]="_ItemList.StoneName"\n                  [disabled]="readonly[i]">\n                  {{_ItemList.StoneName}}\n              </option>\n          </select>\n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.Qty" class="form-control" type="text" min="0" name="{{field.Qty}}" placeholder="0.00"\n                [readonly]="readonly[i]" appNumbersOnly/>\n            </td>\n            <td style="width: 10%;">\n              \x3c!-- <input [(ngModel)]="field.Carrat" class="form-control" type="text" min="0" [readonly]="readonly[i]"\n                name="{{field.Carrat}}" placeholder="0.00" (change)="GetAmount(i);" appNumbersOnly/> --\x3e\n                \x3c!-- (keydown.Tab)="validateCarat(i);" --\x3e\n            \x3c!-- </td> --\x3e\n            <input [(ngModel)]="field.Carrat" class="form-control" type="text" min="0" [readonly]="readonly[i]"\n                name="{{field.Carrat}}" placeholder="0.00" (change)="GetStnDmdRate(i);" appNumbersOnly/>                \n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.OrgRate" class="form-control" type="text" min="0" name="{{field.Rate}}" \n              placeholder="0.00" (change)="GetAmount(i);" readonly/>\n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.Rate" class="form-control" type="text" min="0" [readonly]="readonly[i]"\n                name="{{field.Rate}}" placeholder="0.00" (change)="GetAmount(i);" appNumbersOnly/>\n            </td>\n            <td style="width: 10%;">\n              \x3c!-- <input [(ngModel)]="field.Amount"  class="form-control" type="number"\n            name="{{field.Amount}}" placeholder="0.00" /> --\x3e\n              <h3 [(ngModel)]="field.Amount" [ngModelOptions]="{standalone: true}" class="align-middle">\n                {{field.Amount || "0.00" | number}}</h3>\n            </td>\n            <ng-container *ngIf="ShowHide">\n            <td colspan="2" style="width: 30%;">\n              <ng-container *ngIf="EnableEditDelbtn[i]">\n                <button class="btn btn-default btn-rounded" type="button" (click)="editFieldValue(i)"><i\n                    class="fal fa-pencil-alt"></i> Edit</button>\n                <button class="btn btn-danger btn-rounded" type="button" (click)="deleteFieldValue(i)"><i\n                    class="fal fa-trash-alt"></i> Delete</button>\n              </ng-container>\n              <ng-container *ngIf="EnableSaveCnlbtn[i]">\n                <button class="btn btn-success btn-rounded" type="button" (click)="saveDataFieldValue(i)"><i\n                    class="fal fa-save"></i> Save</button>\n                <button class="btn btn-warning btn-rounded" type="button" (click)="cancelDataFieldValue(i)"><i\n                    class="far fa-window-close"></i> Cancel</button>\n              </ng-container>\n            </td>\n            </ng-container>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    \x3c!-- <pre>{{PurchaseLinesDetails | json}}</pre>\n    <pre>{{fieldArray | json}}</pre> --\x3e\n  </fieldset>\n</ng-container>'},tt6M:function(t,e,n){"use strict";n.r(e),e.default='<ng-container *ngIf="EnableStoneTab">\n  <fieldset class="scheduler-border">\n    <legend class="scheduler-border"><i class="fas fa-gem align-middle"></i> Stone Details</legend>\n\n    <div class="table-responsive">\n      <table class="table" id=\'panels\' style="width: 1000px;">\n        <thead class="topbar">\n          <tr>\n            <th>Item Name</th>\n            <th>Qty</th>\n            <th>St.Wt</th>\n            <th>St Carat</th>\n            <th>Rate/Carat</th>\n            <th>Amount</th>\n            <th *ngIf="ShowHide">Action</th>\n            <th *ngIf="ShowHide">  <button class="mt-2  btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\n              [disabled]="EnableAddRow" (click)="addrow()">\n              <i class="far fa-plus-circle"></i> Add</button></th>\n          </tr>\n        </thead>\n        <tbody *ngFor="let field of fieldArray; let i = index">\n          <tr>\n            <td style="width: 30%;">\n              \x3c!-- <h3 class="align-middle">Old Stone</h3> --\x3e\n              <select class="form-control mr-auto mt-2 mt-lg-0">\n                <option [ngValue]="OST" [disabled]="readonly[i]">OLD STONE</option>\n                \x3c!-- <option *ngFor="let _OldStoneList of OldStoneList" [value]="_OldStoneList.GSCode"\n                  [disabled]="readonly[i]">\n                  {{_OldStoneList.ItemName}}\n              </option> --\x3e\n          </select>\n            </td>\n            <td style="width: 10%;"> \n              <input [(ngModel)]="field.Qty" class="form-control" type="text" min="0" name="{{field.Qty}}" placeholder="0.00"\n                [readonly]="readonly[i]" appNumbersOnly/>\n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.StWt" class="form-control" type="text" min="0" name="{{field.StWt}}" placeholder="0.00"\n                [readonly]="readonly[i]" (change)="GetStoneKarat(i);" appNumbersOnly/>\n            </td>\n            <td style="width: 5%;">\n              <h3 [(ngModel)]="field.Carrat" ngDefaultControl [ngModelOptions]="{standalone: true}"\n              class="align-middle">{{field.Carrat || "0.00" | number}}</h3>\n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.Rate" class="form-control" type="text" [readonly]="readonly[i]"\n                name="{{field.Rate}}" placeholder="0.00" (change)="GetAmount(i);" appNumbersOnly/>\n            </td>\n            <td style="width: 10%;">\n              <h3 [(ngModel)]="field.Amount" [ngModelOptions]="{standalone: true}" class="align-middle">\n                {{field.Amount || "0.00" | number}}</h3>\n            </td>\n            <ng-container *ngIf="ShowHide">\n            <td colspan="2" style="width: 25%;">\n              <ng-container *ngIf="EnableEditDelbtn[i]">\n                <button class="btn btn-default btn-rounded" type="button" (click)="editFieldValue(i)"><i\n                    class="fal fa-pencil-alt"></i> Edit</button>\n                <button class="btn btn-danger btn-rounded" type="button" (click)="deleteFieldValue(i)"><i\n                    class="fal fa-trash-alt"></i> Delete</button>\n              </ng-container>\n              <ng-container *ngIf="EnableSaveCnlbtn[i]">\n                <button class="btn btn-success btn-rounded" type="button" (click)="saveDataFieldValue(i)"><i\n                    class="fal fa-save"></i> Save</button>\n                <button class="btn btn-warning btn-rounded" type="button" (click)="cancelDataFieldValue(i)"><i\n                    class="far fa-window-close"></i> Cancel</button>\n              </ng-container>\n            </td>\n          </ng-container>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    \x3c!-- <pre>{{PurchaseLinesDetails | json}}</pre>\n    <pre>{{fieldArray | json}}</pre> --\x3e\n  </fieldset>\n</ng-container>'},vMFa:function(t,e,n){"use strict";n.r(e),e.default=""},x3mp:function(t,e,n){"use strict";n.r(e),e.default='<div style="color: brown; text-align: right; font-style: italic;">\n  <app-lastdocno></app-lastdocno>\n</div>\n\n\n<div class="card">\n  <div class="card-body">\n    <form class="form-horizontal">\n      <div class="row">\n        <div class="col-md-2 ">\n          <div class="form-group">\n            <label for="EstNo">Est No</label>\n            <input class="form-control" id="exampleAccount" placeholder="Est No" min="0" type="number" #estNo\n              (keyup.enter)="getPurchaseEstimationDetails(estNo.value)">\n          </div>\n        </div>\n        <div class="col-md-3">\n          <div class="form-group">\n            <label for="OrderNo">Sales Person</label>\n            <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="SalesPerson"\n              [ngModelOptions]="{standalone: true}">\n              <option [ngValue]="" [disabled]="true">Select</option>\n              <option *ngFor="let _salesman of SalesManList" [disabled]="true" [value]="_salesman.sal_code">\n                {{_salesman.CodeName}}\n              </option>\n            </select>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <div class="text-left"><i class="fal fa-calendar-alt"></i>&nbsp;\n              <span class="text-muted">Date</span>\n              <h2 class="font-light">{{ApplicationDate}}</h2>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-3">\n          <div class="form-group">\n            <label *ngFor="let radiobutton of radioItems" class="form-check-inline">\n              <input type="radio" name="option" (click)="OnRadioBtnChnge(radiobutton)" class="form-check-input"\n                [value]="radiobutton" [checked]="radiobutton === model.option">\n              <h3 style="margin-top: 5px;">{{radiobutton}}</h3>\n            </label>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n<div id="accordian" class="accordion">\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#Customer" (click)="ToggleCustomerData()"\n      [ngClass]="CollapseCustomerDetailsTab ? \'collapsed\' : \'\'"\n      [attr.data-toggle]="CollapseCustomerDetailsTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle Pointer" style="color:#0096FF">\n            <i class="fas fa-2x fa-users mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Customer Details</ins></span>\n          </a>\n        </div>\n        \x3c!-- <ng-container *ngIf=" ToggleCustomer"> --\x3e\n        <ng-container *ngIf="CollapseCustomerTab">\n          <div class="col-md-1 pull-right">\n            \x3c!-- <h4 ><span class="align-middle"> Total Items: {{SalesData.TotalItems}} </span></h4> --\x3e\n          </div>\n          <div class="col-md-2 pull-right" style="color:#0096FF">\n            <h4><span class="align-middle"></span></h4>\n          </div>\n          <div class="col-md-2 pull-right">\n            <h4><span class="align-middle"> ID: {{CustomerName.ID}}</span></h4>\n          </div>\n          <div class="col-md-3 pull-right">\n            <h4><span class="align-middle"> Customer: {{CustomerName.CustName}}</span></h4>\n          </div>\n        </ng-container>\n        \x3c!-- </ng-container> --\x3e\n      </div>\n    </div>\n    <div id="Customer" class="card-body collapse" [collapse]="CollapseCustomerDetailsTab">\n      <app-customer [filterRadioBtns]="filterRadioBtns">\n      </app-customer>\n    </div>\n  </div>\n  <br>\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#Purchase" (click)="TogglePurchaseData()"\n      [ngClass]="EnablePurchaseTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnablePurchaseTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle Pointer" style="color:#FF00C5">\n            <i class="far fa-shopping-cart fa-2x mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Purchase</ins></span>\n          </a>\n        </div>\n        <ng-container *ngIf="TogglePurchase">\n          <ng-container *ngIf="NoRecordsPurchase">\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> St. Wt:\n                  {{PurchaseData.StoneWt | number : \'1.2-2\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Gr. Wt:\n                  {{PurchaseData.GrossWt | number : \'1.3-3\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Net Wt: {{PurchaseData.NtWt | number : \'1.3-3\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Amt:\n                  {{PurchaseData.Amount | currencyFormat : PurchaseData.Amount}}</span>\n              </h4>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n    <div id="Purchase" class=" collapse" [collapse]="EnablePurchaseTab" style="padding:10px;">\n      <app-purchase (PurchaseAmountChange)=\'PurchaseTotalAmountCalculation($event)\'></app-purchase>\n    </div>\n  </div>\n  <br>\n  <ng-container *ngIf="EnableDisablePayment">\n    <div class="card mb-0">\n      <div class="card-header Pointer" href="#Payment" (click)="TogglePaymentData()"\n        [ngClass]="EnablePaymentsTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnablePaymentsTab ? \'\':\'collapse\'"\n        style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n        <div class="row">\n          <div class="col-md-2 ">\n            <a class="card-title align-middle" style="color:rgb(0, 204, 255)">\n              <i class="far fa-rupee-sign fa-2x mr-2 align-middle"></i>\n              <span class="align-middle"><ins>Payment Details</ins>\n                <div class="tooltipdesign"> <i class="fal fa-question-circle"></i>\n                  <span class="tooltiptext tooltip-top">Capture the Receipts\n                    ( Payment collection modes) information like Cash , Cheque , Card , Scheme Adj, Purchase Bill\n                    etc</span>\n                </div>\n              </span>\n            </a>\n          </div>\n        </div>\n      </div>\n      <div id="Payment" class="card-body collapse" [hidden]="EnablePaymentsTab"\n        [ngClass]="EnablePaymentsTab ? \'hide\' : \'show\'">\n        <app-payment (PaidAmountChange)="PaidTotalAmountCalculation($event)" [autoFillAmount]="autoFetchAmount"\n          [argPageName]="pageName"></app-payment>\n      </div>\n    </div>\n  </ng-container>\n  <br>\n  <ng-container *ngIf="EnableDisablePayment">\n    <div class="row">\n      <div class="col-lg-12 col-md-12">\n        <div class="card">\n          <div class="row">\n            <div class="col-12">\n              <div class="social-widget">\n                <div class="soc-header box-twitter" style="padding: 3px;">\n                  <h3 class="text-white">Purchase Summary</h3>\n                </div>\n                <div class="soc-content">\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"> <b>0.00</b>\n                    </h4>\n                    <h5 class="text-black">Total SGST</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"><b>0.00</b>\n                    </h4>\n                    <h5 class="text-black">Total CGST</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"><b>\n                        0.00</b>\n                    </h4>\n                    <h5 class="text-black">Total IGST</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"> <b>{{PurchaseTotAmount | number : \'1.2-2\'}}</b>\n                      <h1 class="float-right">-</h1>\n                    </h4>\n                    <h5 class="text-black">Trade in Amt</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"><b>{{PaidAmount | number : \'1.2-2\'}}</b>\n                      <h1 class="float-right">=</h1>\n                    </h4>\n                    <h5 class="text-black">Paid Amount</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"><b>\n                        {{BalanceAmount() | number : \'1.2-2\'}}</b>\n                    </h4>\n                    <h5 class="text-black">Balance Amount</h5>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n  <br>\n  <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary" type="button" (click)="Submit()"\n    [hidden]="EnableSubmitButton"><i class="fal fa-save"></i> Submit</button>\n</div>\n\n<ng-container *ngIf="EnableReprint">\n  <app-reprint-purchasebill [BillNo]="BillNo"></app-reprint-purchasebill>\n</ng-container>\n\n\n<pre>{{PurchaseBilling | json}}</pre>'},yByz:function(t,e,n){"use strict";n.r(e),e.default='body{\r\n    font-size: 5px;\r\n    line-height: 18px;\r\n}\r\n.watermark {\r\n  transform: rotate(331deg);\r\n  font-size: 10em;\r\n  color: rgba(255, 5, 5, 0.37);\r\n  position: absolute;\r\n  text-transform:uppercase;\r\n  padding-left: 10%;\r\n}\r\nthead > tr {\r\n  color:black !important;\r\n  font-weight: 300;\r\n  background-color: blanchedalmond;\r\n}\r\n.modal-header{\r\npadding-left: 20rem !important;\r\n}\r\n.material-switch > input[type="checkbox"] {\r\ndisplay: none;   \r\n}\r\ntr.spaceUnder>td {\r\npadding-bottom: 0px;\r\n}\r\n.material-switch > label {\r\ncursor: pointer;\r\nheight: 0px;\r\nposition: relative; \r\nwidth: 40px;  \r\n}\r\n.material-switch > label::before {\r\nbackground: rgb(0, 0, 0);\r\nbox-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\r\nborder-radius: 8px;\r\ncontent: \'\';\r\nheight: 16px;\r\nmargin-top: -8px;\r\nposition:absolute;\r\nopacity: 0.3;\r\ntransition: all 0.4s ease-in-out;\r\nwidth: 40px;\r\n}\r\n.material-switch > label::after {\r\nbackground: rgb(255, 255, 255);\r\nborder-radius: 16px;\r\nbox-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\r\ncontent: \'\';\r\nheight: 24px;\r\nleft: -4px;\r\nmargin-top: -8px;\r\nposition: absolute;\r\ntop: -4px;\r\ntransition: all 0.3s ease-in-out;\r\nwidth: 24px;\r\n}\r\n.material-switch > input[type="checkbox"]:checked + label::before {\r\nbackground: inherit;\r\nopacity: 0.5;\r\n}\r\n.material-switch > input[type="checkbox"]:checked + label::after {\r\nbackground: inherit;\r\nleft: 20px;\r\n}'}}]);