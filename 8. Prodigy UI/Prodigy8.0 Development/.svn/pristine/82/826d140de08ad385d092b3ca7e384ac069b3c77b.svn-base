(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"5hA3":function(t,a,e){"use strict";e.r(a);var n=e("mrSG"),s=e("GFhY"),i=e("3Pt+"),l=e("Njd3"),o=e("+Cnu"),r=e("OclH"),c=e("h9W5"),d=e("hzby"),h=e("Tsp1"),m=e("rJ0g"),u=e("fXoL"),b=e("ofXK"),p=e("NSaA"),g=e("SlBg"),v=e("/i8d"),S=e("db5x"),y=e("NQ5e"),f=e("E2Nj"),A=e("tyNb"),D=e("f3Qm"),P=e("eya4"),N=e("NFKh"),O=e("qLqq"),x=e("3TGi"),R=e("giQ8"),T=e("5eHb"),E=e("GUC0"),C=e.n(E);let B=class{constructor(t,a,e,n,s,i,l,o,r,c,d){this._CustomerService=t,this._salesService=a,this._estmationService=e,this._purchaseService=n,this._addBarcodeService=s,this._masterService=i,this._router=l,this._paymentService=o,this._salesBillingService=r,this._ordersService=c,this.toastr=d,this.leavePage=!1,this.EnableSubmitButton=!0,this.toggle=!1,this.filterRadioBtns=!1,this.PaymentHeader="",this.SalesData={},this.EnableReprint=!1,this.EnableDisablePaymentForOrderAdj=!0,this.OrderNo="",this.PurchaseData={},this.OrderAttachmentSummaryData={},this.SRAttachmentSummaryData={},this.OldGoldAttachmentSummaryData={},this.NoRecordsCustomer=!1,this.NoRecordsPurchase=!1,this.EnableDisablePayment=!1,this.EnableDiscountItemTab=!0,this.password=O.a.Pwd,this.model={option:"Payment"},this.ccode="",this.bcode="",this.today=new Date,this.estDate="",this.ordDate="",this.autoFetchAmount=0,this.NewEstimation=!1,this.ExistingEstimation=!1,this.ApplicationDate="",this.estDetails=[],this.purchaseDetails=[],this.GlobalOrderAmount=0,this.ParentJSON=[],this.PayabaleAmt=0,this.GuaranteeFlag=!1,this.NoRecordsPaymentSummary=!1,this.PaymentSummary=[],this.PaidAmount=0,this.ToggleTotal=!0,this.CollapseCustomerTab=!0,this.CollapseCustomerDetailsTab=!0,this.EnableSalesTab=!1,this.EnableOrderAttachmentTab=!0,this.EnableSRAttachmentTab=!0,this.EnableOldGoldAttachmentTab=!0,this.NoRecordsSales=!1,this.NoSummarySales=!1,this.NoSummaryOrder=!1,this.NoSummaryPurchase=!1,this.NoSummarySalesReturn=!1,this.NoSummaryOldGold=!1,this.NoRecordsAttachSR=!1,this.NoRecordsAttachOldGold=!1,this.ToggleAttachOrder=!0,this.NoRecordsAttachOrder=!1,this.ReceivableAmount=0,this.ToggleSales=!1,this.TogglePurchase=!1,this.EnablePurchaseTab=!1,this.SalesBilling={IsOrder:!1,IsCreditNote:!1,SalesManCode:null,CompanyCode:null,BranchCode:null,CustID:0,MobileNo:null,EstNo:null,ReceivableAmt:0,DifferenceDiscountAmt:0,PayableAmt:0,OperatorCode:localStorage.getItem("Login"),GuaranteeName:null,DueDate:null,lstOfPayment:[]},this.SalesTotAmount=0,this.OrderTotAmount=0,this.PurchaseTotAmount=0,this.SRTotAmount=0,this.OGTotAmount=0,this.TotAmount=0,this.RecAmount=0,this.BalAmount=0,this.PayAmount=0,this.SelectedOrderList=[],this.EnablePaymentsTab=!0,this.NoRecordsPayments=!0,this.EnableReceiveAmount=!0,this.Recalculation=[],this.differenceDiscountAmt=0,this.DiscPer=0,this.AddDiscAmt=0,this.CessAmt=0,this.SalesAmountExclTax=0,this.GSTAmount=0,this.SalesAmountInclTax=0,this.RndOffAmtFlag=!1,this.estDate=Object(b.formatDate)(this.today,"dd/MM/yyyy","en-US","+0530"),this.ordDate=Object(b.formatDate)(this.today,"dd/MM/yyyy","en-US","+0530"),this.radioItems=["Payment","Order"],this.datePickerConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,minDate:this.today,dateInputFormat:"YYYY-MM-DD"}),this.getCB()}confirmBeforeLeave(){return 1!=this.leavePage||!!confirm("You have unsaved changes! If you leave, your changes will be lost.")&&(this.leavePage=!1,!0)}ngOnInit(){this.SalesData={Amount:0},this.PurchaseData={Amount:0},this.OrderAttachmentSummaryData={Amount:0},this.SRAttachmentSummaryData={Amount:0},this.OldGoldAttachmentSummaryData={Amount:0},this.NewEstimation=!0,$((function(){$("#datepicker").datepicker()})),this._estmationService.SendEstNo(null),this.GetCustomerDetsFromCustComp(),this.GetSalesDetsFromSalescomp(),this.GetPurchaseDetsFromPurchaseComp(),this.GetEstNoToggleSales(),this.GetSRAttachedSummary(),this.GetOrderAttachedSummary(),this.GetOldGoldAttachedSummary(),this.getApplicationdate(),this.GetParentJson(),this.GetPaymentSummary()}getApplicationdate(){this._masterService.getApplicationDate().subscribe(t=>{let a=t;this.ordDate=a.applcationDate,this.ApplicationDate=this.ordDate})}getCB(){this.ccode=N.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(N.enc.Utf8),this.bcode=N.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(N.enc.Utf8),this.SalesBilling.CompanyCode=this.ccode,this.SalesBilling.BranchCode=this.bcode}getEstimationDetails(t){this.pageName="",this.PaymentHeader="",this.ClearValues(),this._CustomerService.SendCustDataToEstComp(null),this._salesService.salesDetails(null),this._salesService.SendSalesDataToEstComp(null),this._purchaseService.sendPurchaseDatatoEstComp(null),this._estmationService.SendOrderAttachmentSummaryData(null),this._estmationService.SendSRAttachmentSummaryData(null),this._estmationService.SendOldGoldAttachmentSummaryData(null),this.model.option="Payment",this.SalesBilling.IsCreditNote=!1,this.SalesBilling.IsOrder=!1,this._salesService.SaveSalesEstNo(t),this._estmationService.getEstimationDetailsfromAPI(t).subscribe(a=>{this.estDetails=a,null!=this.estDetails&&this.estDetails.salesEstimatonVM.length>0&&(this.EnableDisablePaymentForOrderAdj=!0,this.leavePage=!0,this.EnableSubmitButton=!1,this.OrderNo=this.estDetails.OrderNo,this.NoSummaryOrder=!0,this.GlobalOrderAmount=this.estDetails.OrderAmount,this.OrderTotalAmountCalculation(0),this.EnableDisablePayment=!0,this.EstNo=this.estDetails.EstNo,this.SalesBilling.EstNo=this.EstNo,this.SalesBilling.OperatorCode=localStorage.getItem("Login"),this.SalesBilling.CompanyCode=this.ccode,this.SalesBilling.BranchCode=this.bcode,this._CustomerService.getCustomerDtls(this.estDetails.CustID).subscribe(a=>{const e=a;this.ToggleSales=!0,this._CustomerService.sendCustomerDtls_To_Customer_Component(e),this._estmationService.SendEstNo(t),this.estDate=Object(b.formatDate)(this.estDetails.EstDate,"dd/MM/yyyy","en-US","+0530"),this.ordDate=Object(b.formatDate)(this.estDetails.OrderDate,"dd/MM/yyyy","en-US","+0530"),this._salesService.salesDetails(this.estDetails),this.EnableSalesTab=!0,this.ToggleSalesData(),this._paymentService.inputData(this.SalesBilling),this.FinalAmount()}))},t=>{this.EnableSubmitButton=!0})}GetParentJson(){this._paymentService.castParentJSON.subscribe(t=>{this.ParentJSON=t})}OnRadioBtnChnge(t){"Order"==t?(this.SalesBilling.IsOrder=!0,this.EnableDisablePaymentForOrderAdj=!1,this.model.option=t,this.BalanceAmount()):(this.EnableDisablePaymentForOrderAdj=!0,this.model.option=t,this._paymentService.inputData(this.SalesBilling))}SaveGuarantor(){null==this.SalesBilling.GuaranteeName||""==this.SalesBilling.GuaranteeName?this.toastr.warning("Please enter the GuaranteeName","Alert!"):null==this.SalesBilling.DueDate||""==this.SalesBilling.DueDate?this.toastr.warning("Please enter the DueDate","Alert!"):$("#GuaranteePopup").modal("hide")}Submit(){var t;if(0==this.SalesBilling.CustID)this.toastr.warning("Please select the customer","Alert!");else if(null==this.BillNo)if("Order"==this.model.option)confirm("Do you want to save??")&&this._salesBillingService.postSalesBilling(this.SalesBilling).subscribe(t=>{this.BillNo=t,null!=this.BillNo&&(this.EnableReprint=!0,C()("Submitted!","Bill No: "+this.BillNo.billNo+" generated successfully!","success"),this.ngOnDestroy(),this.GuaranteeFlag=!1,this.RndOffAmtFlag=!1,this.leavePage=!1,this.EnableSubmitButton=!0)});else if(1==this.GuaranteeFlag)confirm("Do you want to save??")&&this._salesBillingService.postSalesBilling(this.SalesBilling).subscribe(t=>{this.BillNo=t,null!=this.BillNo&&(this.EnableReprint=!0,C()("Submitted!","Bill No: "+this.BillNo.billNo+" generated successfully!","success"),this.ngOnDestroy(),this.GuaranteeFlag=!1,this.RndOffAmtFlag=!1,this.leavePage=!1,this.EnableSubmitButton=!0)});else if(1==this.RndOffAmtFlag?(t=this.SalesAmountInclTax-this.PurchaseTotAmount,t=Math.round(t)):t=Math.round(this.TotAmount),this.PayableAmount(),this.ReceivedAmount(),Number(this.RecAmount)<Number(t)&&"Payments"!=this.PaymentHeader)confirm("Received amount is less than the sales amount. Do you want to generate Credit Bill??")&&($("#GuaranteePopup").modal("show"),this.GuaranteeFlag=!0);else if(Number(this.RecAmount)>Number(t)&&"Payments"!=this.PaymentHeader)this.toastr.warning("Payment amount is greater than bill amount","Alert!");else if(this.PayAmount>0&&"Payments"==this.PaymentHeader)this.toastr.warning("Payable Amount is less than Balance Amount","Alert!");else if(this.PayAmount<0&&"Payments"==this.PaymentHeader)this.toastr.warning("Payable Amount is greater than Balance Amount","Alert!");else{confirm("Do you want to save??")&&this._salesBillingService.postSalesBilling(this.SalesBilling).subscribe(t=>{this.BillNo=t,null!=this.BillNo&&(this.EnableReprint=!0,C()("Submitted!","Bill No: "+this.BillNo.billNo+" generated successfully!","success"),this.ngOnDestroy(),this.GuaranteeFlag=!1,this.RndOffAmtFlag=!1,this.leavePage=!1,this.EnableSubmitButton=!0)})}}cancelModal(){$("#GuaranteePopup").modal("hide")}paymentAmt(t){}GetPaymentSummary(){this._paymentService.CastPaymentSummaryData.subscribe(t=>{this.PaymentSummary=t,0==this.isEmptyObject(this.PaymentSummary)&&null!=this.isEmptyObject(this.PaymentSummary)?null==this.PaymentSummary.Amount?this.NoRecordsPaymentSummary=!1:this.NoRecordsPaymentSummary=!0:this.NoRecordsPaymentSummary=!1})}ToggleTotalFunction(){this.ToggleTotal=!this.ToggleTotal}ToggleCustomerData(){1==this.NoRecordsCustomer&&(this.filterRadioBtns=!0,this.CollapseCustomerTab=!this.CollapseCustomerTab,this.CollapseCustomerDetailsTab=!this.CollapseCustomerDetailsTab)}ToggleSalesData(){1==this.NoRecordsCustomer&&(this.EnableSalesTab=!this.EnableSalesTab,this.filterRadioBtns=!0,this.ToggleSales=!this.ToggleSales,1==this.EnableSalesTab&&(this.NoRecordsSales=!0,this.ToggleSales=!0))}LoadSalesData(){1==this.NoRecordsCustomer&&(this.filterRadioBtns=!0,this.NoRecordsSales=!0,this.ToggleSales=!0)}TogglePurchaseData(){1==this.NoRecordsSales&&this._salesService.cast.subscribe(t=>{this.SalesData=t,0==this.isEmptyObject(this.SalesData)&&null!=this.isEmptyObject(this.SalesData)?(this.EnablePurchaseTab=!this.EnablePurchaseTab,this.filterRadioBtns=!0,this.TogglePurchase=!this.TogglePurchase,this._purchaseService.cast.subscribe(t=>{this.PurchaseData=t,0==this.isEmptyObject(this.PurchaseData)&&null!=this.isEmptyObject(this.PurchaseData)&&1==this.EnablePurchaseTab?(this.NoRecordsPurchase=!0,this.TogglePurchase=!0):(this.NoRecordsPurchase=!1,this.TogglePurchase=!1)})):this.EnablePurchaseTab=!0})}ToggleOrderAttachment(){this._salesService.cast.subscribe(t=>{this.SalesData=t,0==this.isEmptyObject(this.SalesData)&&null!=this.isEmptyObject(this.SalesData)?(this.filterRadioBtns=!0,this.EnableOrderAttachmentTab=!this.EnableOrderAttachmentTab,this._estmationService.CastOrderAttachmentSummaryData.subscribe(t=>{this.OrderAttachmentSummaryData=t,0==this.isEmptyObject(this.OrderAttachmentSummaryData)&&null!=this.isEmptyObject(this.OrderAttachmentSummaryData)&&1==this.EnableOrderAttachmentTab?this.NoRecordsAttachOrder=!0:this.NoRecordsAttachOrder=!1})):this.EnableOrderAttachmentTab=!0})}ToggleSRAttachment(){this._salesService.cast.subscribe(t=>{this.SalesData=t,0==this.isEmptyObject(this.SalesData)&&null!=this.isEmptyObject(this.SalesData)?(this.filterRadioBtns=!0,this.EnableSRAttachmentTab=!this.EnableSRAttachmentTab,this._estmationService.CastSRAttachmentSummaryData.subscribe(t=>{this.SRAttachmentSummaryData=t,0==this.isEmptyObject(this.SRAttachmentSummaryData)&&null!=this.isEmptyObject(this.SRAttachmentSummaryData)&&1==this.EnableSRAttachmentTab?this.NoRecordsAttachSR=!0:this.NoRecordsAttachSR=!1})):this.EnableSRAttachmentTab=!0})}ToggleOldGoldAttachment(){this._salesService.cast.subscribe(t=>{this.SalesData=t,0==this.isEmptyObject(this.SalesData)&&null!=this.isEmptyObject(this.SalesData)?(this.filterRadioBtns=!0,this.EnableOldGoldAttachmentTab=!this.EnableOldGoldAttachmentTab,this._estmationService.CastOldGoldAttachmentSummaryData.subscribe(t=>{this.OldGoldAttachmentSummaryData=t,0==this.isEmptyObject(this.OldGoldAttachmentSummaryData)&&null!=this.isEmptyObject(this.OldGoldAttachmentSummaryData)&&1==this.EnableOldGoldAttachmentTab?this.NoRecordsAttachOldGold=!0:this.NoRecordsAttachOldGold=!1})):this.EnableOldGoldAttachmentTab=!0})}ngOnDestroy(){this._salesService.SendSalesDataToEstComp(null),this._CustomerService.SendCustDataToEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this._salesService.salesDetails(null),this._purchaseService.sendPurchaseDatatoEstComp(null),this._estmationService.SendEstNo(null),this._salesService.SaveSalesEstNo(null),this._paymentService.outputData(null),this._paymentService.inputData(null),this._paymentService.OutputParentJSONFunction(null),this._paymentService.SendPaymentSummaryData(null),this._ordersService.SendOrderDetsToOrderComp(null),this._ordersService.SendOrderNoToReprintComp(null),this._estmationService.SendOrderAttachmentSummaryData(null),this._estmationService.SendSRAttachmentSummaryData(null),this.ClearValues(),this.SalesBilling={IsOrder:!1,IsCreditNote:!1,SalesManCode:null,CompanyCode:null,BranchCode:null,CustID:0,MobileNo:null,EstNo:null,ReceivableAmt:0,DifferenceDiscountAmt:0,PayableAmt:0,OperatorCode:null,GuaranteeName:null,DueDate:null,lstOfPayment:[]}}isEmptyObject(t){return t&&0===Object.keys(t).length}EnableSales(){this.EnableSalesTab=!0,this.NoRecordsSales=!0,this.TogglePurchase=!1,this.NoRecordsPurchase=!1}EnablePurchase(){this.EnableSalesTab=!1,this.EnablePurchaseTab=!1,this.NoRecordsSales=!1,this.TogglePurchase=!1,this.NoRecordsPurchase=!1}GetCustomerDetsFromCustComp(){this._CustomerService.cast.subscribe(t=>{this.CustomerName=t,0==this.isEmptyObject(this.CustomerName)&&null!=this.isEmptyObject(this.CustomerName)&&0!=this.CustomerName?(this.SalesBilling.CustID=this.CustomerName.ID,this.SalesBilling.MobileNo=this.CustomerName.MobileNo,this.CollapseCustomerTab=!0,this.NoRecordsCustomer=!0,this.CollapseCustomerDetailsTab=!0):(this.EnableSalesTab=!0,this.CollapseCustomerTab=!1,this.NoRecordsCustomer=!1,this.NoRecordsSales=!1,this.EnablePurchaseTab=!0)})}GetSalesDetsFromSalescomp(){this._salesService.cast.subscribe(t=>{this.SalesData=t,0==this.isEmptyObject(this.SalesData)&&null!=this.isEmptyObject(this.SalesData)?(this.NoRecordsPurchase=!1,this.NoSummarySales=!0,this.ToggleSales=!0,this.NoRecordsSales=!0):(this.EnableSalesTab=!0,this.NoRecordsPurchase=!1,this.NoSummarySales=!1,this.ReceivableAmount=0)})}GetPurchaseDetsFromPurchaseComp(){this._purchaseService.cast.subscribe(t=>{this.PurchaseData=t,0==this.isEmptyObject(this.PurchaseData)&&null!=this.isEmptyObject(this.PurchaseData)?(this.NoRecordsPurchase=!0,this.TogglePurchase=!0,this.EnablePurchaseTab=!0,this.NoSummaryPurchase=!0):(this.NoRecordsPurchase=!1,this.TogglePurchase=!1,this.EnablePurchaseTab=!0,this.NoSummaryPurchase=!1)})}GetEstNoToggleSales(){this._salesService.EstNo.subscribe(t=>{this.EstNo=t,""!=this.EstNo&&null!=this.EstNo?this.EnableSales():this.EnablePurchase()}),this._estmationService.EstNo.subscribe(t=>{this.EstNo=t,""!=this.EstNo&&null!=this.EstNo?(this.EnableSales(),this.EnablePurchaseTab=!0,this.TogglePurchase=!0):this.EnablePurchase()})}GetOrderAttachedSummary(){this._estmationService.CastOrderAttachmentSummaryData.subscribe(t=>{this.OrderAttachmentSummaryData=t,0==this.isEmptyObject(this.OrderAttachmentSummaryData)&&null!=this.isEmptyObject(this.OrderAttachmentSummaryData)?(this.NoRecordsAttachOrder=!0,this.EnableOrderAttachmentTab=!0,this.NoSummaryOrder=!0):(this.NoRecordsAttachOrder=!1,this.NoSummaryOrder=!1)})}GetSRAttachedSummary(){this._estmationService.CastSRAttachmentSummaryData.subscribe(t=>{this.SRAttachmentSummaryData=t,0==this.isEmptyObject(this.SRAttachmentSummaryData)&&null!=this.isEmptyObject(this.SRAttachmentSummaryData)?(this.NoRecordsAttachSR=!0,this.EnableSRAttachmentTab=!0,this.NoSummarySalesReturn=!0):(this.NoRecordsAttachSR=!1,this.NoSummarySalesReturn=!1)})}GetOldGoldAttachedSummary(){this._estmationService.CastOldGoldAttachmentSummaryData.subscribe(t=>{this.OldGoldAttachmentSummaryData=t,0==this.isEmptyObject(this.OldGoldAttachmentSummaryData)&&null!=this.isEmptyObject(this.OldGoldAttachmentSummaryData)?(this.NoRecordsAttachOldGold=!0,this.EnableOldGoldAttachmentTab=!0,this.NoSummaryOldGold=!0):(this.NoRecordsAttachOldGold=!1,this.NoSummaryOldGold=!1)})}SalesTotalAmountCalculation(t){this.SalesTotAmount=t,this.FinalAmount()}PurchaseTotalAmountCalculation(t){this.PurchaseTotAmount=t,this.FinalAmount()}OrderTotalAmountCalculation(t){this.OrderTotAmount=t+this.GlobalOrderAmount,this.OrderAttachmentSummaryData={Amount:this.OrderTotAmount},this.FinalAmount()}SRTotalAmountCalculation(t){this.SRTotAmount=t,this.FinalAmount()}OGTotalAmountCalculation(t){this.OGTotAmount=t,this.FinalAmount()}TogglePaymentData(){0==this.NoRecordsPayments?C()("Warning","Please select Item Details ","warning"):this.EnablePaymentsTab=!1}FinalAmount(){return 1==this.NoSummarySales&&(1==this.RndOffAmtFlag?this.ReceivableAmount=this.SalesAmountInclTax:0==this.RndOffAmtFlag?this.ReceivableAmount=this.SalesData.Amount:1==this.NoSummaryPurchase?this.ReceivableAmount=this.ReceivableAmount-this.PurchaseData.Amount:1==this.NoSummaryOrder?this.ReceivableAmount=this.ReceivableAmount-this.OrderAttachmentSummaryData.Amount:1==this.NoSummarySalesReturn?this.ReceivableAmount=this.ReceivableAmount-this.SRAttachmentSummaryData.Amount:1==this.NoSummaryOldGold&&(this.ReceivableAmount=this.ReceivableAmount-this.OldGoldAttachmentSummaryData.Amount)),this.TotalAmount(),this.ReceivedAmount(),this.BalanceAmount(),this.SalesBilling.PayableAmt=0,this.BalAmount<0?(this.EnableReceiveAmount=!0,this.PaymentHeader="Payments",this.pageName="OC",this.autoFetchAmount=this.PayAmount,this.SalesBilling.PayableAmt=Math.round(this.TotAmount-this.RecAmount)):(this.EnableReceiveAmount=!1,this.PaymentHeader="Receipts",this.pageName="S",this.autoFetchAmount=this.BalAmount),this.ReceivableAmount}DisItemSummary(){this._salesService.cast.subscribe(t=>{this.SalesData=t,0==this.isEmptyObject(this.SalesData)&&null!=this.isEmptyObject(this.SalesData)?(this.filterRadioBtns=!0,this.EnableDiscountItemTab=!this.EnableDiscountItemTab):this.EnableDiscountItemTab=!0})}BalanceAmount(){return this.BalAmount=Math.round(this.TotAmount-this.RecAmount),"Payments"==this.model.option?this.SalesBilling.PayableAmt=this.BalAmount:"Order"==this.model.option&&(this.SalesBilling.PayableAmt=this.PayAmount),this.BalAmount}PaidTotalAmountCalculation(t){this.PaidAmount=t,this.PayableAmount(),this.ReceivedAmount()}PayableAmount(){return this.PayAmount=Math.abs(this.BalAmount)-this.PaidAmount,this.autoFetchAmount=this.PayAmount,this.PayAmount}ReceivedAmount(){return this.RecAmount=this.SRTotAmount+this.OrderTotAmount+this.OGTotAmount,"Receipts"==this.PaymentHeader?(this.RecAmount=this.RecAmount+this.PaidAmount,this.SalesBilling.ReceivableAmt=this.PaidAmount):this.SalesBilling.ReceivableAmt=0,this.RecAmount}TotalAmount(){return this.NoSummarySales&&(this.TotAmount=this.SalesData.Amount),this.NoSummaryPurchase&&(this.TotAmount=this.SalesData.Amount-this.PurchaseData.Amount),this.TotAmount}ReceivedAmt(t){t>this.BalanceAmount()?C()("Input Error","Invalid received amount.","error"):(this.differenceDiscountAmt=this.BalanceAmount()-t,this.SalesBilling.DifferenceDiscountAmt=Number(this.differenceDiscountAmt.toFixed(2)),this._salesBillingService.postdifferenceDiscountAmt(this.SalesBilling.EstNo,this.differenceDiscountAmt,this.ccode,this.bcode).subscribe(t=>{this.Recalculation=t,null!=this.Recalculation&&(this.RndOffAmtFlag=!0,this.DiscPer=this.Recalculation.DiscountPercent,this.AddDiscAmt=this.Recalculation.DiscountAmount,this.CessAmt=this.Recalculation.GSTCessAmount,this.SalesAmountExclTax=this.Recalculation.SalesAmountExclTax,this.GSTAmount=this.Recalculation.GSTAmount,this.SalesAmountInclTax=this.Recalculation.SalesAmountInclTax,this.DisTotalAmount())}))}DisTotalAmount(){return this.TotAmount=Math.round(this.SalesAmountInclTax-this.PurchaseTotAmount),this.TotAmount}ClearValues(){this.ReceivableAmount=0,this.SalesTotAmount=0,this.OrderTotAmount=0,this.PurchaseTotAmount=0,this.SRTotAmount=0,this.OGTotAmount=0,this.TotAmount=0,this.RecAmount=0,this.BalAmount=0,this.PayAmount=0,this.Recalculation=[],this.differenceDiscountAmt=0,this.DiscPer=0,this.AddDiscAmt=0,this.CessAmt=0,this.SalesAmountExclTax=0,this.GSTAmount=0,this.SalesAmountInclTax=0,this.RndOffAmtFlag=!1,this.pageName="",this.EnableDisablePayment=!1,this.EnableSalesTab=!0,this.EnablePurchaseTab=!0,this.EnableOrderAttachmentTab=!0,this.EnableSRAttachmentTab=!0,this.EnableOldGoldAttachmentTab=!0,this.GuaranteeFlag=!1}};B.ctorParameters=()=>[{type:f.a},{type:y.a},{type:g.a},{type:S.a},{type:D.a},{type:P.a},{type:A.c},{type:x.a},{type:v.a},{type:R.a},{type:T.b}],B=n.a([Object(u.Component)({selector:"app-sales-billing",template:n.b(e("Mwp3")).default,styles:[n.b(e("hng7")).default]}),n.c("design:paramtypes",[f.a,y.a,g.a,S.a,D.a,P.a,A.c,x.a,v.a,R.a,T.b])],B);var w=e("5nbR");let I=class{constructor(t,a,e,n){this.formBuilder=t,this._router=a,this._masterService=e,this._salesBillingService=n,this.isActive=!1,this.today=new Date,this.isReprint=!1,this.isChecked=!1,this.isCheckedCHBX=!1,this.PrintDetails=[],this.billNo="",this.datePickerConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,maxDate:new Date(2020,7,28),dateInputFormat:"YYYY-MM-DD"})}ngOnInit(){"/sales-billing/reprintsalesbilling"===this._router.url&&(this.isReprint=!0,this.getApplicationDate()),"/sales-billing"==this._router.url&&(this.isReprint=!1,null!=this.BillNo.billNo&&""!=this.BillNo.billNo&&this._salesBillingService.getBillNoDetails(this.BillNo.billNo).subscribe(t=>{this.PrintDetails=t,console.log(this.PrintDetails),$("#ReprintSalesBillingModal").modal("show"),$("#DisplayData").html(this.PrintDetails)}))}getBillNo(){this._salesBillingService.getBillNo(this.applicationDate,this.isChecked).subscribe(t=>{this.ReprintbillNo=t})}isCheckedCancelledBills(t){this.billNo="",this.isChecked=t.target.checked,this.getBillNo()}getApplicationDate(){this._masterService.getApplicationDate().subscribe(t=>{let a=t;this.applicationDate=a.applcationDate,this.disAppDate=Object(b.formatDate)(a.applcationDate,"dd/MM/yyyy","en_GB"),this.getBillNo()})}onPrint(){null==this.billNo||""==this.billNo?(alert("Please select the bill no."),$("#ReprintSalesBillingModal").modal("hide")):this._salesBillingService.getBillNoDetails(this.billNo).subscribe(t=>{this.PrintDetails=t,$("#ReprintSalesBillingModal").modal("show"),$("#DisplayData").html(this.PrintDetails)})}getBillNos(t){this.billNo=t}print(){let t,a;t=document.getElementById("DisplayData").innerHTML,a=window.open("","_blank","top=0,left=0,height=100%,width=auto"),a.document.open(),a.document.write(`\n      <html>\n        <head>\n          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">\n          <title>Print tab</title>\n          <style>\n         .htmlPrint{display:none;}\n\n          @media print {\n            .table-bordered\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        .margin{\n          margin-top:-24px;\n        }\n        .mb{\n          vertical-align:middle;position:absolute;\n        }\n        tr.spaceUnder>td {\n          padding-bottom: 40px !important;\n        }\n        .top {\n          margin-top:10px;\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .modal-content{\n          font-family: "Times New Roman", Times, serif;\n\n        }\n       .padding-top {\n         padding-top:20px;\n       }\n        .watermark{\n          -webkit-transform: rotate(331deg);\n          -moz-transform: rotate(331deg);\n          -o-transform: rotate(331deg);\n          transform: rotate(331deg);\n          font-size: 15em;\n          color: rgba(255, 5, 5, 0.37);\n          position: absolute;\n          text-transform:uppercase;\n          padding-left: 10%;\n          margin-top:-10px;\n        }\n        .right{\n          text-align:left;\n        }\n        .px-2 {\n          padding-left: 10px !important;\n        }\n        thead > tr\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        table tr td.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr td.borderLeft{\n          border-left: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr td.bottom{\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr th.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        .divborder {\n          border-right: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .lastdivborder{\n          line-height: 1.6;\n        }\n    .border{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n      border-bottom: 3px solid rgb(0, 0, 0) !important;\n    }\n\n    .tdborder{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n    }\n        .invoice {\n          margin-top: 250px;\n      }\n        .card{\n          border-style: solid;\n          border-width: 5px;\n          border: 3px solid rgb(0, 0, 0);\n      }\n        .printMe {\n          display: none !important;\n        }\n      }\n      body{\n            font-size: 15px;\n            line-height: 18px;\n      }\n </style>\n        </head>\n    <body onload="window.print();window.close()">\n\n    ${t}</body>\n      </html>`),a.document.close()}};I.ctorParameters=()=>[{type:i.FormBuilder},{type:A.c},{type:P.a},{type:v.a}],n.a([Object(u.Input)(),n.c("design:type",Object)],I.prototype,"BillNo",void 0),I=n.a([Object(u.Component)({selector:"app-reprint-salesbilling",template:n.b(e("6C4f")).default,styles:[n.b(e("herI")).default]}),n.c("design:paramtypes",[i.FormBuilder,A.c,P.a,v.a])],I);var G=e("09Xa");const k=[{path:"",canActivate:[w.a],canActivateChild:[w.a],canDeactivate:[G.a],component:B,data:{title:"Sales Billing",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Sales Billing"}]}},{path:"reprintsalesbilling",canActivate:[w.a],canActivateChild:[w.a],component:I,data:{title:"Reprint Bill",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Reprint Bill"}]}}];let _=class{};_=n.a([Object(u.NgModule)({imports:[A.d.forChild(k)],exports:[A.d]})],_),e.d(a,"SalesBillingModule",(function(){return F}));let F=class{};F=n.a([Object(u.NgModule)({declarations:[B,I],imports:[d.b,b.CommonModule,_,m.SalesModule,h.PurchaseModule,c.OrdersModule,r.CustomerModule,o.b,l.SalesreturnModule,i.FormsModule,s.a,p.a],exports:[I],schemas:[u.CUSTOM_ELEMENTS_SCHEMA]})],F)},"6C4f":function(t,a,e){"use strict";e.r(a),a.default='<div class="row" style="display:block;margin: auto;width: 30%;">\n  <ng-container *ngIf="isReprint">\n  <form class="form-horizontal">\n      <div class="col-md-12">\n          <div class="card">\n              <div class="card-body">\n                  <div class="row">\n                      <div class="col-md-12">\n                        <div class="form-group">\n                          <label for="OrderNo">Bill Date</label>\n                      <input type="text"  class="form-control"\n                          [(ngModel)]="disAppDate"  [ngModelOptions]="{standalone: true}" readonly/>\n                          </div>\n                          <div class="form-group">\n                            <label for="OrderNo">Bill No</label>\n                            \x3c!-- <input type="number"  class="form-control" [(ngModel)]="billNo" [ngModelOptions]="{standalone: true}"/> --\x3e\n                            <select class="form-control mr-auto mt-2 mt-lg-0" (change)="getBillNos(billNo.value)" #billNo>\n                            <option [ngValue]="0">Select</option>\n                            <option *ngFor="let _ReprintbillNo of ReprintbillNo" [value]="_ReprintbillNo.BillNo">\n                                {{_ReprintbillNo.BillNo}} - {{_ReprintbillNo.CustName}}\n                            </option>\n                        </select>\n                          </div>        \n                          <div class="form-group">\n                            <ul class="list-group">\n                                <li class="list-group-item">\n                                    Cancelled Bills\n                                    <div class="material-switch pull-right">\n                                        <input id="someSwitchOptionDefault" (change)="isCheckedCancelledBills($event)"\n                                            name="someSwitchOption001" type="checkbox" />\n                                        <label for="someSwitchOptionDefault" class="label-default"></label>\n                                    </div>\n                                </li>\n                            </ul>\n\n                        </div>                                           \n                          <div class="form-group">\n                              <button\n                                  class="printMe btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n                                  (click)="onPrint()"><i class="fal fa-print"></i>\n                                  Reprint </button>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n          </div>\n      </div>\n  </form>\n  </ng-container>\n  <div class="modal fade" id="ReprintSalesBillingModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"\n  aria-hidden="true">\n  <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button"\n          class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n          id="exampleModalLabel" (click)=print()><i class="fal fa-print"></i> Print</button>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <span>\n        <div id="DisplayData" class="center" [innerHTML]=\'PrintDetails\'></div>\n      </span>  \n    </div>\n  </div>\n</div>\n</div>'},Mwp3:function(t,a,e){"use strict";e.r(a),a.default='<div style="color: brown; text-align: right; font-style: italic;">\n  <app-lastdocno></app-lastdocno>\n</div>\n\n\n<div class="card">\n  <div class="card-body">\n    <form class="form-horizontal">\n      <div class="row">\n        <div class="col-md-2 ">\n          <div class="form-group">\n            <label for="EstNo">Est No</label>\n            \x3c!-- <input class="form-control" id="exampleAccount" placeholder="Est No" min="0" type="number" #estNo\n              (keyup.enter)="getEstimationDetails(estNo.value)"> --\x3e\n            <input type="number" class="form-control"\n              oninput="this.value = this.value.replace(/[^0-9.]/g, \'\').replace(/(\\..*)\\./g, \'$1\');"\n              (keyup.enter)="getEstimationDetails(estNo.value)" onKeyPress="if(this.value.length==7) return false;"\n              placeholder="Est No" #estNo />\n          </div>\n        </div>\n        <div class="col-md-2">\n          <div class="form-group">\n            <label for="OrderNo">Order No</label>\n            <h2 style="margin-top: 5px;">{{OrderNo}}</h2>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="text-left"><i class="fal fa-calendar-alt"></i>&nbsp;\n            <span class="text-muted">Date</span>\n            <h2 class="font-light">{{ApplicationDate | date:\'dd/MM/yyyy\'}}</h2>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <ng-container *ngIf="PaymentHeader === \'Payments\' && this.SalesBilling.lstOfPayment.length > 0">\n              <label *ngFor="let radiobutton of radioItems" class="form-check-inline">\n                <input type="radio" name="option" (click)="OnRadioBtnChnge(radiobutton)" class="form-check-input"\n                  [value]="radiobutton" [checked]="radiobutton === model.option" [disabled]="true">\n                <h3 style="margin-top: 5px;">{{radiobutton}}</h3>\n              </label>\n            </ng-container>\n            <ng-container *ngIf="PaymentHeader === \'Payments\' && this.SalesBilling.lstOfPayment.length == 0">\n              <label *ngFor="let radiobutton of radioItems" class="form-check-inline">\n                <input type="radio" name="option" (click)="OnRadioBtnChnge(radiobutton)" class="form-check-input"\n                  [value]="radiobutton" [checked]="radiobutton === model.option">\n                <h3 style="margin-top: 5px;">{{radiobutton}}</h3>\n              </label>\n            </ng-container>\n            <ng-container *ngIf="PaymentHeader != \'Payments\'">\n              <label *ngFor="let radiobutton of radioItems" class="form-check-inline">\n                <input type="radio" name="option" (click)="OnRadioBtnChnge(radiobutton)" class="form-check-input"\n                  [value]="radiobutton" [checked]="radiobutton === model.option" [disabled]="true">\n                <h3 style="margin-top: 5px;">{{radiobutton}}</h3>\n              </label>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n<div id="accordian" class="accordion">\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#Customer" (click)="ToggleCustomerData()"\n      [ngClass]="CollapseCustomerDetailsTab ? \'collapsed\' : \'\'"\n      [attr.data-toggle]="CollapseCustomerDetailsTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle Pointer" style="color:#0096FF">\n            <i class="fas fa-2x fa-users mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Customer Details</ins></span>\n          </a>\n        </div>\n        \x3c!-- <ng-container *ngIf=" ToggleCustomer"> --\x3e\n        <ng-container *ngIf="CollapseCustomerTab">\n          <div class="col-md-1 pull-right">\n            \x3c!-- <h4 ><span class="align-middle"> Total Items: {{SalesData.TotalItems}} </span></h4> --\x3e\n          </div>\n          <div class="col-md-2 pull-right" style="color:#0096FF">\n            <h4><span class="align-middle"> Est No: {{EstNo}} </span></h4>\n          </div>\n          <div class="col-md-2 pull-right" *ngIf="CustomerName.ID != 0">\n            <h4><span class="align-middle"> ID: {{CustomerName.ID}}</span></h4>\n          </div>\n          <div class="col-md-3 pull-right" *ngIf="CustomerName.ID != 0">\n            <h4><span class="align-middle"> Customer: {{CustomerName.CustName}}</span></h4>\n          </div>\n        </ng-container>\n        \x3c!-- </ng-container> --\x3e\n      </div>\n    </div>\n    <div id="Customer" class="card-body collapse" [collapse]="CollapseCustomerDetailsTab">\n      <app-customer [filterRadioBtns]="filterRadioBtns">\n      </app-customer>\n    </div>\n  </div>\n  <br>\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#Sales" (click)="ToggleSalesData()"\n      [ngClass]="EnableSalesTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnableSalesTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle" style="color:#005BFF">\n            <i class="fal fa-cash-register fa-2x mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Sales Details</ins></span>\n          </a>\n        </div>\n        <ng-container *ngIf="ToggleSales">\n          <ng-container *ngIf="NoRecordsSales">\n            <div class="col-md-2 pull-right">\n              \x3c!-- <h4 ><span class="align-middle"> Total Items: {{SalesData.TotalItems}} </span></h4> --\x3e\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Gr Wt: {{SalesData.Grwt | number : \'1.3-3\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Net Wt: {{SalesData.NtWt | number : \'1.3-3\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Sales Amt:\n                  {{SalesData.Amount | currencyFormat : SalesData.Amount}}</span>\n              </h4>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n    \x3c!-- <ng-container *ngIf="NoRecordsSales"> --\x3e\n    <div id="Sales" class="card-body collapse" [collapse]="EnableSalesTab">\n      <app-sales (SalesAmountChange)=\'SalesTotalAmountCalculation($event)\'></app-sales>\n    </div>\n    \x3c!-- </ng-container> --\x3e\n  </div>\n  <br>\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#Purchase" (click)="TogglePurchaseData()"\n      [ngClass]="EnablePurchaseTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnablePurchaseTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle Pointer" style="color:#FF00C5">\n            <i class="far fa-shopping-cart fa-2x mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Purchase</ins></span>\n          </a>\n        </div>\n        <ng-container *ngIf="TogglePurchase">\n          <ng-container *ngIf="NoRecordsPurchase">\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> St. Wt:\n                  {{PurchaseData.StoneWt | number : \'1.2-2\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Gr. Wt:\n                  {{PurchaseData.GrossWt | number : \'1.3-3\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Net Wt: {{PurchaseData.NtWt | number : \'1.3-3\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Amt:\n                  {{PurchaseData.Amount | currencyFormat : PurchaseData.Amount}}</span>\n              </h4>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n    <div id="Purchase" class=" collapse" [collapse]="EnablePurchaseTab" style="padding:10px;">\n      <app-purchase (PurchaseAmountChange)=\'PurchaseTotalAmountCalculation($event)\'></app-purchase>\n    </div>\n  </div>\n  <br>\n\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#Orders" (click)="ToggleOrderAttachment()"\n      [ngClass]="EnableOrderAttachmentTab ? \'collapsed\' : \'\'"\n      [attr.data-toggle]="EnableOrderAttachmentTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle Pointer" style="color:#00BBD6" data-toggle="collapse" href="#Orders">\n            <i class="fal fa-file-invoice fa-2x mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Orders</ins></span>\n          </a>\n        </div>\n        <ng-container *ngIf="NoRecordsAttachOrder">\n          <ng-container *ngIf="OrderAttachmentSummaryData">\n            <div class="col-md-8 pull-right">\n              <h4><span class="align-middle"> Amount:\n                  {{OrderAttachmentSummaryData.Amount | number : \'1.2-2\'}}</span>\n              </h4>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n    <div id="Orders" class="card-body collapse" [collapse]="EnableOrderAttachmentTab">\n      <app-attachorder (OrderAmountChange)=\'OrderTotalAmountCalculation($event)\'></app-attachorder>\n    </div>\n  </div>\n  <br>\n\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#SalesReturn" (click)="ToggleSRAttachment()"\n      [ngClass]="EnableSRAttachmentTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnableSRAttachmentTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle Pointer" style="color: #3F51B5;" href="#SalesReturn" data-toggle="collapse">\n            <i class="fas fa-exchange-alt fa-2x mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>SR Est</ins></span>\n          </a>\n        </div>\n        <ng-container *ngIf="NoRecordsAttachSR">\n          <div class="col-md-2 pull-right">\n          </div>\n          <div class="col-md-2 pull-right">\n          </div>\n          <div class="col-md-2 pull-right">\n            <h4><span class="align-middle"> Quantity:\n                {{SRAttachmentSummaryData.Quantity}}</span>\n            </h4>\n          </div>\n          <div class="col-md-2 pull-right">\n            <h4><span class="align-middle"> Amt:\n                {{SRAttachmentSummaryData.Amount | currencyFormat : SRAttachmentSummaryData.Amount}}</span>\n            </h4>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n    <div id="SalesReturn" class="card-body collapse" [collapse]="EnableSRAttachmentTab">\n      <app-attachsalesreturn (SRAmountChange)=\'SRTotalAmountCalculation($event)\'></app-attachsalesreturn>\n    </div>\n  </div>\n  <br>\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#OldGold" (click)="ToggleOldGoldAttachment()"\n      [ngClass]="EnableOldGoldAttachmentTab ? \'collapsed\' : \'\'"\n      [attr.data-toggle]="EnableOldGoldAttachmentTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle" style="color:rgba(47, 0, 255, 0.692)">\n            <i class="far fa-rupee-sign fa-2x mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Old Gold Est.</ins></span>\n          </a>\n        </div>\n        <ng-container *ngIf="NoRecordsAttachOldGold">\n          <div class="col-md-2 pull-right">\n          </div>\n          <div class="col-md-2 pull-right">\n          </div>\n          <div class="col-md-2 pull-right">\n            <h4><span class="align-middle"> Quantity:\n                {{OldGoldAttachmentSummaryData.Quantity}}</span>\n            </h4>\n          </div>\n          <div class="col-md-2 pull-right">\n            <h4><span class="align-middle"> Amount:\n                {{OldGoldAttachmentSummaryData.Amount | currencyFormat : OldGoldAttachmentSummaryData.Amount}}</span>\n            </h4>\n          </div>\n        </ng-container>\n      </div>\n    </div>\n    <div id="OldGold" class="card-body collapse" [collapse]="EnableOldGoldAttachmentTab">\n      <app-attacholdgold (OGAmountChange)=\'OGTotalAmountCalculation($event)\'></app-attacholdgold>\n    </div>\n  </div>\n  <br>\n  <ng-container *ngIf="EnableDisablePayment">\n    <div class="card mb-0">\n      <div class="card-header Pointer" href="#DiscountItem" (click)="DisItemSummary()"\n        [ngClass]="EnableDiscountItemTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnableDiscountItemTab ? \'\':\'collapse\'"\n        style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n        <div class="row">\n          <div class="col-md-4">\n            <a class="card-title align-middle" style="color:rgba(255, 0, 0, 0.466)">\n              <i class="far fa-percent fa-2x mr-2 align-middle"></i>\n              <span class="align-middle Pointer"><ins>Discount/Item Summary</ins></span>\n            </a>\n          </div>\n        </div>\n      </div>\n      <div id="DiscountItem" class="card-body collapse" [collapse]="EnableDiscountItemTab">\n        <div class="row">\n          <div class="col-lg-12 col-md-12" *ngIf="NoSummarySales">\n            <div class="card">\n              <div class="row">\n                <div class="col-12">\n                  <div class="social-widget">\n                    <div class="soc-content">\n                      <div class="col-3 b-r">\n                        <label for="EstNo"><b>Received Amt</b></label>\n                        <input class="form-control" id="exampleAccount" placeholder="0.00" min="0" type="number"\n                          (change)="ReceivedAmt(RecAmt.value)" [readonly]="EnableReceiveAmount" #RecAmt>\n                      </div>\n                      <div class="col-3 b-r">\n                        <label for="EstNo"><b>Disc Per</b></label>\n                        <input class="form-control" id="exampleAccount" [(ngModel)]="DiscPer" readonly\n                          placeholder="0.00" min="0" type="number">\n                      </div>\n                      <div class="col-3 b-r">\n                        <label for="EstNo"><b>Payment Amt</b></label>\n                        <input class="form-control" id="exampleAccount" (change)="paymentAmt(PayAmt.value)"\n                          placeholder="0.00" min="0" type="number" #PayAmt>\n                      </div>\n                      <div class="col-3 b-r">\n                        <label for="EstNo"><b>Remarks</b></label>\n                        <input class="form-control" id="exampleAccount" placeholder="Remarks" min="0" type="number"\n                          #Remarks>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="col-lg-12 col-md-12" *ngIf="NoSummarySales">\n            <div class="card">\n              <div class="row">\n                <div class="col-12">\n                  <div class="social-widget">\n                    <div class="soc-content">\n                      <div class="col-3 b-r">\n                        <label for="EstNo"><b>Order Rate Diff</b></label>\n                        <input class="form-control" id="exampleAccount" placeholder="0" min="0" type="number" #estNo\n                          (keyup.enter)="getEstimationDetails(estNo.value)">\n                      </div>\n                      <div class="col-3 b-r">\n                        <label for="EstNo"><b>Offer Discount</b></label>\n                        <input class="form-control" id="exampleAccount" placeholder="0.00" min="0" type="number" #estNo\n                          (keyup.enter)="getEstimationDetails(estNo.value)">\n                      </div>\n                      <div class="col-3 b-r">\n                        <label for="EstNo"><b>MC Discount</b></label>\n                        <input class="form-control" id="exampleAccount" placeholder="0.00" min="0" type="number" #estNo\n                          (keyup.enter)="getEstimationDetails(estNo.value)">\n                      </div>\n                      <div class="col-3 b-r">\n                        <label for="EstNo"><b>Add.Discount</b></label>\n                        <input class="form-control" id="exampleAccount" [(ngModel)]="AddDiscAmt" readonly\n                          placeholder="0.00" min="0" type="number">\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <br>\n    <ng-container *ngIf="EnableDisablePaymentForOrderAdj">\n      <div class="card mb-0">\n        <div class="card-header Pointer" href="#Payment" (click)="TogglePaymentData()"\n          [ngClass]="EnablePaymentsTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnablePaymentsTab ? \'\':\'collapse\'"\n          style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n          <div class="row">\n            <div class="col-md-2 ">\n              <a class="card-title align-middle" style="color:rgb(0, 204, 255)">\n                <i class="far fa-rupee-sign fa-2x mr-2 align-middle"></i>\n                <span class="align-middle"><ins>{{PaymentHeader}}</ins>\n                  <div class="tooltipdesign"> <i class="fal fa-question-circle"></i>\n                    <span class="tooltiptext tooltip-bottom">Capture the Receipts\n                      ( Payment collection modes) information like Cash , Cheque , Card , Scheme Adj, Purchase Bill\n                      etc</span>\n                  </div>\n                </span>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div id="Payment" class="card-body collapse" [hidden]="EnablePaymentsTab"\n          [ngClass]="EnablePaymentsTab ? \'hide\' : \'show\'">\n          <app-payment (PaidAmountChange)="PaidTotalAmountCalculation($event)" [autoFillAmount]="autoFetchAmount"\n            [autoFillDisAmount]="autoFetchDisAmount" [argPageName]="pageName"></app-payment>\n        </div>\n      </div>\n    </ng-container>\n  </ng-container>\n  <br>\n  <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary" type="button" (click)="Submit()"\n    [hidden]="EnableSubmitButton"><i class="fal fa-save"></i> Submit</button>\n  <br>\n  <br>\n  <div class="row">\n    <div class="col-lg-12 col-md-12" *ngIf="NoSummarySales">\n      <div class="card">\n        <div class="row">\n          <div class="col-12">\n            <div class="social-widget">\n              <div class="soc-header box-facebook" style="padding: 3px;">\n                <h3 class="text-white">Items Summary</h3>\n              </div>\n              <div class="soc-content">\n                <div class="col-2 b-r">\n                  <label for="EstNo"><b>Sales Qty</b></label>\n                  <h4 class="font-medium" *ngIf="NoSummarySales">1</h4>\n                  <h4 class="font-medium" *ngIf="!NoSummarySales">0</h4>\n                </div>\n                <div class="col-3 b-r">\n                  <label for="EstNo"><b>Sales Gr.Wt</b></label>\n                  <h4 class="font-medium" *ngIf="NoSummarySales">{{SalesData.Grwt | number : \'1.3-3\'}}</h4>\n                  <h4 class="font-medium" *ngIf="!NoSummarySales">0.000</h4>\n                </div>\n                <div class="col-2 b-r">\n                  <label for="EstNo"><b>Sales N.Wt</b></label>\n                  <h4 class="font-medium" *ngIf="NoSummarySales">{{SalesData.NtWt | number : \'1.3-3\'}}</h4>\n                  <h4 class="font-medium" *ngIf="!NoSummarySales">0.000</h4>\n                </div>\n                <div class="col-2 b-r">\n                  <label for="EstNo"><b>Purchase Qty</b></label>\n                  <h4 class="font-medium" *ngIf="NoSummaryPurchase">1</h4>\n                  <h4 class="font-medium" *ngIf="!NoSummaryPurchase">0</h4>\n                </div>\n                <div class="col-3 b-r">\n                  <label for="EstNo"><b>Purchase Gr.Wt</b></label>\n                  <h4 class="font-medium" *ngIf="NoSummaryPurchase">{{PurchaseData.GrossWt | number : \'1.3-3\'}}</h4>\n                  <h4 class="font-medium" *ngIf="!NoSummaryPurchase">0.000</h4>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="col-lg-5 col-md-5" *ngIf="NoSummarySales">\n      <div class="card">\n        <div class="row">\n          <div class="col-12">\n            <div class="social-widget">\n              <div class="soc-header box-facebook" style="padding: 3px;">\n                <h3 class="text-white">Sales Summary</h3>\n              </div>\n              <div class="soc-content">\n                <div class="col-3 b-r">\n                  <ng-container *ngIf="!RndOffAmtFlag">\n                    <h4 class="font-medium"> {{SalesData.taxable_Amt | number : \'1.2-2\'}} <h1 class="float-right">+</h1>\n                    </h4>\n                  </ng-container>\n                  <ng-container *ngIf="RndOffAmtFlag">\n                    <h4 class="font-medium"> {{SalesAmountExclTax | number : \'1.2-2\'}} <h1 class="float-right">+</h1>\n                    </h4>\n                  </ng-container>\n                  <h5 class="text-black">Net Sales Amount</h5>\n                </div>\n                <div class="col-3 b-r">\n                  <ng-container *ngIf="!RndOffAmtFlag">\n                    <h4 class="font-medium">{{SalesData.Amount - SalesData.taxable_Amt | number : \'1.2-2\'}}<h1\n                        class="float-right">+</h1>\n                    </h4>\n                  </ng-container>\n                  <ng-container *ngIf="RndOffAmtFlag">\n                    <h4 class="font-medium">{{SalesAmountInclTax - SalesAmountExclTax | number : \'1.2-2\'}}<h1\n                        class="float-right">+</h1>\n                    </h4>\n                  </ng-container>\n                  <h5 class="text-black">Sales GST</h5>\n                </div>\n                <div class="col-3 b-r">\n                  <h4 class="font-medium">{{CessAmt | number : \'1.2-2\'}}<h1 class="float-right">=</h1>\n                  </h4>\n                  <h5 class="text-black">Cess Amount</h5>\n                </div>\n                <div class="col-3 b-r">\n                  <ng-container *ngIf="!RndOffAmtFlag">\n                    <h4 class="font-medium"><b>{{SalesData.Amount | number : \'1.2-2\'}}</b></h4>\n                  </ng-container>\n                  <ng-container *ngIf="RndOffAmtFlag">\n                    <h4 class="font-medium"><b>{{SalesAmountInclTax | number : \'1.2-2\'}}</b></h4>\n                  </ng-container>\n                  <h5 class="text-black">Grand Total</h5>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-lg-7 col-md-7" *ngIf="NoSummarySales">\n      <div class="card">\n        <div class="row">\n          <div class="col-12">\n            <div class="social-widget">\n              <div class="soc-header box-twitter" style="padding: 3px;">\n                <h3 class="text-white">Overall Summary</h3>\n              </div>\n              <div class="soc-content">\n                <div class="col-2 b-r">\n                  <ng-container *ngIf="!RndOffAmtFlag">\n                    <h4 class="font-medium"> <b>{{SalesData.Amount | number : \'1.2-2\'}}</b>\n                      <h1 class="float-right">-</h1>\n                    </h4>\n                  </ng-container>\n                  <ng-container *ngIf="RndOffAmtFlag">\n                    <h4 class="font-medium"> <b>{{SalesAmountInclTax | number : \'1.2-2\'}}</b>\n                      <h1 class="float-right">-</h1>\n                    </h4>\n                  </ng-container>\n                  <h5 class="text-black">Sales Amount </h5>\n                </div>\n                <div class="col-3 b-r">\n                  <h4 class="font-medium" *ngIf="NoSummaryPurchase"><b>{{PurchaseData.Amount | number : \'1.2-2\'}}</b>\n                    <h1 class="float-right">-</h1>\n                  </h4>\n                  <h4 class="font-medium" *ngIf="!NoSummaryPurchase"><b>0.00</b>\n                    <h1 class="float-right">-</h1>\n                  </h4>\n                  <h5 class="text-black">Purchase Amount</h5>\n                </div>\n                <div class="col-2 b-r">\n                  <h4 class="font-medium" *ngIf="NoSummaryOrder"><b>\n                      {{OrderAttachmentSummaryData.Amount | number : \'1.2-2\'}}</b>\n                    <h1 class="float-right">-</h1>\n                  </h4>\n                  <h4 class="font-medium" *ngIf="!NoSummaryOrder"><b> 0.00</b>\n                    <h1 class="float-right">-</h1>\n                  </h4>\n                  <h5 class="text-black">Order Amount</h5>\n                </div>\n                <div class="col-2 b-r">\n                  <h4 class="font-medium" *ngIf="NoSummarySalesReturn"><b>\n                      {{SRAttachmentSummaryData.Amount | number : \'1.2-2\'}}</b>\n                    <h1 class="float-right">-</h1>\n                  </h4>\n                  <h4 class="font-medium" *ngIf="!NoSummarySalesReturn"><b>0.00</b>\n                    <h1 class="float-right">-</h1>\n                  </h4>\n                  <h5 class="text-black">SR Amount</h5>\n                </div>\n                <div class="col-3 b-r">\n                  <h4 class="font-medium" *ngIf="NoSummaryOldGold"><b>\n                      {{OldGoldAttachmentSummaryData.Amount | number : \'1.2-2\'}}</b>\n                  </h4>\n                  <h4 class="font-medium" *ngIf="!NoSummaryOldGold"><b> 0.00</b></h4>\n                  <h5 class="text-black">OG Amount</h5>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="col-lg-12 col-md-12" *ngIf="NoSummarySales">\n      <div class="card">\n        <div class="row">\n          <div class="col-12">\n            <div class="social-widget">\n              <div class="soc-header box-twitter" style="padding: 3px;">\n                <h3 class="text-white">Receivable/Payment Summary</h3>\n              </div>\n              <div class="soc-content">\n                <div class="col-2 b-r">\n                  <ng-container *ngIf="!RndOffAmtFlag">\n                    <h4 class="font-medium"> <b>{{TotalAmount() | number : \'1.2-2\'}}</b>\n                      <h1 class="float-right">-</h1>\n                    </h4>\n                  </ng-container>\n                  <ng-container *ngIf="RndOffAmtFlag">\n                    <h4 class="font-medium"> <b>{{DisTotalAmount() | number : \'1.2-2\'}}</b>\n                      <h1 class="float-right">-</h1>\n                    </h4>\n                  </ng-container>\n                  <h5 class="text-black">Total Amount </h5>\n                </div>\n                <div class="col-3 b-r">\n                  <h4 class="font-medium"><b>{{ReceivedAmount() | number : \'1.2-2\'}}</b>\n                    <h1 class="float-right">=</h1>\n                  </h4>\n                  <h5 class="text-black">Received Amount</h5>\n                </div>\n                <div class="col-2 b-r">\n                  <h4 class="font-medium"><b>\n                      {{BalanceAmount() | number : \'1.2-2\'}}</b>\n                  </h4>\n                  <h5 class="text-black">Balance Amount</h5>\n                </div>\n                <div class="col-2 b-r">\n                  <h4 class="font-medium" *ngIf="PaymentHeader === \'Payments\'"><b>\n                      {{PaidAmount | number : \'1.2-2\'}}</b>\n                  </h4>\n                  <h4 class="font-medium" *ngIf="PaymentHeader != \'Payments\'"><b>\n                      0.00</b>\n                  </h4>\n                  <h5 class="text-black">Paid Amount</h5>\n                </div>\n                <div class="col-3 b-r">\n                  <h4 class="font-medium" *ngIf="PaymentHeader === \'Payments\'"><b>\n                      {{PayableAmount() | number : \'1.2-2\'}}</b></h4>\n                  <h4 class="font-medium" *ngIf="PaymentHeader != \'Payments\'"><b>\n                      0.00</b></h4>\n                  <h5 class="text-black">Payable Amount</h5>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-container *ngIf="EnableReprint">\n  <app-reprint-salesbilling [BillNo]="BillNo"></app-reprint-salesbilling>\n</ng-container>\n\n\n\n<div class="modal overlay" id="GuaranteePopup" role="dialog" data-backdrop="static" data-keyboard="false">\n  <form class="form-horizontal">\n    <div class="modal-dialog ">\n      <div class="modal-content ">\n        \x3c!-- Modal Header --\x3e\n        <div class="modal-header">\n          <h4 class="modal-title">Guarantee Details</h4>\n        </div>\n        \x3c!-- Modal body --\x3e\n        <div class="modal-body">\n          <table class="table">\n            <tbody>\n              <tr>\n                <td class="float-rt">Guarantor Name</td>\n                <td><input type="text" [(ngModel)]="SalesBilling.GuaranteeName" class="form-control"\n                    [ngModelOptions]="{standalone: true}"> </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Due Date</td>\n                <td><input type="text" class="form-control" [(ngModel)]="SalesBilling.DueDate" bsDatepicker\n                    [bsConfig]="datePickerConfig" [ngModelOptions]="{standalone: true}"></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        \x3c!-- Modal footer --\x3e\n        <div class="modal-footer">\n          <div class="input-group">\n            <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary" type="button"\n              (click)="SaveGuarantor()"><i class="fal fa-save"></i> Save</button>\n            <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" type="button"\n              (click)="cancelModal()"><i class="far fa-window-close"></i>\n              Cancel</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n\n\n\n\n\x3c!-- <pre>{{SalesBilling | json}}</pre> --\x3e'},herI:function(t,a,e){"use strict";e.r(a),a.default='body{\r\n    font-size: 5px;\r\n    line-height: 18px;\r\n}\r\n.watermark {\r\n  transform: rotate(331deg);\r\n  font-size: 10em;\r\n  color: rgba(255, 5, 5, 0.37);\r\n  position: absolute;\r\n  text-transform:uppercase;\r\n  padding-left: 10%;\r\n}\r\nthead > tr {\r\n  color:black !important;\r\n  font-weight: 300;\r\n  background-color: blanchedalmond;\r\n}\r\n.center {\r\n  margin: auto;\r\n  width: 70%;\r\n  padding: 5px;\r\n}\r\n.modal-header{\r\npadding-left: 20rem !important;\r\n}\r\n.material-switch > input[type="checkbox"] {\r\ndisplay: none;   \r\n}\r\ntr.spaceUnder>td {\r\npadding-bottom: 0px;\r\n}\r\n.material-switch > label {\r\ncursor: pointer;\r\nheight: 0px;\r\nposition: relative; \r\nwidth: 40px;  \r\n}\r\n.material-switch > label::before {\r\nbackground: rgb(0, 0, 0);\r\nbox-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\r\nborder-radius: 8px;\r\ncontent: \'\';\r\nheight: 16px;\r\nmargin-top: -8px;\r\nposition:absolute;\r\nopacity: 0.3;\r\ntransition: all 0.4s ease-in-out;\r\nwidth: 40px;\r\n}\r\n.material-switch > label::after {\r\nbackground: rgb(255, 255, 255);\r\nborder-radius: 16px;\r\nbox-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\r\ncontent: \'\';\r\nheight: 24px;\r\nleft: -4px;\r\nmargin-top: -8px;\r\nposition: absolute;\r\ntop: -4px;\r\ntransition: all 0.3s ease-in-out;\r\nwidth: 24px;\r\n}\r\n.material-switch > input[type="checkbox"]:checked + label::before {\r\nbackground: inherit;\r\nopacity: 0.5;\r\n}\r\n.material-switch > input[type="checkbox"]:checked + label::after {\r\nbackground: inherit;\r\nleft: 20px;\r\n}'},hng7:function(t,a,e){"use strict";e.r(a),a.default='.card-header{\r\n    border-radius: 15px !important;\r\n  }\r\n  .card{\r\n    border-radius: 15px !important;\r\n  \r\n  }\r\n  .card-body{ \r\n    padding: 10px 30px 0px 30px !important; \r\n    border-bottom: 2px solid black;\r\n    border-radius: 15px;\r\n  }\r\n  .p-38 { height: 38px; }\r\n  .text-white { color: white;}\r\n  .Pointer { cursor: pointer; }\r\n  .footer {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n  }\r\n  .hide{\r\n   display: hide;\r\n  }\r\n  .show{\r\n    display: block;\r\n  }\r\n  .accordion .card-header.collapsed:after {\r\n    /* symbol for "collapsed" panels */\r\n    content: "\\f067"; \r\n    position: absolute;\r\n    right: 20px;\r\n    font-size: 20px;\r\n    font-weight: 400;\r\n  \r\n    line-height: 1;\r\n    margin-top: -25px;\r\n    transition: .3s transform ease-in-out;\r\n  }\r\n  .accordion .card-header:after {\r\n    font-family: \'FontAwesome\';  \r\n    content: "\\f068";\r\n    position: absolute;\r\n    right: 20px;\r\n    font-size: 20px;\r\n    font-weight: 400;\r\n    line-height: 1;\r\n    margin-top: -25px;\r\n  }\r\n  .text-red{\r\n    color:red;\r\n  }\r\n  .text-green{\r\n  color:#16d616; \r\n  }\r\n  \r\n  \r\n  '}}]);