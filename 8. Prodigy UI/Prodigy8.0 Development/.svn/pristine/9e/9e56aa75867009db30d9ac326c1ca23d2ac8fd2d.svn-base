{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{\"2is8\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class=\"card\">\\n  <div class=\"card-body\">\\n    <form [formGroup]=\"PurchaseCancelForm\" class=\"form-horizontal\">\\n      <div class=\"row\">\\n        <div class=\"col-md-2\">\\n          <div class=\"form-group\">\\n            <label for=\"OrderNo\">Bill No</label>\\n            <input type=\"number\" formControlName=\"BillNo\" class=\"form-control\" #BillNo name=\"BillNo\" placeholder=\"Enter Bill Number\">\\n          </div>\\n        </div>\\n        <div class=\"col-md-4\">\\n          <div class=\"form-group\">\\n            <div class=\"input-group\">\\n              <button class=\"btn waves-effect waves-light btn-rounded btn-outline-secondary mt-4\"\\n                (click)=\"getPurchaseDetails(BillNo.value)\"><i class=\"fal fa-search\"></i> Search</button>\\n                <button class=\"btn waves-effect waves-light btn-rounded btn-outline-secondary mt-4\" (click)=\"Clear()\"><i\\n                  class=\"fal fa-clear\"></i> Clear</button>  \\n            </div>            \\n          </div>\\n        </div>\\n        <div class=\"col-md-3 float-right\" *ngIf=\"hasPurchaseDetails\">\\n          <div class=\"\">\\n            <div class=\"text-right\"><i class=\"fal fa-rupee-sign\"></i>&nbsp; <span class=\"text-muted\">\\n                Bill Amount</span>\\n              <h1 class=\"font-light\">{{PurchaseBillData.TotalPurchaseAmount | number : \\'1.2-2\\'}}</h1>              \\n            </div>\\n          </div>\\n        </div>\\n        <div class=\"col-md-3 float-right\" *ngIf=\"hasPurchaseDetails\">\\n          <div class=\"\">\\n            <div class=\"text-right\"><i class=\"fal fa-calendar-alt\"></i>&nbsp; <span class=\"text-muted\">Bill Date</span>\\n              <h1 class=\"font-light\">{{PurchaseBillData.PDate | date:\\'dd/MM/yyyy\\'}}</h1>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\"row\" *ngIf=\"hasPurchaseDetails\">\\n        <div class=\"col-md-4\">\\n          <div class=\"form-group\">\\n            <label for=\"CustomerID\">Name</label>\\n            <div class=\"input-group\">\\n              <input class=\"form-control\" formControlName=\"CustName\" [(ngModel)]=\"PurchaseBillData.CustName\" type=\"text\"\\n                readonly>\\n            </div>\\n          </div>\\n          <div class=\"form-group\">\\n            <label for=\"City\">Address3</label>\\n            <div class=\"input-group\">\\n              <input class=\"form-control\" [(ngModel)]=\"PurchaseBillData.Address3\" formControlName=\"Address3\" type=\"text\"\\n                readonly>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\"col-md-4\">\\n          <div class=\"form-group\">\\n            <label for=\"Name\">Address1</label>\\n            <div class=\"input-group\">\\n              <input class=\"form-control\" formControlName=\"Address1\" [(ngModel)]=\"PurchaseBillData.Address1\" type=\"text\"\\n                readonly>\\n            </div>\\n          </div>\\n          <div class=\"form-group\">\\n            <label for=\"Name\">Phone</label>\\n            <div class=\"input-group\">\\n              <input class=\"form-control\" type=\"text\"\\n                readonly>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\"col-md-4\">\\n          <div class=\"form-group\">\\n            <label for=\"Address\">Address2</label>\\n            <div class=\"input-group\">\\n              <input class=\"form-control\" formControlName=\"Address2\" [(ngModel)]=\"PurchaseBillData.Address2\" type=\"text\"\\n                readonly>\\n            </div>\\n          </div>\\n          <div class=\"form-group\">\\n            <label for=\"Name\">Mobile</label>\\n            <div class=\"input-group\">\\n              <input class=\"form-control\" formControlName=\"Mobile\" [(ngModel)]=\"PurchaseBillData.Mobile_no\" type=\"text\"\\n                readonly>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\"col-md-4\">\\n          <div class=\"form-group\">\\n            <div class=\"form-group\">\\n              <label for=\"Advance\">Remarks</label>\\n              <div class=\"input-group\">\\n                <input class=\"form-control\" formControlName=\"Remarks\" [(ngModel)]=\"PurchaseCancelObj.CancelRemarks\"\\n                  type=\"text\">\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\"row\" *ngIf=\"hasPurchaseDetails\">\\n        <div class=\"col-md-3\">\\n          <div class=\"form-group\">\\n            <div class=\"input-group\">\\n              <button class=\"btn btn-danger waves-effect waves-light btn-rounded btn-secondary\" (click)=\"submitPost()\">\\n                <i class=\"far fa-window-close\"></i> Cancel Purchase Bill</button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </form>\\n  </div>\\n</div>\\n\\n\\x3c!-- <pre>{{PurchaseCancelObj | json}}</pre> --\\x3e'},HGwx:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class=\"row\" style=\"display:block;margin: auto;width: 30%;\">\\n  <ng-container *ngIf=\"isReprint\">\\n    <form class=\"form-horizontal\">\\n      <div class=\"col-md-12\">\\n        <div class=\"card\">\\n          <div class=\"card-body\">\\n            <div class=\"row\">\\n              <div class=\"col-md-12\">\\n                <div class=\"form-group\">\\n                  <label for=\"OrderNo\">Bill Date</label>\\n                  <input type=\"text\" class=\"form-control\" [(ngModel)]=\"disAppDate\"\\n                    [ngModelOptions]=\"{standalone: true}\" readonly />\\n                </div>\\n              </div>\\n            </div>\\n            <div class=\"row\">\\n              <div class=\"col-md-12\">\\n                <div class=\"form-group\">\\n                  <div class=\"input-group\">\\n                    <select class=\"form-control mr-auto mt-2 mt-lg-0\"\\n                        [(ngModel)]=\"reprintHeaders.selectedOption\" [ngModelOptions]=\"{standalone: true}\">\\n                        <option [ngValue]=\"null\">Select Bill No</option>\\n                        <option *ngFor=\"let _BillList of BillList\" [value]=\"_BillList.BillNo\">\\n                            {{_BillList.BillNo}} - {{_BillList.CustName}}\\n                        </option>\\n                    </select>\\n                </div>\\n                </div>\\n                <div class=\"form-group\">\\n                  <ul class=\"list-group\">\\n                    <li class=\"list-group-item\">\\n                      Cancelled Bills\\n                      <div class=\"material-switch pull-right\">\\n                        <input id=\"someSwitchOptionDefault\" (change)=\"isChecked($event)\" name=\"someSwitchOption001\"\\n                          type=\"checkbox\" />\\n                        <label for=\"someSwitchOptionDefault\" class=\"label-default\"></label>\\n                      </div>\\n                    </li>\\n                  </ul>\\n                </div>\\n                <div class=\"form-group\">\\n                  <button class=\"printMe btn btn-success waves-effect waves-light btn-rounded btn-secondary\"\\n                    (click)=\"onPrint(reprintHeaders.selectedOption)\"><i class=\"fal fa-print\"></i>\\n                    Reprint </button>\\n                </div>\\n              </div>\\n            </div>\\n\\n          </div>\\n        </div>\\n      </div>\\n    </form>\\n  </ng-container>\\n  <div class=\"modal fade\" id=\"ReprintPurchaseBillingModal\" tabindex=\"-1\" data-backdrop=\"static\" data-keyboard=\"false\" role=\"dialog\"\\n    aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\\n    <div class=\"modal-dialog modal-lg\" role=\"document\" style=\"max-width: 1400px\">\\n      <div class=\"modal-content\">\\n        <div class=\"modal-header\">\\n          <button type=\"button\"\\n            class=\"btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary\"\\n            id=\"exampleModalLabel\" (click)=print()><i class=\"fal fa-print\"></i> Print</button>\\n          <button type=\"button\" class=\"close\" (click)=\"closePurBillTab()\" data-dismiss=\"modal\" aria-label=\"Close\">\\n            <span aria-hidden=\"true\">&times;</span>\\n          </button>\\n        </div>\\n        <span>\\n          <div id=\"DisplayData\" class=\"center\" [innerHTML]=\\'PrintDetails\\'></div>\\n        </span>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n\\x3c!-- Added for Plain Text printing--\\x3e\\n\\n<div class=\"modal fade\" id=\"PurBillPlainTextTab\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"PurBillPlainTextTabLabel\"\\n    aria-hidden=\"true\">\\n    <div class=\"modal-dialog modal-lg\" role=\"document\" style=\"max-width: 1400px\">\\n        <div class=\"modal-content\">\\n            <div class=\"modal-header\">\\n                <button type=\"button\"\\n                    class=\"btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary\"\\n                    id=\"PurBillPlainTextTabLabel\" (click)=printPurBillPlainText()><i class=\"fal fa-print\"></i> Print</button>\\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\n                    <span aria-hidden=\"true\">&times;</span>\\n                </button>\\n            </div>\\n            <div class=\"container invoice-box htmlPrint\" id=\"print-closed-section\" style=\"max-width: 900px;border-width: 2em\">\\n                   <pre>{{purBillPlainTextDetails}}</pre>                \\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n\\x3c!-- Ends here --\\x3e'},HWQx:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=\".table-responsive {\\r\\n    display: block;\\r\\n    width: 99.9% !important;\\r\\n    overflow-x: auto;\\r\\n    -ms-overflow-style: -ms-autohiding-scrollbar;\\r\\n}\\r\\n\\r\\n.hiddenRow {\\r\\n    padding: 0 !important;\\r\\n  }\\r\\n\\r\\n.wrapper{\\r\\n    margin: auto 3em auto 3em;\\r\\n  }\\r\\n\\r\\n@media (min-width:2200px) and (max-width: 2440px) {\\r\\n    .table-responsive {\\r\\n     overflow-x: hidden !important;\\r\\n  \\r\\n}\\r\\n}\\r\\n\\r\\n@media (min-width: 300px) and (max-width: 2200px) {\\r\\n    .table-responsive {\\r\\n    overflow-x: auto !important;\\r\\n  \\r\\n}}\"},LFAR:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='.card-header{\\r\\n    border-radius: 15px !important;\\r\\n  }\\r\\n  .card{\\r\\n    border-radius: 15px !important;\\r\\n  \\r\\n  }\\r\\n  .card-body{ \\r\\n    padding: 10px 30px 0px 30px !important; \\r\\n    border-bottom: 2px solid black;\\r\\n    border-radius: 15px;\\r\\n  }\\r\\n  .p-38 { height: 38px; }\\r\\n  .text-white { color: white;}\\r\\n  .Pointer { cursor: pointer; }\\r\\n  .footer {\\r\\n    position: fixed;\\r\\n    left: 0;\\r\\n    bottom: 0;\\r\\n  }\\r\\n  .hide{\\r\\n   display: hide;\\r\\n  }\\r\\n  .show{\\r\\n    display: block;\\r\\n  }\\r\\n  .accordion .card-header.collapsed:after {\\r\\n    /* symbol for \"collapsed\" panels */\\r\\n    content: \"\\\\f067\"; \\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    font-size: 20px;\\r\\n    font-weight: 400;\\r\\n  \\r\\n    line-height: 1;\\r\\n    margin-top: -25px;\\r\\n    transition: .3s transform ease-in-out;\\r\\n  }\\r\\n  .accordion .card-header:after {\\r\\n    font-family: \\'FontAwesome\\';  \\r\\n    content: \"\\\\f068\";\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    font-size: 20px;\\r\\n    font-weight: 400;\\r\\n    line-height: 1;\\r\\n    margin-top: -25px;\\r\\n  }\\r\\n  .text-red{\\r\\n    color:red;\\r\\n  }\\r\\n  .text-green{\\r\\n  color:#16d616; \\r\\n  }\\r\\n  \\r\\n  \\r\\n  '},Tsp1:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),auth_guard_service=__webpack_require__(\"5nbR\"),router=__webpack_require__(\"tyNb\"),purchase_service=__webpack_require__(\"db5x\"),customer_service=__webpack_require__(\"E2Nj\"),estimation_service=__webpack_require__(\"SlBg\"),crypto_js=__webpack_require__(\"NFKh\"),master_service=__webpack_require__(\"eya4\"),appSettings=__webpack_require__(\"qLqq\"),payment_service=__webpack_require__(\"3TGi\"),sweetalert_min=__webpack_require__(\"GUC0\"),sweetalert_min_default=__webpack_require__.n(sweetalert_min);let purchase_billing_component_PurchaseBillingComponent=class{constructor(_CustomerService,_purchaseService,_router,_paymentService,_estmationService,_masterService){this._CustomerService=_CustomerService,this._purchaseService=_purchaseService,this._router=_router,this._paymentService=_paymentService,this._estmationService=_estmationService,this._masterService=_masterService,this.autoFetchAmount=0,this.toggle=!1,this.filterRadioBtns=!1,this.PaymentHeader=\"\",this.SalesData={},this.PurchaseData={},this.OrderAttachmentSummaryData={},this.SRAttachmentSummaryData={},this.OldGoldAttachmentSummaryData={},this.pageName=\"OC\",this.NoRecordsCustomer=!1,this.NoRecordsPurchase=!1,this.EnableReprint=!1,this.EnableDisablePayment=!1,this.password=appSettings.a.Pwd,this.model={option:\"Payment\"},this.ccode=\"\",this.bcode=\"\",this.today=new Date,this.estDate=\"\",this.ordDate=\"\",this.ShowHide=!0,this.NewEstimation=!1,this.ExistingEstimation=!1,this.OrderNo=!1,this.ApplicationDate=\"\",this.estDetails=[],this.SalesPerson=\"\",this.purchaseDetails=[],this.customerDtls=[],this.SalesManList=[],this.ParentJSON=[],this.EnableSubmitButton=!0,this.NoRecordsPaymentSummary=!1,this.PaymentSummary=[],this.PaidAmount=0,this.ToggleTotal=!0,this.CollapseCustomerTab=!0,this.CollapseCustomerDetailsTab=!0,this.EnableSalesTab=!1,this.EnableOrderAttachmentTab=!0,this.EnableSRAttachmentTab=!0,this.EnableOldGoldAttachmentTab=!0,this.NoRecordsSales=!1,this.NoSummarySales=!1,this.NoSummaryOrder=!1,this.NoSummaryPurchase=!1,this.NoSummarySalesReturn=!1,this.NoSummaryOldGold=!1,this.NoRecordsAttachSR=!1,this.NoRecordsAttachOldGold=!1,this.ToggleAttachOrder=!0,this.NoRecordsAttachOrder=!1,this.ReceivableAmount=0,this.TogglePurchase=!1,this.EnablePurchaseTab=!1,this.PurchaseBilling={CompanyCode:\"\",BranchCode:\"\",EstNo:null,OperatorCode:localStorage.getItem(\"Login\"),BillCounter:null,Type:\"PE\",BillNo:0,CustName:null,PaidAmount:0,CancelRemarks:null,lstOfPayment:[]},this.PurchaseTotAmount=0,this.NoRecordsPayments=!0,this.EnablePaymentsTab=!0,this.BalAmount=0,this.radioItems=[\"Payment\",\"Adjust\"],this.getCB()}ngOnInit(){this.PurchaseData={Amount:0},this.NewEstimation=!0,$((function(){$(\"#datepicker\").datepicker()})),this.GetCustomerDetsFromCustComp(),this.GetPurchaseDetsFromPurchaseComp(),this.GetParentJson(),this.GetPaymentSummary(),this.getSalesMan(),this.getApplicationdate()}getPurchaseEstimationDetails(arg){this.EnableDisablePayment=!1,null!=arg&&\"0\"!=arg&&this._purchaseService.getPurchaseDetailsfromAPI(arg).subscribe(response=>{this.purchaseDetails=response,null!=this.purchaseDetails&&(this.PurchaseBilling.CompanyCode=this.ccode,this.PurchaseBilling.BranchCode=this.bcode,this.SalesPerson=this.purchaseDetails.lstPurchaseEstDetailsVM[0].SalCode,this.PurchaseBilling.EstNo=arg,\"Payment\"==this.model.option?this.EnableDisablePayment=!0:this.EnableDisablePayment=!1,this._estmationService.SendEstNo(arg),this._CustomerService.getCustomerDtls(this.purchaseDetails.CustID).subscribe(response=>{this.customerDtls=response,this._CustomerService.sendCustomerDtls_To_Customer_Component(this.customerDtls),this._paymentService.inputData(this.PurchaseBilling)}))})}getSalesMan(){this._masterService.getSalesMan().subscribe(response=>{this.SalesManList=response})}getApplicationdate(){this._masterService.getApplicationDate().subscribe(response=>{let appDate=response;this.ordDate=appDate.applcationDate,this.ApplicationDate=Object(common.formatDate)(this.ordDate,\"dd/MM/yyyy\",\"en_GB\")})}GetParentJson(){this._paymentService.castParentJSON.subscribe(response=>{this.ParentJSON=response})}GetPaymentSummary(){this._paymentService.CastPaymentSummaryData.subscribe(response=>{this.PaymentSummary=response,0==this.isEmptyObject(this.PaymentSummary)&&null!=this.isEmptyObject(this.PaymentSummary)?null==this.PaymentSummary.Amount?(this.NoRecordsPaymentSummary=!1,this.EnableSubmitButton=!0):(this.NoRecordsPaymentSummary=!0,this.EnableSubmitButton=!1,this.PaidAmount=this.PaymentSummary.Amount):(this.NoRecordsPaymentSummary=!1,this.EnableSubmitButton=!0)})}ToggleTotalFunction(){this.ToggleTotal=!this.ToggleTotal}ToggleCustomerData(){1==this.NoRecordsCustomer&&(this.filterRadioBtns=!0,this.CollapseCustomerTab=!this.CollapseCustomerTab,this.CollapseCustomerDetailsTab=!this.CollapseCustomerDetailsTab)}TogglePurchaseData(){this.EnablePurchaseTab=!this.EnablePurchaseTab}ngOnDestroy(){this._CustomerService.SendCustDataToEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this._purchaseService.sendPurchaseDatatoEstComp(null),this._estmationService.SendEstNo(null),this._estmationService.SendOldGoldAttachmentSummaryData(null),this._paymentService.outputData(null),this._paymentService.inputData(null),this._paymentService.OutputParentJSONFunction(null),this._paymentService.SendPaymentSummaryData(null),this.model.option=\"Payment\",this.PurchaseBilling={CompanyCode:\"\",BranchCode:\"\",EstNo:null,OperatorCode:localStorage.getItem(\"Login\"),BillCounter:null,Type:\"PE\",BillNo:0,CustName:null,PaidAmount:0,CancelRemarks:null,lstOfPayment:[]},this.ClearValues()}isEmptyObject(obj){return obj&&0===Object.keys(obj).length}getCB(){this.ccode=crypto_js.AES.decrypt(localStorage.getItem(\"ccode\"),this.password.trim()).toString(crypto_js.enc.Utf8),this.bcode=crypto_js.AES.decrypt(localStorage.getItem(\"bcode\"),this.password.trim()).toString(crypto_js.enc.Utf8),this.PurchaseBilling.CompanyCode=this.ccode,this.PurchaseBilling.BranchCode=this.bcode}EnablePurchase(){this.EnableSalesTab=!1,this.EnablePurchaseTab=!1,this.NoRecordsSales=!1,this.TogglePurchase=!1,this.NoRecordsPurchase=!1}GetCustomerDetsFromCustComp(){this._CustomerService.cast.subscribe(response=>{this.CustomerName=response,0==this.isEmptyObject(this.CustomerName)&&null!=this.isEmptyObject(this.CustomerName)?(this.EnableSalesTab=!1,this.CollapseCustomerTab=!0,this.NoRecordsCustomer=!0,this.NoRecordsSales=!0,this.CollapseCustomerDetailsTab=!0):(this.EnableSalesTab=!0,this.CollapseCustomerTab=!1,this.NoRecordsCustomer=!1,this.NoRecordsSales=!1,this.EnablePurchaseTab=!0)})}GetPurchaseDetsFromPurchaseComp(){this._purchaseService.cast.subscribe(response=>{this.PurchaseData=response,0==this.isEmptyObject(this.PurchaseData)&&null!=this.isEmptyObject(this.PurchaseData)?(this.NoRecordsPurchase=!0,this.TogglePurchase=!0,this.EnablePurchaseTab=!0,this.NoSummaryPurchase=!0,this.indicator=\"P\"):(this.NoRecordsPurchase=!1,this.TogglePurchase=!1,this.EnablePurchaseTab=!0,this.NoSummaryPurchase=!1)})}PurchaseTotalAmountCalculation(Amount){this.PurchaseTotAmount=Math.round(Amount)}TogglePaymentData(){0==this.NoRecordsPayments?sweetalert_min_default()(\"Warning\",\"Please select Item Details \",\"warning\"):this.EnablePaymentsTab=!1}BalanceAmount(){return this.BalAmount=Math.round(this.PurchaseTotAmount)-this.PaidAmount,this.autoFetchAmount=this.BalAmount,this.BalAmount}PaidTotalAmountCalculation(Amount){this.PaidAmount=Amount,this.PurchaseBilling.PaidAmount=this.PaidAmount,this.BalanceAmount()}OnRadioBtnChnge(arg){\"Adjust\"==arg?(this.EnableDisablePayment=!1,this.model.option=arg):(this.EnableDisablePayment=!0,this.model.option=arg)}Submit(){\"Payment\"==this.model.option?0==this.BalAmount||0==this.BalAmount?this.SavePurchaseBilling():this.BalAmount<0?sweetalert_min_default()(\"Warning\",\"Paid amount Should not be greater than the balance amount\",\"warning\"):this.BalAmount>0&&sweetalert_min_default()(\"Warning\",\"Please make full payment to save the bill\",\"warning\"):this.SavePurchaseBilling()}SavePurchaseBilling(){confirm(\"Do you want to save??\")&&null==this.BillNo&&this._purchaseService.postPurchaseBilling(this.PurchaseBilling).subscribe(response=>{this.BillNo=response,null!=this.BillNo.billNo&&0!=this.BillNo.billNo&&(this.EnableReprint=!0,sweetalert_min_default()(\"Submitted!\",\"Bill No: \"+this.BillNo.billNo+\" generated successfully!\",\"success\"),this.ngOnDestroy())})}ClearValues(){this.ReceivableAmount=0,this.PaidAmount=0,this.PurchaseTotAmount=0,this.BalAmount=0,this.pageName=\"\",this.EnableDisablePayment=!1,this.EnablePurchaseTab=!0,this.SalesManList=[],this.getSalesMan(),this.GetCustomerDetsFromCustComp(),this.GetPurchaseDetsFromPurchaseComp(),this.GetParentJson(),this.GetPaymentSummary(),this.getApplicationdate(),this.getCB(),this.pageName=\"OC\"}};purchase_billing_component_PurchaseBillingComponent.ctorParameters=()=>[{type:customer_service.a},{type:purchase_service.a},{type:router.c},{type:payment_service.a},{type:estimation_service.a},{type:master_service.a}],purchase_billing_component_PurchaseBillingComponent=tslib_es6.a([Object(core.Component)({selector:\"app-purchase-billing\",template:tslib_es6.b(__webpack_require__(\"x3mp\")).default,styles:[tslib_es6.b(__webpack_require__(\"LFAR\")).default]}),tslib_es6.c(\"design:paramtypes\",[customer_service.a,purchase_service.a,router.c,payment_service.a,estimation_service.a,master_service.a])],purchase_billing_component_PurchaseBillingComponent);var sales_service=__webpack_require__(\"NQ5e\"),ngx_toastr=__webpack_require__(\"5eHb\");let purchase_component_PurchaseComponent=class{constructor(_purchaseService,formBuilder,toastr,_CustomerService,_salesService,_router,_masterService,_estimationService){this._purchaseService=_purchaseService,this.formBuilder=formBuilder,this.toastr=toastr,this._CustomerService=_CustomerService,this._salesService=_salesService,this._router=_router,this._masterService=_masterService,this._estimationService=_estimationService,this.count=0,this.Rate=0,this.CustomerDets=[],this.purchaseDetails=[],this.DmCarats=0,this.LinesDetails=[],this.EnableReprint=!1,this.EnableDisablectrls=!0,this.StoneCarats=0,this.EnableDisablePurPer=!1,this.leavePage=!1,this.valueChange=new core.EventEmitter,this.ccode=\"\",this.bcode=\"\",this.password=appSettings.a.Pwd,this.model={option:\"New Estimation\"},this.NewEstimation=!0,this.PurchaseSummaryData={GrossWt:null,NtWt:null,StoneWt:null,carats:null,Amount:0},this.ToggleTotal=!0,this.CollapseCustomerTab=!0,this.CollapseCustomerDetailsTab=!0,this.ToggleEstimation=!1,this.PurchaseAmount=0,this.PurchaseTotalAmount=0,this.PurchaseAmountChange=new core.EventEmitter,this.DiamondAmount=0,this.ItemAmount=0,this.StoneAmount=0,this.ifPurchase=!1,this.EnableDisableSalesPerson=!1,this.ReprintData={EstNo:null,EstType:null},this.arrayObj=[],this.customerDtls=[],this.ShowHidePurEst=!0,this.RateTypeData=[{name:\"Exchange Rate\",value:\"E\"},{name:\"Cash Rate\",value:\"C\"}],this.EnablePurchaseRate=!1,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableRateType=!1,this.EnableSubmitButton=!0,this.fieldArray=[],this.newAttribute={SalCode:null,GSCode:null,ItemName:null,GrossWt:null,StneWt:null,NetWt:null,PurityPercent:null,MeltingPercent:null,CompanyCode:this.ccode,BranchCode:this.bcode,MeltingLoss:null,PurchaseRate:null,DiamondAmount:null,Dcts:null,GoldAmount:null,ItemAmount:null,lstPurchaseEstStoneDetailsVM:[],lstPurchaseEstDiamondDetailsVM:[]},this.StandardMeltingLoss=2,this.PurityPercent=0,this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.CopyEditedRow=[],this.EnableDiamondTab=!1,this.EnableStoneTab=!1,this.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]},this.purchaseEstimationPlainTextDetails=[],this.stwt=0,this.dcts=0,this.Flag=!1,this.rndoff=0,this.radioItems=[\"New Estimation\",\"Existing Estimation\"],this.getCB(),this.EnableRateTypeBasedonRoute()}ToggleCustomerData(){this.CollapseCustomerTab=!this.CollapseCustomerTab,this.CollapseCustomerDetailsTab=!this.CollapseCustomerDetailsTab}OnRadioBtnChnge(arg){\"New Estimation\"==arg?this._router.navigateByUrl(\"/redirect\",{skipLocationChange:!0}).then(()=>{this._router.navigate([\"/purchase\"]),this.model.option=arg,this.ToggleEstimation=!1,this.NewEstimation=!0,this.ShowHidePurEst=!0}):(this.model.option=arg,this.ToggleEstimation=!0,this._CustomerService.SendCustDataToEstComp(null),this.NewEstimation=!1,this.ShowHidePurEst=!1)}valueChanged(Amount){this.PurchaseAmount=Amount,this.valueChange.emit(this.PurchaseAmount)}confirmBeforeLeave(){return 1!=this.leavePage||!!confirm(\"You have unsaved changes! If you leave, your changes will be lost.\")&&(this.leavePage=!1,!0)}PurchaseAmountChanged(SalesAmount){this.PurchaseTotalAmount=SalesAmount,this.PurchaseAmountChange.emit(this.PurchaseTotalAmount)}receiveStoneDiamondAmt(){for(var field in this.fieldArray){if(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[field].lstPurchaseEstDiamondDetailsVM.length>0)for(var i=0;i<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[field].lstPurchaseEstDiamondDetailsVM.length;i++)this.DiamondAmount+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[field].lstPurchaseEstDiamondDetailsVM[i].Amount);else this.DiamondAmount=0;if(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[field].lstPurchaseEstStoneDetailsVM.length>0)for(i=0;i<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[field].lstPurchaseEstStoneDetailsVM.length;i++)this.StoneAmount+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[field].lstPurchaseEstStoneDetailsVM[i].Amount);else this.StoneAmount=0;this.fieldArray[field].DiamondAmount=this.DiamondAmount+this.StoneAmount,this.recalculate(field),this.DiamondAmount=0,this.StoneAmount=0}}EnableDisableStnBtn(arg){this.EnableStneSubmit=arg}EnableDisableDmdBtn(arg){this.EnableDmdSubmit=arg}ngOnInit(){this.getApplicationDate(),this.PurchaseSummaryData={GrossWt:null,NtWt:null,StoneWt:null,carats:null,Amount:0},\"/purchase\"===this._router.url?(this.ifPurchase=!0,this.EnableDisableSalesPerson=!1,this.PurSalCode=\"A\",this._CustomerService.cast.subscribe(response=>{this.customerDtls=response})):this.EnableDisableSalesPerson=!0,this._salesService.EstNo.subscribe(response=>{this.SalesEstNo=response}),this._estimationService.SubjectEstNo.subscribe(response=>{this.SalesEstNo=response,null!=this.SalesEstNo&&\"0\"!=this.SalesEstNo&&\"/purchase\"!=this._router.url&&this._estimationService.getEstimationDetailsfromAPI(this.SalesEstNo).subscribe(response=>{this.arrayObj=response,null!=this.arrayObj&&(this.PurSalCode=this.arrayObj.salesEstimatonVM[0].SalCode)})}),this.Index=-1,this.PurchaseForm=this.formBuilder.group({GS:[null,fesm2015_forms.Validators.required],SalCode:[null,fesm2015_forms.Validators.required],RateType:[\"E\",fesm2015_forms.Validators.required],Item:[null,fesm2015_forms.Validators.required],RatePerGram:[null,fesm2015_forms.Validators.required]}),this.getGSList(),this.getSalesMan(),this._CustomerService.cast.subscribe(response=>{this.CustomerDets=response,null!=this.CustomerDets?(this.PurchaseLinesPost.CustID=this.CustomerDets.ID,this.PurchaseLinesPost.MobileNo=this.CustomerDets.MobileNo,this.PurchaseLinesPost.OperatorCode=localStorage.getItem(\"Login\"),this.PurchaseLinesPost.CompanyCode=this.ccode,this.PurchaseLinesPost.BranchCode=this.bcode):(this.PurchaseLinesPost.CustID=null,this.PurchaseLinesPost.OperatorCode=localStorage.getItem(\"Login\"),this.PurchaseLinesPost.CompanyCode=this.ccode,this.PurchaseLinesPost.BranchCode=this.bcode)}),this._estimationService.SubjectEstNo.subscribe(response=>{this.SalesEstNo=response,null!=this.SalesEstNo&&\"0\"!=this.SalesEstNo&&this._purchaseService.getPurchaseDetailsfromAPI(this.SalesEstNo).subscribe(response=>{if(this.purchaseDetails=response,null!=this.purchaseDetails){if(this.purchaseDetails.lstPurchaseEstDetailsVM.length>0){for(var field in this.fieldArray=this.purchaseDetails.lstPurchaseEstDetailsVM,this._purchaseService.sendPurchaseDatatoEstComp(this.PurchaseSummaryData),this.getItemExistingList(this.fieldArray[0].GSCode),this.fieldArray)this.EnableEditDelbtn[field]=!0,this.EnableSaveCnlbtn[field]=!1,this.readonly[field]=!0;this.PurchaseForm.controls.GS.setValue(this.fieldArray[0].GSCode),this.PurchaseForm.controls.SalCode.setValue(this.fieldArray[0].SalCode),this.PurchaseForm.controls.Item.setValue(this.purchaseDetails.PurItem),this.PurchaseForm.controls.RateType.setValue(\"E\"),this.Rate=this.purchaseDetails.TodayRate,this.EnableDropdown=!0,this.PurchaseLinesPost.TotalPurchaseAmount=this.purchaseDetails.TotalPurchaseAmount,this.PurchaseLinesPost.GrandTotal=this.purchaseDetails.GrandTotal,this.PurchaseLinesPost.TodayRate=this.Rate,this.PurchaseLinesPost.PType=this.PurchaseForm.value.RateType,this.PurchaseLinesPost.PurItem=this.PurchaseForm.value.Item,this.PurchaseLinesPost.EstNo=this.SalesEstNo,this.PurchaseLinesPost.lstPurchaseEstDetailsVM=this.fieldArray,this.EnableSubmitButton=!1}}else this.fieldArray=[],this.PurchaseForm.reset()},err=>{404===err.status&&(this.PurchaseForm.reset(),this.PurchaseForm=this.formBuilder.group({GS:[null,fesm2015_forms.Validators.required],SalCode:[null,fesm2015_forms.Validators.required],RateType:[\"E\",fesm2015_forms.Validators.required],Item:[null,fesm2015_forms.Validators.required],RatePerGram:[null,fesm2015_forms.Validators.required]}),this.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:\"E\",CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]})})}),\"/sales-billing\"!=this._router.url&&\"/purchase/purchase-billing\"!=this._router.url||(this.EnableDisablectrls=!1),\"/estimation\"==this._router.url&&(this.EnableDisablectrls=!0)}getApplicationDate(){this._masterService.getApplicationDate().subscribe(response=>{let appDate=response;this.applicationDate=appDate.applcationDate})}EstimationDetails(arg){this.SalesEstNo=arg,null!=this.SalesEstNo&&\"0\"!=this.SalesEstNo&&\"\"!=this.SalesEstNo&&this._purchaseService.getPurchaseDetailsfromAPI(this.SalesEstNo).subscribe(response=>{this.purchaseDetails=response,null!=this.purchaseDetails?(this.leavePage=!0,this.ShowHidePurEst=!0,this._estimationService.SendEstNo(this.SalesEstNo),this._CustomerService.getCustomerDtls(this.purchaseDetails.CustID).subscribe(response=>{for(var field in this.customerDtls=response,this._CustomerService.sendCustomerDtls_To_Customer_Component(this.customerDtls),this.fieldArray=this.purchaseDetails.lstPurchaseEstDetailsVM,this._purchaseService.sendPurchaseDatatoEstComp(this.PurchaseSummaryData),this.getItemExistingList(this.fieldArray[0].GSCode),this.fieldArray)this.EnableEditDelbtn[field]=!0,this.EnableSaveCnlbtn[field]=!1,this.readonly[field]=!0;this.PurchaseForm.controls.GS.setValue(this.fieldArray[0].GSCode),this.PurchaseForm.controls.SalCode.setValue(this.fieldArray[0].SalCode),this.PurchaseForm.controls.Item.setValue(this.purchaseDetails.PurItem),this.PurchaseForm.controls.RateType.setValue(\"E\"),this.Rate=this.purchaseDetails.TodayRate,this.EnableDropdown=!0,this.PurchaseLinesPost.TotalPurchaseAmount=this.purchaseDetails.TotalPurchaseAmount,this.PurchaseLinesPost.GrandTotal=this.purchaseDetails.GrandTotal,this.PurchaseLinesPost.TodayRate=this.Rate,this.PurchaseLinesPost.PType=this.PurchaseForm.value.RateType,this.PurchaseLinesPost.PurItem=this.PurchaseForm.value.Item,this.PurchaseLinesPost.EstNo=this.SalesEstNo,this.PurchaseLinesPost.lstPurchaseEstDetailsVM=this.fieldArray,this.EnableSubmitButton=!1,this.EnableRateTypeBasedonRoute()})):\"/purchase\"==this._router.url&&(this.toastr.warning(\"Purchase Estimation No does not exists.\",\"Alert!\"),this.ShowHidePurEst=!1,this.ClearValues())},err=>{if(404===err.status){const validationError=err.error;\"Estimation No Does Not Exist\"!=validationError.description&&(sweetalert_min_default()(\"Warning!\",validationError.description,\"warning\"),this.ShowHidePurEst=!1,this.ClearValues())}})}ngOnDestroy(){this._salesService.SendEstNo_To_Purchase(null),this._purchaseService.sendPurchaseDatatoEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this._CustomerService.SendCustDataToEstComp(null),this._estimationService.SendEstNo(0)}getGSList(){this._masterService.getNewGsList().subscribe(response=>{this.GSList=response,this.PurchaseForm.controls.GS.setValue(\"OGO\"),this.getItemList(this.PurchaseForm)})}getItemList(arg){this.PurchaseLinesPost.PurItem=arg.value.GS,this._masterService.getItemfromAPI(arg.value).subscribe(response=>{this.ItemList=response})}getItemExistingList(arg){this._masterService.getItemfromExistingAPI(arg).subscribe(response=>{this.ItemList=response})}getSalesMan(){this._masterService.getSalesMan().subscribe(response=>{this.SalesManList=response})}toggleRateType(arg){this.Rate=0}AJAXRateperGram(arg,index){this.ItemType=arg,this.Karat=this.ItemList.filter(Item=>Item.Item_code===arg),this.ItemName=this.Karat[0].Karat,this.Rate=null,this._masterService.RefreshRateperGram(this.PurchaseForm.value,this.ItemName).subscribe(response=>{this.Rate=response,this.Rate=this.Rate.Rate,this.EnableDisablePurPer=!1,this.fieldArray[index].PurityPercent=0,this.fieldArray[index].GrossWt=null,this.fieldArray[index].StneWt=null,this.fieldArray[index].Dcts=null,this.fieldArray[index].NetWt=null,this.fieldArray[index].MeltingPercent=0,this.fieldArray[index].MeltingLoss=0,this.fieldArray[index].PurchaseRate=0,this.fieldArray[index].ItemAmount=0,\"24K\"!=this.fieldArray[index].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.EnableDisablePurRate()},err=>{if(400===err.status){const validationError=err.error;alert(validationError.description)}})}EnableDisablePurRate(){\"/purchase\"==this._router.url?this.EnablePurchaseRate=!1:this.EnablePurchaseRate=!0}ItemAmountCalc(index){this.fieldArray[index].PurchaseRate>this.Rate?(this.toastr.warning(\"Purchase rate should not be greater than \"+this.Rate+\".00\",\"Alert!\"),this.fieldArray[index].ItemAmount=0):this.fieldArray[index].ItemAmount=Number(this.fieldArray[index].NetWt*this.fieldArray[index].PurchaseRate).toFixed(2)}getRateperGram(form){this.Rate=null,this._masterService.RefreshRateperGram(form.value,this.ItemName).subscribe(response=>{this.Rate=response,this.Rate=this.Rate.Rate},err=>{if(400===err.status){const validationError=err.error;alert(validationError.description)}})}add(form){null==form.value.SalCode?this.toastr.warning(\"Please select Sales Person\",\"Alert!\"):null==form.value.GS?this.toastr.warning(\"Please select GS\",\"Alert!\"):this.addrow()}getCB(){this.ccode=crypto_js.AES.decrypt(localStorage.getItem(\"ccode\"),this.password.trim()).toString(crypto_js.enc.Utf8),this.bcode=crypto_js.AES.decrypt(localStorage.getItem(\"bcode\"),this.password.trim()).toString(crypto_js.enc.Utf8)}addrow(){this.newAttribute={SalCode:null,GSCode:null,ItemName:null,GrossWt:null,StneWt:null,NetWt:null,PurityPercent:null,MeltingPercent:null,CompanyCode:this.ccode,BranchCode:this.bcode,MeltingLoss:null,PurchaseRate:null,DiamondAmount:null,Dcts:null,GoldAmount:null,ItemAmount:null,lstPurchaseEstStoneDetailsVM:[],lstPurchaseEstDiamondDetailsVM:[]},this.fieldArray.push(this.newAttribute);for(let{}of this.fieldArray)this.count++;this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableRateTypeBasedonRoute(),this.leavePage=!0}GetNetWT(index){this.fieldArray[index].PurityPercent=0;const GrossWt=this.fieldArray[index].GrossWt,StneWt=this.fieldArray[index].StneWt;parseInt(StneWt)>parseInt(GrossWt)?(sweetalert_min_default()(\"Input Error\",\"Stone Wt cannot be greater than Gross Wt.\",\"error\"),this.fieldArray[index].StneWt=null):(this.fieldArray[index].NetWt=Number(GrossWt-StneWt),\"OG24K\"!=this.fieldArray[index].ItemName&&\"OGOL\"!=this.fieldArray[index].ItemName&&\"OGCN24K\"!=this.fieldArray[index].ItemName&&\"OGCN\"!=this.fieldArray[index].ItemName?(this.GetMLLoss_MLPercentage(index),this.EnableDisablePurPer=!0):this.EnableDisablePurPer=!1)}recalculate(index){if(\"OG24K\"==this.fieldArray[index].ItemName||\"OGOL\"==this.fieldArray[index].ItemName||\"OGCN24K\"==this.fieldArray[index].ItemName||\"OGCN\"==this.fieldArray[index].ItemName?(\"OG24K\"==this.fieldArray[index].ItemName||\"OGCN\"==this.fieldArray[index].ItemName||this.fieldArray[index].ItemName,this.fieldArray[index].ItemAmount=Number(this.fieldArray[index].NetWt*this.fieldArray[index].PurchaseRate).toFixed(2)):(\"BJOR\"==this.fieldArray[index].ItemName||\"OG22\"==this.fieldArray[index].ItemName||\"OG18\"==this.fieldArray[index].ItemName||\"BJ18K\"==this.fieldArray[index].ItemName)&&(this.fieldArray[index].ItemAmount=Number(this.fieldArray[index].PurchaseRate*this.fieldArray[index].NetWt)),null!=this.fieldArray[index].DiamondAmount){const DmdAmt=this.fieldArray[index].DiamondAmount,ItmAmt=this.fieldArray[index].ItemAmount;this.fieldArray[index].ItemAmount=parseFloat((+ItmAmt+ +DmdAmt).toFixed(2))}}GetMLLoss_MLPercentage(index){this.fieldArray[index].PurityPercent>100?(sweetalert_min_default()(\"Input Error\",\"Purity Percentage should not be greater than 100 %\",\"error\"),this.fieldArray[index].PurityPercent=null,this.PurityPercent=null):this.fieldArray[index].PurityPercent>=100&&\"OG24K\"!=this.fieldArray[index].ItemName?(sweetalert_min_default()(\"Input Error\",\"Purity Percentage has to be less than 100\",\"error\"),this.fieldArray[index].PurityPercent=null,this.PurityPercent=null):(\"OG24K\"==this.fieldArray[index].ItemName||\"OGOL\"==this.fieldArray[index].ItemName||\"OGCN24K\"==this.fieldArray[index].ItemName||\"OGCN\"==this.fieldArray[index].ItemName?(this.PurityPercent=this.fieldArray[index].PurityPercent,this.EnableDisablePurPer=!1,\"OG24K\"==this.fieldArray[index].ItemName?(this.fieldArray[index].PurchaseRate=Number(this.Rate*this.PurityPercent/100).toFixed(2),this.fieldArray[index].MeltingPercent=Number(100*(this.Rate-this.fieldArray[index].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[index].MeltingLoss=Math.abs(Number(this.fieldArray[index].NetWt*this.fieldArray[index].MeltingPercent/100)).toFixed(3),this.fieldArray[index].ItemAmount=Number(this.fieldArray[index].NetWt*this.fieldArray[index].PurchaseRate).toFixed(2)):\"OGCN\"==this.fieldArray[index].ItemName?(this.fieldArray[index].PurchaseRate=Number(this.Rate*this.PurityPercent/91.6).toFixed(2),this.fieldArray[index].MeltingPercent=Number(100*(this.Rate-this.fieldArray[index].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[index].MeltingLoss=Math.abs(Number(this.fieldArray[index].NetWt*this.fieldArray[index].MeltingPercent/100)).toFixed(3),this.fieldArray[index].ItemAmount=Number(this.fieldArray[index].NetWt*this.fieldArray[index].PurchaseRate).toFixed(2)):\"OGCN24K\"==this.fieldArray[index].ItemName?(this.fieldArray[index].PurchaseRate=Number(this.Rate*this.PurityPercent/100).toFixed(2),this.fieldArray[index].MeltingPercent=Number(100*(this.Rate-this.fieldArray[index].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[index].MeltingLoss=Math.abs(Number(this.fieldArray[index].NetWt*this.fieldArray[index].MeltingPercent/100)).toFixed(3),this.fieldArray[index].ItemAmount=Number(this.fieldArray[index].NetWt*this.fieldArray[index].PurchaseRate).toFixed(2)):(this.fieldArray[index].PurchaseRate=Math.abs(Number(this.Rate*this.PurityPercent/100)-Number(this.Rate*this.PurityPercent*.02/100)).toFixed(2),this.fieldArray[index].MeltingPercent=Number(100*(this.Rate-this.fieldArray[index].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[index].MeltingLoss=Number(this.fieldArray[index].NetWt*this.fieldArray[index].MeltingPercent/100).toFixed(3),this.fieldArray[index].ItemAmount=Number(this.fieldArray[index].NetWt*this.fieldArray[index].PurchaseRate).toFixed(2))):\"BJOR\"==this.fieldArray[index].ItemName||\"OG22\"==this.fieldArray[index].ItemName?(this.PurityPercent=91.6,this.fieldArray[index].PurityPercent=this.PurityPercent,this.fieldArray[index].MeltingPercent=0,this.fieldArray[index].MeltingLoss=0,this.fieldArray[index].PurchaseRate=this.Rate,this.fieldArray[index].ItemAmount=Number(this.Rate*this.fieldArray[index].NetWt)):\"OG18\"==this.fieldArray[index].ItemName||\"BJ18K\"==this.fieldArray[index].ItemName?(this.PurityPercent=75,this.fieldArray[index].PurityPercent=this.PurityPercent,this.fieldArray[index].MeltingPercent=0,this.fieldArray[index].MeltingLoss=0,this.fieldArray[index].PurchaseRate=this.Rate,this.fieldArray[index].ItemAmount=Number(this.Rate*this.fieldArray[index].NetWt)):\"OSSL\"==this.fieldArray[index].ItemName&&(this.fieldArray[index].ItemAmount=Number(this.fieldArray[index].PurchaseRate*this.fieldArray[index].NetWt)),null!=this.fieldArray[index].DiamondAmount&&(this.fieldArray[index].ItemAmount+=this.fieldArray[index].DiamondAmount))}editFieldValue(index){1==this.EnableAddRow?this.toastr.warning(\"Please save the enabled item\",\"Alert!\"):(\"OG24K\"!=this.fieldArray[index].ItemName&&\"OGOL\"!=this.fieldArray[index].ItemName&&\"OGCN24K\"!=this.fieldArray[index].ItemName&&\"OGCN\"!=this.fieldArray[index].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.ItemType=this.fieldArray[index].ItemName,this.CopyEditedRow[index]=Object.assign({},this.fieldArray[index]),this.EnableEditDelbtn[index]=!1,this.EnableSaveCnlbtn[index]=!0,this.readonly[index]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableRateTypeBasedonRoute())}saveDataFieldValue(index){null==this.fieldArray[index].ItemName||0==this.fieldArray[index].ItemName?this.toastr.warning(\"Please Select ItemName from Drop Down\",\"Alert!\"):null==this.fieldArray[index].GrossWt||0==this.fieldArray[index].GrossWt?this.toastr.warning(\"Please Enter Gross Wt\",\"Alert!\"):\"OP\"==this.PurchaseLinesPost.PurItem||\"OS\"==this.PurchaseLinesPost.PurItem||null!=this.fieldArray[index].PurityPercent&&0!=this.fieldArray[index].PurityPercent?(\"OP\"==this.PurchaseLinesPost.PurItem||\"OS\"==this.PurchaseLinesPost.PurItem)&&this.fieldArray[index].PurchaseRate>this.Rate?(this.toastr.warning(\"Purchase rate should not be greater than \"+this.Rate+\".00\",\"Alert!\"),this.fieldArray[index].ItemAmount=0):null==this.fieldArray[index].ItemAmount||0==this.fieldArray[index].ItemAmount?this.toastr.warning(\"Amount should not empty. Please select proper item from dropdown\",\"Alert!\"):(this.leavePage=!0,this.EnableEditDelbtn[index]=!0,this.EnableSaveCnlbtn[index]=!1,this.readonly[index]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.PurchaseLinesPost.lstPurchaseEstDetailsVM[index]=this.fieldArray[index],this.PurchaseLinesPost.TotalPurchaseAmount=this.PurchaseSummaryData.Amount,this.PurchaseLinesPost.GrandTotal=this.PurchaseSummaryData.Amount,this.PurchaseLinesPost.TodayRate=this.Rate,this.PurchaseLinesPost.PType=this.PurchaseForm.value.RateType,this.PurchaseLinesPost.PurItem=this.PurchaseForm.value.GS,this.PurchaseLinesPost.OperatorCode=localStorage.getItem(\"Login\"),1==this.NewEstimation&&\"/purchase\"===this._router.url?(this.SalesEstNo=\"0\",this.PurchaseLinesPost.EstNo=this.SalesEstNo):this.PurchaseLinesPost.EstNo=this.SalesEstNo,this.fieldArray[index].GSCode=this.PurchaseForm.value.GS,this.fieldArray[index].SalCode=this.PurchaseForm.value.SalCode,this.DmCarats=this.fieldArray[index].Dcts,this.StoneCarats=this.fieldArray[index].StneWt,\"OG24K\"!=this.fieldArray[index].ItemName&&\"OGOL\"!=this.fieldArray[index].ItemName&&\"OGCN24K\"!=this.fieldArray[index].ItemName&&\"OGCN\"!=this.fieldArray[index].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.EnableDisableRateType()):this.toastr.warning(\"Please Enter Purity Percentage\",\"Alert!\")}EnableDisableRateType(){this.fieldArray.length>0?this.EnableRateType=!0:this.EnableRateType=!1}EnableRateTypeBasedonRoute(){\"/purchase\"==this._router.url&&this.EnableDisableRateType(),\"/estimation\"!=this._router.url&&\"/sales-billing\"!=this._router.url||(this.EnableRateType=!0)}cancelDataFieldValue(index){this.EnableAddRow=!1,null!=this.CopyEditedRow[index]?(\"OG24K\"!=this.fieldArray[index].ItemName&&\"OGOL\"!=this.fieldArray[index].ItemName&&\"OGCN24K\"!=this.fieldArray[index].ItemName&&\"OGCN\"!=this.fieldArray[index].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.fieldArray[index]=this.CopyEditedRow[index],this.PurchaseLinesPost.lstPurchaseEstDetailsVM[index]=this.CopyEditedRow[index],this.CopyEditedRow[index]=null,this.EnableSaveCnlbtn[index]=!1,this.EnableEditDelbtn[index]=!0,this.readonly[index]=!0,this.CopyEditedRow=[]):(this.fieldArray.splice(index,1),this.PurchaseLinesPost.lstPurchaseEstDetailsVM.splice(index,1)),this.EnableRateTypeBasedonRoute(),this.EnableDisableSubmit()}EnableDisableSubmit(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0)}cancelPurchaseEst(){confirm(\"Do you want to cancel\")&&(\"/purchase\"==this._router.url?this._router.navigateByUrl(\"/redirect\",{skipLocationChange:!0}).then(()=>{this._router.navigate([\"/purchase\"])}):(this.Rate=0,this.EnableDropdown=!1,this.fieldArray=[],this.PurchaseForm.reset(),this.PurchaseLinesPost={CustID:0,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]},this.PurchaseForm=this.formBuilder.group({GS:[null,fesm2015_forms.Validators.required],SalCode:[null,fesm2015_forms.Validators.required],RateType:[\"E\",fesm2015_forms.Validators.required],Item:[null,fesm2015_forms.Validators.required],RatePerGram:[null,fesm2015_forms.Validators.required]}),this._CustomerService.cast.subscribe(response=>{this.CustomerDets=response,null!=this.CustomerDets?(this.PurchaseLinesPost.CustID=this.CustomerDets.ID,this.PurchaseLinesPost.OperatorCode=localStorage.getItem(\"Login\"),this.PurchaseLinesPost.CompanyCode=this.ccode,this.PurchaseLinesPost.BranchCode=this.bcode):(this.PurchaseLinesPost.CustID=null,this.PurchaseLinesPost.OperatorCode=localStorage.getItem(\"Login\"),this.PurchaseLinesPost.CompanyCode=this.ccode,this.PurchaseLinesPost.BranchCode=this.bcode)})))}deleteFieldValue(index){1==this.EnableAddRow?this.toastr.warning(\"Please save the enabled item\",\"Alert!\"):confirm(\"Do you want to delete\")&&(this.fieldArray.splice(index,1),this.EnableDisableSubmit(),this.EnableRateTypeBasedonRoute())}SendPurchaseDataToEstComp(){this._purchaseService.sendPurchaseDatatoEstComp(this.PurchaseSummaryData)}sendDataToStoneComp(form,index){this.Index=index===this.Index?-1:index,(\"/purchase\"===this._router.url||\"\"!=this.SalesEstNo)&&(1==this.EnableSaveCnlbtn[index]?(this.toastr.warning(\"Please save purchase lines\",\"Alert!\"),this.EnableStoneTab=!1,this.EnableDiamondTab=!1):null==this.fieldArray[index].StneWt||0==this.fieldArray[index].StneWt?(this.toastr.warning(\"Please enter stone carrat\",\"Alert!\"),this.EnableStoneTab=!1,this.EnableDiamondTab=!1):(this.EnableStoneTab=!0,this._purchaseService.SendStoneDetailsFromPurchaseComp(form.lstPurchaseEstStoneDetailsVM),this.LinesDetails=form,this.EnableDiamondTab=!1))}sendDataToDiamondComp(form,index){this.Index=index===this.Index?-1:index,\"/purchase\"===this._router.url?1==this.EnableSaveCnlbtn[index]?(this.toastr.warning(\"Please save purchase lines\",\"Alert!\"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):null!=this.fieldArray[index].Dcts&&0!=this.fieldArray[index].Dcts||\"OG24K\"==this.fieldArray[index].ItemName||\"OGCN\"==this.fieldArray[index].ItemName||\"OGCN24K\"==this.fieldArray[index].ItemName?\"OG24K\"==this.fieldArray[index].ItemName||\"OGCN\"==this.fieldArray[index].ItemName||\"OGCN24K\"==this.fieldArray[index].ItemName?(this.toastr.warning(this.fieldArray[index].ItemName+\" has no Diamond details\",\"Alert!\"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):\"OSSL\"==this.fieldArray[index].ItemName?this.toastr.warning(\"OSSL has no Diamond details\",\"Alert!\"):(this.EnableDiamondTab=!0,this._purchaseService.SendDiamondDetailsFromPurchaseComp(form.lstPurchaseEstDiamondDetailsVM),this.LinesDetails=form,this.EnableStoneTab=!1):(this.toastr.warning(\"Please enter diamond carrat\",\"Alert!\"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):\"\"!=this.SalesEstNo&&(1==this.EnableSaveCnlbtn[index]?(this.toastr.warning(\"Please save purchase lines\",\"Alert!\"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):null==this.fieldArray[index].Dcts||0==this.fieldArray[index].Dcts?(this.toastr.warning(\"Please enter diamond carrat\",\"Alert!\"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):\"OSSL\"==this.fieldArray[index].ItemName?this.toastr.warning(\"OSSL has no Diamond details\",\"Alert!\"):(this.EnableDiamondTab=!0,this._purchaseService.SendDiamondDetailsFromPurchaseComp(form.lstPurchaseEstDiamondDetailsVM),this.LinesDetails=form,this.EnableStoneTab=!1))}SavePurchaseEst(){let estNo;if(null!=this.PurchaseLinesPost.CustID&&0!=this.PurchaseLinesPost.CustID||\"/purchase\"!=this._router.url)if(1==this.EnableSubmitButton)this.toastr.warning(\"Please enter/save item details to submit\",\"Alert!\");else if(1==this.EnableStneSubmit)this.toastr.warning(\"Please save stone details to submit\",\"Alert!\");else if(1==this.EnableDmdSubmit)this.toastr.warning(\"Please save diamond details to submit\",\"Alert!\");else if(1==this.validateDiamondCarats())this.toastr.warning(\"Please enter valid diamond details\",\"Alert!\");else{var ans=confirm(\"Do you want to save??\");this.SendPurchaseDataToEstComp(),ans&&this._purchaseService.post(this.PurchaseLinesPost).subscribe(response=>{estNo=response,sweetalert_min_default()(\"Saved!\",\"Purchase Estimation number \"+estNo.EstMationNo+\" Saved\",\"success\"),\"/purchase\"===this._router.url?(this.EnableReprint=!0,this.ReprintData={EstNo:estNo.EstMationNo,EstType:\"P\"},this._purchaseService.SendReprintPurchaseData(this.ReprintData),this.ClearValues(),this.EnableRateType=!1,this.leavePage=!1,this.PurchaseForm=this.formBuilder.group({GS:[null,fesm2015_forms.Validators.required],SalCode:[null,fesm2015_forms.Validators.required],RateType:[\"E\",fesm2015_forms.Validators.required],Item:[null,fesm2015_forms.Validators.required],RatePerGram:[null,fesm2015_forms.Validators.required]})):(this.EnableReprint=!1,this.ReprintData={EstNo:estNo.EstMationNo,EstType:\"P\"},this._estimationService.SendReprintData(this.ReprintData))})}else this.toastr.warning(\"Please select the customer\",\"Alert!\")}getPurchaseEstPlainText(arg){this._purchaseService.PrintPurEstDotMatrix(arg).subscribe(response=>{this.purchaseEstimationPlainTextDetails=response,$(\"#PurchaseEstimationPlainTextTab\").modal(\"show\")})}printPurchaseEstimationPlainText(){this._masterService.printPlainText(this.purchaseEstimationPlainTextDetails)}validateDiamondCarats(){this.Flag=!1;for(let i=0;i<this.PurchaseLinesPost.lstPurchaseEstDetailsVM.length;i++)if(this.dcts=0,this.PurchaseLinesPost.lstPurchaseEstDetailsVM[i].lstPurchaseEstDiamondDetailsVM.length>0){for(let j=0;j<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[i].lstPurchaseEstDiamondDetailsVM.length;j++)this.dcts+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[i].lstPurchaseEstDiamondDetailsVM[j].Carrat);this.dcts<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[i].Dcts?this.Flag=!0:this.Flag=!1}else null!=this.PurchaseLinesPost.lstPurchaseEstDetailsVM[i].Dcts&&0!=this.PurchaseLinesPost.lstPurchaseEstDetailsVM[i].Dcts&&0==this.PurchaseLinesPost.lstPurchaseEstDetailsVM[i].lstPurchaseEstDiamondDetailsVM.length?this.Flag=!0:this.Flag=!1;return 1==this.Flag}GrossWtTotal(arg){let total=0;return arg.forEach(d=>{total+=parseFloat(d.GrossWt)}),this.PurchaseSummaryData.GrossWt=parseFloat(total),total}StneWt(arg){let total=0;return arg.forEach(d=>{0!=d.StneWt&&null!=d.StneWt&&(total+=parseFloat(d.StneWt))}),this.PurchaseSummaryData.StoneWt=parseFloat(total),total}Dcts(arg){let total=0;return arg.forEach(d=>{total+=parseFloat(d.Dcts)}),this.PurchaseSummaryData.carats=parseFloat(total),total}NetWt(arg){let total=0;return arg.forEach(d=>{total+=parseFloat(d.NetWt)}),this.PurchaseSummaryData.NtWt=parseFloat(total),total}Amount(arg){let total=0;return arg.forEach(d=>{total+=parseFloat(d.ItemAmount)}),this.PurchaseSummaryData.Amount=parseFloat(total),this.PurchaseAmountChanged(total),this.PurchaseLinesPost.GrandTotal=total,this.PurchaseLinesPost.TotalPurchaseAmount=total,this.rndoff=Math.round(total)-total,total}ClearValues(){this.Rate=0,this.EnableDropdown=!1,this.fieldArray=[],this.PurchaseForm.reset(),this._CustomerService.SendCustDataToEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]}}};purchase_component_PurchaseComponent.ctorParameters=()=>[{type:purchase_service.a},{type:fesm2015_forms.FormBuilder},{type:ngx_toastr.b},{type:customer_service.a},{type:sales_service.a},{type:router.c},{type:master_service.a},{type:estimation_service.a}],tslib_es6.a([Object(core.Output)(),tslib_es6.c(\"design:type\",Object)],purchase_component_PurchaseComponent.prototype,\"valueChange\",void 0),tslib_es6.a([Object(core.Output)(),tslib_es6.c(\"design:type\",Object)],purchase_component_PurchaseComponent.prototype,\"PurchaseAmountChange\",void 0),purchase_component_PurchaseComponent=tslib_es6.a([Object(core.Component)({selector:\"app-purchase\",template:tslib_es6.b(__webpack_require__(\"W3e5\")).default,styles:[tslib_es6.b(__webpack_require__(\"HWQx\")).default]}),tslib_es6.c(\"design:paramtypes\",[purchase_service.a,fesm2015_forms.FormBuilder,ngx_toastr.b,customer_service.a,sales_service.a,router.c,master_service.a,estimation_service.a])],purchase_component_PurchaseComponent);let ReprintPurchaseestimationComponent=class{constructor(_estmationService,_purchaseService,_router,toastr,_masterService){this._estmationService=_estmationService,this._purchaseService=_purchaseService,this._router=_router,this.toastr=toastr,this._masterService=_masterService,this.estPurchaseDetails=[],this.EnablePurchaseReprintHeaders=!1,this.ShowHide=!0,this.PurchaseDetails=[],this.purEstPlainTextDetails=[]}ngOnInit(){\"/purchase/reprintpurchaseestimation\"==this._router.url?this.ShowHide=!0:this._purchaseService.castReprintPurchaseData.subscribe(response=>{this.ReprintData=response,0==this.isEmptyObject(this.ReprintData)&&null!=this.isEmptyObject(this.ReprintData)&&(this.getPurEstPlainText(this.ReprintData.EstNo),this._purchaseService.SendReprintPurchaseData(null)),this.ShowHide=!1})}isEmptyObject(obj){return obj&&0===Object.keys(obj).length}getPurchaseEstimationDetails(arg){\"\"==arg?this.toastr.warning(\"Please enter the estimation\",\"Alert!\"):this.getPurEstPlainText(arg)}printPurchase(){let printContents,popupWin;printContents=document.getElementById(\"print-sectionPurchase\").innerHTML,popupWin=window.open(\"\",\"_blank\",\"top=0,left=0,height=100%,width=auto\"),popupWin.document.open(),popupWin.document.write(`\\n      <html>\\n        <head>\\n          <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\" integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\">\\n          <title>Print tab</title>\\n          <style>\\n         .htmlPrint{display:none;}\\n\\n          @media print {\\n            .table-bordered\\n        {\\n            border-style: solid;\\n            border: 3px solid rgb(0, 0, 0);\\n        }\\n        .margin{\\n          margin-top:-24px;\\n        }\\n        .mb{\\n          vertical-align:middle;position:absolute;\\n        }\\n        tr.spaceUnder>td {\\n          padding-bottom: 40px !important;\\n        }\\n        .top {\\n          margin-top:10px;\\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\\n          line-height: 1.6;\\n        }\\n        .modal-content{\\n          font-family: \"Times New Roman\", Times, serif;\\n\\n        }\\n       .padding-top {\\n         padding-top:20px;\\n       }\\n        .watermark{\\n          -webkit-transform: rotate(331deg);\\n          -moz-transform: rotate(331deg);\\n          -o-transform: rotate(331deg);\\n          transform: rotate(331deg);\\n          font-size: 15em;\\n          color: rgba(255, 5, 5, 0.37);\\n          position: absolute;\\n          text-transform:uppercase;\\n          padding-left: 10%;\\n          margin-top:-10px;\\n        }\\n        .right{\\n          text-align:left;\\n        }\\n        .px-2 {\\n          padding-left: 10px !important;\\n        }\\n        thead > tr\\n        {\\n            border-style: solid;\\n            border: 3px solid rgb(0, 0, 0);\\n        }\\n        table tr td.classname{\\n          border-right: 3px solid rgb(0, 0, 0) !important;\\n        }\\n        table tr td.borderLeft{\\n          border-left: 3px solid rgb(0, 0, 0) !important;\\n        }\\n        table tr td.bottom{\\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\\n        }\\n        table tr th.classname{\\n          border-right: 3px solid rgb(0, 0, 0) !important;\\n        }\\n        .divborder {\\n          border-right: 3px solid rgb(0, 0, 0) !important;\\n          line-height: 1.6;\\n        }\\n        .lastdivborder{\\n          line-height: 1.6;\\n        }\\n    .border{\\n      border-right: 3px solid rgb(0, 0, 0) !important;\\n      border-bottom: 3px solid rgb(0, 0, 0) !important;\\n    }\\n\\n    .tdborder{\\n      border-right: 3px solid rgb(0, 0, 0) !important;\\n    }\\n        .invoice {\\n          margin-top: 250px;\\n      }\\n        .card{\\n          border-style: solid;\\n          border-width: 5px;\\n          border: 3px solid rgb(0, 0, 0);\\n      }\\n        .printMe {\\n          display: none !important;\\n        }\\n      }\\n      body{\\n            font-size: 15px;\\n            line-height: 18px;\\n      }\\n </style>\\n        </head>\\n    <body onload=\"window.print();window.close()\">\\n\\n    ${printContents}</body>\\n      </html>`),popupWin.document.close()}closePurEstTab(){this.getPurEstPlainText(this.PurEstNum)}getPurEstPlainText(arg){this._purchaseService.PrintPurEstDotMatrix(arg).subscribe(response=>{this.purEstPlainTextDetails=response,\"\"!=this.purEstPlainTextDetails?$(\"#PurEstPlainTextTab\").modal(\"show\"):(this.toastr.warning(\"Purchase Estimation No does not exists.\",\"Alert!\"),$(\"#PurEstPlainTextTab\").modal(\"hide\"))})}printPurEstPlainText(){this._masterService.printPlainText(this.purEstPlainTextDetails)}};ReprintPurchaseestimationComponent.ctorParameters=()=>[{type:estimation_service.a},{type:purchase_service.a},{type:router.c},{type:ngx_toastr.b},{type:master_service.a}],ReprintPurchaseestimationComponent=tslib_es6.a([Object(core.Component)({selector:\"app-reprint-purchaseestimation\",template:tslib_es6.b(__webpack_require__(\"aTHM\")).default,styles:[tslib_es6.b(__webpack_require__(\"yByz\")).default]}),tslib_es6.c(\"design:paramtypes\",[estimation_service.a,purchase_service.a,router.c,ngx_toastr.b,master_service.a])],ReprintPurchaseestimationComponent);let purchase_cancel_component_PurchaseCancelComponent=class{constructor(fb,_PurchaseService,_CustomerService){this.fb=fb,this._PurchaseService=_PurchaseService,this._CustomerService=_CustomerService,this.orderDetails=[],this.hasPurchaseDetails=!1,this.customerDtls=[],this.ccode=\"\",this.bcode=\"\",this.password=appSettings.a.Pwd,this.PurchaseCancelObj={CompanyCode:null,BranchCode:null,EstNo:null,OperatorCode:null,BillCounter:null,Type:null,BillNo:0,CustName:null,PaidAmount:null,CancelRemarks:null,lstOfPayment:[]},this.getCB()}ngOnInit(){this.PurchaseCancelForm=this.fb.group({BillNo:null,BillAmount:null,GST:null,CustName:null,Phone:null,Address1:null,Address2:null,Address3:null,Mobile:null,Remarks:null})}getPurchaseDetails(arg){\"\"==arg?alert(\"Enter Bill Number\"):this._PurchaseService.getPurchaseBill(arg).subscribe(response=>{this.PurchaseBillData=response,null!=this.PurchaseBillData&&(this.hasPurchaseDetails=!0,this.PurchaseCancelObj.CompanyCode=this.ccode,this.PurchaseCancelObj.BranchCode=this.bcode,this.PurchaseCancelObj.BillNo=arg,this.PurchaseCancelObj.OperatorCode=localStorage.getItem(\"Login\"),this.PurchaseCancelObj.CustName=this.PurchaseBillData.CustName,this.PurchaseCancelObj.PaidAmount=this.PurchaseBillData.TotalPurchaseAmount)},err=>{if(404===err.status){const validationError=err.error;sweetalert_min_default()(\"Warning!\",validationError.description,\"warning\"),this.hasPurchaseDetails=!1}if(400===err.status){const validationError=err.error;sweetalert_min_default()(\"Warning!\",validationError.description,\"warning\"),this.hasPurchaseDetails=!1}})}getCB(){this.ccode=crypto_js.AES.decrypt(localStorage.getItem(\"ccode\"),this.password.trim()).toString(crypto_js.enc.Utf8),this.bcode=crypto_js.AES.decrypt(localStorage.getItem(\"bcode\"),this.password.trim()).toString(crypto_js.enc.Utf8)}ngOnDestroy(){this._CustomerService.sendCustomerDtls_To_Customer_Component(null)}submitPost(){\"\"==this.PurchaseCancelObj.CancelRemarks||null==this.PurchaseCancelObj.CancelRemarks?alert(\"Please enter the remarks\"):confirm(\"Do you want to cancel Purchase Bill No.\"+this.PurchaseCancelObj.BillNo+\"??\")&&this._PurchaseService.CancelPurchaseBill(this.PurchaseCancelObj).subscribe(response=>{sweetalert_min_default()(\"Cancelled!\",\"Purchase Bill No. \"+this.PurchaseCancelObj.BillNo+\" Cancelled Successfully\",\"success\"),this.PurchaseCancelForm.reset(),this.hasPurchaseDetails=!1})}Clear(){this.BillNo.nativeElement.value=\"\",this.hasPurchaseDetails=!1,this.PurchaseBillData=null,this.PurchaseCancelObj={CompanyCode:null,BranchCode:null,EstNo:null,OperatorCode:null,BillCounter:null,Type:null,BillNo:0,CustName:null,PaidAmount:null,CancelRemarks:null,lstOfPayment:[]}}};purchase_cancel_component_PurchaseCancelComponent.ctorParameters=()=>[{type:fesm2015_forms.FormBuilder},{type:purchase_service.a},{type:customer_service.a}],tslib_es6.a([Object(core.ViewChild)(\"BillNo\",{static:!0}),tslib_es6.c(\"design:type\",core.ElementRef)],purchase_cancel_component_PurchaseCancelComponent.prototype,\"BillNo\",void 0),purchase_cancel_component_PurchaseCancelComponent=tslib_es6.a([Object(core.Component)({selector:\"app-purchase-cancel\",template:tslib_es6.b(__webpack_require__(\"2is8\")).default,styles:[tslib_es6.b(__webpack_require__(\"VZds\")).default]}),tslib_es6.c(\"design:paramtypes\",[fesm2015_forms.FormBuilder,purchase_service.a,customer_service.a])],purchase_cancel_component_PurchaseCancelComponent);let reprint_purchasebill_component_ReprintPurchasebillComponent=class{constructor(formBuilder,_router,_masterService,_purchaseService){this.formBuilder=formBuilder,this._router=_router,this._masterService=_masterService,this._purchaseService=_purchaseService,this.ordDate=\"\",this.isActive=!1,this.today=new Date,this.isReprint=!0,this.billNo=\"\",this.isCheckedCHBX=!1,this.reprintHeaders={selectedOption:null,applicationDate:null},this.BillList=[],this.PrintDetails=[],this.purBillPlainTextDetails=[],this.ordDate=Object(common.formatDate)(this.today,\"MM-DD-YYYY\",\"en-US\",\"+0530\"),this.datePickerConfig=Object.assign({},{containerClass:\"theme-dark-blue\",showWeekNumbers:!1,maxDate:new Date(2020,7,28),dateInputFormat:\"YYYY-MM-DD\"})}isChecked(e){this.isCheckedCHBX=e.target.checked,this.reprintHeaders.selectedOption=null,this.getApplicationDate(),this._purchaseService.AllPurchaseBill(this.applicationDate,this.isCheckedCHBX).subscribe(response=>{this.BillList=response})}getApplicationDate(){this._masterService.getApplicationDate().subscribe(response=>{let appDate=response;this.applicationDate=appDate.applcationDate,this.disAppDate=Object(common.formatDate)(appDate.applcationDate,\"dd/MM/yyyy\",\"en_GB\"),this.getAllPurchaseBill(this.applicationDate)})}ngOnInit(){this.getApplicationDate(),\"/purchase/reprint-purchasebill\"===this._router.url&&(this.isReprint=!0),\"/purchase/purchase-billing\"==this._router.url&&(this.isReprint=!1,null!=this.BillNo.billNo&&\"\"!=this.BillNo.billNo&&this._purchaseService.PrintPurchaseBill(this.BillNo.billNo).subscribe(response=>{this.PrintDetails=response,this.PurBillNum=this.BillNo.billNo,$(\"#ReprintPurchaseBillingModal\").modal(\"show\"),$(\"#DisplayData\").html(this.PrintDetails)}))}onPrint(arg){null==this.reprintHeaders.selectedOption?(alert(\"Please enter the bill no.\"),$(\"#ReprintPurchaseBillingModal\").modal(\"hide\")):(this.PurBillNum=arg,this._purchaseService.PrintPurchaseBill(arg).subscribe(response=>{this.PrintDetails=response,$(\"#ReprintPurchaseBillingModal\").modal(\"show\"),$(\"#DisplayData\").html(this.PrintDetails)}))}getAllPurchaseBill(Appdate){this._purchaseService.AllPurchaseBill(Appdate,this.isCheckedCHBX).subscribe(response=>{this.BillList=response})}print(){let printContents,popupWin;printContents=document.getElementById(\"DisplayData\").innerHTML,popupWin=window.open(\"\",\"_blank\",\"top=0,left=0,height=100%,width=auto\"),popupWin.document.open(),popupWin.document.write(`\\n      <html>\\n        <head>\\n          <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\" integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\">\\n          <title>Print tab</title>\\n          <style>\\n         .htmlPrint{display:none;}\\n\\n          @media print {\\n            .table-bordered\\n        {\\n            border-style: solid;\\n            border: 3px solid rgb(0, 0, 0);\\n        }\\n        .margin{\\n          margin-top:-24px;\\n        }\\n        .mb{\\n          vertical-align:middle;position:absolute;\\n        }\\n        tr.spaceUnder>td {\\n          padding-bottom: 40px !important;\\n        }\\n        .top {\\n          margin-top:10px;\\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\\n          line-height: 1.6;\\n        }\\n        .modal-content{\\n          font-family: \"Times New Roman\", Times, serif;\\n\\n        }\\n       .padding-top {\\n         padding-top:20px;\\n       }\\n        .watermark{\\n          -webkit-transform: rotate(331deg);\\n          -moz-transform: rotate(331deg);\\n          -o-transform: rotate(331deg);\\n          transform: rotate(331deg);\\n          font-size: 15em;\\n          color: rgba(255, 5, 5, 0.37);\\n          position: absolute;\\n          text-transform:uppercase;\\n          padding-left: 10%;\\n          margin-top:-10px;\\n        }\\n        .right{\\n          text-align:left;\\n        }\\n        .px-2 {\\n          padding-left: 10px !important;\\n        }\\n        thead > tr\\n        {\\n            border-style: solid;\\n            border: 3px solid rgb(0, 0, 0);\\n        }\\n        table tr td.classname{\\n          border-right: 3px solid rgb(0, 0, 0) !important;\\n        }\\n        table tr td.bottom{\\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\\n        }\\n        table tr th.classname{\\n          border-right: 3px solid rgb(0, 0, 0) !important;\\n        }\\n        .divborder {\\n          border-right: 3px solid rgb(0, 0, 0) !important;\\n          line-height: 1.6;\\n        }\\n        .lastdivborder{\\n          line-height: 1.6;\\n        }\\n    .border{\\n      border-right: 3px solid rgb(0, 0, 0) !important;\\n      border-bottom: 3px solid rgb(0, 0, 0) !important;\\n    }\\n\\n    .tdborder{\\n      border-right: 3px solid rgb(0, 0, 0) !important;\\n    }\\n        .invoice {\\n          margin-top: 250px;\\n      }\\n        .card{\\n          border-style: solid;\\n          border-width: 5px;\\n          border: 3px solid rgb(0, 0, 0);\\n      }\\n        .printMe {\\n          display: none !important;\\n        }\\n      }\\n      body{\\n            font-size: 15px;\\n            line-height: 18px;\\n      }\\n </style>\\n        </head>\\n    <body onload=\"window.print();window.close()\">\\n    ${printContents}</body>\\n      </html>`),popupWin.document.close()}closePurBillTab(){\"/purchase/purchase-billing\"===this._router.url?this.getPurBillPlainText(this.PurBillNum):$(\"#PurBillPlainTextTab\").modal(\"hide\")}getPurBillPlainText(arg){this._purchaseService.PrintPurBillDotMatrix(arg).subscribe(response=>{this.purBillPlainTextDetails=response,$(\"#PurBillPlainTextTab\").modal(\"show\")})}printPurBillPlainText(){this._masterService.printPlainText(this.purBillPlainTextDetails)}};reprint_purchasebill_component_ReprintPurchasebillComponent.ctorParameters=()=>[{type:fesm2015_forms.FormBuilder},{type:router.c},{type:master_service.a},{type:purchase_service.a}],tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Object)],reprint_purchasebill_component_ReprintPurchasebillComponent.prototype,\"BillNo\",void 0),reprint_purchasebill_component_ReprintPurchasebillComponent=tslib_es6.a([Object(core.Component)({selector:\"app-reprint-purchasebill\",template:tslib_es6.b(__webpack_require__(\"HGwx\")).default,styles:[tslib_es6.b(__webpack_require__(\"jrbh\")).default]}),tslib_es6.c(\"design:paramtypes\",[fesm2015_forms.FormBuilder,router.c,master_service.a,purchase_service.a])],reprint_purchasebill_component_ReprintPurchasebillComponent);var appconfirmation_guard=__webpack_require__(\"09Xa\");const PurchaseRoutes=[{path:\"\",canActivate:[auth_guard_service.a],canActivateChild:[auth_guard_service.a],canDeactivate:[appconfirmation_guard.a],component:purchase_component_PurchaseComponent,data:{title:\"Purchase Estimation\",urls:[{title:\"Dashboard\",url:\"/dashboard\"},{title:\"Purchase Estimation\"}]}},{path:\"reprintpurchaseestimation\",canActivate:[auth_guard_service.a],canActivateChild:[auth_guard_service.a],component:ReprintPurchaseestimationComponent,data:{title:\"Reprint Purchase Estimation\",urls:[{title:\"Dashboard\",url:\"/dashboard\"},{title:\"Reprint Purchase Estimation\"}]}},{path:\"purchase-billing\",canActivate:[auth_guard_service.a],canActivateChild:[auth_guard_service.a],component:purchase_billing_component_PurchaseBillingComponent,data:{title:\"Purchase Billing\",urls:[{title:\"Dashboard\",url:\"/dashboard\"},{title:\"Purchase Billing\"}]}},{path:\"purchase-cancel\",canActivate:[auth_guard_service.a],canActivateChild:[auth_guard_service.a],component:purchase_cancel_component_PurchaseCancelComponent,data:{title:\"Cancel Purchase Bill\",urls:[{title:\"Dashboard\",url:\"/dashboard\"},{title:\"Cancel Purchase Bill\"}]}},{path:\"reprint-purchasebill\",canActivate:[auth_guard_service.a],canActivateChild:[auth_guard_service.a],component:reprint_purchasebill_component_ReprintPurchasebillComponent,data:{title:\"Reprint Purchase Bill\",urls:[{title:\"Dashboard\",url:\"/dashboard\"},{title:\"Reprint Purchase Bill\"}]}}];let PurchaseRoutingModule=class{};PurchaseRoutingModule=tslib_es6.a([Object(core.NgModule)({imports:[router.d.forChild(PurchaseRoutes)],exports:[router.d]})],PurchaseRoutingModule);let diamond_component_DiamondComponent=class{constructor(toastr,_purchaseService,_estimationService,_router){this.toastr=toastr,this._purchaseService=_purchaseService,this._estimationService=_estimationService,this._router=_router,this.ccode=\"\",this.bcode=\"\",this.ShowHide=!0,this.password=appSettings.a.Pwd,this.fieldArray=[],this.PurchaseLinesDetails=[],this.SalesEstNo=\"\",this.ItemList=[],this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.count=0,this.Rate=0,this.purchaseDetails=[],this.DiamondCarrat=0,this.diamondAmount=new core.EventEmitter,this.EnableDmdBtn=new core.EventEmitter,this.EstNo=0,this.DmCarats=0,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableSubmitButton=!0,this.EnableDiamondTab=!1,this.OldDiamondDtls={estno:null,item_sno:null,type:\"p\",Name:null,Qty:null,Carrat:null,OrgRate:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.CopyEditedRow=[],this.DiamondCount=0,this.Diamondtotal=0,this.Indicator=\"\",this._purchaseService.castDiamondDetails.subscribe(response=>{for(var field in this.fieldArray=response,this.fieldArray)this.EnableEditDelbtn[field]=!0,this.EnableSaveCnlbtn[field]=!1,this.readonly[field]=!0}),this.getCB(),\"/purchase\"==this._router.url||\"/estimation\"==this._router.url?this.ShowHide=!0:this.ShowHide=!1}getCB(){this.ccode=crypto_js.AES.decrypt(localStorage.getItem(\"ccode\"),this.password.trim()).toString(crypto_js.enc.Utf8),this.bcode=crypto_js.AES.decrypt(localStorage.getItem(\"bcode\"),this.password.trim()).toString(crypto_js.enc.Utf8)}ngOnInit(){this.getDiamondDets(),this.getDiamondName()}getDiamondName(){this._purchaseService.getOldDmdName().subscribe(response=>{this.ItemList=response})}getDiamondDets(){this._purchaseService.getOldDiamond().subscribe(response=>{this.OldDiamondList=response})}addrow(){this.OldDiamondDtls={estno:this.EstNo,item_sno:null,type:\"p\",Name:null,Qty:null,Carrat:null,Rate:null,OrgRate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.fieldArray.push(this.OldDiamondDtls);for(let{}of this.fieldArray)this.count++;this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableDisableDiamondBtn()}GetAmount(index){if(0!=this.fieldArray[index].OrgRate)if(this.fieldArray[index].Rate>this.fieldArray[index].OrgRate)this.toastr.warning(\"Entered Diamond Carat Rate is greater than the Max Diamond Carat Rate.\",\"Alert!\");else{let Carrat=this.fieldArray[index].Carrat,Rate=this.fieldArray[index].Rate;this.fieldArray[index].Amount=Number(Carrat*Rate)}else{let Carrat=this.fieldArray[index].Carrat,Rate=this.fieldArray[index].Rate;this.fieldArray[index].Amount=Number(Carrat*Rate)}}GetItemName(arg){this.ItemName=arg}GetStnDmdRate(index){let StnDmdCarrat=this.fieldArray[index].Carrat;this._purchaseService.getStnDmdRate(this.ItemName,StnDmdCarrat).subscribe(response=>{this.stnDmdRate=response,this.fieldArray[index].Rate=this.stnDmdRate.OrgRate,this.fieldArray[index].OrgRate=this.stnDmdRate.OrgRate,this.fieldArray[index].Amount=Number(StnDmdCarrat*this.fieldArray[index].Rate)})}editFieldValue(index){1==this.EnableAddRow?this.toastr.warning(\"Please save the enabled item\",\"Alert!\"):(this.CopyEditedRow[index]=Object.assign({},this.fieldArray[index]),this.EnableEditDelbtn[index]=!1,this.EnableSaveCnlbtn[index]=!0,this.readonly[index]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDisableDiamondBtn())}saveDataFieldValue(index){null==this.fieldArray[index].Name||0==this.fieldArray[index].Name?this.toastr.warning(\"Please select the Item Name\",\"Alert!\"):null==this.fieldArray[index].Qty||0==this.fieldArray[index].Qty?this.toastr.warning(\"Please Enter Qty\",\"Alert!\"):null==this.fieldArray[index].Carrat||0==this.fieldArray[index].Carrat?this.toastr.warning(\"Please Enter Carrat\",\"Alert!\"):null==this.fieldArray[index].Rate||0==this.fieldArray[index].Rate?this.toastr.warning(\"Please Enter Rate\",\"Alert!\"):0!=this.fieldArray[index].OrgRate&&this.fieldArray[index].Rate>this.fieldArray[index].OrgRate?this.toastr.warning(\"Entered Diamond Carat Rate is greater than the Max Diamond Carat Rate.\",\"Alert!\"):(this.DiamondCarrat=this.PurchaseLinesDetails.Dcts,1==this.DiamondCarratTotal(this.fieldArray)?(this.DmCarats=this.fieldArray[index].Dcts,\"\"==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstDiamondDetailsVM[index]=this.fieldArray[index]),this.EnableEditDelbtn[index]=!0,this.EnableSaveCnlbtn[index]=!1,this.readonly[index]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendDiamondAmtToPurComp(),this.EnableDisableDiamondBtn()):(\"A\"==this.Indicator?this.toastr.error(\"Entered Diamond Carat is greater than the Purchase Diamond Carat\",\"Alert!\"):\"B\"==this.Indicator&&\"/estimation\"==this._router.url?this.toastr.error(\"Entered Diamond Carat is lesser than the Purchase Diamond Carat\",\"Alert!\"):(this.DmCarats=this.fieldArray[index].Dcts,\"\"==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstDiamondDetailsVM[index]=this.fieldArray[index]),this.EnableEditDelbtn[index]=!0,this.EnableSaveCnlbtn[index]=!1,this.readonly[index]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendDiamondAmtToPurComp()),this.EnableDisableDiamondBtn()))}cancelDataFieldValue(index){this.EnableAddRow=!1,null!=this.CopyEditedRow[index]?(this.fieldArray[index]=this.CopyEditedRow[index],this.CopyEditedRow[index]=null,this.EnableSaveCnlbtn[index]=!1,this.EnableEditDelbtn[index]=!0,this.readonly[index]=!0,this.CopyEditedRow=[]):this.fieldArray.splice(index,1),this.EnableDisableSubmit()}EnableDisableSubmit(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0),this.EnableDisableDiamondBtn()}deleteFieldValue(index){1==this.EnableAddRow?this.toastr.warning(\"Please save the enabled item\",\"Alert!\"):(this.fieldArray.splice(index,1),this.EnableDisableSubmit(),this.SendDiamondAmtToPurComp())}Amount(arg){let total=0;return arg.forEach(d=>{total+=parseFloat(d.Amount)}),this.diamondValue=total,this.SendDiamondAmtToPurComp(),total}SendDiamondAmtToPurComp(){this.diamondAmount.emit(this.diamondValue)}EnableDisableDiamondBtn(){this.EnableDmdBtn.emit(this.EnableSubmitButton)}DiamondCarratTotal(Item){for(var field of(this.Diamondtotal=0,Item))this.Diamondtotal+=Number(this.fieldArray[this.DiamondCount].Carrat),this.DiamondCount++;return this.DiamondCount=0,this.Diamondtotal>this.DiamondCarrat?(this.Indicator=\"A\",!1):!(this.Diamondtotal<this.DiamondCarrat)||(this.Indicator=\"B\",!1)}};diamond_component_DiamondComponent.ctorParameters=()=>[{type:ngx_toastr.b},{type:purchase_service.a},{type:estimation_service.a},{type:router.c}],tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Object)],diamond_component_DiamondComponent.prototype,\"PurchaseLinesDetails\",void 0),tslib_es6.a([Object(core.Output)(),tslib_es6.c(\"design:type\",Object)],diamond_component_DiamondComponent.prototype,\"diamondAmount\",void 0),tslib_es6.a([Object(core.Output)(),tslib_es6.c(\"design:type\",Object)],diamond_component_DiamondComponent.prototype,\"EnableDmdBtn\",void 0),tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Number)],diamond_component_DiamondComponent.prototype,\"EstNo\",void 0),tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Number)],diamond_component_DiamondComponent.prototype,\"DmCarats\",void 0),tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Boolean)],diamond_component_DiamondComponent.prototype,\"EnableDiamondTab\",void 0),diamond_component_DiamondComponent=tslib_es6.a([Object(core.Component)({selector:\"app-diamond\",template:tslib_es6.b(__webpack_require__(\"lo/J\")).default,styles:[tslib_es6.b(__webpack_require__(\"esxm\")).default]}),tslib_es6.c(\"design:paramtypes\",[ngx_toastr.b,purchase_service.a,estimation_service.a,router.c])],diamond_component_DiamondComponent);var full_module=__webpack_require__(\"GFhY\"),customer_module=__webpack_require__(\"OclH\"),ngx_bootstrap_collapse=__webpack_require__(\"+Cnu\");let attacholdgold_component_AttacholdgoldComponent=class{constructor(_PurchaseService,formBuilder,_estimationService,_salesService,_CustomerService,_router){this._PurchaseService=_PurchaseService,this.formBuilder=formBuilder,this._estimationService=_estimationService,this._salesService=_salesService,this._CustomerService=_CustomerService,this._router=_router,this.EnableDisablectrls=!0,this.ccode=\"\",this.bcode=\"\",this.password=appSettings.a.Pwd,this.PostOldGoldAttchJson=[],this.submitted=!1,this.SelectedOldGoldList=[],this.EnableSubmitButton=!0,this.SalesEstNo=null,this.OrderJson={SeriesNo:null,RefBillNo:null,OperatorCode:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.OldGoldAttachmentSummaryData={Quantity:null,Amount:0},this.valueChange=new core.EventEmitter,this.OldGoldAmount=0,this.pagenumber=1,this.top=10,this.skip=(this.pagenumber-1)*this.top,this.OGTotalAmount=0,this.OGAmountChange=new core.EventEmitter,this.enableBtnIfSalesEstNo=!0,this.ReprintData={EstNo:null,EstType:null},this.getCB()}getCB(){this.ccode=crypto_js.AES.decrypt(localStorage.getItem(\"ccode\"),this.password.trim()).toString(crypto_js.enc.Utf8),this.bcode=crypto_js.AES.decrypt(localStorage.getItem(\"bcode\"),this.password.trim()).toString(crypto_js.enc.Utf8)}ngOnInit(){this.OldGoldAttachmentSummaryData={Quantity:null,Amount:0},this._salesService.EstNo.subscribe(response=>{this.SalesEstNo=response}),this._estimationService.SubjectEstNo.subscribe(response=>{this.SalesEstNo=response,null!=this.SalesEstNo&&\"0\"!=this.SalesEstNo&&\"/purchase\"!=this._router.url&&this._PurchaseService.getOldGoldttachedList(this.SalesEstNo).subscribe(response=>{if(this.SelectedOldGoldList=[],this.PostOldGoldAttchJson=[],this.SelectedOldGoldList=response,null!=this.SelectedOldGoldList){if(this.SelectedOldGoldList.length>0){this._estimationService.SendOldGoldAttachmentSummaryData(this.OldGoldAttachmentSummaryData),console.log(this.OldGoldAttachmentSummaryData);for(var i=0;i<this.SelectedOldGoldList.length;i++)this.OrderJson.SeriesNo=this.SalesEstNo,this.OrderJson.RefBillNo=this.SelectedOldGoldList[i].EstNo,this.OrderJson.OperatorCode=localStorage.getItem(\"Login\"),this.OrderJson.CompanyCode=this.ccode,this.OrderJson.BranchCode=this.bcode,this.PostOldGoldAttchJson.push(this.OrderJson),this.OrderJson={}}}else this.SelectedOldGoldList=[],this.PostOldGoldAttchJson=[]})}),this.AttachOldGoldForm=this.formBuilder.group({searchby:[null,fesm2015_forms.Validators.required],searchText:[null,fesm2015_forms.Validators.required]}),this._PurchaseService.getSearchParams().subscribe(response=>{this.SearchParamsList=response}),this.getSalesEstNofromSalesService(),this.LoadCustomerDetails(),\"/sales-billing\"==this._router.url&&(this.EnableDisablectrls=!1),\"/estimation\"==this._router.url&&(this.EnableDisablectrls=!0)}LoadCustomerDetails(){this._CustomerService.cast.subscribe(response=>{this.CustomerName=response})}openModal(){$(\"#myOldGoldModal\").modal(\"show\"),this.getOGList(this.top,this.skip)}onPageChange(p){this.pagenumber=p;const skipno=(this.pagenumber-1)*this.top;this.getOGList(this.top,skipno)}getOGList(top,skip){this._PurchaseService.getOldGoldList(top,skip).subscribe(response=>{this.AttachOldGoldList=response})}valueChanged(Amount){this.OldGoldAmount=Amount,this.valueChange.emit(this.OldGoldAmount)}OGAmountChanged(SalesAmount){this.OGTotalAmount=SalesAmount,this.OGAmountChange.emit(this.OGTotalAmount)}getSalesEstNofromSalesService(){this._salesService.EstNo.subscribe(response=>{this.SalesEstNo=response,null!=this.SalesEstNo&&\"\"!=this.SalesEstNo&&(this.enableBtnIfSalesEstNo=!1)})}Submit(){this._PurchaseService.PostAttachementOldGold(this.PostOldGoldAttchJson).subscribe(response=>{this.Saved=response,this._estimationService.SendOldGoldAttachmentSummaryData(this.OldGoldAttachmentSummaryData),sweetalert_min_default()(\"Saved!\",\"Old Gold est adjusted against Estimation number \"+this.SalesEstNo,\"success\"),this.ReprintData={EstNo:this.SalesEstNo,EstType:\"OG\"},this._estimationService.SendReprintData(this.ReprintData)})}onSubmit(){this.submitted=!0,this.AttachOldGoldForm.invalid}DeleteRow(index){confirm(\"Do you want to delete\")&&(1==this.SelectedOldGoldList.length&&this._PurchaseService.deleteOldGoldAttachment(this.SalesEstNo).subscribe(response=>{this.Saved=response}),this.valueChanged(this.SelectedOldGoldList[index].Amount),this.SelectedOldGoldList.splice(index,1),this.PostOldGoldAttchJson.splice(index,1),this.EnableDisableSubmitBtn())}selectRecord(arg){null!=this.SelectedOldGoldList.find(x=>x.EstNo==arg.EstNo)?sweetalert_min_default()(\"error\",\"Old Gold Estimation already attached\",\"error\"):(this.SelectedOldGoldList.push(arg),$(\"#myOldGoldModal\").modal(\"hide\"),this.AttachOldGoldForm.reset(),this.AttachOldGoldList=[],this.OrderJson.SeriesNo=this.SalesEstNo,this.OrderJson.RefBillNo=arg.EstNo,this.OrderJson.OperatorCode=localStorage.getItem(\"Login\"),this.OrderJson.CompanyCode=this.ccode,this.OrderJson.BranchCode=this.bcode,this.PostOldGoldAttchJson.push(this.OrderJson),this.OrderJson={},this.EnableDisableSubmitBtn())}EnableDisableSubmitBtn(){this.SelectedOldGoldList.length<=0?this.EnableSubmitButton=!0:this.EnableSubmitButton=!1}ngOnDestroy(){this._CustomerService.SendCustDataToEstComp(null),this._estimationService.SendSRAttachmentSummaryData(null)}Cancel(){$(\"#myOldGoldModal\").modal(\"hide\"),this.AttachOldGoldForm.reset(),this.AttachOldGoldList=[]}getSearchParams(form){null!=form.value.searchby&&null!=form.value.searchText&&this._PurchaseService.getAttachOldGoldList(form.value.searchby,form.value.searchText).subscribe(response=>{this.AttachOldGoldList=response})}Amount(arg=[]){let total=0;return arg.forEach(d=>{total+=Number(d.Amount)}),this.OldGoldAttachmentSummaryData.Amount=total,this.OGAmountChanged(total),total}Quantity(arg=[]){let total=0;return arg.forEach(d=>{total+=d.Qty}),this.OldGoldAttachmentSummaryData.Quantity=total,total}};attacholdgold_component_AttacholdgoldComponent.ctorParameters=()=>[{type:purchase_service.a},{type:fesm2015_forms.FormBuilder},{type:estimation_service.a},{type:sales_service.a},{type:customer_service.a},{type:router.c}],tslib_es6.a([Object(core.Output)(),tslib_es6.c(\"design:type\",Object)],attacholdgold_component_AttacholdgoldComponent.prototype,\"valueChange\",void 0),tslib_es6.a([Object(core.Output)(),tslib_es6.c(\"design:type\",Object)],attacholdgold_component_AttacholdgoldComponent.prototype,\"OGAmountChange\",void 0),attacholdgold_component_AttacholdgoldComponent=tslib_es6.a([Object(core.Component)({selector:\"app-attacholdgold\",template:tslib_es6.b(__webpack_require__(\"jCgZ\")).default,styles:[tslib_es6.b(__webpack_require__(\"vMFa\")).default]}),tslib_es6.c(\"design:paramtypes\",[purchase_service.a,fesm2015_forms.FormBuilder,estimation_service.a,sales_service.a,customer_service.a,router.c])],attacholdgold_component_AttacholdgoldComponent);let stone_component_StoneComponent=class{constructor(toastr,_purchaseService,_estimationService,_router){this.toastr=toastr,this._purchaseService=_purchaseService,this._estimationService=_estimationService,this._router=_router,this.ccode=\"\",this.bcode=\"\",this.ShowHide=!0,this.password=appSettings.a.Pwd,this.EnableStnBtn=new core.EventEmitter,this.fieldArray=[],this.PurchaseLinesDetails=[],this.SalesEstNo=\"\",this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.count=0,this.Rate=0,this.purchaseDetails=[],this.StoneCarrat=0,this.stoneAmount=new core.EventEmitter,this.EstNo=0,this.StoneCarats=0,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableSubmitButton=!0,this.EnableStoneTab=!1,this.StoneDtls={estno:this.EstNo,item_sno:null,type:\"p\",Name:\"Old Diamond\",Qty:null,StWt:null,Carrat:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.CopyEditedRow=[],this.StoneCount=0,this.Stonetotal=0,this.Indicator=\"\",this._purchaseService.castStoneDetails.subscribe(response=>{for(var field in this.fieldArray=response,this.fieldArray)this.EnableEditDelbtn[field]=!0,this.EnableSaveCnlbtn[field]=!1,this.readonly[field]=!0,this.fieldArray[field].StWt=Number(this.fieldArray[field].Carrat/5)}),this.getCB(),\"/purchase\"==this._router.url||\"/estimation\"==this._router.url?this.ShowHide=!0:this.ShowHide=!1}getCB(){this.ccode=crypto_js.AES.decrypt(localStorage.getItem(\"ccode\"),this.password.trim()).toString(crypto_js.enc.Utf8),this.bcode=crypto_js.AES.decrypt(localStorage.getItem(\"bcode\"),this.password.trim()).toString(crypto_js.enc.Utf8)}EnableDisableStoneBtn(){this.EnableStnBtn.emit(this.EnableSubmitButton)}myfunction(e){var code=e.which?e.which:e.keyCode;code>31&&(code<48||code>57)&&e.preventDefault()}ngOnInit(){this.getStoneDets()}getStoneDets(){this._purchaseService.getOldStone().subscribe(response=>{this.OldStoneList=response})}addrow(){this.StoneDtls={estno:this.EstNo,item_sno:null,type:\"p\",Name:\"Old Stone\",Qty:null,StWt:null,Carrat:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.fieldArray.push(this.StoneDtls);for(let{}of this.fieldArray)this.count++;this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableDisableStoneBtn()}GetAmount(index){let Carrat=this.fieldArray[index].Carrat,Rate=this.fieldArray[index].Rate;this.fieldArray[index].Amount=Number(Carrat*Rate)}GetStoneKarat(index){this.fieldArray[index].Carrat=Number(5*this.fieldArray[index].StWt),this.GetAmount(index)}editFieldValue(index){1==this.EnableAddRow?this.toastr.warning(\"Please save the enabled item\",\"Alert!\"):(this.CopyEditedRow[index]=Object.assign({},this.fieldArray[index]),this.EnableEditDelbtn[index]=!1,this.EnableSaveCnlbtn[index]=!0,this.readonly[index]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDisableStoneBtn())}saveDataFieldValue(index){null==this.fieldArray[index].Qty||0==this.fieldArray[index].Qty?this.toastr.warning(\"Please Enter Qty\",\"Alert!\"):null==this.fieldArray[index].Carrat||0==this.fieldArray[index].Carrat?this.toastr.warning(\"Please Enter Carrat\",\"Alert!\"):null==this.fieldArray[index].Rate||0==this.fieldArray[index].Rate?this.toastr.warning(\"Please Enter Rate\",\"Alert!\"):(this.StoneCarrat=this.PurchaseLinesDetails.StneWt,1==this.StoneCarratTotal(this.fieldArray)?(this.StoneCarats=this.fieldArray[index].StneWt,\"\"==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstStoneDetailsVM[index]=this.fieldArray[index]),this.EnableEditDelbtn[index]=!0,this.EnableSaveCnlbtn[index]=!1,this.readonly[index]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendStoneAmtToPurComp(),this.EnableDisableStoneBtn()):(\"A\"==this.Indicator?this.toastr.error(\"Entered Stone wt is greater than the Purchase stone wt\",\"Alert!\"):\"B\"==this.Indicator&&\"/estimation\"==this._router.url?this.toastr.error(\"Entered Stone wt is lesser than the Purchase stone wt\",\"Alert!\"):(this.StoneCarats=this.fieldArray[index].StneWt,\"\"==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstStoneDetailsVM[index]=this.fieldArray[index]),this.EnableEditDelbtn[index]=!0,this.EnableSaveCnlbtn[index]=!1,this.readonly[index]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendStoneAmtToPurComp()),this.EnableDisableStoneBtn()))}cancelDataFieldValue(index){this.EnableAddRow=!1,null!=this.CopyEditedRow[index]?(this.fieldArray[index]=this.CopyEditedRow[index],this.CopyEditedRow[index]=null,this.EnableSaveCnlbtn[index]=!1,this.EnableEditDelbtn[index]=!0,this.readonly[index]=!0,this.CopyEditedRow=[]):this.fieldArray.splice(index,1),this.EnableDisableSubmit()}EnableDisableSubmit(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0),this.EnableDisableStoneBtn()}deleteFieldValue(index){1==this.EnableAddRow?this.toastr.warning(\"Please save the enabled item\",\"Alert!\"):(this.fieldArray.splice(index,1),this.EnableDisableSubmit(),this.SendStoneAmtToPurComp())}Amount(arg){let total=0;return arg.forEach(d=>{total+=parseFloat(d.Amount)}),this.stoneValue=total,this.SendStoneAmtToPurComp(),total}SendStoneAmtToPurComp(){this.stoneAmount.emit(this.stoneValue)}StoneCarratTotal(Item){for(var field of(this.Stonetotal=0,Item))this.Stonetotal+=Number(this.fieldArray[this.StoneCount].StWt),this.StoneCount++;return this.StoneCount=0,this.Stonetotal>this.StoneCarrat?(this.Indicator=\"A\",!1):!(this.Stonetotal<this.StoneCarrat)||(this.Indicator=\"B\",!1)}};stone_component_StoneComponent.ctorParameters=()=>[{type:ngx_toastr.b},{type:purchase_service.a},{type:estimation_service.a},{type:router.c}],tslib_es6.a([Object(core.Output)(),tslib_es6.c(\"design:type\",Object)],stone_component_StoneComponent.prototype,\"EnableStnBtn\",void 0),tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Object)],stone_component_StoneComponent.prototype,\"PurchaseLinesDetails\",void 0),tslib_es6.a([Object(core.Output)(),tslib_es6.c(\"design:type\",Object)],stone_component_StoneComponent.prototype,\"stoneAmount\",void 0),tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Number)],stone_component_StoneComponent.prototype,\"EstNo\",void 0),tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Number)],stone_component_StoneComponent.prototype,\"StoneCarats\",void 0),tslib_es6.a([Object(core.Input)(),tslib_es6.c(\"design:type\",Boolean)],stone_component_StoneComponent.prototype,\"EnableStoneTab\",void 0),stone_component_StoneComponent=tslib_es6.a([Object(core.Component)({selector:\"app-stone\",template:tslib_es6.b(__webpack_require__(\"tt6M\")).default,styles:[tslib_es6.b(__webpack_require__(\"VNmN\")).default]}),tslib_es6.c(\"design:paramtypes\",[ngx_toastr.b,purchase_service.a,estimation_service.a,router.c])],stone_component_StoneComponent);var ngx_pagination=__webpack_require__(\"oOf3\"),payment_module=__webpack_require__(\"NSaA\");__webpack_require__.d(__webpack_exports__,\"PurchaseModule\",(function(){return PurchaseModule}));let PurchaseModule=class{};PurchaseModule=tslib_es6.a([Object(core.NgModule)({declarations:[purchase_component_PurchaseComponent,diamond_component_DiamondComponent,attacholdgold_component_AttacholdgoldComponent,stone_component_StoneComponent,ReprintPurchaseestimationComponent,purchase_billing_component_PurchaseBillingComponent,purchase_cancel_component_PurchaseCancelComponent,reprint_purchasebill_component_ReprintPurchasebillComponent],imports:[common.CommonModule,PurchaseRoutingModule,fesm2015_forms.ReactiveFormsModule,fesm2015_forms.FormsModule,customer_module.CustomerModule,ngx_bootstrap_collapse.b,ngx_pagination.a,payment_module.a,full_module.a],exports:[purchase_component_PurchaseComponent,attacholdgold_component_AttacholdgoldComponent,ReprintPurchaseestimationComponent],schemas:[core.CUSTOM_ELEMENTS_SCHEMA]})],PurchaseModule)},VNmN:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=\"\"},VZds:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=\"\\r\\n.profile-card {\\r\\n    position: relative;\\r\\n    box-shadow: 0px 3px 6px rgba(0,0,0,.05);\\r\\n\\r\\n}\\r\\n\\r\\n.profile-card .btn-edit {\\r\\n    position: absolute;\\r\\n    top: 1rem;\\r\\n    right: 1.2rem;\\r\\n    font-size: 1.4rem;\\r\\n}\\r\\n\\r\\n.profile-card .profile-picture {\\r\\n    width: 7.4rem;\\r\\n}\\r\\n\\r\\n.profile-card .quote-text {\\r\\n    font-size: .85rem;\\r\\n    line-height: 1.55rem;\\r\\n}\\r\\n\\r\\n.profile-card .social-section {\\r\\n    margin-top: 1rem;\\r\\n}\\r\\n\\r\\n.profile-card .social-section a {\\r\\n    font-size: 1rem;\\r\\n    line-height: 2.15rem;\\r\\n    width: 2.2rem;\\r\\n    height: 2.2rem;\\r\\n    border: 1px solid #d6d6d6;\\r\\n    color: #d6d6d6;\\r\\n    border-radius: 50%;\\r\\n    margin: 0 .5rem;\\r\\n}\\r\\n\\r\\n.profile-card .social-section a:hover {\\r\\n    background-color: #007bff;\\r\\n    border-color: #007bff;\\r\\n    color: #fff;\\r\\n}\\r\\n\\r\\n.card-header{\\r\\n    border-radius: 15px !important;\\r\\n  }\\r\\n\\r\\n.card{\\r\\n    border-radius: 15px !important;\\r\\n  \\r\\n  }\\r\\n\\r\\n.card-body{ \\r\\n    padding: 10px 30px 0px 30px !important; \\r\\n    border-bottom: 2px solid black;\\r\\n    border-radius: 15px;\\r\\n  }\"},W3e5:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<ng-container *ngIf=\"ifPurchase\">\\r\\n    <div style=\"color: brown; text-align: right; font-style: italic;\">\\r\\n        <app-lastdocno></app-lastdocno>\\r\\n    </div>\\r\\n</ng-container>\\r\\n<div class=\"row\" *ngIf=\"ifPurchase\">\\r\\n    <div class=\"col-md-12\">\\r\\n        <label *ngFor=\"let radiobutton of radioItems\" class=\"form-check-inline\">\\r\\n            <input type=\"radio\" name=\"option\" (click)=\"OnRadioBtnChnge(radiobutton)\" class=\"form-check-input\"\\r\\n                [value]=\"radiobutton\" [checked]=\"radiobutton === model.option\">\\r\\n            <h3 style=\"margin-top: 5px;\">{{radiobutton}}</h3>\\r\\n        </label>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<div id=\"accordian\" class=\"accordion\" *ngIf=\"ifPurchase\">\\r\\n    <div class=\"card\" *ngIf=\"ToggleEstimation\">\\r\\n        <div id=\"header\" class=\"card-body show\">\\r\\n\\r\\n            <div class=\"row\">\\r\\n                <div class=\"col-md-3 \">\\r\\n                    <div class=\"form-group\">\\r\\n                        <label for=\"exampleAccount\">Est no</label>\\r\\n                        <input type=\"number\" class=\"form-control\"\\r\\n                            oninput=\"this.value = this.value.replace(/[^0-9.]/g, \\'\\').replace(/(\\\\..*)\\\\./g, \\'$1\\');\"\\r\\n                            onKeyPress=\"if(this.value.length==7) return false;\" placeholder=\"Est No\"\\r\\n                            (change)=\"EstimationDetails(estNo.value)\" #estNo>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\"col-md-3 \">\\r\\n                    <div class=\"form-group\">\\r\\n                        <label for=\"barcode\"></label>\\r\\n                        <div class=\"input-group\">\\r\\n                            <button class=\"btn waves-effect waves-light btn-rounded btn-outline-secondary\"\\r\\n                                style=\"margin-top: 5px;\" (click)=\"EstimationDetails(estNo.value)\"><i\\r\\n                                    class=\"fal fa-search\"></i> Search</button>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                \\x3c!-- <div class=\"col-md-3\">\\r\\n                    <div class=\"card-body\">\\r\\n                        <div class=\"text-right\"><i class=\"fal fa-calendar-alt\"></i>&nbsp; <span class=\"text-muted\">Order\\r\\n                                Date</span>\\r\\n                            <h1 class=\"font-light\"></h1>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div> --\\x3e\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <ng-container *ngIf=\"ShowHidePurEst\">\\r\\n        <br *ngIf=\"ToggleEstimation\">\\r\\n        <div class=\"card mb-0\">\\r\\n            <div class=\"card-header collapsed\" style=\"background-color: #0878A4;color:white\">\\r\\n                <a class=\"card-title align-middle Pointer text-white\" (click)=\"ToggleCustomerData()\"\\r\\n                    data-toggle=\"collapse\" href=\"#Customer\">\\r\\n                    <i class=\"fas fa-2x fa-users mr-2 align-middle\"></i>\\r\\n                    <span class=\"align-middle Pointer\"><ins>Customer Details</ins></span>\\r\\n                </a>\\r\\n                \\x3c!-- <ng-container *ngIf=\" ToggleCustomer\"> --\\x3e\\r\\n                <ng-container *ngIf=\"CollapseCustomerTab\">\\r\\n                    <ng-container *ngIf=\"CustomerDets\">\\r\\n                        <div class=\"col-md-4 pull-right\">\\r\\n                            <h4 class=\"text-white\"><span class=\"align-middle\"> ID: {{customerDtls.ID}}</span></h4>\\r\\n                        </div>\\r\\n                        <div class=\"col-md-4 pull-right\">\\r\\n                            <h4 class=\"text-white\"><span class=\"align-middle\"> Customer:\\r\\n                                    {{customerDtls.CustName}}</span>\\r\\n                            </h4>\\r\\n                        </div>\\r\\n                    </ng-container>\\r\\n                </ng-container>\\r\\n                \\x3c!-- </ng-container> --\\x3e\\r\\n                \\x3c!-- </ng-container> --\\x3e\\r\\n            </div>\\r\\n            <div id=\"Customer\" class=\"card-body collapse\" [collapse]=\"CollapseCustomerDetailsTab\">\\r\\n                <app-customer>\\r\\n                </app-customer>\\r\\n            </div>\\r\\n        </div>\\r\\n    </ng-container>\\r\\n</div>\\r\\n<br>\\r\\n\\r\\n<ng-container *ngIf=\"ShowHidePurEst\">\\r\\n    <div class=\"card\">\\r\\n        <div class=\"card-body\">\\r\\n            <form [formGroup]=\"PurchaseForm\" class=\"form-horizontal\">\\r\\n                <div class=\"row\">\\r\\n                    <div class=\"col-md-2 \">\\r\\n                        <div class=\"form-group\">\\r\\n                            <label for=\"SalCode\">Sales Person</label>\\r\\n                            <div class=\"form-group\">\\r\\n                                <select class=\"form-control mr-auto mt-2 mt-lg-0\" formControlName=\"SalCode\"\\r\\n                                    [(ngModel)]=\"PurSalCode\">\\r\\n                                    <option [disabled]=\"EnableDisableSalesPerson\" [ngValue]=\"null\">Select</option>\\r\\n                                    <option [disabled]=\"EnableDisableSalesPerson\" *ngFor=\"let _salesman of SalesManList\"\\r\\n                                        [value]=\"_salesman.sal_code\">\\r\\n                                        {{_salesman.CodeName}}\\r\\n                                    </option>\\r\\n                                </select>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\"col-md-2 \">\\r\\n                        <div class=\"form-group\">\\r\\n                            <label for=\"GS\">GS Type</label>\\r\\n                            <div class=\"form-group\">\\r\\n                                <select class=\"form-control mr-auto mt-2 mt-lg-0\" #GS formControlName=\"GS\"\\r\\n                                    (change)=\"getItemList(PurchaseForm)\">\\r\\n                                    <option [ngValue]=\"null\" [disabled]=\"EnableDropdown\">Select</option>\\r\\n                                    <option *ngFor=\"let _GSList of GSList\" [value]=\"_GSList.gs_code\"\\r\\n                                        [disabled]=\"EnableDropdown\">\\r\\n                                        {{_GSList.item_level1_name}}\\r\\n                                    </option>\\r\\n                                </select>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\"col-md-2 \">\\r\\n                        <div class=\"form-group\">\\r\\n                            <label for=\"RateType\">Rate Type</label>\\r\\n                            <div class=\"input-group\">\\r\\n                                <select class=\"form-control mr-auto mt-2 mt-lg-0\" #RateType formControlName=\"RateType\"\\r\\n                                    (change)=\"toggleRateType(PurchaseForm)\">\\r\\n                                    <option *ngFor=\"let _RateTypeData of RateTypeData\" [ngValue]=\"_RateTypeData.value\"\\r\\n                                        [disabled]=\"EnableRateType\">\\r\\n                                        {{_RateTypeData.name}}\\r\\n                                    </option>\\r\\n                                    \\x3c!-- <option *ngFor=\"let _RateTypeData of RateTypeData\" [ngValue]=\"_RateTypeData.value\">\\r\\n                                    {{_RateTypeData.name}}\\r\\n                                </option> --\\x3e\\r\\n                                </select>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\"col-md-2 \" *ngIf=\"EnableDisablectrls\">\\r\\n                        <div class=\"form-group float-left\" style=\"margin-top: 2px;\">\\r\\n                            <button class=\"btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right\"\\r\\n                                style=\"margin-top: 1.2rem !important;\" [disabled]=\"EnableAddRow\"\\r\\n                                (click)=\"add(PurchaseForm)\">\\r\\n                                <i class=\"far fa-plus-circle\"></i> Add</button>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\"col-md-2 float-right\">\\r\\n                        <div class=\"form-group\">\\r\\n                            <div class=\"text-right\"><i class=\"fal fa-rupee-sign\"></i>&nbsp; <span\\r\\n                                    class=\"text-muted\">Date</span>\\r\\n                                <h1 class=\"font-light\">{{applicationDate | date:\\'dd/MM/yyyy\\'}}</h1>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\"col-md-2 float-right\">\\r\\n                        <div class=\"form-group\">\\r\\n                            <div class=\"text-right\"><i class=\"fal fa-rupee-sign\"></i>&nbsp; <span\\r\\n                                    class=\"text-muted\">Rate/Gram</span>\\r\\n                                <h1 class=\"font-light\">{{Rate | number : \\'1.2-2\\'}}</h1>\\r\\n                                \\x3c!-- <div class=\"form-group\">\\r\\n                    <input style=\"width: 80px;\" class=\"form-control\" id=\"RatePerGram\" formControlName=\"RatePerGram\" [(ngModel)]=\"RatePerGram\"\\r\\n                        placeholder=\"RatePerGram\"type=\"number\" [ngModelOptions]=\"{standalone: true}\"  (change)=\" RateperGram()\">\\r\\n                </div> --\\x3e\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </form>\\r\\n\\r\\n            <div class=\"table-responsive\">\\r\\n                <table class=\"table table-bordered\" style=\"width: 2000px;\">\\r\\n                    <thead class=\"topbar\">\\r\\n                        <tr>\\r\\n                            <th></th>\\r\\n                            <th>Item</th>\\r\\n                            <th>Gr. Wt</th>\\r\\n                            <th>St. Wt</th>\\r\\n                            <th>DM. Ct</th>\\r\\n                            <th>Nt.Wt</th>\\r\\n                            <th>Purity %</th>\\r\\n                            <th>Melting %</th>\\r\\n                            <th>M. Loss</th>\\r\\n                            <th>Purchase Rate</th>\\r\\n                            <th>Di/St.Amt</th>\\r\\n                            <th>Amount</th>\\r\\n                            <th *ngIf=\"EnableDisablectrls\">Action</th>\\r\\n                        </tr>\\r\\n                    </thead>\\r\\n                    <tbody *ngFor=\"let field of fieldArray; let i = index\">\\r\\n                        <tr>\\r\\n                            <td style=\"width:150px;\">\\r\\n                                <h3><a href=\"javascript:void(0)\" (click)=\"sendDataToDiamondComp(field,i)\"\\r\\n                                        data-toggle=\"collapse\" [attr.data-target]=\"\\'#collapse\\'+ i\"\\r\\n                                        id=\\'panels\\'>Diamond</a>\\r\\n                                    / <a href=\"javascript:void(0)\" (click)=\"sendDataToStoneComp(field,i)\"\\r\\n                                        data-toggle=\"collapse\" [attr.data-target]=\"\\'#collapseStone\\'+ i\"\\r\\n                                        id=\\'panels\\'>Stone</a>\\r\\n                                </h3>\\r\\n                            </td>\\r\\n                            <td style=\"width:300px;\">\\r\\n                                <select class=\"form-control mr-auto mt-2 mt-lg-0\" #Item name=\"{{field.ItemName}}\"\\r\\n                                    (change)=\"AJAXRateperGram(Item.value,i);\" [(ngModel)]=\"field.ItemName\">\\r\\n                                    <option [ngValue]=\"null\" [disabled]=\"readonly[i]\">Select</option>\\r\\n                                    \\x3c!-- <option *ngFor=\"let _ItemList of ItemList\" [value]=\"_ItemList.Karat\"\\r\\n                                    [disabled]=\"readonly[i]\">\\r\\n                                    {{_ItemList.Item}}\\r\\n                                </option> --\\x3e\\r\\n                                    <option *ngFor=\"let _ItemList of ItemList\" [value]=\"_ItemList.Item_code\"\\r\\n                                        [disabled]=\"readonly[i]\">\\r\\n                                        {{_ItemList.Item}}\\r\\n                                    </option>\\r\\n                                </select>\\r\\n                            </td>\\r\\n                            <td style=\"width:150px;\">\\r\\n                                <input [(ngModel)]=\"field.GrossWt\" [readonly]=\"readonly[i]\" class=\"form-control\"\\r\\n                                    type=\"text\" (change)=\"GetNetWT(i);\" appNumbersOnly min=\"0\" name=\"{{field.GrossWt}}\"\\r\\n                                    placeholder=\"0.000\" />\\r\\n                            </td>\\r\\n                            <td style=\"width:150px;\">\\r\\n                                <ng-container\\r\\n                                    *ngIf=\"ItemType != \\'OGCN24K\\' && ItemType != \\'OGCN\\' && ItemType != \\'OG24K\\'\">\\r\\n                                    <input [(ngModel)]=\"field.StneWt\" [readonly]=\"readonly[i]\" class=\"form-control\"\\r\\n                                        type=\"text\" min=\"0\" [ngModelOptions]=\"{standalone: true}\"\\r\\n                                        name=\"{{field.StneWt}}\" (change)=\"GetNetWT(i);\" placeholder=\"0.000\"\\r\\n                                        appNumbersOnly />\\r\\n                                </ng-container>\\r\\n                                <ng-container\\r\\n                                    *ngIf=\"ItemType == \\'OGCN24K\\' || ItemType == \\'OGCN\\' || ItemType == \\'OG24K\\'\">\\r\\n                                    <h3 [(ngModel)]=\"field.StneWt\" ngDefaultControl\\r\\n                                        [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\r\\n                                        {{field.StneWt || \"0.00\" | number}}</h3>\\r\\n                                </ng-container>\\r\\n                            </td>\\r\\n                            <ng-container\\r\\n                                *ngIf=\"ItemType == \\'OSSL\\' || ItemType == \\'OG24K\\' || ItemType == \\'OGCN\\' || ItemType == \\'OGCN24K\\'\">\\r\\n                                <td style=\"width:150px;\">\\r\\n                                    <input [(ngModel)]=\"field.Dcts\" class=\"form-control\" type=\"text\" min=\"0\"\\r\\n                                        [ngModelOptions]=\"{standalone: true}\" name=\"{{field.Dcts}}\" placeholder=\"0.000\"\\r\\n                                        readonly />\\r\\n                                </td>\\r\\n                            </ng-container>\\r\\n                            <ng-container\\r\\n                                *ngIf=\"ItemType != \\'OSSL\\' && ItemType != \\'OG24K\\' && ItemType != \\'OGCN\\' && ItemType != \\'OGCN24K\\'\">\\r\\n                                <td style=\"width:150px;\">\\r\\n                                    <input [(ngModel)]=\"field.Dcts\" class=\"form-control\" type=\"text\" min=\"0\"\\r\\n                                        [readonly]=\"readonly[i]\" [ngModelOptions]=\"{standalone: true}\"\\r\\n                                        name=\"{{field.Dcts}}\" placeholder=\"0.000\" appNumbersOnly />\\r\\n                                </td>\\r\\n                            </ng-container>\\r\\n                            <td style=\"width:150px;\">\\r\\n                                <h3 [(ngModel)]=\"field.NetWt\" ngDefaultControl [ngModelOptions]=\"{standalone: true}\"\\r\\n                                    class=\"align-middle\">{{field.NetWt || \"0.00\" | number}}</h3>\\r\\n                            </td>\\r\\n                            <td style=\"width:150px;\">\\r\\n                                <ng-Container *ngIf=\"EnableDisablePurPer\">\\r\\n                                    <h3 [(ngModel)]=\"field.PurityPercent\" ngDefaultControl\\r\\n                                        [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\r\\n                                        {{field.PurityPercent || \"0.00\" | number}}</h3>\\r\\n                                </ng-Container>\\r\\n                                <ng-Container *ngIf=\"!EnableDisablePurPer\">\\r\\n                                    <input [(ngModel)]=\"field.PurityPercent\" [readonly]=\"readonly[i]\"\\r\\n                                        class=\"form-control\" type=\"text\" min=\"0\" [ngModelOptions]=\"{standalone: true}\"\\r\\n                                        name=\"{{field.PurityPercent}}\" (change)=\"GetMLLoss_MLPercentage(i);\"\\r\\n                                        placeholder=\"0\" appNumbersOnly />\\r\\n                                </ng-Container>\\r\\n                            </td>\\r\\n                            <td style=\"width:125px;\">\\r\\n                                \\x3c!-- <input [(ngModel)]=\"field.MeltingPercent\" class=\"form-control\" readonlytype=\"number\" readonly\\r\\n                        [ngModelOptions]=\"{standalone: true}\" name=\"{{field.MeltingPercent}}\" placeholder=\"0.00\" /> --\\x3e\\r\\n\\r\\n                                <h3 [(ngModel)]=\"field.MeltingPercent\" ngDefaultControl\\r\\n                                    [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\r\\n                                    {{field.MeltingPercent || \"0.00\" | number}}</h3>\\r\\n                            </td>\\r\\n                            <td style=\"width:125px;\">\\r\\n                                \\x3c!-- <input [(ngModel)]=\"field.MeltingLoss\" class=\"form-control\" type=\"number\" readonly readonly\\r\\n                        [ngModelOptions]=\"{standalone: true}\" name=\"{{field.MeltingLoss}}\" placeholder=\"0.00\" /> --\\x3e\\r\\n\\r\\n                                <h3 [(ngModel)]=\"field.MeltingLoss\" ngDefaultControl\\r\\n                                    [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\r\\n                                    {{field.MeltingLoss || \"0.000\" | number}}</h3>\\r\\n                            </td>\\r\\n                            <td style=\"width:150px;\">\\r\\n                                <ng-container\\r\\n                                    *ngIf=\"ItemType != \\'OGPP\\' && ItemType != \\'OSSL\\' && ItemType != \\'OG22\\' && EnablePurchaseRate\">\\r\\n                                    <input [(ngModel)]=\"field.PurchaseRate\" class=\"form-control\" type=\"text\"\\r\\n                                        [readonly]=\"readonly[i]\" [ngModelOptions]=\"{standalone: true}\"\\r\\n                                        name=\"{{field.PurchaseRate}}\" appNumbersOnly placeholder=\"0.00\"\\r\\n                                        (change)=\"ItemAmountCalc(i);\" />\\r\\n                                </ng-container>\\r\\n                                <ng-container *ngIf=\"ItemType == \\'OGPP\\' || ItemType == \\'OSSL\\'\">\\r\\n                                    <input [(ngModel)]=\"field.PurchaseRate\" class=\"form-control\" type=\"text\"\\r\\n                                        [readonly]=\"readonly[i]\" [ngModelOptions]=\"{standalone: true}\"\\r\\n                                        name=\"{{field.PurchaseRate}}\" appNumbersOnly placeholder=\"0.00\"\\r\\n                                        (change)=\"ItemAmountCalc(i);\" />\\r\\n\\r\\n                                </ng-container>\\r\\n                                <ng-container\\r\\n                                    *ngIf=\"ItemType != \\'OGPP\\' && ItemType != \\'OSSL\\' && ItemType != \\'OG22\\' && !EnablePurchaseRate\">\\r\\n                                    <h3 [(ngModel)]=\"field.PurchaseRate\" ngDefaultControl\\r\\n                                        [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\r\\n                                        {{field.PurchaseRate || \"0.00\" | number}}</h3>\\r\\n                                </ng-container>\\r\\n                                <ng-container *ngIf=\"ItemType == \\'OG22\\'\">\\r\\n                                    <h3 [(ngModel)]=\"field.PurchaseRate\" ngDefaultControl\\r\\n                                        [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\r\\n                                        {{field.PurchaseRate || \"0.00\" | number}}</h3>\\r\\n                                </ng-container>\\r\\n                            </td>\\r\\n                            <td style=\"width:125px;\">\\r\\n                                \\x3c!-- <input [(ngModel)]=\"field.DiamondAmount\" class=\"form-control\" type=\"number\" readonly\\r\\n                        [ngModelOptions]=\"{standalone: true}\" name=\"{{field.DiamondAmount}}\" placeholder=\"0.00\" /> --\\x3e\\r\\n                                <h3 [(ngModel)]=\"field.DiamondAmount\" ngDefaultControl\\r\\n                                    [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\r\\n                                    {{field.DiamondAmount || \"0.00\" | number}}</h3>\\r\\n                            </td>\\r\\n                            <td style=\"width:125px;\">\\r\\n                                \\x3c!-- <input [(ngModel)]=\"field.ItemAmount\" class=\"form-control\" type=\"number\" readonly\\r\\n                        [ngModelOptions]=\"{standalone: true}\" name=\"{{field.ItemAmount}}\" placeholder=\"0.00\" /> --\\x3e\\r\\n                                <h3 [(ngModel)]=\"field.ItemAmount\" ngDefaultControl\\r\\n                                    [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\r\\n                                    {{field.ItemAmount || \"0.00\" | number}}</h3>\\r\\n                            </td>\\r\\n                            <td style=\"width:150px;\">\\r\\n                                <ng-container *ngIf=\"EnableDisablectrls\">\\r\\n                                    <ng-container *ngIf=\"EnableEditDelbtn[i]\">\\r\\n                                        <button class=\"btn btn-default btn-rounded\" type=\"button\"\\r\\n                                            (click)=\"editFieldValue(i)\"><i class=\"fal fa-pencil-alt\"></i> Edit</button>\\r\\n                                        <button class=\"btn btn-danger btn-rounded\" type=\"button\"\\r\\n                                            (click)=\"deleteFieldValue(i)\"><i class=\"fal fa-trash-alt\"></i>\\r\\n                                            Delete</button>\\r\\n                                    </ng-container>\\r\\n                                    <ng-container *ngIf=\"EnableSaveCnlbtn[i]\">\\r\\n                                        <button class=\"btn btn-success btn-rounded\" type=\"button\"\\r\\n                                            (click)=\"saveDataFieldValue(i)\"><i class=\"fal fa-save\"></i> Save</button>\\r\\n                                        <button class=\"btn btn-warning btn-rounded\" type=\"button\"\\r\\n                                            (click)=\"cancelDataFieldValue(i)\"><i class=\"far fa-window-close\"></i>\\r\\n                                            Cancel</button>\\r\\n                                    </ng-container>\\r\\n                                </ng-container>\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                        <tr>\\r\\n                            <td colspan=\"11\" class=\"hiddenRow\" *ngIf=\"i === Index\">\\r\\n                                <div class=\"collapse wrapper\" id=\"collapse{{i}}\" data-parent=\"#panels\">\\r\\n                                    <app-diamond (diamondAmount)=\"receiveStoneDiamondAmt()\"\\r\\n                                        (EnableDmdBtn)=\"EnableDisableDmdBtn($event)\"\\r\\n                                        [PurchaseLinesDetails]=\"LinesDetails\" [EnableDiamondTab]=\"EnableDiamondTab\"\\r\\n                                        [EstNo]=\"SalesEstNo\" [DmCarats]=\"DmCarats\"></app-diamond>\\r\\n                                </div>\\r\\n                                <div class=\"collapse wrapper\" id=\"collapseStone{{i}}\" data-parent=\"#panels\">\\r\\n                                    <app-stone (stoneAmount)=\"receiveStoneDiamondAmt()\"\\r\\n                                        (EnableStnBtn)=\"EnableDisableStnBtn($event)\"\\r\\n                                        [PurchaseLinesDetails]=\"LinesDetails\" [EnableStoneTab]=\"EnableStoneTab\"\\r\\n                                        [EstNo]=\"SalesEstNo\" [StoneCarats]=\"StoneCarats\"></app-stone>\\r\\n                                </div>\\r\\n                            </td>\\r\\n                        </tr>\\r\\n                    </tbody>\\r\\n                </table>\\r\\n            </div>\\r\\n            <br>\\r\\n            \\x3c!-- Row --\\x3e\\r\\n            <div class=\"row\">\\r\\n                \\x3c!-- Column --\\x3e\\r\\n                <div class=\"col-lg-4 col-md-6\">\\r\\n                    <div class=\"card\">\\r\\n                        <div class=\"row\">\\r\\n                            <div class=\"col-12\">\\r\\n                                <div class=\"social-widget\">\\r\\n                                    <div class=\"soc-content\">\\r\\n                                        <div class=\"col-6 b-r\">\\r\\n                                            <h3 class=\"font-medium\">{{GrossWtTotal(fieldArray) || \"0.00\" | number}}</h3>\\r\\n                                            <h5 class=\"text-muted\">Total Gr. Wt.</h5>\\r\\n                                        </div>\\r\\n                                        <div class=\"col-6\">\\r\\n                                            <h3 class=\"font-medium\">{{StneWt(fieldArray) || \"0.000\" | number}}</h3>\\r\\n                                            <h5 class=\"text-muted\">Total St. Wt.</h5>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                \\x3c!-- Column --\\x3e\\r\\n                \\x3c!-- Column --\\x3e\\r\\n                <div class=\"col-lg-4 col-md-6\">\\r\\n                    <div class=\"card\">\\r\\n                        <div class=\"row\">\\r\\n                            <div class=\"col-12\">\\r\\n                                <div class=\"social-widget\">\\r\\n                                    <div class=\"soc-content\">\\r\\n                                        <div class=\"col-6 b-r\">\\r\\n                                            <h3 class=\"font-medium\">{{NetWt(fieldArray) || \"0.00\" | number}}</h3>\\r\\n                                            <h5 class=\"text-muted\">Total Net Wt.</h5>\\r\\n                                        </div>\\r\\n                                        <div class=\"col-6\">\\r\\n                                            <h3 class=\"font-medium\">{{Dcts(fieldArray) || \"0.00\" | number}}</h3>\\r\\n                                            <h5 class=\"text-muted\">Total Carats</h5>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                \\x3c!-- Column --\\x3e\\r\\n                \\x3c!-- Column --\\x3e\\r\\n                <div class=\"col-lg-4 col-md-6\">\\r\\n                    <div class=\"card\">\\r\\n                        <div class=\"row\">\\r\\n                            <div class=\"col-12\">\\r\\n                                <div class=\"social-widget\">\\r\\n                                    <div class=\"soc-content\">\\r\\n                                        <div class=\"col-4 b-r\">\\r\\n                                            <h3 class=\"font-medium\">{{Amount(fieldArray) | number: \\'1.2-2\\'}}</h3>\\r\\n                                            <h5 class=\"text-muted\">Item Total</h5>\\r\\n                                        </div>\\r\\n                                        <div class=\"col-4 b-r\">\\r\\n                                            <h3 class=\"font-medium\">{{rndoff | number: \\'1.2-2\\'}}</h3>\\r\\n                                            <h5 class=\"text-muted\">Round Off</h5>\\r\\n                                        </div>\\r\\n                                        <div class=\"col-6 b-r\">\\r\\n                                            <h3 class=\"font-medium\">{{Amount(fieldArray) | currencyFormat}}</h3>\\r\\n                                            <h5 class=\"text-muted\">Est. Total</h5>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n            <ng-container *ngIf=\"EnableDisablectrls\">\\r\\n                <div class=\"row pt-1\">\\r\\n                    <div class=\"col-md-4\">\\r\\n                        <button\\r\\n                            class=\"btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary \"\\r\\n                            (click)=\"SavePurchaseEst()\">\\r\\n                            <i class=\"far fa-save\"></i> Submit</button>\\r\\n                        <button class=\"btn btn-danger waves-effect waves-light btn-rounded btn-secondary\" type=\"button\"\\r\\n                            (click)=\"cancelPurchaseEst()\"><i class=\"far fa-window-close\"></i>&nbsp;Cancel</button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </ng-container>\\r\\n            <ng-container *ngIf=\"EnableReprint\">\\r\\n                <app-reprint-purchaseestimation></app-reprint-purchaseestimation>\\r\\n            </ng-container>\\r\\n        </div>\\r\\n    </div>\\r\\n</ng-container>\\r\\n\\r\\n\\r\\n<span *ngIf=\"ifPurchase\" style=\"color: red;\">Note : All weights are in grams and Amount in INR</span>\\r\\n\\r\\n\\r\\n\\r\\n\\x3c!--         \\r\\n        <div class=\"row\">\\r\\n    <div class=\"col-md-3\">\\r\\n        <p>{{SalesEstNo}}</p>\\r\\n    </div>\\r\\n   \\r\\n    <div class=\"col-md-6\">\\r\\n        <pre>{{fieldArray | json}}</pre>\\r\\n    </div>\\r\\n</div> --\\x3e\\r\\n\\r\\n\\x3c!-- Row --\\x3e\\r\\n\\r\\n\\x3c!-- <div class=\"col-md-3\">\\r\\n            <pre>{{PurchaseLinesPost | json}}</pre>\\r\\n        </div> --\\x3e\\r\\n\\r\\n\\r\\n\\x3c!-- Added for Plain Text printing related to Purchase Estimation--\\x3e\\r\\n\\r\\n\\x3c!-- <div class=\"modal fade\" id=\"PurchaseEstimationPlainTextTab\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"PurchaseEstimationPlainTextTabLabel\"\\r\\naria-hidden=\"true\">\\r\\n<div class=\"modal-dialog modal-lg\" role=\"document\" style=\"max-width: 900px\">\\r\\n    <div class=\"modal-content\">\\r\\n        <div class=\"modal-header\">\\r\\n            <button type=\"button\"\\r\\n                class=\"btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary\"\\r\\n                id=\"PurchaseEstimationPlainTextTabLabel\" (click)=printPurchaseEstimationPlainText()><i class=\"fal fa-print\"></i> Print</button>\\r\\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\r\\n                <span aria-hidden=\"true\">&times;</span>\\r\\n            </button>\\r\\n        </div>\\r\\n        <div class=\"container invoice-box htmlPrint\" id=\"print-closed-section\" style=\"max-width: 900px;border-width: 2em\">\\r\\n               <pre>{{purchaseEstimationPlainTextDetails}}</pre>                \\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n</div> --\\x3e\\r\\n\\r\\n\\x3c!-- Ends here --\\x3e'},aTHM:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class=\"row\" style=\"display:block;margin: auto;width: 30%;\" *ngIf=\"ShowHide\">\\n  <form class=\"form-horizontal\">\\n    <div class=\"col-md-12\">\\n      <div class=\"card\">\\n        <div class=\"card-body\">\\n          <div class=\"row\">\\n            <div class=\"col-md-12\">\\n              <div class=\"form-group\">\\n                <label for=\"exampleAccount\">Purchase Est No:</label>\\n                <div class=\"input-group\">\\n                  <input class=\"form-control\" id=\"exampleAccount\" placeholder=\"Est No\" type=\"number\" #estNo>\\n                </div>\\n              </div>\\n              <div class=\"form-group\">\\n                <button class=\"printMe btn btn-success waves-effect waves-light btn-rounded btn-secondary\"\\n                  (click)=\"getPurchaseEstimationDetails(estNo.value)\"><i class=\"fal fa-print\"></i>\\n                  Reprint </button>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </form>\\n</div>\\n\\n\\x3c!-- <div class=\"modal fade\" id=\"PurchaseModal\"  data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\\n  aria-hidden=\"true\" *ngIf=\"EnablePurchaseReprintHeaders\">\\n  <div class=\"modal-dialog modal-lg\" role=\"document\" style=\"max-width: 1100px;\">\\n    <div class=\"modal-content\">\\n      <div class=\"modal-header\">\\n        <button type=\"button\" class=\"btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary\"\\n          id=\"exampleModalLabel\" (click)=printPurchase()><i class=\"fal fa-print\"></i> Print</button>\\n        <button type=\"button\" class=\"close\" (click)=\"closePurEstTab()\" data-dismiss=\"modal\" aria-label=\"Close\">\\n          <span aria-hidden=\"true\">&times;</span>\\n        </button>\\n      </div>\\n      <div class=\"container invoice-box htmlPrint\" id=\"print-sectionPurchase\"\\n        style=\"max-width: 1100px;border-width: 2em\">\\n        <div class=\"invoice\">\\n          <h3 style=\"text-align:center\">{{heading}}</h3>\\n          <div class=\"card\">\\n            <div class=\"card-body\">\\n              <div class=\"row mb-4 \">\\n                <div class=\"col-md-6 \">\\n                  <h5 class=\"mb-3 \"> CustName: <span>{{estPurchaseDetails.CustName}}</span></h5>\\n                </div>\\n                <div class=\"col-md-5 \">\\n                  <h5 class=\"mb-3 \">Purchase Estimate: <span>{{estPurchaseDetails.EstNo}}</span></h5>\\n                </div>\\n                <div class=\"col-md-1\">\\n                </div>\\n              </div>\\n              <div class=\"row margin\">\\n                <div class=\"col-lg-12\">\\n                  <div class=\"table-responsive-sm\">\\n                    <table class=\"table table-bordered table-striped\">\\n                      <thead>\\n                        <tr>\\n                          <th class=\"classname\">Description</th>\\n                          <th class=\"classname\">Rate</th>\\n                          <th class=\"classname\">Gr.Wt</th>\\n                          <th class=\"classname\">St.Wt</th>\\n                          <th class=\"classname\">Net Wt</th>\\n                          <th class=\"classname\">St.Amt</th>\\n                          <th class=\"classname\">Amount</th>\\n                        </tr>\\n                      </thead>\\n                      <tbody *ngIf=\"PurchaseDetails\">\\n                        <tr *ngFor=\"let _PurchaseDetails of PurchaseDetails\">\\n                          <td class=\"classname\">{{_PurchaseDetails.ItemDescription}}</td>\\n                          <td class=\"classname\">{{_PurchaseDetails.PurchaseRate | number : \\'1.2-2\\'}}</td>\\n                          <td class=\"classname\">{{_PurchaseDetails.GrossWt | number : \\'1.3-3\\'}}</td>\\n                          <td class=\"classname\">{{_PurchaseDetails.StneWt | number : \\'1.3-3\\'}}</td>\\n                          <td class=\"classname\">{{_PurchaseDetails.NetWt | number : \\'1.3-3\\'}}</td>\\n                          <td class=\"classname\">{{_PurchaseDetails.DiamondAmount | number : \\'1.2-2\\'}}</td>\\n                          <td class=\"classname\">{{_PurchaseDetails.ItemAmount | number : \\'1.2-2\\'}}</td>\\n                        </tr>\\n                        <tr *ngIf=\"getPurchaseTotForPrint\">\\n                          <td class=\"classname\">Grand Total</td>\\n                          <td class=\"classname\"></td>\\n                          <td class=\"classname\">{{getPurchaseTotForPrint[0].GrossWt | number : \\'1.3-3\\'}}</td>\\n                          <td class=\"classname\">{{getPurchaseTotForPrint[0].StneWt | number : \\'1.3-3\\'}}</td>\\n                          <td class=\"classname\">{{getPurchaseTotForPrint[0].NetWt | number : \\'1.3-3\\'}}</td>\\n                          <td class=\"classname\">{{getPurchaseTotForPrint[0].DiamondAmount | number : \\'1.2-2\\'}}</td>\\n                          <td class=\"classname\">{{getPurchaseTotForPrint[0].ItemAmount | number : \\'1.2-2\\'}}</td>\\n                        </tr>\\n                      </tbody>\\n                    </table>\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\"card-body\">\\n                <div class=\"row mb-4 margin\">\\n                  <div class=\"col-md-5\">\\n                    <h5 class=\"mb-3\"> EstDate:\\n                      <span>{{estPurchaseDetails.PDate | date :\\'dd-MMM-yy h:mm:ss a \\'}}</span></h5>\\n                  </div>\\n                  <div class=\"col-md-3\">\\n                    <h5 class=\"mb-3\">SalCode: <span>{{PurchaseDetails[0].SalCode}}</span></h5>\\n                  </div>\\n                  <div class=\"col-md-2\">\\n                    <h5 class=\"mb-3\"> OpCode: <span>{{estPurchaseDetails.OperatorCode}}</span></h5>\\n                  </div>\\n                  <div class=\"col-md-2\">\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\"card-body\">\\n                <ng-container\\n                  *ngFor=\"let _PurchaseStoneDetails of PurchaseDetails[0].lstPurchaseEstStoneDetailsVM;let i=index\">\\n                  <div class=\"row mb-2 margin\">\\n                    <div class=\"col-md-6\">\\n                      <h5 class=\"mb-3\">\\n                        # {{_PurchaseStoneDetails.Name}}\\\\{{_PurchaseStoneDetails.Rate | number : \\'1.2-2\\'}} *\\n                        {{_PurchaseStoneDetails.Carrat | number : \\'1.3-3\\'}}</h5>\\n                    </div>\\n                    <div class=\"col-md-2\">\\n                    </div>\\n                    <div class=\"col-md-2\">\\n                    </div>\\n                    <div class=\"col-md-2\">\\n                    </div>\\n                  </div>\\n                </ng-container>\\n                <ng-container\\n                  *ngFor=\"let _PurchaseDiamondDetails of PurchaseDetails[0].lstPurchaseEstDiamondDetailsVM;let i=index\">\\n                  <div class=\"row mb-2 margin\">\\n                    <div class=\"col-md-6\">\\n                      <h5 class=\"mb-3\">\\n                        # {{_PurchaseDiamondDetails.Name}}\\\\{{_PurchaseDiamondDetails.Rate | number : \\'1.2-2\\'}} *\\n                        {{_PurchaseDiamondDetails.Carrat | number : \\'1.3-3\\'}}</h5>\\n                    </div>\\n                    <div class=\"col-md-2\">\\n                    </div>\\n                    <div class=\"col-md-2\">\\n                    </div>\\n                    <div class=\"col-md-2\">\\n                    </div>\\n                  </div>\\n                </ng-container>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div> --\\x3e\\n\\n\\n\\n\\x3c!-- Added for Plain Text printing--\\x3e\\n\\n<div class=\"modal fade\" id=\"PurEstPlainTextTab\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"PurEstPlainTextTabLabel\"\\n    aria-hidden=\"true\">\\n    <div class=\"modal-dialog modal-lg\" role=\"document\" style=\"max-width: 900px\">\\n        <div class=\"modal-content\">\\n            <<div class=\"modal-header\">\\n                <button type=\"button\"\\n                    class=\"btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary\"\\n                    id=\"PurEstPlainTextTabLabel\" (click)=printPurEstPlainText()><i class=\"fal fa-print\"></i> Print</button>\\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\\n                    <span aria-hidden=\"true\">&times;</span>\\n                </button>\\n            </div>\\n            <div class=\"container invoice-box htmlPrint\" id=\"print-closed-section\" style=\"max-width: 900px;border-width: 2em\">\\n                   <pre>{{purEstPlainTextDetails}}</pre>                \\n            </div>>\\n        </div>\\n    </div>\\n</div>\\n\\n\\x3c!-- Ends here --\\x3e\\n\\n\\n\\x3c!-- {{PurchaseDetails | json}} --\\x3e'},esxm:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=\".hiddenRow {\\r\\n    padding: 0 !important;\\r\\n  }\\r\\n  \\r\\n  .wrapper{\\r\\n    margin: auto 3em auto 3em;\\r\\n  }\\r\\n  \\r\\n  .table-responsive {\\r\\n    display: block;\\r\\n    width: 99.9999% !important;\\r\\n    overflow-x: auto;\\r\\n}\\r\\n  \\r\\n  fieldset.scheduler-border {\\r\\n\\tborder: 2px groove #ddd !important;\\r\\n\\tpadding: 0 1.4em 1.4em 1.4em !important;\\r\\n\\tmargin: 0 0 1.5em 0 !important;\\r\\n\\tbox-shadow:  0px 0px 0px 0px #000;\\r\\n\\t\\tborder-radius: 15px;\\r\\n  }\\r\\n  \\r\\n  legend.scheduler-border {\\r\\n\\t  font-size: 20px !important;\\r\\n\\t  text-align: left !important;\\r\\n\\t  width:auto;\\r\\n\\t  padding:0 10px;\\r\\n\\t  border-bottom:none;\\r\\n\\t}\\r\\n  \"},jCgZ:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<ng-container *ngIf=\"EnableDisablectrls\">\\n<button type=\"button\"\\n  class=\"btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pull-right\"\\n  data-toggle=\"modal\" data-target=\"#myOldGoldModal\" (click)=\"openModal()\">\\n  Attach Old GOld Estimate\\n</button>\\n</ng-container>\\n<br>\\n<br>\\n<div class=\"table-responsive\">\\n  <table class=\"table table-bordered\">\\n    <thead class=\"topbar\">\\n      <tr>\\n        <th *ngIf=\"EnableDisablectrls\">Action</th>\\n        <th>S.No</th>\\n        <th>Est No</th>\\n        <th>Qty</th>\\n        <th>Gr.Wt</th>\\n        <th>Total Amt</th>\\n      </tr>\\n    </thead>\\n\\n    <tbody *ngFor=\"let _SelectOldGoldList of SelectedOldGoldList; let i = index;\">\\n      <tr>\\n        <td *ngIf=\"EnableDisablectrls\"><i class=\"far fa-trash-alt fa-1-5x pointer\" style=\\'color: red; font-size: 1.5em !important;\\'\\n            (click)=\"DeleteRow(i)\"></i>\\n        </td>\\n        <td>{{i + 1 }}</td>\\n        <td>{{_SelectOldGoldList.EstNo}}</td>\\n        <td>{{_SelectOldGoldList.Qty}}</td>\\n        <td>{{_SelectOldGoldList.GrossWt | number : \\'1.3-3\\'}}</td>\\n        <td>{{_SelectOldGoldList.Amount | number : \\'1.2-2\\'}}</td>\\n      </tr>\\n    </tbody>\\n    <tr>\\n      <td *ngIf=\"EnableDisablectrls\" class=\"border-none\"></td>\\n      <td class=\"border-none\"></td>\\n      <td class=\"border-none\">No. of items:</td>\\n      <td class=\"border-none\"></td>\\n      <td class=\"border-none\"><b>Total:</b></td>\\n      <td class=\"border-none\">{{Amount(SelectedOldGoldList) | number : \\'1.2-2\\'}}</td>\\n    </tr>\\n  </table>\\n</div>\\n<ng-container *ngIf=\"EnableDisablectrls\">\\n<button class=\"btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pb-10p\" style=\"margin-bottom: 25px;\" type=\"button\"\\n  (click)=\"Submit()\" [disabled]=\"EnableSubmitButton\"><i class=\"fal fa-save\"></i> Submit</button>\\n</ng-container>  \\n\\n<form [formGroup]=\"AttachOldGoldForm\" class=\"form-horizontal\" (ngSubmit)=\"onSubmit()\">\\n  <div class=\"modal fade\" id=\"myOldGoldModal\">\\n    <div class=\"modal-dialog \" style=\"max-width: 900px;\">\\n      <div class=\"modal-content\">\\n\\n        \\x3c!-- Modal Header --\\x3e\\n        <div class=\"modal-header\">\\n          <h4 class=\"modal-title\">Attach Old Gold Estimate</h4>\\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\\n        </div>\\n\\n        \\x3c!-- Modal body --\\x3e\\n        <div class=\"modal-body\">\\n          <div class=\"\">\\n            <div class=\"row\">\\n              <div class=\"col-md-4\">\\n                <div class=\"form-group\">\\n                  <label for=\"salesPerson\">Search By</label>\\n                  <div class=\"form-group\">\\n                    <select class=\"form-control mr-auto mt-2 mt-lg-0\" formControlName=\"searchby\">\\n                      <option [ngValue]=\"null\">Select</option>\\n                      <option *ngFor=\"let _searchParamsList of SearchParamsList\" [value]=\"_searchParamsList.Key\">\\n                        {{_searchParamsList.Value}}\\n                      </option>\\n                    </select>\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\"col-md-4\">\\n                <div class=\"form-group\">\\n                  <label for=\"searchText\">Search Text</label>\\n                  <div class=\"input-group\">\\n                    <input class=\"form-control\" id=\"searchText\" formControlName=\"searchText\" placeholder=\"Search Text\"\\n                      type=\"text\">\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\"col-md-4\">\\n                <div class=\"form-group\">\\n                  <label for=\"Search\"></label>\\n                  <div class=\"input-group\">\\n                    <button class=\"btn waves-effect waves-light btn-rounded btn-outline-secondary\"\\n                      (click)=\"getSearchParams(AttachOldGoldForm)\"><i class=\"fal fa-search\"></i> Search</button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n            <div class=\"row\">\\n              <div class=\"col-md-12\">\\n                <div class=\"table-responsive\">\\n                  <table class=\"table table-bordered\">\\n                    <thead class=\"topbar\">\\n                      <tr>\\n                        <th>S.No</th>\\n                        <th>EstNo</th>\\n                        <th>Customer</th>\\n                        <th>Date</th>\\n                        <th>Amount</th>\\n                        <th>Gross Wt</th>\\n                        <th>Quantity</th>\\n                        <th>CustId</th>\\n                        <th>GSTAmount</th>\\n                      </tr>\\n                    </thead>\\n\\n                    <tbody *ngFor=\"let _OldGoldList of AttachOldGoldList | paginate: { itemsPerPage:top, totalItems:totalItems, currentPage: pagenumber }; let i = index;\">\\n                      <tr (click)=\"selectRecord(_OldGoldList)\" class=\"pointer\">\\n                        <td>{{i + 1 }}</td>\\n                        <td>{{_OldGoldList.EstNo}}</td>\\n                        <td>{{_OldGoldList.Customer}}</td>\\n                        <td>{{_OldGoldList.Date | date:\\'MM/dd/yyyy\\'}}</td>\\n                        <td>{{_OldGoldList.Amount | number : \\'1.2-2\\'}}</td>\\n                        <td>{{_OldGoldList.GrossWt | number : \\'1.3-3\\'}}</td>\\n                        <td>{{_OldGoldList.Qty}}</td>\\n                        <td>{{_OldGoldList.CustID}}</td>\\n                        <td>{{_OldGoldList.GSTAmount | number : \\'1.2-2\\'}}</td>\\n                      </tr>                      \\n                    </tbody>\\n                  </table>\\n                </div>\\n                <div >\\n                  <pagination-controls (pageChange)=\"onPageChange($event)\"></pagination-controls>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n        \\x3c!-- Modal footer --\\x3e\\n        <div class=\"modal-footer\">\\n          <button type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\">Close</button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</form>\\n\\x3c!-- <pre>{{PostOldGoldAttchJson|json}}</pre> --\\x3e'},jrbh:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='body{\\r\\n    font-size: 5px;\\r\\n    line-height: 18px;\\r\\n}\\r\\n\\r\\n.modal {\\r\\n  overflow-y:auto;\\r\\n}\\r\\n\\r\\n.watermark {\\r\\n  transform: rotate(331deg);\\r\\n  font-size: 10em;\\r\\n  color: rgba(255, 5, 5, 0.37);\\r\\n  position: absolute;\\r\\n  text-transform:uppercase;\\r\\n  padding-left: 10%;\\r\\n}\\r\\n\\r\\n.center {\\r\\n  margin: auto;\\r\\n  width: 70%;\\r\\n  padding: 5px;\\r\\n}\\r\\n\\r\\nthead > tr {\\r\\n  color:black !important;\\r\\n  font-weight: 300;\\r\\n  background-color: blanchedalmond;\\r\\n}\\r\\n\\r\\n.modal-header{\\r\\npadding-left: 20rem !important;\\r\\n}\\r\\n\\r\\n.material-switch > input[type=\"checkbox\"] {\\r\\ndisplay: none;   \\r\\n}\\r\\n\\r\\ntr.spaceUnder>td {\\r\\npadding-bottom: 0px;\\r\\n}\\r\\n\\r\\n.material-switch > label {\\r\\ncursor: pointer;\\r\\nheight: 0px;\\r\\nposition: relative; \\r\\nwidth: 40px;  \\r\\n}\\r\\n\\r\\n.material-switch > label::before {\\r\\nbackground: rgb(0, 0, 0);\\r\\nbox-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\\r\\nborder-radius: 8px;\\r\\ncontent: \\'\\';\\r\\nheight: 16px;\\r\\nmargin-top: -8px;\\r\\nposition:absolute;\\r\\nopacity: 0.3;\\r\\ntransition: all 0.4s ease-in-out;\\r\\nwidth: 40px;\\r\\n}\\r\\n\\r\\n.material-switch > label::after {\\r\\nbackground: rgb(255, 255, 255);\\r\\nborder-radius: 16px;\\r\\nbox-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\\r\\ncontent: \\'\\';\\r\\nheight: 24px;\\r\\nleft: -4px;\\r\\nmargin-top: -8px;\\r\\nposition: absolute;\\r\\ntop: -4px;\\r\\ntransition: all 0.3s ease-in-out;\\r\\nwidth: 24px;\\r\\n}\\r\\n\\r\\n.material-switch > input[type=\"checkbox\"]:checked + label::before {\\r\\nbackground: inherit;\\r\\nopacity: 0.5;\\r\\n}\\r\\n\\r\\n.material-switch > input[type=\"checkbox\"]:checked + label::after {\\r\\nbackground: inherit;\\r\\nleft: 20px;\\r\\n}\\r\\n\\r\\n@media only screen and (max-width: 600px) {\\r\\n  .columns {\\r\\n    width: 100%;\\r\\n  }\\r\\n}\\r\\n\\r\\n@media (min-width:2200px) and (max-width: 2440px) {\\r\\n  .table-responsive {\\r\\n   overflow-x: hidden !important;\\r\\n\\r\\n}\\r\\n}\\r\\n\\r\\n@media (min-width: 300px) and (max-width: 2200px) {\\r\\n  .table-responsive {\\r\\n  overflow-x: auto !important;\\r\\n\\r\\n}}'},\"lo/J\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<ng-container *ngIf=\"EnableDiamondTab\">\\n  <fieldset class=\"scheduler-border\">\\n    <legend class=\"scheduler-border\"><i class=\"fas fa-gem align-middle\"></i> Diamond Details</legend>\\n\\n    <div class=\"table-responsive\">\\n      <table class=\"table\" id=\\'panels\\' style=\"width: 1200px;\">\\n        <thead class=\"topbar\">\\n          <tr>\\n            <th>GS Name</th>\\n            <th>Item Name</th>\\n            <th>Qty</th>\\n            <th>Carats</th>\\n            <th>Max Rate/Carat</th>\\n            <th>Rate/Carat</th>\\n            <th>Amount</th>\\n            <th *ngIf=\"ShowHide\">Action</th>\\n            <th *ngIf=\"ShowHide\"><button class=\"mt-2  btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right\"\\n              [disabled]=\"EnableAddRow\" (click)=\"addrow()\">\\n              <i class=\"far fa-plus-circle\"></i> Add</button></th>\\n          </tr>\\n        </thead>\\n        <tbody *ngFor=\"let field of fieldArray; let i = index\">\\n          <tr>\\n            <td style=\"width: 30%;\">\\n              <select class=\"form-control mr-auto mt-2 mt-lg-0\">\\n                <option [ngValue]=\"OD\" [disabled]=\"readonly[i]\">OLD DIAMOND</option>\\n          </select>\\n            </td>\\n            <td style=\"width: 30%;\">\\n              <select class=\"form-control mr-auto mt-2 mt-lg-0\" [(ngModel)]=\"field.Name\" (change)=\"GetItemName(ItemName.value);\" #ItemName>\\n                <option [ngValue]=\"null\" [disabled]=\"readonly[i]\">Select</option>\\n                <option *ngFor=\"let _ItemList of ItemList\" [value]=\"_ItemList.StoneName\"\\n                  [disabled]=\"readonly[i]\">\\n                  {{_ItemList.StoneName}}\\n              </option>\\n          </select>\\n            </td>\\n            <td style=\"width: 10%;\">\\n              <input [(ngModel)]=\"field.Qty\" class=\"form-control\" type=\"text\" min=\"0\" name=\"{{field.Qty}}\" placeholder=\"0.00\"\\n                [readonly]=\"readonly[i]\" appNumbersOnly/>\\n            </td>\\n            <td style=\"width: 10%;\">\\n              \\x3c!-- <input [(ngModel)]=\"field.Carrat\" class=\"form-control\" type=\"text\" min=\"0\" [readonly]=\"readonly[i]\"\\n                name=\"{{field.Carrat}}\" placeholder=\"0.00\" (change)=\"GetAmount(i);\" appNumbersOnly/> --\\x3e\\n                \\x3c!-- (keydown.Tab)=\"validateCarat(i);\" --\\x3e\\n            \\x3c!-- </td> --\\x3e\\n            <input [(ngModel)]=\"field.Carrat\" class=\"form-control\" type=\"text\" min=\"0\" [readonly]=\"readonly[i]\"\\n                name=\"{{field.Carrat}}\" placeholder=\"0.00\" (change)=\"GetStnDmdRate(i);\" appNumbersOnly/>                \\n            </td>\\n            <td style=\"width: 10%;\">\\n              <input [(ngModel)]=\"field.OrgRate\" class=\"form-control\" type=\"text\" min=\"0\" name=\"{{field.Rate}}\" \\n              placeholder=\"0.00\" (change)=\"GetAmount(i);\" readonly/>\\n            </td>\\n            <td style=\"width: 10%;\">\\n              <input [(ngModel)]=\"field.Rate\" class=\"form-control\" type=\"text\" min=\"0\" [readonly]=\"readonly[i]\"\\n                name=\"{{field.Rate}}\" placeholder=\"0.00\" (change)=\"GetAmount(i);\" appNumbersOnly/>\\n            </td>\\n            <td style=\"width: 10%;\">\\n              \\x3c!-- <input [(ngModel)]=\"field.Amount\"  class=\"form-control\" type=\"number\"\\n            name=\"{{field.Amount}}\" placeholder=\"0.00\" /> --\\x3e\\n              <h3 [(ngModel)]=\"field.Amount\" [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\n                {{field.Amount || \"0.00\" | number}}</h3>\\n            </td>\\n            <ng-container *ngIf=\"ShowHide\">\\n            <td colspan=\"2\" style=\"width: 30%;\">\\n              <ng-container *ngIf=\"EnableEditDelbtn[i]\">\\n                <button class=\"btn btn-default btn-rounded\" type=\"button\" (click)=\"editFieldValue(i)\"><i\\n                    class=\"fal fa-pencil-alt\"></i> Edit</button>\\n                <button class=\"btn btn-danger btn-rounded\" type=\"button\" (click)=\"deleteFieldValue(i)\"><i\\n                    class=\"fal fa-trash-alt\"></i> Delete</button>\\n              </ng-container>\\n              <ng-container *ngIf=\"EnableSaveCnlbtn[i]\">\\n                <button class=\"btn btn-success btn-rounded\" type=\"button\" (click)=\"saveDataFieldValue(i)\"><i\\n                    class=\"fal fa-save\"></i> Save</button>\\n                <button class=\"btn btn-warning btn-rounded\" type=\"button\" (click)=\"cancelDataFieldValue(i)\"><i\\n                    class=\"far fa-window-close\"></i> Cancel</button>\\n              </ng-container>\\n            </td>\\n            </ng-container>\\n          </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n    \\x3c!-- <pre>{{PurchaseLinesDetails | json}}</pre>\\n    <pre>{{fieldArray | json}}</pre> --\\x3e\\n  </fieldset>\\n</ng-container>'},tt6M:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<ng-container *ngIf=\"EnableStoneTab\">\\n  <fieldset class=\"scheduler-border\">\\n    <legend class=\"scheduler-border\"><i class=\"fas fa-gem align-middle\"></i> Stone Details</legend>\\n\\n    <div class=\"table-responsive\">\\n      <table class=\"table\" id=\\'panels\\' style=\"width: 1000px;\">\\n        <thead class=\"topbar\">\\n          <tr>\\n            <th>Item Name</th>\\n            <th>Qty</th>\\n            <th>St.Wt</th>\\n            <th>St Carat</th>\\n            <th>Rate/Carat</th>\\n            <th>Amount</th>\\n            <th *ngIf=\"ShowHide\">Action</th>\\n            <th *ngIf=\"ShowHide\">  <button class=\"mt-2  btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right\"\\n              [disabled]=\"EnableAddRow\" (click)=\"addrow()\">\\n              <i class=\"far fa-plus-circle\"></i> Add</button></th>\\n          </tr>\\n        </thead>\\n        <tbody *ngFor=\"let field of fieldArray; let i = index\">\\n          <tr>\\n            <td style=\"width: 30%;\">\\n              \\x3c!-- <h3 class=\"align-middle\">Old Stone</h3> --\\x3e\\n              <select class=\"form-control mr-auto mt-2 mt-lg-0\">\\n                <option [ngValue]=\"OST\" [disabled]=\"readonly[i]\">OLD STONE</option>\\n                \\x3c!-- <option *ngFor=\"let _OldStoneList of OldStoneList\" [value]=\"_OldStoneList.GSCode\"\\n                  [disabled]=\"readonly[i]\">\\n                  {{_OldStoneList.ItemName}}\\n              </option> --\\x3e\\n          </select>\\n            </td>\\n            <td style=\"width: 10%;\"> \\n              <input [(ngModel)]=\"field.Qty\" class=\"form-control\" type=\"text\" min=\"0\" name=\"{{field.Qty}}\" placeholder=\"0.00\"\\n                [readonly]=\"readonly[i]\" appNumbersOnly/>\\n            </td>\\n            <td style=\"width: 10%;\">\\n              <input [(ngModel)]=\"field.StWt\" class=\"form-control\" type=\"text\" min=\"0\" name=\"{{field.StWt}}\" placeholder=\"0.00\"\\n                [readonly]=\"readonly[i]\" (change)=\"GetStoneKarat(i);\" appNumbersOnly/>\\n            </td>\\n            <td style=\"width: 5%;\">\\n              <h3 [(ngModel)]=\"field.Carrat\" ngDefaultControl [ngModelOptions]=\"{standalone: true}\"\\n              class=\"align-middle\">{{field.Carrat || \"0.00\" | number}}</h3>\\n            </td>\\n            <td style=\"width: 10%;\">\\n              <input [(ngModel)]=\"field.Rate\" class=\"form-control\" type=\"text\" [readonly]=\"readonly[i]\"\\n                name=\"{{field.Rate}}\" placeholder=\"0.00\" (change)=\"GetAmount(i);\" appNumbersOnly/>\\n            </td>\\n            <td style=\"width: 10%;\">\\n              <h3 [(ngModel)]=\"field.Amount\" [ngModelOptions]=\"{standalone: true}\" class=\"align-middle\">\\n                {{field.Amount || \"0.00\" | number}}</h3>\\n            </td>\\n            <ng-container *ngIf=\"ShowHide\">\\n            <td colspan=\"2\" style=\"width: 25%;\">\\n              <ng-container *ngIf=\"EnableEditDelbtn[i]\">\\n                <button class=\"btn btn-default btn-rounded\" type=\"button\" (click)=\"editFieldValue(i)\"><i\\n                    class=\"fal fa-pencil-alt\"></i> Edit</button>\\n                <button class=\"btn btn-danger btn-rounded\" type=\"button\" (click)=\"deleteFieldValue(i)\"><i\\n                    class=\"fal fa-trash-alt\"></i> Delete</button>\\n              </ng-container>\\n              <ng-container *ngIf=\"EnableSaveCnlbtn[i]\">\\n                <button class=\"btn btn-success btn-rounded\" type=\"button\" (click)=\"saveDataFieldValue(i)\"><i\\n                    class=\"fal fa-save\"></i> Save</button>\\n                <button class=\"btn btn-warning btn-rounded\" type=\"button\" (click)=\"cancelDataFieldValue(i)\"><i\\n                    class=\"far fa-window-close\"></i> Cancel</button>\\n              </ng-container>\\n            </td>\\n          </ng-container>\\n          </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n    \\x3c!-- <pre>{{PurchaseLinesDetails | json}}</pre>\\n    <pre>{{fieldArray | json}}</pre> --\\x3e\\n  </fieldset>\\n</ng-container>'},vMFa:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=\"\"},x3mp:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div style=\"color: brown; text-align: right; font-style: italic;\">\\n  <app-lastdocno></app-lastdocno>\\n</div>\\n\\n\\n<div class=\"card\">\\n  <div class=\"card-body\">\\n    <form class=\"form-horizontal\">\\n      <div class=\"row\">\\n        <div class=\"col-md-2 \">\\n          <div class=\"form-group\">\\n            <label for=\"EstNo\">Est No</label>\\n            <input class=\"form-control\" id=\"exampleAccount\" placeholder=\"Est No\" min=\"0\" type=\"number\" #estNo\\n              (keyup.enter)=\"getPurchaseEstimationDetails(estNo.value)\">\\n          </div>\\n        </div>\\n        <div class=\"col-md-3\">\\n          <div class=\"form-group\">\\n            <label for=\"OrderNo\">Sales Person</label>\\n            <select class=\"form-control mr-auto mt-2 mt-lg-0\" [(ngModel)]=\"SalesPerson\"\\n              [ngModelOptions]=\"{standalone: true}\">\\n              <option [ngValue]=\"\" [disabled]=\"true\">Select</option>\\n              <option *ngFor=\"let _salesman of SalesManList\" [disabled]=\"true\" [value]=\"_salesman.sal_code\">\\n                {{_salesman.CodeName}}\\n              </option>\\n            </select>\\n          </div>\\n        </div>\\n        <div class=\"col-md-4\">\\n          <div class=\"form-group\">\\n            <div class=\"text-left\"><i class=\"fal fa-calendar-alt\"></i>&nbsp;\\n              <span class=\"text-muted\">Date</span>\\n              <h2 class=\"font-light\">{{ApplicationDate}}</h2>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\"col-md-3\">\\n          <div class=\"form-group\">\\n            <label *ngFor=\"let radiobutton of radioItems\" class=\"form-check-inline\">\\n              <input type=\"radio\" name=\"option\" (click)=\"OnRadioBtnChnge(radiobutton)\" class=\"form-check-input\"\\n                [value]=\"radiobutton\" [checked]=\"radiobutton === model.option\">\\n              <h3 style=\"margin-top: 5px;\">{{radiobutton}}</h3>\\n            </label>\\n          </div>\\n        </div>\\n      </div>\\n    </form>\\n  </div>\\n</div>\\n\\n<div id=\"accordian\" class=\"accordion\">\\n  <div class=\"card mb-0\">\\n    <div class=\"card-header Pointer\" href=\"#Customer\" (click)=\"ToggleCustomerData()\"\\n      [ngClass]=\"CollapseCustomerDetailsTab ? \\'collapsed\\' : \\'\\'\"\\n      [attr.data-toggle]=\"CollapseCustomerDetailsTab ? \\'\\':\\'collapse\\'\"\\n      style=\"background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black\">\\n      <div class=\"row\">\\n        <div class=\"col-md-2 \">\\n          <a class=\"card-title align-middle Pointer\" style=\"color:#0096FF\">\\n            <i class=\"fas fa-2x fa-users mr-2 align-middle\"></i>\\n            <span class=\"align-middle Pointer\"><ins>Customer Details</ins></span>\\n          </a>\\n        </div>\\n        \\x3c!-- <ng-container *ngIf=\" ToggleCustomer\"> --\\x3e\\n        <ng-container *ngIf=\"CollapseCustomerTab\">\\n          <div class=\"col-md-1 pull-right\">\\n            \\x3c!-- <h4 ><span class=\"align-middle\"> Total Items: {{SalesData.TotalItems}} </span></h4> --\\x3e\\n          </div>\\n          <div class=\"col-md-2 pull-right\" style=\"color:#0096FF\">\\n            <h4><span class=\"align-middle\"></span></h4>\\n          </div>\\n          <div class=\"col-md-2 pull-right\">\\n            <h4><span class=\"align-middle\"> ID: {{CustomerName.ID}}</span></h4>\\n          </div>\\n          <div class=\"col-md-3 pull-right\">\\n            <h4><span class=\"align-middle\"> Customer: {{CustomerName.CustName}}</span></h4>\\n          </div>\\n        </ng-container>\\n        \\x3c!-- </ng-container> --\\x3e\\n      </div>\\n    </div>\\n    <div id=\"Customer\" class=\"card-body collapse\" [collapse]=\"CollapseCustomerDetailsTab\">\\n      <app-customer [filterRadioBtns]=\"filterRadioBtns\">\\n      </app-customer>\\n    </div>\\n  </div>\\n  <br>\\n  <div class=\"card mb-0\">\\n    <div class=\"card-header Pointer\" href=\"#Purchase\" (click)=\"TogglePurchaseData()\"\\n      [ngClass]=\"EnablePurchaseTab ? \\'collapsed\\' : \\'\\'\" [attr.data-toggle]=\"EnablePurchaseTab ? \\'\\':\\'collapse\\'\"\\n      style=\"background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black\">\\n      <div class=\"row\">\\n        <div class=\"col-md-2 \">\\n          <a class=\"card-title align-middle Pointer\" style=\"color:#FF00C5\">\\n            <i class=\"far fa-shopping-cart fa-2x mr-2 align-middle\"></i>\\n            <span class=\"align-middle Pointer\"><ins>Purchase</ins></span>\\n          </a>\\n        </div>\\n        <ng-container *ngIf=\"TogglePurchase\">\\n          <ng-container *ngIf=\"NoRecordsPurchase\">\\n            <div class=\"col-md-2 pull-right\">\\n              <h4><span class=\"align-middle\"> St. Wt:\\n                  {{PurchaseData.StoneWt | number : \\'1.2-2\\'}}</span>\\n              </h4>\\n            </div>\\n            <div class=\"col-md-2 pull-right\">\\n              <h4><span class=\"align-middle\"> Gr. Wt:\\n                  {{PurchaseData.GrossWt | number : \\'1.3-3\\'}}</span>\\n              </h4>\\n            </div>\\n            <div class=\"col-md-2 pull-right\">\\n              <h4><span class=\"align-middle\"> Net Wt: {{PurchaseData.NtWt | number : \\'1.3-3\\'}}</span>\\n              </h4>\\n            </div>\\n            <div class=\"col-md-2 pull-right\">\\n              <h4><span class=\"align-middle\"> Amt:\\n                  {{PurchaseData.Amount | currencyFormat : PurchaseData.Amount}}</span>\\n              </h4>\\n            </div>\\n          </ng-container>\\n        </ng-container>\\n      </div>\\n    </div>\\n    <div id=\"Purchase\" class=\" collapse\" [collapse]=\"EnablePurchaseTab\" style=\"padding:10px;\">\\n      <app-purchase (PurchaseAmountChange)=\\'PurchaseTotalAmountCalculation($event)\\'></app-purchase>\\n    </div>\\n  </div>\\n  <br>\\n  <ng-container *ngIf=\"EnableDisablePayment\">\\n    <div class=\"card mb-0\">\\n      <div class=\"card-header Pointer\" href=\"#Payment\" (click)=\"TogglePaymentData()\"\\n        [ngClass]=\"EnablePaymentsTab ? \\'collapsed\\' : \\'\\'\" [attr.data-toggle]=\"EnablePaymentsTab ? \\'\\':\\'collapse\\'\"\\n        style=\"background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black\">\\n        <div class=\"row\">\\n          <div class=\"col-md-2 \">\\n            <a class=\"card-title align-middle\" style=\"color:rgb(0, 204, 255)\">\\n              <i class=\"far fa-rupee-sign fa-2x mr-2 align-middle\"></i>\\n              <span class=\"align-middle\"><ins>Payment Details</ins>\\n                <div class=\"tooltipdesign\"> <i class=\"fal fa-question-circle\"></i>\\n                  <span class=\"tooltiptext tooltip-top\">Capture the Receipts\\n                    ( Payment collection modes) information like Cash , Cheque , Card , Scheme Adj, Purchase Bill\\n                    etc</span>\\n                </div>\\n              </span>\\n            </a>\\n          </div>\\n        </div>\\n      </div>\\n      <div id=\"Payment\" class=\"card-body collapse\" [hidden]=\"EnablePaymentsTab\"\\n        [ngClass]=\"EnablePaymentsTab ? \\'hide\\' : \\'show\\'\">\\n        <app-payment (PaidAmountChange)=\"PaidTotalAmountCalculation($event)\" [autoFillAmount]=\"autoFetchAmount\"\\n          [argPageName]=\"pageName\"></app-payment>\\n      </div>\\n    </div>\\n  </ng-container>\\n  <br>\\n  <ng-container *ngIf=\"EnableDisablePayment\">\\n    <div class=\"row\">\\n      <div class=\"col-lg-12 col-md-12\">\\n        <div class=\"card\">\\n          <div class=\"row\">\\n            <div class=\"col-12\">\\n              <div class=\"social-widget\">\\n                <div class=\"soc-header box-twitter\" style=\"padding: 3px;\">\\n                  <h3 class=\"text-white\">Purchase Summary</h3>\\n                </div>\\n                <div class=\"soc-content\">\\n                  <div class=\"col-2 b-r\">\\n                    <h4 class=\"font-medium\"> <b>0.00</b>\\n                    </h4>\\n                    <h5 class=\"text-black\">Total SGST</h5>\\n                  </div>\\n                  <div class=\"col-2 b-r\">\\n                    <h4 class=\"font-medium\"><b>0.00</b>\\n                    </h4>\\n                    <h5 class=\"text-black\">Total CGST</h5>\\n                  </div>\\n                  <div class=\"col-2 b-r\">\\n                    <h4 class=\"font-medium\"><b>\\n                        0.00</b>\\n                    </h4>\\n                    <h5 class=\"text-black\">Total IGST</h5>\\n                  </div>\\n                  <div class=\"col-2 b-r\">\\n                    <h4 class=\"font-medium\"> <b>{{PurchaseTotAmount | number : \\'1.2-2\\'}}</b>\\n                      <h1 class=\"float-right\">-</h1>\\n                    </h4>\\n                    <h5 class=\"text-black\">Trade in Amt</h5>\\n                  </div>\\n                  <div class=\"col-2 b-r\">\\n                    <h4 class=\"font-medium\"><b>{{PaidAmount | number : \\'1.2-2\\'}}</b>\\n                      <h1 class=\"float-right\">=</h1>\\n                    </h4>\\n                    <h5 class=\"text-black\">Paid Amount</h5>\\n                  </div>\\n                  <div class=\"col-2 b-r\">\\n                    <h4 class=\"font-medium\"><b>\\n                        {{BalanceAmount() | number : \\'1.2-2\\'}}</b>\\n                    </h4>\\n                    <h5 class=\"text-black\">Balance Amount</h5>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </ng-container>\\n  <br>\\n  <button class=\"btn btn-success waves-effect waves-light btn-rounded btn-secondary\" type=\"button\" (click)=\"Submit()\"\\n    [hidden]=\"EnableSubmitButton\"><i class=\"fal fa-save\"></i> Submit</button>\\n</div>\\n\\n<ng-container *ngIf=\"EnableReprint\">\\n  <app-reprint-purchasebill [BillNo]=\"BillNo\"></app-reprint-purchasebill>\\n</ng-container>\\n\\n\\n<pre>{{PurchaseBilling | json}}</pre>'},yByz:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='body{\\r\\n    font-size: 5px;\\r\\n    line-height: 18px;\\r\\n}\\r\\n.watermark {\\r\\n  transform: rotate(331deg);\\r\\n  font-size: 10em;\\r\\n  color: rgba(255, 5, 5, 0.37);\\r\\n  position: absolute;\\r\\n  text-transform:uppercase;\\r\\n  padding-left: 10%;\\r\\n}\\r\\nthead > tr {\\r\\n  color:black !important;\\r\\n  font-weight: 300;\\r\\n  background-color: blanchedalmond;\\r\\n}\\r\\n.modal-header{\\r\\npadding-left: 20rem !important;\\r\\n}\\r\\n.material-switch > input[type=\"checkbox\"] {\\r\\ndisplay: none;   \\r\\n}\\r\\ntr.spaceUnder>td {\\r\\npadding-bottom: 0px;\\r\\n}\\r\\n.material-switch > label {\\r\\ncursor: pointer;\\r\\nheight: 0px;\\r\\nposition: relative; \\r\\nwidth: 40px;  \\r\\n}\\r\\n.material-switch > label::before {\\r\\nbackground: rgb(0, 0, 0);\\r\\nbox-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\\r\\nborder-radius: 8px;\\r\\ncontent: \\'\\';\\r\\nheight: 16px;\\r\\nmargin-top: -8px;\\r\\nposition:absolute;\\r\\nopacity: 0.3;\\r\\ntransition: all 0.4s ease-in-out;\\r\\nwidth: 40px;\\r\\n}\\r\\n.material-switch > label::after {\\r\\nbackground: rgb(255, 255, 255);\\r\\nborder-radius: 16px;\\r\\nbox-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\\r\\ncontent: \\'\\';\\r\\nheight: 24px;\\r\\nleft: -4px;\\r\\nmargin-top: -8px;\\r\\nposition: absolute;\\r\\ntop: -4px;\\r\\ntransition: all 0.3s ease-in-out;\\r\\nwidth: 24px;\\r\\n}\\r\\n.material-switch > input[type=\"checkbox\"]:checked + label::before {\\r\\nbackground: inherit;\\r\\nopacity: 0.5;\\r\\n}\\r\\n.material-switch > input[type=\"checkbox\"]:checked + label::after {\\r\\nbackground: inherit;\\r\\nleft: 20px;\\r\\n}'}}]);","extractedComments":[]}