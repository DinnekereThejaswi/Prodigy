(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"2is8":function(t,e,n){"use strict";n.r(e),e.default='<div class="card">\n  <div class="card-body">\n    <form [formGroup]="PurchaseCancelForm" class="form-horizontal">\n      <div class="row">\n        <div class="col-md-2">\n          <div class="form-group">\n            <label for="OrderNo">Bill No</label>\n            <input type="number" formControlName="BillNo" class="form-control" #BillNo name="BillNo" placeholder="Enter Bill Number">\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <div class="input-group">\n              <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary mt-4"\n                (click)="getPurchaseDetails(BillNo.value)"><i class="fal fa-search"></i> Search</button>\n                <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary mt-4" (click)="Clear()"><i\n                  class="fal fa-clear"></i> Clear</button>  \n            </div>            \n          </div>\n        </div>\n        <div class="col-md-3 float-right" *ngIf="hasPurchaseDetails">\n          <div class="">\n            <div class="text-right"><i class="fal fa-rupee-sign"></i>&nbsp; <span class="text-muted">\n                Bill Amount</span>\n              <h1 class="font-light">{{PurchaseBillData.TotalPurchaseAmount | number : \'1.2-2\'}}</h1>              \n            </div>\n          </div>\n        </div>\n        <div class="col-md-3 float-right" *ngIf="hasPurchaseDetails">\n          <div class="">\n            <div class="text-right"><i class="fal fa-calendar-alt"></i>&nbsp; <span class="text-muted">Bill Date</span>\n              <h1 class="font-light">{{PurchaseBillData.PDate | date:\'dd/MM/yyyy\'}}</h1>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="row" *ngIf="hasPurchaseDetails">\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="CustomerID">Name</label>\n            <div class="input-group">\n              <input class="form-control" formControlName="CustName" [(ngModel)]="PurchaseBillData.CustName" type="text"\n                readonly>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="City">Address3</label>\n            <div class="input-group">\n              <input class="form-control" [(ngModel)]="PurchaseBillData.Address3" formControlName="Address3" type="text"\n                readonly>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="Name">Address1</label>\n            <div class="input-group">\n              <input class="form-control" formControlName="Address1" [(ngModel)]="PurchaseBillData.Address1" type="text"\n                readonly>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="Name">Phone</label>\n            <div class="input-group">\n              <input class="form-control" type="text"\n                readonly>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <label for="Address">Address2</label>\n            <div class="input-group">\n              <input class="form-control" formControlName="Address2" [(ngModel)]="PurchaseBillData.Address2" type="text"\n                readonly>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="Name">Mobile</label>\n            <div class="input-group">\n              <input class="form-control" formControlName="Mobile" [(ngModel)]="PurchaseBillData.Mobile_no" type="text"\n                readonly>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <div class="form-group">\n              <label for="Advance">Remarks</label>\n              <div class="input-group">\n                <input class="form-control" formControlName="Remarks" [(ngModel)]="PurchaseCancelObj.CancelRemarks"\n                  type="text">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="row" *ngIf="hasPurchaseDetails">\n        <div class="col-md-3">\n          <div class="form-group">\n            <div class="input-group">\n              <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" (click)="submitPost()">\n                <i class="far fa-window-close"></i> Cancel Purchase Bill</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n\x3c!-- <pre>{{PurchaseCancelObj | json}}</pre> --\x3e'},HGwx:function(t,e,n){"use strict";n.r(e),e.default='<div class="row" style="display:block;margin: auto;width: 30%;">\n  <ng-container *ngIf="isReprint">\n    <form class="form-horizontal">\n      <div class="col-md-12">\n        <div class="card">\n          <div class="card-body">\n            <div class="row">\n              <div class="col-md-12">\n                <div class="form-group">\n                  <label for="OrderNo">Bill Date</label>\n                  <input type="text" class="form-control" [(ngModel)]="disAppDate"\n                    [ngModelOptions]="{standalone: true}" readonly />\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-md-12">\n                <div class="form-group">\n                  <div class="input-group">\n                    <select class="form-control mr-auto mt-2 mt-lg-0"\n                        [(ngModel)]="reprintHeaders.selectedOption" [ngModelOptions]="{standalone: true}">\n                        <option [ngValue]="null">Select Bill No</option>\n                        <option *ngFor="let _BillList of BillList" [value]="_BillList.BillNo">\n                            {{_BillList.BillNo}} - {{_BillList.CustName}}\n                        </option>\n                    </select>\n                </div>\n                </div>\n                <div class="form-group">\n                  <ul class="list-group">\n                    <li class="list-group-item">\n                      Cancelled Bills\n                      <div class="material-switch pull-right">\n                        <input id="someSwitchOptionDefault" (change)="isChecked($event)" name="someSwitchOption001"\n                          type="checkbox" />\n                        <label for="someSwitchOptionDefault" class="label-default"></label>\n                      </div>\n                    </li>\n                  </ul>\n                </div>\n                <div class="form-group">\n                  <button class="printMe btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n                    (click)="onPrint(reprintHeaders.selectedOption)"><i class="fal fa-print"></i>\n                    Reprint </button>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </form>\n  </ng-container>\n  <div class="modal fade" id="ReprintPurchaseBillingModal" tabindex="-1" data-backdrop="static" data-keyboard="false" role="dialog"\n    aria-labelledby="exampleModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button"\n            class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n            id="exampleModalLabel" (click)=print()><i class="fal fa-print"></i> Print</button>\n          <button type="button" class="close" (click)="closePurBillTab()" data-dismiss="modal" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n          </button>\n        </div>\n        <span>\n          <div id="DisplayData" class="center" [innerHTML]=\'PrintDetails\'></div>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Added for Plain Text printing--\x3e\n\n<div class="modal fade" id="PurBillPlainTextTab" tabindex="-1" role="dialog" aria-labelledby="PurBillPlainTextTabLabel"\n    aria-hidden="true">\n    <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button"\n                    class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n                    id="PurBillPlainTextTabLabel" (click)=printPurBillPlainText()><i class="fal fa-print"></i> Print</button>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="container invoice-box htmlPrint" id="print-closed-section" style="max-width: 900px;border-width: 2em">\n                   <pre>{{purBillPlainTextDetails}}</pre>                \n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Ends here --\x3e'},HWQx:function(t,e,n){"use strict";n.r(e),e.default=".table-responsive {\r\n    display: block;\r\n    width: 99.9% !important;\r\n    overflow-x: auto;\r\n    -ms-overflow-style: -ms-autohiding-scrollbar;\r\n}\r\n\r\n.hiddenRow {\r\n    padding: 0 !important;\r\n  }\r\n\r\n.wrapper{\r\n    margin: auto 3em auto 3em;\r\n  }\r\n\r\n@media (min-width:2200px) and (max-width: 2440px) {\r\n    .table-responsive {\r\n     overflow-x: hidden !important;\r\n  \r\n}\r\n}\r\n\r\n@media (min-width: 300px) and (max-width: 2200px) {\r\n    .table-responsive {\r\n    overflow-x: auto !important;\r\n  \r\n}}"},LFAR:function(t,e,n){"use strict";n.r(e),e.default='.card-header{\r\n    border-radius: 15px !important;\r\n  }\r\n  .card{\r\n    border-radius: 15px !important;\r\n  \r\n  }\r\n  .card-body{ \r\n    padding: 10px 30px 0px 30px !important; \r\n    border-bottom: 2px solid black;\r\n    border-radius: 15px;\r\n  }\r\n  .p-38 { height: 38px; }\r\n  .text-white { color: white;}\r\n  .Pointer { cursor: pointer; }\r\n  .footer {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n  }\r\n  .hide{\r\n   display: hide;\r\n  }\r\n  .show{\r\n    display: block;\r\n  }\r\n  .accordion .card-header.collapsed:after {\r\n    /* symbol for "collapsed" panels */\r\n    content: "\\f067"; \r\n    position: absolute;\r\n    right: 20px;\r\n    font-size: 20px;\r\n    font-weight: 400;\r\n  \r\n    line-height: 1;\r\n    margin-top: -25px;\r\n    transition: .3s transform ease-in-out;\r\n  }\r\n  .accordion .card-header:after {\r\n    font-family: \'FontAwesome\';  \r\n    content: "\\f068";\r\n    position: absolute;\r\n    right: 20px;\r\n    font-size: 20px;\r\n    font-weight: 400;\r\n    line-height: 1;\r\n    margin-top: -25px;\r\n  }\r\n  .text-red{\r\n    color:red;\r\n  }\r\n  .text-green{\r\n  color:#16d616; \r\n  }\r\n  \r\n  \r\n  '},Tsp1:function(t,e,n){"use strict";n.r(e);var a=n("mrSG"),s=n("fXoL"),i=n("ofXK"),r=n("3Pt+"),l=n("5nbR"),o=n("tyNb"),d=n("db5x"),h=n("E2Nj"),c=n("SlBg"),u=n("NFKh"),m=n("eya4"),b=n("qLqq"),p=n("3TGi"),g=n("GUC0"),y=n.n(g);let f=class{constructor(t,e,n,a,s,i){this._CustomerService=t,this._purchaseService=e,this._router=n,this._paymentService=a,this._estmationService=s,this._masterService=i,this.autoFetchAmount=0,this.toggle=!1,this.filterRadioBtns=!1,this.PaymentHeader="",this.SalesData={},this.PurchaseData={},this.OrderAttachmentSummaryData={},this.SRAttachmentSummaryData={},this.OldGoldAttachmentSummaryData={},this.pageName="OC",this.NoRecordsCustomer=!1,this.NoRecordsPurchase=!1,this.EnableReprint=!1,this.EnableDisablePayment=!1,this.password=b.a.Pwd,this.model={option:"Payment"},this.ccode="",this.bcode="",this.today=new Date,this.estDate="",this.ordDate="",this.ShowHide=!0,this.NewEstimation=!1,this.ExistingEstimation=!1,this.OrderNo=!1,this.ApplicationDate="",this.estDetails=[],this.SalesPerson="",this.purchaseDetails=[],this.customerDtls=[],this.SalesManList=[],this.ParentJSON=[],this.EnableSubmitButton=!0,this.NoRecordsPaymentSummary=!1,this.PaymentSummary=[],this.PaidAmount=0,this.ToggleTotal=!0,this.CollapseCustomerTab=!0,this.CollapseCustomerDetailsTab=!0,this.EnableSalesTab=!1,this.EnableOrderAttachmentTab=!0,this.EnableSRAttachmentTab=!0,this.EnableOldGoldAttachmentTab=!0,this.NoRecordsSales=!1,this.NoSummarySales=!1,this.NoSummaryOrder=!1,this.NoSummaryPurchase=!1,this.NoSummarySalesReturn=!1,this.NoSummaryOldGold=!1,this.NoRecordsAttachSR=!1,this.NoRecordsAttachOldGold=!1,this.ToggleAttachOrder=!0,this.NoRecordsAttachOrder=!1,this.ReceivableAmount=0,this.TogglePurchase=!1,this.EnablePurchaseTab=!1,this.PurchaseBilling={CompanyCode:"",BranchCode:"",EstNo:null,OperatorCode:localStorage.getItem("Login"),BillCounter:null,Type:"PE",BillNo:0,CustName:null,PaidAmount:0,CancelRemarks:null,lstOfPayment:[]},this.PurchaseTotAmount=0,this.NoRecordsPayments=!0,this.EnablePaymentsTab=!0,this.BalAmount=0,this.radioItems=["Payment","Adjust"],this.getCB()}ngOnInit(){this.PurchaseData={Amount:0},this.NewEstimation=!0,$((function(){$("#datepicker").datepicker()})),this.GetCustomerDetsFromCustComp(),this.GetPurchaseDetsFromPurchaseComp(),this.GetParentJson(),this.GetPaymentSummary(),this.getSalesMan(),this.getApplicationdate()}getPurchaseEstimationDetails(t){this.EnableDisablePayment=!1,null!=t&&"0"!=t&&this._purchaseService.getPurchaseDetailsfromAPI(t).subscribe(e=>{this.purchaseDetails=e,null!=this.purchaseDetails&&(this.PurchaseBilling.CompanyCode=this.ccode,this.PurchaseBilling.BranchCode=this.bcode,this.SalesPerson=this.purchaseDetails.lstPurchaseEstDetailsVM[0].SalCode,this.PurchaseBilling.EstNo=t,"Payment"==this.model.option?this.EnableDisablePayment=!0:this.EnableDisablePayment=!1,this._estmationService.SendEstNo(t),this._CustomerService.getCustomerDtls(this.purchaseDetails.CustID).subscribe(t=>{this.customerDtls=t,this._CustomerService.sendCustomerDtls_To_Customer_Component(this.customerDtls),this._paymentService.inputData(this.PurchaseBilling)}))})}getSalesMan(){this._masterService.getSalesMan().subscribe(t=>{this.SalesManList=t})}getApplicationdate(){this._masterService.getApplicationDate().subscribe(t=>{let e=t;this.ordDate=e.applcationDate,this.ApplicationDate=Object(i.formatDate)(this.ordDate,"dd/MM/yyyy","en_GB")})}GetParentJson(){this._paymentService.castParentJSON.subscribe(t=>{this.ParentJSON=t})}GetPaymentSummary(){this._paymentService.CastPaymentSummaryData.subscribe(t=>{this.PaymentSummary=t,0==this.isEmptyObject(this.PaymentSummary)&&null!=this.isEmptyObject(this.PaymentSummary)?null==this.PaymentSummary.Amount?(this.NoRecordsPaymentSummary=!1,this.EnableSubmitButton=!0):(this.NoRecordsPaymentSummary=!0,this.EnableSubmitButton=!1,this.PaidAmount=this.PaymentSummary.Amount):(this.NoRecordsPaymentSummary=!1,this.EnableSubmitButton=!0)})}ToggleTotalFunction(){this.ToggleTotal=!this.ToggleTotal}ToggleCustomerData(){1==this.NoRecordsCustomer&&(this.filterRadioBtns=!0,this.CollapseCustomerTab=!this.CollapseCustomerTab,this.CollapseCustomerDetailsTab=!this.CollapseCustomerDetailsTab)}TogglePurchaseData(){this.EnablePurchaseTab=!this.EnablePurchaseTab}ngOnDestroy(){this._CustomerService.SendCustDataToEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this._purchaseService.sendPurchaseDatatoEstComp(null),this._estmationService.SendEstNo(null),this._estmationService.SendOldGoldAttachmentSummaryData(null),this._paymentService.outputData(null),this._paymentService.inputData(null),this._paymentService.OutputParentJSONFunction(null),this._paymentService.SendPaymentSummaryData(null),this.model.option="Payment",this.PurchaseBilling={CompanyCode:"",BranchCode:"",EstNo:null,OperatorCode:localStorage.getItem("Login"),BillCounter:null,Type:"PE",BillNo:0,CustName:null,PaidAmount:0,CancelRemarks:null,lstOfPayment:[]},this.ClearValues()}isEmptyObject(t){return t&&0===Object.keys(t).length}getCB(){this.ccode=u.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(u.enc.Utf8),this.bcode=u.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(u.enc.Utf8),this.PurchaseBilling.CompanyCode=this.ccode,this.PurchaseBilling.BranchCode=this.bcode}EnablePurchase(){this.EnableSalesTab=!1,this.EnablePurchaseTab=!1,this.NoRecordsSales=!1,this.TogglePurchase=!1,this.NoRecordsPurchase=!1}GetCustomerDetsFromCustComp(){this._CustomerService.cast.subscribe(t=>{this.CustomerName=t,0==this.isEmptyObject(this.CustomerName)&&null!=this.isEmptyObject(this.CustomerName)?(this.EnableSalesTab=!1,this.CollapseCustomerTab=!0,this.NoRecordsCustomer=!0,this.NoRecordsSales=!0,this.CollapseCustomerDetailsTab=!0):(this.EnableSalesTab=!0,this.CollapseCustomerTab=!1,this.NoRecordsCustomer=!1,this.NoRecordsSales=!1,this.EnablePurchaseTab=!0)})}GetPurchaseDetsFromPurchaseComp(){this._purchaseService.cast.subscribe(t=>{this.PurchaseData=t,0==this.isEmptyObject(this.PurchaseData)&&null!=this.isEmptyObject(this.PurchaseData)?(this.NoRecordsPurchase=!0,this.TogglePurchase=!0,this.EnablePurchaseTab=!0,this.NoSummaryPurchase=!0,this.indicator="P"):(this.NoRecordsPurchase=!1,this.TogglePurchase=!1,this.EnablePurchaseTab=!0,this.NoSummaryPurchase=!1)})}PurchaseTotalAmountCalculation(t){this.PurchaseTotAmount=Math.round(t)}TogglePaymentData(){0==this.NoRecordsPayments?y()("Warning","Please select Item Details ","warning"):this.EnablePaymentsTab=!1}BalanceAmount(){return this.BalAmount=Math.round(this.PurchaseTotAmount)-this.PaidAmount,this.autoFetchAmount=this.BalAmount,this.BalAmount}PaidTotalAmountCalculation(t){this.PaidAmount=t,this.PurchaseBilling.PaidAmount=this.PaidAmount,this.BalanceAmount()}OnRadioBtnChnge(t){"Adjust"==t?(this.EnableDisablePayment=!1,this.model.option=t):(this.EnableDisablePayment=!0,this.model.option=t)}Submit(){"Payment"==this.model.option?0==this.BalAmount||0==this.BalAmount?this.SavePurchaseBilling():this.BalAmount<0?y()("Warning","Paid amount Should not be greater than the balance amount","warning"):this.BalAmount>0&&y()("Warning","Please make full payment to save the bill","warning"):this.SavePurchaseBilling()}SavePurchaseBilling(){confirm("Do you want to save??")&&null==this.BillNo&&this._purchaseService.postPurchaseBilling(this.PurchaseBilling).subscribe(t=>{this.BillNo=t,null!=this.BillNo.billNo&&0!=this.BillNo.billNo&&(this.EnableReprint=!0,y()("Submitted!","Bill No: "+this.BillNo.billNo+" generated successfully!","success"),this.ngOnDestroy())})}ClearValues(){this.ReceivableAmount=0,this.PaidAmount=0,this.PurchaseTotAmount=0,this.BalAmount=0,this.pageName="",this.EnableDisablePayment=!1,this.EnablePurchaseTab=!0,this.SalesManList=[],this.getSalesMan(),this.GetCustomerDetsFromCustComp(),this.GetPurchaseDetsFromPurchaseComp(),this.GetParentJson(),this.GetPaymentSummary(),this.getApplicationdate(),this.getCB(),this.pageName="OC"}};f.ctorParameters=()=>[{type:h.a},{type:d.a},{type:o.c},{type:p.a},{type:c.a},{type:m.a}],f=a.a([Object(s.Component)({selector:"app-purchase-billing",template:a.b(n("x3mp")).default,styles:[a.b(n("LFAR")).default]}),a.c("design:paramtypes",[h.a,d.a,o.c,p.a,c.a,m.a])],f);var P=n("NQ5e"),v=n("5eHb");let S=class{constructor(t,e,n,a,i,r,l,o){this._purchaseService=t,this.formBuilder=e,this.toastr=n,this._CustomerService=a,this._salesService=i,this._router=r,this._masterService=l,this._estimationService=o,this.count=0,this.Rate=0,this.CustomerDets=[],this.purchaseDetails=[],this.DmCarats=0,this.LinesDetails=[],this.EnableReprint=!1,this.EnableDisablectrls=!0,this.StoneCarats=0,this.EnableDisablePurPer=!1,this.leavePage=!1,this.valueChange=new s.EventEmitter,this.ccode="",this.bcode="",this.password=b.a.Pwd,this.model={option:"New Estimation"},this.NewEstimation=!0,this.PurchaseSummaryData={GrossWt:null,NtWt:null,StoneWt:null,carats:null,Amount:0},this.ToggleTotal=!0,this.CollapseCustomerTab=!0,this.CollapseCustomerDetailsTab=!0,this.ToggleEstimation=!1,this.PurchaseAmount=0,this.PurchaseTotalAmount=0,this.PurchaseAmountChange=new s.EventEmitter,this.DiamondAmount=0,this.ItemAmount=0,this.StoneAmount=0,this.ifPurchase=!1,this.EnableDisableSalesPerson=!1,this.ReprintData={EstNo:null,EstType:null},this.arrayObj=[],this.customerDtls=[],this.ShowHidePurEst=!0,this.RateTypeData=[{name:"Exchange Rate",value:"E"},{name:"Cash Rate",value:"C"}],this.EnablePurchaseRate=!1,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableRateType=!1,this.EnableSubmitButton=!0,this.fieldArray=[],this.newAttribute={SalCode:null,GSCode:null,ItemName:null,GrossWt:null,StneWt:null,NetWt:null,PurityPercent:null,MeltingPercent:null,CompanyCode:this.ccode,BranchCode:this.bcode,MeltingLoss:null,PurchaseRate:null,DiamondAmount:null,Dcts:null,GoldAmount:null,ItemAmount:null,lstPurchaseEstStoneDetailsVM:[],lstPurchaseEstDiamondDetailsVM:[]},this.StandardMeltingLoss=2,this.PurityPercent=0,this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.CopyEditedRow=[],this.EnableDiamondTab=!1,this.EnableStoneTab=!1,this.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]},this.purchaseEstimationPlainTextDetails=[],this.stwt=0,this.dcts=0,this.Flag=!1,this.rndoff=0,this.radioItems=["New Estimation","Existing Estimation"],this.getCB(),this.EnableRateTypeBasedonRoute()}ToggleCustomerData(){this.CollapseCustomerTab=!this.CollapseCustomerTab,this.CollapseCustomerDetailsTab=!this.CollapseCustomerDetailsTab}OnRadioBtnChnge(t){"New Estimation"==t?this._router.navigateByUrl("/redirect",{skipLocationChange:!0}).then(()=>{this._router.navigate(["/purchase"]),this.model.option=t,this.ToggleEstimation=!1,this.NewEstimation=!0,this.ShowHidePurEst=!0}):(this.model.option=t,this.ToggleEstimation=!0,this._CustomerService.SendCustDataToEstComp(null),this.NewEstimation=!1,this.ShowHidePurEst=!1)}valueChanged(t){this.PurchaseAmount=t,this.valueChange.emit(this.PurchaseAmount)}confirmBeforeLeave(){return 1!=this.leavePage||!!confirm("You have unsaved changes! If you leave, your changes will be lost.")&&(this.leavePage=!1,!0)}PurchaseAmountChanged(t){this.PurchaseTotalAmount=t,this.PurchaseAmountChange.emit(this.PurchaseTotalAmount)}receiveStoneDiamondAmt(){for(var t in this.fieldArray){if(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length>0)for(var e=0;e<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length;e++)this.DiamondAmount+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM[e].Amount);else this.DiamondAmount=0;if(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstStoneDetailsVM.length>0)for(e=0;e<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstStoneDetailsVM.length;e++)this.StoneAmount+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstStoneDetailsVM[e].Amount);else this.StoneAmount=0;this.fieldArray[t].DiamondAmount=this.DiamondAmount+this.StoneAmount,this.recalculate(t),this.DiamondAmount=0,this.StoneAmount=0}}EnableDisableStnBtn(t){this.EnableStneSubmit=t}EnableDisableDmdBtn(t){this.EnableDmdSubmit=t}ngOnInit(){this.getApplicationDate(),this.PurchaseSummaryData={GrossWt:null,NtWt:null,StoneWt:null,carats:null,Amount:0},"/purchase"===this._router.url?(this.ifPurchase=!0,this.EnableDisableSalesPerson=!1,this.PurSalCode="A",this._CustomerService.cast.subscribe(t=>{this.customerDtls=t})):this.EnableDisableSalesPerson=!0,this._salesService.EstNo.subscribe(t=>{this.SalesEstNo=t}),this._estimationService.SubjectEstNo.subscribe(t=>{this.SalesEstNo=t,null!=this.SalesEstNo&&"0"!=this.SalesEstNo&&"/purchase"!=this._router.url&&this._estimationService.getEstimationDetailsfromAPI(this.SalesEstNo).subscribe(t=>{this.arrayObj=t,null!=this.arrayObj&&(this.PurSalCode=this.arrayObj.salesEstimatonVM[0].SalCode)})}),this.Index=-1,this.PurchaseForm=this.formBuilder.group({GS:[null,r.Validators.required],SalCode:[null,r.Validators.required],RateType:["E",r.Validators.required],Item:[null,r.Validators.required],RatePerGram:[null,r.Validators.required]}),this.getGSList(),this.getSalesMan(),this._CustomerService.cast.subscribe(t=>{this.CustomerDets=t,null!=this.CustomerDets?(this.PurchaseLinesPost.CustID=this.CustomerDets.ID,this.PurchaseLinesPost.MobileNo=this.CustomerDets.MobileNo,this.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),this.PurchaseLinesPost.CompanyCode=this.ccode,this.PurchaseLinesPost.BranchCode=this.bcode):(this.PurchaseLinesPost.CustID=null,this.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),this.PurchaseLinesPost.CompanyCode=this.ccode,this.PurchaseLinesPost.BranchCode=this.bcode)}),this._estimationService.SubjectEstNo.subscribe(t=>{this.SalesEstNo=t,null!=this.SalesEstNo&&"0"!=this.SalesEstNo&&this._purchaseService.getPurchaseDetailsfromAPI(this.SalesEstNo).subscribe(t=>{if(this.purchaseDetails=t,null!=this.purchaseDetails){if(this.purchaseDetails.lstPurchaseEstDetailsVM.length>0){for(var e in this.fieldArray=this.purchaseDetails.lstPurchaseEstDetailsVM,this._purchaseService.sendPurchaseDatatoEstComp(this.PurchaseSummaryData),this.getItemExistingList(this.fieldArray[0].GSCode),this.fieldArray)this.EnableEditDelbtn[e]=!0,this.EnableSaveCnlbtn[e]=!1,this.readonly[e]=!0;this.PurchaseForm.controls.GS.setValue(this.fieldArray[0].GSCode),this.PurchaseForm.controls.SalCode.setValue(this.fieldArray[0].SalCode),this.PurchaseForm.controls.Item.setValue(this.purchaseDetails.PurItem),this.PurchaseForm.controls.RateType.setValue("E"),this.Rate=this.purchaseDetails.TodayRate,this.EnableDropdown=!0,this.PurchaseLinesPost.TotalPurchaseAmount=this.purchaseDetails.TotalPurchaseAmount,this.PurchaseLinesPost.GrandTotal=this.purchaseDetails.GrandTotal,this.PurchaseLinesPost.TodayRate=this.Rate,this.PurchaseLinesPost.PType=this.PurchaseForm.value.RateType,this.PurchaseLinesPost.PurItem=this.PurchaseForm.value.Item,this.PurchaseLinesPost.EstNo=this.SalesEstNo,this.PurchaseLinesPost.lstPurchaseEstDetailsVM=this.fieldArray,this.EnableSubmitButton=!1}}else this.fieldArray=[],this.PurchaseForm.reset()},t=>{404===t.status&&(this.PurchaseForm.reset(),this.PurchaseForm=this.formBuilder.group({GS:[null,r.Validators.required],SalCode:[null,r.Validators.required],RateType:["E",r.Validators.required],Item:[null,r.Validators.required],RatePerGram:[null,r.Validators.required]}),this.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:"E",CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]})})}),"/sales-billing"!=this._router.url&&"/purchase/purchase-billing"!=this._router.url||(this.EnableDisablectrls=!1),"/estimation"==this._router.url&&(this.EnableDisablectrls=!0)}getApplicationDate(){this._masterService.getApplicationDate().subscribe(t=>{let e=t;this.applicationDate=e.applcationDate})}EstimationDetails(t){this.SalesEstNo=t,null!=this.SalesEstNo&&"0"!=this.SalesEstNo&&""!=this.SalesEstNo&&this._purchaseService.getPurchaseDetailsfromAPI(this.SalesEstNo).subscribe(t=>{this.purchaseDetails=t,null!=this.purchaseDetails?(this.leavePage=!0,this.ShowHidePurEst=!0,this._estimationService.SendEstNo(this.SalesEstNo),this._CustomerService.getCustomerDtls(this.purchaseDetails.CustID).subscribe(t=>{for(var e in this.customerDtls=t,this._CustomerService.sendCustomerDtls_To_Customer_Component(this.customerDtls),this.fieldArray=this.purchaseDetails.lstPurchaseEstDetailsVM,this._purchaseService.sendPurchaseDatatoEstComp(this.PurchaseSummaryData),this.getItemExistingList(this.fieldArray[0].GSCode),this.fieldArray)this.EnableEditDelbtn[e]=!0,this.EnableSaveCnlbtn[e]=!1,this.readonly[e]=!0;this.PurchaseForm.controls.GS.setValue(this.fieldArray[0].GSCode),this.PurchaseForm.controls.SalCode.setValue(this.fieldArray[0].SalCode),this.PurchaseForm.controls.Item.setValue(this.purchaseDetails.PurItem),this.PurchaseForm.controls.RateType.setValue("E"),this.Rate=this.purchaseDetails.TodayRate,this.EnableDropdown=!0,this.PurchaseLinesPost.TotalPurchaseAmount=this.purchaseDetails.TotalPurchaseAmount,this.PurchaseLinesPost.GrandTotal=this.purchaseDetails.GrandTotal,this.PurchaseLinesPost.TodayRate=this.Rate,this.PurchaseLinesPost.PType=this.PurchaseForm.value.RateType,this.PurchaseLinesPost.PurItem=this.PurchaseForm.value.Item,this.PurchaseLinesPost.EstNo=this.SalesEstNo,this.PurchaseLinesPost.lstPurchaseEstDetailsVM=this.fieldArray,this.EnableSubmitButton=!1,this.EnableRateTypeBasedonRoute()})):"/purchase"==this._router.url&&(this.toastr.warning("Purchase Estimation No does not exists.","Alert!"),this.ShowHidePurEst=!1,this.ClearValues())},t=>{if(404===t.status){const e=t.error;"Estimation No Does Not Exist"!=e.description&&(y()("Warning!",e.description,"warning"),this.ShowHidePurEst=!1,this.ClearValues())}})}ngOnDestroy(){this._salesService.SendEstNo_To_Purchase(null),this._purchaseService.sendPurchaseDatatoEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this._CustomerService.SendCustDataToEstComp(null),this._estimationService.SendEstNo(0)}getGSList(){this._masterService.getNewGsList().subscribe(t=>{this.GSList=t,this.PurchaseForm.controls.GS.setValue("OGO"),this.getItemList(this.PurchaseForm)})}getItemList(t){this.PurchaseLinesPost.PurItem=t.value.GS,this._masterService.getItemfromAPI(t.value).subscribe(t=>{this.ItemList=t})}getItemExistingList(t){this._masterService.getItemfromExistingAPI(t).subscribe(t=>{this.ItemList=t})}getSalesMan(){this._masterService.getSalesMan().subscribe(t=>{this.SalesManList=t})}toggleRateType(t){this.Rate=0}AJAXRateperGram(t,e){this.ItemType=t,this.Karat=this.ItemList.filter(e=>e.Item_code===t),this.ItemName=this.Karat[0].Karat,this.Rate=null,this._masterService.RefreshRateperGram(this.PurchaseForm.value,this.ItemName).subscribe(t=>{this.Rate=t,this.Rate=this.Rate.Rate,this.EnableDisablePurPer=!1,this.fieldArray[e].PurityPercent=0,this.fieldArray[e].GrossWt=null,this.fieldArray[e].StneWt=null,this.fieldArray[e].Dcts=null,this.fieldArray[e].NetWt=null,this.fieldArray[e].MeltingPercent=0,this.fieldArray[e].MeltingLoss=0,this.fieldArray[e].PurchaseRate=0,this.fieldArray[e].ItemAmount=0,"24K"!=this.fieldArray[e].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.EnableDisablePurRate()},t=>{if(400===t.status){const e=t.error;alert(e.description)}})}EnableDisablePurRate(){"/purchase"==this._router.url?this.EnablePurchaseRate=!1:this.EnablePurchaseRate=!0}ItemAmountCalc(t){this.fieldArray[t].PurchaseRate>this.Rate?(this.toastr.warning("Purchase rate should not be greater than "+this.Rate+".00","Alert!"),this.fieldArray[t].ItemAmount=0):this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)}getRateperGram(t){this.Rate=null,this._masterService.RefreshRateperGram(t.value,this.ItemName).subscribe(t=>{this.Rate=t,this.Rate=this.Rate.Rate},t=>{if(400===t.status){const e=t.error;alert(e.description)}})}add(t){null==t.value.SalCode?this.toastr.warning("Please select Sales Person","Alert!"):null==t.value.GS?this.toastr.warning("Please select GS","Alert!"):this.addrow()}getCB(){this.ccode=u.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(u.enc.Utf8),this.bcode=u.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(u.enc.Utf8)}addrow(){this.newAttribute={SalCode:null,GSCode:null,ItemName:null,GrossWt:null,StneWt:null,NetWt:null,PurityPercent:null,MeltingPercent:null,CompanyCode:this.ccode,BranchCode:this.bcode,MeltingLoss:null,PurchaseRate:null,DiamondAmount:null,Dcts:null,GoldAmount:null,ItemAmount:null,lstPurchaseEstStoneDetailsVM:[],lstPurchaseEstDiamondDetailsVM:[]},this.fieldArray.push(this.newAttribute);for(let{}of this.fieldArray)this.count++;this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableRateTypeBasedonRoute(),this.leavePage=!0}GetNetWT(t){this.fieldArray[t].PurityPercent=0;const e=this.fieldArray[t].GrossWt,n=this.fieldArray[t].StneWt;parseInt(n)>parseInt(e)?(y()("Input Error","Stone Wt cannot be greater than Gross Wt.","error"),this.fieldArray[t].StneWt=null):(this.fieldArray[t].NetWt=Number(e-n),"OG24K"!=this.fieldArray[t].ItemName&&"OGOL"!=this.fieldArray[t].ItemName&&"OGCN24K"!=this.fieldArray[t].ItemName&&"OGCN"!=this.fieldArray[t].ItemName?(this.GetMLLoss_MLPercentage(t),this.EnableDisablePurPer=!0):this.EnableDisablePurPer=!1)}recalculate(t){if("OG24K"==this.fieldArray[t].ItemName||"OGOL"==this.fieldArray[t].ItemName||"OGCN24K"==this.fieldArray[t].ItemName||"OGCN"==this.fieldArray[t].ItemName?("OG24K"==this.fieldArray[t].ItemName||"OGCN"==this.fieldArray[t].ItemName||this.fieldArray[t].ItemName,this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)):("BJOR"==this.fieldArray[t].ItemName||"OG22"==this.fieldArray[t].ItemName||"OG18"==this.fieldArray[t].ItemName||"BJ18K"==this.fieldArray[t].ItemName)&&(this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].PurchaseRate*this.fieldArray[t].NetWt)),null!=this.fieldArray[t].DiamondAmount){const e=this.fieldArray[t].DiamondAmount,n=this.fieldArray[t].ItemAmount;this.fieldArray[t].ItemAmount=parseFloat((+n+ +e).toFixed(2))}}GetMLLoss_MLPercentage(t){this.fieldArray[t].PurityPercent>100?(y()("Input Error","Purity Percentage should not be greater than 100 %","error"),this.fieldArray[t].PurityPercent=null,this.PurityPercent=null):this.fieldArray[t].PurityPercent>=100&&"OG24K"!=this.fieldArray[t].ItemName?(y()("Input Error","Purity Percentage has to be less than 100","error"),this.fieldArray[t].PurityPercent=null,this.PurityPercent=null):("OG24K"==this.fieldArray[t].ItemName||"OGOL"==this.fieldArray[t].ItemName||"OGCN24K"==this.fieldArray[t].ItemName||"OGCN"==this.fieldArray[t].ItemName?(this.PurityPercent=this.fieldArray[t].PurityPercent,this.EnableDisablePurPer=!1,"OG24K"==this.fieldArray[t].ItemName?(this.fieldArray[t].PurchaseRate=Number(this.Rate*this.PurityPercent/100).toFixed(2),this.fieldArray[t].MeltingPercent=Number(100*(this.Rate-this.fieldArray[t].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[t].MeltingLoss=Math.abs(Number(this.fieldArray[t].NetWt*this.fieldArray[t].MeltingPercent/100)).toFixed(3),this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)):"OGCN"==this.fieldArray[t].ItemName?(this.fieldArray[t].PurchaseRate=Number(this.Rate*this.PurityPercent/91.6).toFixed(2),this.fieldArray[t].MeltingPercent=Number(100*(this.Rate-this.fieldArray[t].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[t].MeltingLoss=Math.abs(Number(this.fieldArray[t].NetWt*this.fieldArray[t].MeltingPercent/100)).toFixed(3),this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)):"OGCN24K"==this.fieldArray[t].ItemName?(this.fieldArray[t].PurchaseRate=Number(this.Rate*this.PurityPercent/100).toFixed(2),this.fieldArray[t].MeltingPercent=Number(100*(this.Rate-this.fieldArray[t].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[t].MeltingLoss=Math.abs(Number(this.fieldArray[t].NetWt*this.fieldArray[t].MeltingPercent/100)).toFixed(3),this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2)):(this.fieldArray[t].PurchaseRate=Math.abs(Number(this.Rate*this.PurityPercent/100)-Number(this.Rate*this.PurityPercent*.02/100)).toFixed(2),this.fieldArray[t].MeltingPercent=Number(100*(this.Rate-this.fieldArray[t].PurchaseRate)/this.Rate).toFixed(2),this.fieldArray[t].MeltingLoss=Number(this.fieldArray[t].NetWt*this.fieldArray[t].MeltingPercent/100).toFixed(3),this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].NetWt*this.fieldArray[t].PurchaseRate).toFixed(2))):"BJOR"==this.fieldArray[t].ItemName||"OG22"==this.fieldArray[t].ItemName?(this.PurityPercent=91.6,this.fieldArray[t].PurityPercent=this.PurityPercent,this.fieldArray[t].MeltingPercent=0,this.fieldArray[t].MeltingLoss=0,this.fieldArray[t].PurchaseRate=this.Rate,this.fieldArray[t].ItemAmount=Number(this.Rate*this.fieldArray[t].NetWt)):"OG18"==this.fieldArray[t].ItemName||"BJ18K"==this.fieldArray[t].ItemName?(this.PurityPercent=75,this.fieldArray[t].PurityPercent=this.PurityPercent,this.fieldArray[t].MeltingPercent=0,this.fieldArray[t].MeltingLoss=0,this.fieldArray[t].PurchaseRate=this.Rate,this.fieldArray[t].ItemAmount=Number(this.Rate*this.fieldArray[t].NetWt)):"OSSL"==this.fieldArray[t].ItemName&&(this.fieldArray[t].ItemAmount=Number(this.fieldArray[t].PurchaseRate*this.fieldArray[t].NetWt)),null!=this.fieldArray[t].DiamondAmount&&(this.fieldArray[t].ItemAmount+=this.fieldArray[t].DiamondAmount))}editFieldValue(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):("OG24K"!=this.fieldArray[t].ItemName&&"OGOL"!=this.fieldArray[t].ItemName&&"OGCN24K"!=this.fieldArray[t].ItemName&&"OGCN"!=this.fieldArray[t].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.ItemType=this.fieldArray[t].ItemName,this.CopyEditedRow[t]=Object.assign({},this.fieldArray[t]),this.EnableEditDelbtn[t]=!1,this.EnableSaveCnlbtn[t]=!0,this.readonly[t]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableRateTypeBasedonRoute())}saveDataFieldValue(t){null==this.fieldArray[t].ItemName||0==this.fieldArray[t].ItemName?this.toastr.warning("Please Select ItemName from Drop Down","Alert!"):null==this.fieldArray[t].GrossWt||0==this.fieldArray[t].GrossWt?this.toastr.warning("Please Enter Gross Wt","Alert!"):"OP"==this.PurchaseLinesPost.PurItem||"OS"==this.PurchaseLinesPost.PurItem||null!=this.fieldArray[t].PurityPercent&&0!=this.fieldArray[t].PurityPercent?("OP"==this.PurchaseLinesPost.PurItem||"OS"==this.PurchaseLinesPost.PurItem)&&this.fieldArray[t].PurchaseRate>this.Rate?(this.toastr.warning("Purchase rate should not be greater than "+this.Rate+".00","Alert!"),this.fieldArray[t].ItemAmount=0):null==this.fieldArray[t].ItemAmount||0==this.fieldArray[t].ItemAmount?this.toastr.warning("Amount should not empty. Please select proper item from dropdown","Alert!"):(this.leavePage=!0,this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t]=this.fieldArray[t],this.PurchaseLinesPost.TotalPurchaseAmount=this.PurchaseSummaryData.Amount,this.PurchaseLinesPost.GrandTotal=this.PurchaseSummaryData.Amount,this.PurchaseLinesPost.TodayRate=this.Rate,this.PurchaseLinesPost.PType=this.PurchaseForm.value.RateType,this.PurchaseLinesPost.PurItem=this.PurchaseForm.value.GS,this.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),1==this.NewEstimation&&"/purchase"===this._router.url?(this.SalesEstNo="0",this.PurchaseLinesPost.EstNo=this.SalesEstNo):this.PurchaseLinesPost.EstNo=this.SalesEstNo,this.fieldArray[t].GSCode=this.PurchaseForm.value.GS,this.fieldArray[t].SalCode=this.PurchaseForm.value.SalCode,this.DmCarats=this.fieldArray[t].Dcts,this.StoneCarats=this.fieldArray[t].StneWt,"OG24K"!=this.fieldArray[t].ItemName&&"OGOL"!=this.fieldArray[t].ItemName&&"OGCN24K"!=this.fieldArray[t].ItemName&&"OGCN"!=this.fieldArray[t].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.EnableDisableRateType()):this.toastr.warning("Please Enter Purity Percentage","Alert!")}EnableDisableRateType(){this.fieldArray.length>0?this.EnableRateType=!0:this.EnableRateType=!1}EnableRateTypeBasedonRoute(){"/purchase"==this._router.url&&this.EnableDisableRateType(),"/estimation"!=this._router.url&&"/sales-billing"!=this._router.url||(this.EnableRateType=!0)}cancelDataFieldValue(t){this.EnableAddRow=!1,null!=this.CopyEditedRow[t]?("OG24K"!=this.fieldArray[t].ItemName&&"OGOL"!=this.fieldArray[t].ItemName&&"OGCN24K"!=this.fieldArray[t].ItemName&&"OGCN"!=this.fieldArray[t].ItemName?this.EnableDisablePurPer=!0:this.EnableDisablePurPer=!1,this.fieldArray[t]=this.CopyEditedRow[t],this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t]=this.CopyEditedRow[t],this.CopyEditedRow[t]=null,this.EnableSaveCnlbtn[t]=!1,this.EnableEditDelbtn[t]=!0,this.readonly[t]=!0,this.CopyEditedRow=[]):(this.fieldArray.splice(t,1),this.PurchaseLinesPost.lstPurchaseEstDetailsVM.splice(t,1)),this.EnableRateTypeBasedonRoute(),this.EnableDisableSubmit()}EnableDisableSubmit(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0)}cancelPurchaseEst(){confirm("Do you want to cancel")&&("/purchase"==this._router.url?this._router.navigateByUrl("/redirect",{skipLocationChange:!0}).then(()=>{this._router.navigate(["/purchase"])}):(this.Rate=0,this.EnableDropdown=!1,this.fieldArray=[],this.PurchaseForm.reset(),this.PurchaseLinesPost={CustID:0,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]},this.PurchaseForm=this.formBuilder.group({GS:[null,r.Validators.required],SalCode:[null,r.Validators.required],RateType:["E",r.Validators.required],Item:[null,r.Validators.required],RatePerGram:[null,r.Validators.required]}),this._CustomerService.cast.subscribe(t=>{this.CustomerDets=t,null!=this.CustomerDets?(this.PurchaseLinesPost.CustID=this.CustomerDets.ID,this.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),this.PurchaseLinesPost.CompanyCode=this.ccode,this.PurchaseLinesPost.BranchCode=this.bcode):(this.PurchaseLinesPost.CustID=null,this.PurchaseLinesPost.OperatorCode=localStorage.getItem("Login"),this.PurchaseLinesPost.CompanyCode=this.ccode,this.PurchaseLinesPost.BranchCode=this.bcode)})))}deleteFieldValue(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):confirm("Do you want to delete")&&(this.fieldArray.splice(t,1),this.EnableDisableSubmit(),this.EnableRateTypeBasedonRoute())}SendPurchaseDataToEstComp(){this._purchaseService.sendPurchaseDatatoEstComp(this.PurchaseSummaryData)}sendDataToStoneComp(t,e){this.Index=e===this.Index?-1:e,("/purchase"===this._router.url||""!=this.SalesEstNo)&&(1==this.EnableSaveCnlbtn[e]?(this.toastr.warning("Please save purchase lines","Alert!"),this.EnableStoneTab=!1,this.EnableDiamondTab=!1):null==this.fieldArray[e].StneWt||0==this.fieldArray[e].StneWt?(this.toastr.warning("Please enter stone carrat","Alert!"),this.EnableStoneTab=!1,this.EnableDiamondTab=!1):(this.EnableStoneTab=!0,this._purchaseService.SendStoneDetailsFromPurchaseComp(t.lstPurchaseEstStoneDetailsVM),this.LinesDetails=t,this.EnableDiamondTab=!1))}sendDataToDiamondComp(t,e){this.Index=e===this.Index?-1:e,"/purchase"===this._router.url?1==this.EnableSaveCnlbtn[e]?(this.toastr.warning("Please save purchase lines","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):null!=this.fieldArray[e].Dcts&&0!=this.fieldArray[e].Dcts||"OG24K"==this.fieldArray[e].ItemName||"OGCN"==this.fieldArray[e].ItemName||"OGCN24K"==this.fieldArray[e].ItemName?"OG24K"==this.fieldArray[e].ItemName||"OGCN"==this.fieldArray[e].ItemName||"OGCN24K"==this.fieldArray[e].ItemName?(this.toastr.warning(this.fieldArray[e].ItemName+" has no Diamond details","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):"OSSL"==this.fieldArray[e].ItemName?this.toastr.warning("OSSL has no Diamond details","Alert!"):(this.EnableDiamondTab=!0,this._purchaseService.SendDiamondDetailsFromPurchaseComp(t.lstPurchaseEstDiamondDetailsVM),this.LinesDetails=t,this.EnableStoneTab=!1):(this.toastr.warning("Please enter diamond carrat","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):""!=this.SalesEstNo&&(1==this.EnableSaveCnlbtn[e]?(this.toastr.warning("Please save purchase lines","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):null==this.fieldArray[e].Dcts||0==this.fieldArray[e].Dcts?(this.toastr.warning("Please enter diamond carrat","Alert!"),this.EnableDiamondTab=!1,this.EnableStoneTab=!1):"OSSL"==this.fieldArray[e].ItemName?this.toastr.warning("OSSL has no Diamond details","Alert!"):(this.EnableDiamondTab=!0,this._purchaseService.SendDiamondDetailsFromPurchaseComp(t.lstPurchaseEstDiamondDetailsVM),this.LinesDetails=t,this.EnableStoneTab=!1))}SavePurchaseEst(){let t;if(null!=this.PurchaseLinesPost.CustID&&0!=this.PurchaseLinesPost.CustID||"/purchase"!=this._router.url)if(1==this.EnableSubmitButton)this.toastr.warning("Please enter/save item details to submit","Alert!");else if(1==this.EnableStneSubmit)this.toastr.warning("Please save stone details to submit","Alert!");else if(1==this.EnableDmdSubmit)this.toastr.warning("Please save diamond details to submit","Alert!");else if(1==this.validateDiamondCarats())this.toastr.warning("Please enter valid diamond details","Alert!");else{var e=confirm("Do you want to save??");this.SendPurchaseDataToEstComp(),e&&this._purchaseService.post(this.PurchaseLinesPost).subscribe(e=>{t=e,y()("Saved!","Purchase Estimation number "+t.EstMationNo+" Saved","success"),"/purchase"===this._router.url?(this.EnableReprint=!0,this.ReprintData={EstNo:t.EstMationNo,EstType:"P"},this._purchaseService.SendReprintPurchaseData(this.ReprintData),this.ClearValues(),this.EnableRateType=!1,this.leavePage=!1,this.PurchaseForm=this.formBuilder.group({GS:[null,r.Validators.required],SalCode:[null,r.Validators.required],RateType:["E",r.Validators.required],Item:[null,r.Validators.required],RatePerGram:[null,r.Validators.required]})):(this.EnableReprint=!1,this.ReprintData={EstNo:t.EstMationNo,EstType:"P"},this._estimationService.SendReprintData(this.ReprintData))})}else this.toastr.warning("Please select the customer","Alert!")}getPurchaseEstPlainText(t){this._purchaseService.PrintPurEstDotMatrix(t).subscribe(t=>{this.purchaseEstimationPlainTextDetails=t,$("#PurchaseEstimationPlainTextTab").modal("show")})}printPurchaseEstimationPlainText(){this._masterService.printPlainText(this.purchaseEstimationPlainTextDetails)}validateDiamondCarats(){this.Flag=!1;for(let t=0;t<this.PurchaseLinesPost.lstPurchaseEstDetailsVM.length;t++)if(this.dcts=0,this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length>0){for(let e=0;e<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length;e++)this.dcts+=Number(this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM[e].Carrat);this.dcts<this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].Dcts?this.Flag=!0:this.Flag=!1}else null!=this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].Dcts&&0!=this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].Dcts&&0==this.PurchaseLinesPost.lstPurchaseEstDetailsVM[t].lstPurchaseEstDiamondDetailsVM.length?this.Flag=!0:this.Flag=!1;return 1==this.Flag}GrossWtTotal(t){let e=0;return t.forEach(t=>{e+=parseFloat(t.GrossWt)}),this.PurchaseSummaryData.GrossWt=parseFloat(e),e}StneWt(t){let e=0;return t.forEach(t=>{0!=t.StneWt&&null!=t.StneWt&&(e+=parseFloat(t.StneWt))}),this.PurchaseSummaryData.StoneWt=parseFloat(e),e}Dcts(t){let e=0;return t.forEach(t=>{e+=parseFloat(t.Dcts)}),this.PurchaseSummaryData.carats=parseFloat(e),e}NetWt(t){let e=0;return t.forEach(t=>{e+=parseFloat(t.NetWt)}),this.PurchaseSummaryData.NtWt=parseFloat(e),e}Amount(t){let e=0;return t.forEach(t=>{e+=parseFloat(t.ItemAmount)}),this.PurchaseSummaryData.Amount=parseFloat(e),this.PurchaseAmountChanged(e),this.PurchaseLinesPost.GrandTotal=e,this.PurchaseLinesPost.TotalPurchaseAmount=e,this.rndoff=Math.round(e)-e,e}ClearValues(){this.Rate=0,this.EnableDropdown=!1,this.fieldArray=[],this.PurchaseForm.reset(),this._CustomerService.SendCustDataToEstComp(null),this._CustomerService.sendCustomerDtls_To_Customer_Component(null),this.PurchaseLinesPost={CustID:0,MobileNo:null,EstNo:0,PurItem:null,TodayRate:null,OperatorCode:null,GrandTotal:null,PType:null,CompanyCode:this.ccode,BranchCode:this.bcode,TotalPurchaseAmount:null,lstPurchaseEstDetailsVM:[],PaymentVM:[]}}};S.ctorParameters=()=>[{type:d.a},{type:r.FormBuilder},{type:v.b},{type:h.a},{type:P.a},{type:o.c},{type:m.a},{type:c.a}],a.a([Object(s.Output)(),a.c("design:type",Object)],S.prototype,"valueChange",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],S.prototype,"PurchaseAmountChange",void 0),S=a.a([Object(s.Component)({selector:"app-purchase",template:a.b(n("W3e5")).default,styles:[a.b(n("HWQx")).default]}),a.c("design:paramtypes",[d.a,r.FormBuilder,v.b,h.a,P.a,o.c,m.a,c.a])],S);let D=class{constructor(t,e,n,a,s){this._estmationService=t,this._purchaseService=e,this._router=n,this.toastr=a,this._masterService=s,this.estPurchaseDetails=[],this.EnablePurchaseReprintHeaders=!1,this.ShowHide=!0,this.PurchaseDetails=[],this.purEstPlainTextDetails=[]}ngOnInit(){"/purchase/reprintpurchaseestimation"==this._router.url?this.ShowHide=!0:this._purchaseService.castReprintPurchaseData.subscribe(t=>{this.ReprintData=t,0==this.isEmptyObject(this.ReprintData)&&null!=this.isEmptyObject(this.ReprintData)&&(this.getPurEstPlainText(this.ReprintData.EstNo),this._purchaseService.SendReprintPurchaseData(null)),this.ShowHide=!1})}isEmptyObject(t){return t&&0===Object.keys(t).length}getPurchaseEstimationDetails(t){""==t?this.toastr.warning("Please enter the estimation","Alert!"):this.getPurEstPlainText(t)}printPurchase(){let t,e;t=document.getElementById("print-sectionPurchase").innerHTML,e=window.open("","_blank","top=0,left=0,height=100%,width=auto"),e.document.open(),e.document.write(`\n      <html>\n        <head>\n          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">\n          <title>Print tab</title>\n          <style>\n         .htmlPrint{display:none;}\n\n          @media print {\n            .table-bordered\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        .margin{\n          margin-top:-24px;\n        }\n        .mb{\n          vertical-align:middle;position:absolute;\n        }\n        tr.spaceUnder>td {\n          padding-bottom: 40px !important;\n        }\n        .top {\n          margin-top:10px;\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .modal-content{\n          font-family: "Times New Roman", Times, serif;\n\n        }\n       .padding-top {\n         padding-top:20px;\n       }\n        .watermark{\n          -webkit-transform: rotate(331deg);\n          -moz-transform: rotate(331deg);\n          -o-transform: rotate(331deg);\n          transform: rotate(331deg);\n          font-size: 15em;\n          color: rgba(255, 5, 5, 0.37);\n          position: absolute;\n          text-transform:uppercase;\n          padding-left: 10%;\n          margin-top:-10px;\n        }\n        .right{\n          text-align:left;\n        }\n        .px-2 {\n          padding-left: 10px !important;\n        }\n        thead > tr\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        table tr td.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr td.borderLeft{\n          border-left: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr td.bottom{\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr th.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        .divborder {\n          border-right: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .lastdivborder{\n          line-height: 1.6;\n        }\n    .border{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n      border-bottom: 3px solid rgb(0, 0, 0) !important;\n    }\n\n    .tdborder{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n    }\n        .invoice {\n          margin-top: 250px;\n      }\n        .card{\n          border-style: solid;\n          border-width: 5px;\n          border: 3px solid rgb(0, 0, 0);\n      }\n        .printMe {\n          display: none !important;\n        }\n      }\n      body{\n            font-size: 15px;\n            line-height: 18px;\n      }\n </style>\n        </head>\n    <body onload="window.print();window.close()">\n\n    ${t}</body>\n      </html>`),e.document.close()}closePurEstTab(){this.getPurEstPlainText(this.PurEstNum)}getPurEstPlainText(t){this._purchaseService.PrintPurEstDotMatrix(t).subscribe(t=>{this.purEstPlainTextDetails=t,""!=this.purEstPlainTextDetails?$("#PurEstPlainTextTab").modal("show"):(this.toastr.warning("Purchase Estimation No does not exists.","Alert!"),$("#PurEstPlainTextTab").modal("hide"))})}printPurEstPlainText(){this._masterService.printPlainText(this.purEstPlainTextDetails)}};D.ctorParameters=()=>[{type:c.a},{type:d.a},{type:o.c},{type:v.b},{type:m.a}],D=a.a([Object(s.Component)({selector:"app-reprint-purchaseestimation",template:a.b(n("aTHM")).default,styles:[a.b(n("yByz")).default]}),a.c("design:paramtypes",[c.a,d.a,o.c,v.b,m.a])],D);let A=class{constructor(t,e,n){this.fb=t,this._PurchaseService=e,this._CustomerService=n,this.orderDetails=[],this.hasPurchaseDetails=!1,this.customerDtls=[],this.ccode="",this.bcode="",this.password=b.a.Pwd,this.PurchaseCancelObj={CompanyCode:null,BranchCode:null,EstNo:null,OperatorCode:null,BillCounter:null,Type:null,BillNo:0,CustName:null,PaidAmount:null,CancelRemarks:null,lstOfPayment:[]},this.getCB()}ngOnInit(){this.PurchaseCancelForm=this.fb.group({BillNo:null,BillAmount:null,GST:null,CustName:null,Phone:null,Address1:null,Address2:null,Address3:null,Mobile:null,Remarks:null})}getPurchaseDetails(t){""==t?alert("Enter Bill Number"):this._PurchaseService.getPurchaseBill(t).subscribe(e=>{this.PurchaseBillData=e,null!=this.PurchaseBillData&&(this.hasPurchaseDetails=!0,this.PurchaseCancelObj.CompanyCode=this.ccode,this.PurchaseCancelObj.BranchCode=this.bcode,this.PurchaseCancelObj.BillNo=t,this.PurchaseCancelObj.OperatorCode=localStorage.getItem("Login"),this.PurchaseCancelObj.CustName=this.PurchaseBillData.CustName,this.PurchaseCancelObj.PaidAmount=this.PurchaseBillData.TotalPurchaseAmount)},t=>{if(404===t.status){const e=t.error;y()("Warning!",e.description,"warning"),this.hasPurchaseDetails=!1}if(400===t.status){const e=t.error;y()("Warning!",e.description,"warning"),this.hasPurchaseDetails=!1}})}getCB(){this.ccode=u.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(u.enc.Utf8),this.bcode=u.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(u.enc.Utf8)}ngOnDestroy(){this._CustomerService.sendCustomerDtls_To_Customer_Component(null)}submitPost(){""==this.PurchaseCancelObj.CancelRemarks||null==this.PurchaseCancelObj.CancelRemarks?alert("Please enter the remarks"):confirm("Do you want to cancel Purchase Bill No."+this.PurchaseCancelObj.BillNo+"??")&&this._PurchaseService.CancelPurchaseBill(this.PurchaseCancelObj).subscribe(t=>{y()("Cancelled!","Purchase Bill No. "+this.PurchaseCancelObj.BillNo+" Cancelled Successfully","success"),this.PurchaseCancelForm.reset(),this.hasPurchaseDetails=!1})}Clear(){this.BillNo.nativeElement.value="",this.hasPurchaseDetails=!1,this.PurchaseBillData=null,this.PurchaseCancelObj={CompanyCode:null,BranchCode:null,EstNo:null,OperatorCode:null,BillCounter:null,Type:null,BillNo:0,CustName:null,PaidAmount:null,CancelRemarks:null,lstOfPayment:[]}}};A.ctorParameters=()=>[{type:r.FormBuilder},{type:d.a},{type:h.a}],a.a([Object(s.ViewChild)("BillNo",{static:!0}),a.c("design:type",s.ElementRef)],A.prototype,"BillNo",void 0),A=a.a([Object(s.Component)({selector:"app-purchase-cancel",template:a.b(n("2is8")).default,styles:[a.b(n("VZds")).default]}),a.c("design:paramtypes",[r.FormBuilder,d.a,h.a])],A);let E=class{constructor(t,e,n,a){this.formBuilder=t,this._router=e,this._masterService=n,this._purchaseService=a,this.ordDate="",this.isActive=!1,this.today=new Date,this.isReprint=!0,this.billNo="",this.isCheckedCHBX=!1,this.reprintHeaders={selectedOption:null,applicationDate:null},this.BillList=[],this.PrintDetails=[],this.purBillPlainTextDetails=[],this.ordDate=Object(i.formatDate)(this.today,"MM-DD-YYYY","en-US","+0530"),this.datePickerConfig=Object.assign({},{containerClass:"theme-dark-blue",showWeekNumbers:!1,maxDate:new Date(2020,7,28),dateInputFormat:"YYYY-MM-DD"})}isChecked(t){this.isCheckedCHBX=t.target.checked,this.reprintHeaders.selectedOption=null,this.getApplicationDate(),this._purchaseService.AllPurchaseBill(this.applicationDate,this.isCheckedCHBX).subscribe(t=>{this.BillList=t})}getApplicationDate(){this._masterService.getApplicationDate().subscribe(t=>{let e=t;this.applicationDate=e.applcationDate,this.disAppDate=Object(i.formatDate)(e.applcationDate,"dd/MM/yyyy","en_GB"),this.getAllPurchaseBill(this.applicationDate)})}ngOnInit(){this.getApplicationDate(),"/purchase/reprint-purchasebill"===this._router.url&&(this.isReprint=!0),"/purchase/purchase-billing"==this._router.url&&(this.isReprint=!1,null!=this.BillNo.billNo&&""!=this.BillNo.billNo&&this._purchaseService.PrintPurchaseBill(this.BillNo.billNo).subscribe(t=>{this.PrintDetails=t,this.PurBillNum=this.BillNo.billNo,$("#ReprintPurchaseBillingModal").modal("show"),$("#DisplayData").html(this.PrintDetails)}))}onPrint(t){null==this.reprintHeaders.selectedOption?(alert("Please enter the bill no."),$("#ReprintPurchaseBillingModal").modal("hide")):(this.PurBillNum=t,this._purchaseService.PrintPurchaseBill(t).subscribe(t=>{this.PrintDetails=t,$("#ReprintPurchaseBillingModal").modal("show"),$("#DisplayData").html(this.PrintDetails)}))}getAllPurchaseBill(t){this._purchaseService.AllPurchaseBill(t,this.isCheckedCHBX).subscribe(t=>{this.BillList=t})}print(){let t,e;t=document.getElementById("DisplayData").innerHTML,e=window.open("","_blank","top=0,left=0,height=100%,width=auto"),e.document.open(),e.document.write(`\n      <html>\n        <head>\n          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">\n          <title>Print tab</title>\n          <style>\n         .htmlPrint{display:none;}\n\n          @media print {\n            .table-bordered\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        .margin{\n          margin-top:-24px;\n        }\n        .mb{\n          vertical-align:middle;position:absolute;\n        }\n        tr.spaceUnder>td {\n          padding-bottom: 40px !important;\n        }\n        .top {\n          margin-top:10px;\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .modal-content{\n          font-family: "Times New Roman", Times, serif;\n\n        }\n       .padding-top {\n         padding-top:20px;\n       }\n        .watermark{\n          -webkit-transform: rotate(331deg);\n          -moz-transform: rotate(331deg);\n          -o-transform: rotate(331deg);\n          transform: rotate(331deg);\n          font-size: 15em;\n          color: rgba(255, 5, 5, 0.37);\n          position: absolute;\n          text-transform:uppercase;\n          padding-left: 10%;\n          margin-top:-10px;\n        }\n        .right{\n          text-align:left;\n        }\n        .px-2 {\n          padding-left: 10px !important;\n        }\n        thead > tr\n        {\n            border-style: solid;\n            border: 3px solid rgb(0, 0, 0);\n        }\n        table tr td.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr td.bottom{\n          border-bottom: 3px solid rgb(0, 0, 0) !important;\n        }\n        table tr th.classname{\n          border-right: 3px solid rgb(0, 0, 0) !important;\n        }\n        .divborder {\n          border-right: 3px solid rgb(0, 0, 0) !important;\n          line-height: 1.6;\n        }\n        .lastdivborder{\n          line-height: 1.6;\n        }\n    .border{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n      border-bottom: 3px solid rgb(0, 0, 0) !important;\n    }\n\n    .tdborder{\n      border-right: 3px solid rgb(0, 0, 0) !important;\n    }\n        .invoice {\n          margin-top: 250px;\n      }\n        .card{\n          border-style: solid;\n          border-width: 5px;\n          border: 3px solid rgb(0, 0, 0);\n      }\n        .printMe {\n          display: none !important;\n        }\n      }\n      body{\n            font-size: 15px;\n            line-height: 18px;\n      }\n </style>\n        </head>\n    <body onload="window.print();window.close()">\n    ${t}</body>\n      </html>`),e.document.close()}closePurBillTab(){"/purchase/purchase-billing"===this._router.url?this.getPurBillPlainText(this.PurBillNum):$("#PurBillPlainTextTab").modal("hide")}getPurBillPlainText(t){this._purchaseService.PrintPurBillDotMatrix(t).subscribe(t=>{this.purBillPlainTextDetails=t,$("#PurBillPlainTextTab").modal("show")})}printPurBillPlainText(){this._masterService.printPlainText(this.purBillPlainTextDetails)}};E.ctorParameters=()=>[{type:r.FormBuilder},{type:o.c},{type:m.a},{type:d.a}],a.a([Object(s.Input)(),a.c("design:type",Object)],E.prototype,"BillNo",void 0),E=a.a([Object(s.Component)({selector:"app-reprint-purchasebill",template:a.b(n("HGwx")).default,styles:[a.b(n("jrbh")).default]}),a.c("design:paramtypes",[r.FormBuilder,o.c,m.a,d.a])],E);var C=n("09Xa");const x=[{path:"",canActivate:[l.a],canActivateChild:[l.a],canDeactivate:[C.a],component:S,data:{title:"Purchase Estimation",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Purchase Estimation"}]}},{path:"reprintpurchaseestimation",canActivate:[l.a],canActivateChild:[l.a],component:D,data:{title:"Reprint Purchase Estimation",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Reprint Purchase Estimation"}]}},{path:"purchase-billing",canActivate:[l.a],canActivateChild:[l.a],component:f,data:{title:"Purchase Billing",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Purchase Billing"}]}},{path:"purchase-cancel",canActivate:[l.a],canActivateChild:[l.a],component:A,data:{title:"Cancel Purchase Bill",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Cancel Purchase Bill"}]}},{path:"reprint-purchasebill",canActivate:[l.a],canActivateChild:[l.a],component:E,data:{title:"Reprint Purchase Bill",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Reprint Purchase Bill"}]}}];let N=class{};N=a.a([Object(s.NgModule)({imports:[o.d.forChild(x)],exports:[o.d]})],N);let w=class{constructor(t,e,n,a){this.toastr=t,this._purchaseService=e,this._estimationService=n,this._router=a,this.ccode="",this.bcode="",this.ShowHide=!0,this.password=b.a.Pwd,this.fieldArray=[],this.PurchaseLinesDetails=[],this.SalesEstNo="",this.ItemList=[],this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.count=0,this.Rate=0,this.purchaseDetails=[],this.DiamondCarrat=0,this.diamondAmount=new s.EventEmitter,this.EnableDmdBtn=new s.EventEmitter,this.EstNo=0,this.DmCarats=0,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableSubmitButton=!0,this.EnableDiamondTab=!1,this.OldDiamondDtls={estno:null,item_sno:null,type:"p",Name:null,Qty:null,Carrat:null,OrgRate:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.CopyEditedRow=[],this.DiamondCount=0,this.Diamondtotal=0,this.Indicator="",this._purchaseService.castDiamondDetails.subscribe(t=>{for(var e in this.fieldArray=t,this.fieldArray)this.EnableEditDelbtn[e]=!0,this.EnableSaveCnlbtn[e]=!1,this.readonly[e]=!0}),this.getCB(),"/purchase"==this._router.url||"/estimation"==this._router.url?this.ShowHide=!0:this.ShowHide=!1}getCB(){this.ccode=u.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(u.enc.Utf8),this.bcode=u.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(u.enc.Utf8)}ngOnInit(){this.getDiamondDets(),this.getDiamondName()}getDiamondName(){this._purchaseService.getOldDmdName().subscribe(t=>{this.ItemList=t})}getDiamondDets(){this._purchaseService.getOldDiamond().subscribe(t=>{this.OldDiamondList=t})}addrow(){this.OldDiamondDtls={estno:this.EstNo,item_sno:null,type:"p",Name:null,Qty:null,Carrat:null,Rate:null,OrgRate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.fieldArray.push(this.OldDiamondDtls);for(let{}of this.fieldArray)this.count++;this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableDisableDiamondBtn()}GetAmount(t){if(0!=this.fieldArray[t].OrgRate)if(this.fieldArray[t].Rate>this.fieldArray[t].OrgRate)this.toastr.warning("Entered Diamond Carat Rate is greater than the Max Diamond Carat Rate.","Alert!");else{let e=this.fieldArray[t].Carrat,n=this.fieldArray[t].Rate;this.fieldArray[t].Amount=Number(e*n)}else{let e=this.fieldArray[t].Carrat,n=this.fieldArray[t].Rate;this.fieldArray[t].Amount=Number(e*n)}}GetItemName(t){this.ItemName=t}GetStnDmdRate(t){let e=this.fieldArray[t].Carrat;this._purchaseService.getStnDmdRate(this.ItemName,e).subscribe(n=>{this.stnDmdRate=n,this.fieldArray[t].Rate=this.stnDmdRate.OrgRate,this.fieldArray[t].OrgRate=this.stnDmdRate.OrgRate,this.fieldArray[t].Amount=Number(e*this.fieldArray[t].Rate)})}editFieldValue(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):(this.CopyEditedRow[t]=Object.assign({},this.fieldArray[t]),this.EnableEditDelbtn[t]=!1,this.EnableSaveCnlbtn[t]=!0,this.readonly[t]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDisableDiamondBtn())}saveDataFieldValue(t){null==this.fieldArray[t].Name||0==this.fieldArray[t].Name?this.toastr.warning("Please select the Item Name","Alert!"):null==this.fieldArray[t].Qty||0==this.fieldArray[t].Qty?this.toastr.warning("Please Enter Qty","Alert!"):null==this.fieldArray[t].Carrat||0==this.fieldArray[t].Carrat?this.toastr.warning("Please Enter Carrat","Alert!"):null==this.fieldArray[t].Rate||0==this.fieldArray[t].Rate?this.toastr.warning("Please Enter Rate","Alert!"):0!=this.fieldArray[t].OrgRate&&this.fieldArray[t].Rate>this.fieldArray[t].OrgRate?this.toastr.warning("Entered Diamond Carat Rate is greater than the Max Diamond Carat Rate.","Alert!"):(this.DiamondCarrat=this.PurchaseLinesDetails.Dcts,1==this.DiamondCarratTotal(this.fieldArray)?(this.DmCarats=this.fieldArray[t].Dcts,""==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstDiamondDetailsVM[t]=this.fieldArray[t]),this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendDiamondAmtToPurComp(),this.EnableDisableDiamondBtn()):("A"==this.Indicator?this.toastr.error("Entered Diamond Carat is greater than the Purchase Diamond Carat","Alert!"):"B"==this.Indicator&&"/estimation"==this._router.url?this.toastr.error("Entered Diamond Carat is lesser than the Purchase Diamond Carat","Alert!"):(this.DmCarats=this.fieldArray[t].Dcts,""==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstDiamondDetailsVM[t]=this.fieldArray[t]),this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendDiamondAmtToPurComp()),this.EnableDisableDiamondBtn()))}cancelDataFieldValue(t){this.EnableAddRow=!1,null!=this.CopyEditedRow[t]?(this.fieldArray[t]=this.CopyEditedRow[t],this.CopyEditedRow[t]=null,this.EnableSaveCnlbtn[t]=!1,this.EnableEditDelbtn[t]=!0,this.readonly[t]=!0,this.CopyEditedRow=[]):this.fieldArray.splice(t,1),this.EnableDisableSubmit()}EnableDisableSubmit(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0),this.EnableDisableDiamondBtn()}deleteFieldValue(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):(this.fieldArray.splice(t,1),this.EnableDisableSubmit(),this.SendDiamondAmtToPurComp())}Amount(t){let e=0;return t.forEach(t=>{e+=parseFloat(t.Amount)}),this.diamondValue=e,this.SendDiamondAmtToPurComp(),e}SendDiamondAmtToPurComp(){this.diamondAmount.emit(this.diamondValue)}EnableDisableDiamondBtn(){this.EnableDmdBtn.emit(this.EnableSubmitButton)}DiamondCarratTotal(t){for(var e of(this.Diamondtotal=0,t))this.Diamondtotal+=Number(this.fieldArray[this.DiamondCount].Carrat),this.DiamondCount++;return this.DiamondCount=0,this.Diamondtotal>this.DiamondCarrat?(this.Indicator="A",!1):!(this.Diamondtotal<this.DiamondCarrat)||(this.Indicator="B",!1)}};w.ctorParameters=()=>[{type:v.b},{type:d.a},{type:c.a},{type:o.c}],a.a([Object(s.Input)(),a.c("design:type",Object)],w.prototype,"PurchaseLinesDetails",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],w.prototype,"diamondAmount",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],w.prototype,"EnableDmdBtn",void 0),a.a([Object(s.Input)(),a.c("design:type",Number)],w.prototype,"EstNo",void 0),a.a([Object(s.Input)(),a.c("design:type",Number)],w.prototype,"DmCarats",void 0),a.a([Object(s.Input)(),a.c("design:type",Boolean)],w.prototype,"EnableDiamondTab",void 0),w=a.a([Object(s.Component)({selector:"app-diamond",template:a.b(n("lo/J")).default,styles:[a.b(n("esxm")).default]}),a.c("design:paramtypes",[v.b,d.a,c.a,o.c])],w);var O=n("GFhY"),T=n("OclH"),R=n("+Cnu");let I=class{constructor(t,e,n,a,i,r){this._PurchaseService=t,this.formBuilder=e,this._estimationService=n,this._salesService=a,this._CustomerService=i,this._router=r,this.EnableDisablectrls=!0,this.ccode="",this.bcode="",this.password=b.a.Pwd,this.PostOldGoldAttchJson=[],this.submitted=!1,this.SelectedOldGoldList=[],this.EnableSubmitButton=!0,this.SalesEstNo=null,this.OrderJson={SeriesNo:null,RefBillNo:null,OperatorCode:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.OldGoldAttachmentSummaryData={Quantity:null,Amount:0},this.valueChange=new s.EventEmitter,this.OldGoldAmount=0,this.pagenumber=1,this.top=10,this.skip=(this.pagenumber-1)*this.top,this.OGTotalAmount=0,this.OGAmountChange=new s.EventEmitter,this.enableBtnIfSalesEstNo=!0,this.ReprintData={EstNo:null,EstType:null},this.getCB()}getCB(){this.ccode=u.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(u.enc.Utf8),this.bcode=u.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(u.enc.Utf8)}ngOnInit(){this.OldGoldAttachmentSummaryData={Quantity:null,Amount:0},this._salesService.EstNo.subscribe(t=>{this.SalesEstNo=t}),this._estimationService.SubjectEstNo.subscribe(t=>{this.SalesEstNo=t,null!=this.SalesEstNo&&"0"!=this.SalesEstNo&&"/purchase"!=this._router.url&&this._PurchaseService.getOldGoldttachedList(this.SalesEstNo).subscribe(t=>{if(this.SelectedOldGoldList=[],this.PostOldGoldAttchJson=[],this.SelectedOldGoldList=t,null!=this.SelectedOldGoldList){if(this.SelectedOldGoldList.length>0){this._estimationService.SendOldGoldAttachmentSummaryData(this.OldGoldAttachmentSummaryData),console.log(this.OldGoldAttachmentSummaryData);for(var e=0;e<this.SelectedOldGoldList.length;e++)this.OrderJson.SeriesNo=this.SalesEstNo,this.OrderJson.RefBillNo=this.SelectedOldGoldList[e].EstNo,this.OrderJson.OperatorCode=localStorage.getItem("Login"),this.OrderJson.CompanyCode=this.ccode,this.OrderJson.BranchCode=this.bcode,this.PostOldGoldAttchJson.push(this.OrderJson),this.OrderJson={}}}else this.SelectedOldGoldList=[],this.PostOldGoldAttchJson=[]})}),this.AttachOldGoldForm=this.formBuilder.group({searchby:[null,r.Validators.required],searchText:[null,r.Validators.required]}),this._PurchaseService.getSearchParams().subscribe(t=>{this.SearchParamsList=t}),this.getSalesEstNofromSalesService(),this.LoadCustomerDetails(),"/sales-billing"==this._router.url&&(this.EnableDisablectrls=!1),"/estimation"==this._router.url&&(this.EnableDisablectrls=!0)}LoadCustomerDetails(){this._CustomerService.cast.subscribe(t=>{this.CustomerName=t})}openModal(){$("#myOldGoldModal").modal("show"),this.getOGList(this.top,this.skip)}onPageChange(t){this.pagenumber=t;const e=(this.pagenumber-1)*this.top;this.getOGList(this.top,e)}getOGList(t,e){this._PurchaseService.getOldGoldList(t,e).subscribe(t=>{this.AttachOldGoldList=t})}valueChanged(t){this.OldGoldAmount=t,this.valueChange.emit(this.OldGoldAmount)}OGAmountChanged(t){this.OGTotalAmount=t,this.OGAmountChange.emit(this.OGTotalAmount)}getSalesEstNofromSalesService(){this._salesService.EstNo.subscribe(t=>{this.SalesEstNo=t,null!=this.SalesEstNo&&""!=this.SalesEstNo&&(this.enableBtnIfSalesEstNo=!1)})}Submit(){this._PurchaseService.PostAttachementOldGold(this.PostOldGoldAttchJson).subscribe(t=>{this.Saved=t,this._estimationService.SendOldGoldAttachmentSummaryData(this.OldGoldAttachmentSummaryData),y()("Saved!","Old Gold est adjusted against Estimation number "+this.SalesEstNo,"success"),this.ReprintData={EstNo:this.SalesEstNo,EstType:"OG"},this._estimationService.SendReprintData(this.ReprintData)})}onSubmit(){this.submitted=!0,this.AttachOldGoldForm.invalid}DeleteRow(t){confirm("Do you want to delete")&&(1==this.SelectedOldGoldList.length&&this._PurchaseService.deleteOldGoldAttachment(this.SalesEstNo).subscribe(t=>{this.Saved=t}),this.valueChanged(this.SelectedOldGoldList[t].Amount),this.SelectedOldGoldList.splice(t,1),this.PostOldGoldAttchJson.splice(t,1),this.EnableDisableSubmitBtn())}selectRecord(t){null!=this.SelectedOldGoldList.find(e=>e.EstNo==t.EstNo)?y()("error","Old Gold Estimation already attached","error"):(this.SelectedOldGoldList.push(t),$("#myOldGoldModal").modal("hide"),this.AttachOldGoldForm.reset(),this.AttachOldGoldList=[],this.OrderJson.SeriesNo=this.SalesEstNo,this.OrderJson.RefBillNo=t.EstNo,this.OrderJson.OperatorCode=localStorage.getItem("Login"),this.OrderJson.CompanyCode=this.ccode,this.OrderJson.BranchCode=this.bcode,this.PostOldGoldAttchJson.push(this.OrderJson),this.OrderJson={},this.EnableDisableSubmitBtn())}EnableDisableSubmitBtn(){this.SelectedOldGoldList.length<=0?this.EnableSubmitButton=!0:this.EnableSubmitButton=!1}ngOnDestroy(){this._CustomerService.SendCustDataToEstComp(null),this._estimationService.SendSRAttachmentSummaryData(null)}Cancel(){$("#myOldGoldModal").modal("hide"),this.AttachOldGoldForm.reset(),this.AttachOldGoldList=[]}getSearchParams(t){null!=t.value.searchby&&null!=t.value.searchText&&this._PurchaseService.getAttachOldGoldList(t.value.searchby,t.value.searchText).subscribe(t=>{this.AttachOldGoldList=t})}Amount(t=[]){let e=0;return t.forEach(t=>{e+=Number(t.Amount)}),this.OldGoldAttachmentSummaryData.Amount=e,this.OGAmountChanged(e),e}Quantity(t=[]){let e=0;return t.forEach(t=>{e+=t.Qty}),this.OldGoldAttachmentSummaryData.Quantity=e,e}};I.ctorParameters=()=>[{type:d.a},{type:r.FormBuilder},{type:c.a},{type:P.a},{type:h.a},{type:o.c}],a.a([Object(s.Output)(),a.c("design:type",Object)],I.prototype,"valueChange",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],I.prototype,"OGAmountChange",void 0),I=a.a([Object(s.Component)({selector:"app-attacholdgold",template:a.b(n("jCgZ")).default,styles:[a.b(n("vMFa")).default]}),a.c("design:paramtypes",[d.a,r.FormBuilder,c.a,P.a,h.a,o.c])],I);let G=class{constructor(t,e,n,a){this.toastr=t,this._purchaseService=e,this._estimationService=n,this._router=a,this.ccode="",this.bcode="",this.ShowHide=!0,this.password=b.a.Pwd,this.EnableStnBtn=new s.EventEmitter,this.fieldArray=[],this.PurchaseLinesDetails=[],this.SalesEstNo="",this.EnableEditDelbtn={},this.EnableSaveCnlbtn={},this.readonly={},this.count=0,this.Rate=0,this.purchaseDetails=[],this.StoneCarrat=0,this.stoneAmount=new s.EventEmitter,this.EstNo=0,this.StoneCarats=0,this.EnableDropdown=!1,this.EnableAddRow=!1,this.EnableSubmitButton=!0,this.EnableStoneTab=!1,this.StoneDtls={estno:this.EstNo,item_sno:null,type:"p",Name:"Old Diamond",Qty:null,StWt:null,Carrat:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.CopyEditedRow=[],this.StoneCount=0,this.Stonetotal=0,this.Indicator="",this._purchaseService.castStoneDetails.subscribe(t=>{for(var e in this.fieldArray=t,this.fieldArray)this.EnableEditDelbtn[e]=!0,this.EnableSaveCnlbtn[e]=!1,this.readonly[e]=!0,this.fieldArray[e].StWt=Number(this.fieldArray[e].Carrat/5)}),this.getCB(),"/purchase"==this._router.url||"/estimation"==this._router.url?this.ShowHide=!0:this.ShowHide=!1}getCB(){this.ccode=u.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(u.enc.Utf8),this.bcode=u.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(u.enc.Utf8)}EnableDisableStoneBtn(){this.EnableStnBtn.emit(this.EnableSubmitButton)}myfunction(t){var e=t.which?t.which:t.keyCode;e>31&&(e<48||e>57)&&t.preventDefault()}ngOnInit(){this.getStoneDets()}getStoneDets(){this._purchaseService.getOldStone().subscribe(t=>{this.OldStoneList=t})}addrow(){this.StoneDtls={estno:this.EstNo,item_sno:null,type:"p",Name:"Old Stone",Qty:null,StWt:null,Carrat:null,Rate:null,Amount:null,CompanyCode:this.ccode,BranchCode:this.bcode},this.fieldArray.push(this.StoneDtls);for(let{}of this.fieldArray)this.count++;this.EnableSaveCnlbtn[this.count-1]=!0,this.EnableEditDelbtn[this.count-1]=!1,this.readonly[this.count-1]=!1,this.count=0,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDropdown=!0,this.EnableDisableStoneBtn()}GetAmount(t){let e=this.fieldArray[t].Carrat,n=this.fieldArray[t].Rate;this.fieldArray[t].Amount=Number(e*n)}GetStoneKarat(t){this.fieldArray[t].Carrat=Number(5*this.fieldArray[t].StWt),this.GetAmount(t)}editFieldValue(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):(this.CopyEditedRow[t]=Object.assign({},this.fieldArray[t]),this.EnableEditDelbtn[t]=!1,this.EnableSaveCnlbtn[t]=!0,this.readonly[t]=!1,this.EnableAddRow=!0,this.EnableSubmitButton=!0,this.EnableDisableStoneBtn())}saveDataFieldValue(t){null==this.fieldArray[t].Qty||0==this.fieldArray[t].Qty?this.toastr.warning("Please Enter Qty","Alert!"):null==this.fieldArray[t].Carrat||0==this.fieldArray[t].Carrat?this.toastr.warning("Please Enter Carrat","Alert!"):null==this.fieldArray[t].Rate||0==this.fieldArray[t].Rate?this.toastr.warning("Please Enter Rate","Alert!"):(this.StoneCarrat=this.PurchaseLinesDetails.StneWt,1==this.StoneCarratTotal(this.fieldArray)?(this.StoneCarats=this.fieldArray[t].StneWt,""==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstStoneDetailsVM[t]=this.fieldArray[t]),this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendStoneAmtToPurComp(),this.EnableDisableStoneBtn()):("A"==this.Indicator?this.toastr.error("Entered Stone wt is greater than the Purchase stone wt","Alert!"):"B"==this.Indicator&&"/estimation"==this._router.url?this.toastr.error("Entered Stone wt is lesser than the Purchase stone wt","Alert!"):(this.StoneCarats=this.fieldArray[t].StneWt,""==this.SalesEstNo&&(this.PurchaseLinesDetails.lstPurchaseEstStoneDetailsVM[t]=this.fieldArray[t]),this.EnableEditDelbtn[t]=!0,this.EnableSaveCnlbtn[t]=!1,this.readonly[t]=!0,this.EnableAddRow=!1,this.EnableSubmitButton=!1,this.SendStoneAmtToPurComp()),this.EnableDisableStoneBtn()))}cancelDataFieldValue(t){this.EnableAddRow=!1,null!=this.CopyEditedRow[t]?(this.fieldArray[t]=this.CopyEditedRow[t],this.CopyEditedRow[t]=null,this.EnableSaveCnlbtn[t]=!1,this.EnableEditDelbtn[t]=!0,this.readonly[t]=!0,this.CopyEditedRow=[]):this.fieldArray.splice(t,1),this.EnableDisableSubmit()}EnableDisableSubmit(){this.fieldArray.length<=0?(this.EnableSubmitButton=!0,this.EnableDropdown=!1):(this.EnableSubmitButton=!1,this.EnableDropdown=!0),this.EnableDisableStoneBtn()}deleteFieldValue(t){1==this.EnableAddRow?this.toastr.warning("Please save the enabled item","Alert!"):(this.fieldArray.splice(t,1),this.EnableDisableSubmit(),this.SendStoneAmtToPurComp())}Amount(t){let e=0;return t.forEach(t=>{e+=parseFloat(t.Amount)}),this.stoneValue=e,this.SendStoneAmtToPurComp(),e}SendStoneAmtToPurComp(){this.stoneAmount.emit(this.stoneValue)}StoneCarratTotal(t){for(var e of(this.Stonetotal=0,t))this.Stonetotal+=Number(this.fieldArray[this.StoneCount].StWt),this.StoneCount++;return this.StoneCount=0,this.Stonetotal>this.StoneCarrat?(this.Indicator="A",!1):!(this.Stonetotal<this.StoneCarrat)||(this.Indicator="B",!1)}};G.ctorParameters=()=>[{type:v.b},{type:d.a},{type:c.a},{type:o.c}],a.a([Object(s.Output)(),a.c("design:type",Object)],G.prototype,"EnableStnBtn",void 0),a.a([Object(s.Input)(),a.c("design:type",Object)],G.prototype,"PurchaseLinesDetails",void 0),a.a([Object(s.Output)(),a.c("design:type",Object)],G.prototype,"stoneAmount",void 0),a.a([Object(s.Input)(),a.c("design:type",Number)],G.prototype,"EstNo",void 0),a.a([Object(s.Input)(),a.c("design:type",Number)],G.prototype,"StoneCarats",void 0),a.a([Object(s.Input)(),a.c("design:type",Boolean)],G.prototype,"EnableStoneTab",void 0),G=a.a([Object(s.Component)({selector:"app-stone",template:a.b(n("tt6M")).default,styles:[a.b(n("VNmN")).default]}),a.c("design:paramtypes",[v.b,d.a,c.a,o.c])],G);var B=n("oOf3"),L=n("NSaA");n.d(e,"PurchaseModule",(function(){return _}));let _=class{};_=a.a([Object(s.NgModule)({declarations:[S,w,I,G,D,f,A,E],imports:[i.CommonModule,N,r.ReactiveFormsModule,r.FormsModule,T.CustomerModule,R.b,B.a,L.a,O.a],exports:[S,I,D],schemas:[s.CUSTOM_ELEMENTS_SCHEMA]})],_)},VNmN:function(t,e,n){"use strict";n.r(e),e.default=""},VZds:function(t,e,n){"use strict";n.r(e),e.default="\r\n.profile-card {\r\n    position: relative;\r\n    box-shadow: 0px 3px 6px rgba(0,0,0,.05);\r\n\r\n}\r\n\r\n.profile-card .btn-edit {\r\n    position: absolute;\r\n    top: 1rem;\r\n    right: 1.2rem;\r\n    font-size: 1.4rem;\r\n}\r\n\r\n.profile-card .profile-picture {\r\n    width: 7.4rem;\r\n}\r\n\r\n.profile-card .quote-text {\r\n    font-size: .85rem;\r\n    line-height: 1.55rem;\r\n}\r\n\r\n.profile-card .social-section {\r\n    margin-top: 1rem;\r\n}\r\n\r\n.profile-card .social-section a {\r\n    font-size: 1rem;\r\n    line-height: 2.15rem;\r\n    width: 2.2rem;\r\n    height: 2.2rem;\r\n    border: 1px solid #d6d6d6;\r\n    color: #d6d6d6;\r\n    border-radius: 50%;\r\n    margin: 0 .5rem;\r\n}\r\n\r\n.profile-card .social-section a:hover {\r\n    background-color: #007bff;\r\n    border-color: #007bff;\r\n    color: #fff;\r\n}\r\n\r\n.card-header{\r\n    border-radius: 15px !important;\r\n  }\r\n\r\n.card{\r\n    border-radius: 15px !important;\r\n  \r\n  }\r\n\r\n.card-body{ \r\n    padding: 10px 30px 0px 30px !important; \r\n    border-bottom: 2px solid black;\r\n    border-radius: 15px;\r\n  }"},W3e5:function(t,e,n){"use strict";n.r(e),e.default='<ng-container *ngIf="ifPurchase">\r\n    <div style="color: brown; text-align: right; font-style: italic;">\r\n        <app-lastdocno></app-lastdocno>\r\n    </div>\r\n</ng-container>\r\n<div class="row" *ngIf="ifPurchase">\r\n    <div class="col-md-12">\r\n        <label *ngFor="let radiobutton of radioItems" class="form-check-inline">\r\n            <input type="radio" name="option" (click)="OnRadioBtnChnge(radiobutton)" class="form-check-input"\r\n                [value]="radiobutton" [checked]="radiobutton === model.option">\r\n            <h3 style="margin-top: 5px;">{{radiobutton}}</h3>\r\n        </label>\r\n    </div>\r\n</div>\r\n\r\n<div id="accordian" class="accordion" *ngIf="ifPurchase">\r\n    <div class="card" *ngIf="ToggleEstimation">\r\n        <div id="header" class="card-body show">\r\n\r\n            <div class="row">\r\n                <div class="col-md-3 ">\r\n                    <div class="form-group">\r\n                        <label for="exampleAccount">Est no</label>\r\n                        <input type="number" class="form-control"\r\n                            oninput="this.value = this.value.replace(/[^0-9.]/g, \'\').replace(/(\\..*)\\./g, \'$1\');"\r\n                            onKeyPress="if(this.value.length==7) return false;" placeholder="Est No"\r\n                            (change)="EstimationDetails(estNo.value)" #estNo>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-3 ">\r\n                    <div class="form-group">\r\n                        <label for="barcode"></label>\r\n                        <div class="input-group">\r\n                            <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary"\r\n                                style="margin-top: 5px;" (click)="EstimationDetails(estNo.value)"><i\r\n                                    class="fal fa-search"></i> Search</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \x3c!-- <div class="col-md-3">\r\n                    <div class="card-body">\r\n                        <div class="text-right"><i class="fal fa-calendar-alt"></i>&nbsp; <span class="text-muted">Order\r\n                                Date</span>\r\n                            <h1 class="font-light"></h1>\r\n                        </div>\r\n                    </div>\r\n                </div> --\x3e\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <ng-container *ngIf="ShowHidePurEst">\r\n        <br *ngIf="ToggleEstimation">\r\n        <div class="card mb-0">\r\n            <div class="card-header collapsed" style="background-color: #0878A4;color:white">\r\n                <a class="card-title align-middle Pointer text-white" (click)="ToggleCustomerData()"\r\n                    data-toggle="collapse" href="#Customer">\r\n                    <i class="fas fa-2x fa-users mr-2 align-middle"></i>\r\n                    <span class="align-middle Pointer"><ins>Customer Details</ins></span>\r\n                </a>\r\n                \x3c!-- <ng-container *ngIf=" ToggleCustomer"> --\x3e\r\n                <ng-container *ngIf="CollapseCustomerTab">\r\n                    <ng-container *ngIf="CustomerDets">\r\n                        <div class="col-md-4 pull-right">\r\n                            <h4 class="text-white"><span class="align-middle"> ID: {{customerDtls.ID}}</span></h4>\r\n                        </div>\r\n                        <div class="col-md-4 pull-right">\r\n                            <h4 class="text-white"><span class="align-middle"> Customer:\r\n                                    {{customerDtls.CustName}}</span>\r\n                            </h4>\r\n                        </div>\r\n                    </ng-container>\r\n                </ng-container>\r\n                \x3c!-- </ng-container> --\x3e\r\n                \x3c!-- </ng-container> --\x3e\r\n            </div>\r\n            <div id="Customer" class="card-body collapse" [collapse]="CollapseCustomerDetailsTab">\r\n                <app-customer>\r\n                </app-customer>\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</div>\r\n<br>\r\n\r\n<ng-container *ngIf="ShowHidePurEst">\r\n    <div class="card">\r\n        <div class="card-body">\r\n            <form [formGroup]="PurchaseForm" class="form-horizontal">\r\n                <div class="row">\r\n                    <div class="col-md-2 ">\r\n                        <div class="form-group">\r\n                            <label for="SalCode">Sales Person</label>\r\n                            <div class="form-group">\r\n                                <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="SalCode"\r\n                                    [(ngModel)]="PurSalCode">\r\n                                    <option [disabled]="EnableDisableSalesPerson" [ngValue]="null">Select</option>\r\n                                    <option [disabled]="EnableDisableSalesPerson" *ngFor="let _salesman of SalesManList"\r\n                                        [value]="_salesman.sal_code">\r\n                                        {{_salesman.CodeName}}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 ">\r\n                        <div class="form-group">\r\n                            <label for="GS">GS Type</label>\r\n                            <div class="form-group">\r\n                                <select class="form-control mr-auto mt-2 mt-lg-0" #GS formControlName="GS"\r\n                                    (change)="getItemList(PurchaseForm)">\r\n                                    <option [ngValue]="null" [disabled]="EnableDropdown">Select</option>\r\n                                    <option *ngFor="let _GSList of GSList" [value]="_GSList.gs_code"\r\n                                        [disabled]="EnableDropdown">\r\n                                        {{_GSList.item_level1_name}}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 ">\r\n                        <div class="form-group">\r\n                            <label for="RateType">Rate Type</label>\r\n                            <div class="input-group">\r\n                                <select class="form-control mr-auto mt-2 mt-lg-0" #RateType formControlName="RateType"\r\n                                    (change)="toggleRateType(PurchaseForm)">\r\n                                    <option *ngFor="let _RateTypeData of RateTypeData" [ngValue]="_RateTypeData.value"\r\n                                        [disabled]="EnableRateType">\r\n                                        {{_RateTypeData.name}}\r\n                                    </option>\r\n                                    \x3c!-- <option *ngFor="let _RateTypeData of RateTypeData" [ngValue]="_RateTypeData.value">\r\n                                    {{_RateTypeData.name}}\r\n                                </option> --\x3e\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 " *ngIf="EnableDisablectrls">\r\n                        <div class="form-group float-left" style="margin-top: 2px;">\r\n                            <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\r\n                                style="margin-top: 1.2rem !important;" [disabled]="EnableAddRow"\r\n                                (click)="add(PurchaseForm)">\r\n                                <i class="far fa-plus-circle"></i> Add</button>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 float-right">\r\n                        <div class="form-group">\r\n                            <div class="text-right"><i class="fal fa-rupee-sign"></i>&nbsp; <span\r\n                                    class="text-muted">Date</span>\r\n                                <h1 class="font-light">{{applicationDate | date:\'dd/MM/yyyy\'}}</h1>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-2 float-right">\r\n                        <div class="form-group">\r\n                            <div class="text-right"><i class="fal fa-rupee-sign"></i>&nbsp; <span\r\n                                    class="text-muted">Rate/Gram</span>\r\n                                <h1 class="font-light">{{Rate | number : \'1.2-2\'}}</h1>\r\n                                \x3c!-- <div class="form-group">\r\n                    <input style="width: 80px;" class="form-control" id="RatePerGram" formControlName="RatePerGram" [(ngModel)]="RatePerGram"\r\n                        placeholder="RatePerGram"type="number" [ngModelOptions]="{standalone: true}"  (change)=" RateperGram()">\r\n                </div> --\x3e\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n\r\n            <div class="table-responsive">\r\n                <table class="table table-bordered" style="width: 2000px;">\r\n                    <thead class="topbar">\r\n                        <tr>\r\n                            <th></th>\r\n                            <th>Item</th>\r\n                            <th>Gr. Wt</th>\r\n                            <th>St. Wt</th>\r\n                            <th>DM. Ct</th>\r\n                            <th>Nt.Wt</th>\r\n                            <th>Purity %</th>\r\n                            <th>Melting %</th>\r\n                            <th>M. Loss</th>\r\n                            <th>Purchase Rate</th>\r\n                            <th>Di/St.Amt</th>\r\n                            <th>Amount</th>\r\n                            <th *ngIf="EnableDisablectrls">Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody *ngFor="let field of fieldArray; let i = index">\r\n                        <tr>\r\n                            <td style="width:150px;">\r\n                                <h3><a href="javascript:void(0)" (click)="sendDataToDiamondComp(field,i)"\r\n                                        data-toggle="collapse" [attr.data-target]="\'#collapse\'+ i"\r\n                                        id=\'panels\'>Diamond</a>\r\n                                    / <a href="javascript:void(0)" (click)="sendDataToStoneComp(field,i)"\r\n                                        data-toggle="collapse" [attr.data-target]="\'#collapseStone\'+ i"\r\n                                        id=\'panels\'>Stone</a>\r\n                                </h3>\r\n                            </td>\r\n                            <td style="width:300px;">\r\n                                <select class="form-control mr-auto mt-2 mt-lg-0" #Item name="{{field.ItemName}}"\r\n                                    (change)="AJAXRateperGram(Item.value,i);" [(ngModel)]="field.ItemName">\r\n                                    <option [ngValue]="null" [disabled]="readonly[i]">Select</option>\r\n                                    \x3c!-- <option *ngFor="let _ItemList of ItemList" [value]="_ItemList.Karat"\r\n                                    [disabled]="readonly[i]">\r\n                                    {{_ItemList.Item}}\r\n                                </option> --\x3e\r\n                                    <option *ngFor="let _ItemList of ItemList" [value]="_ItemList.Item_code"\r\n                                        [disabled]="readonly[i]">\r\n                                        {{_ItemList.Item}}\r\n                                    </option>\r\n                                </select>\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <input [(ngModel)]="field.GrossWt" [readonly]="readonly[i]" class="form-control"\r\n                                    type="text" (change)="GetNetWT(i);" appNumbersOnly min="0" name="{{field.GrossWt}}"\r\n                                    placeholder="0.000" />\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <ng-container\r\n                                    *ngIf="ItemType != \'OGCN24K\' && ItemType != \'OGCN\' && ItemType != \'OG24K\'">\r\n                                    <input [(ngModel)]="field.StneWt" [readonly]="readonly[i]" class="form-control"\r\n                                        type="text" min="0" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.StneWt}}" (change)="GetNetWT(i);" placeholder="0.000"\r\n                                        appNumbersOnly />\r\n                                </ng-container>\r\n                                <ng-container\r\n                                    *ngIf="ItemType == \'OGCN24K\' || ItemType == \'OGCN\' || ItemType == \'OG24K\'">\r\n                                    <h3 [(ngModel)]="field.StneWt" ngDefaultControl\r\n                                        [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                        {{field.StneWt || "0.00" | number}}</h3>\r\n                                </ng-container>\r\n                            </td>\r\n                            <ng-container\r\n                                *ngIf="ItemType == \'OSSL\' || ItemType == \'OG24K\' || ItemType == \'OGCN\' || ItemType == \'OGCN24K\'">\r\n                                <td style="width:150px;">\r\n                                    <input [(ngModel)]="field.Dcts" class="form-control" type="text" min="0"\r\n                                        [ngModelOptions]="{standalone: true}" name="{{field.Dcts}}" placeholder="0.000"\r\n                                        readonly />\r\n                                </td>\r\n                            </ng-container>\r\n                            <ng-container\r\n                                *ngIf="ItemType != \'OSSL\' && ItemType != \'OG24K\' && ItemType != \'OGCN\' && ItemType != \'OGCN24K\'">\r\n                                <td style="width:150px;">\r\n                                    <input [(ngModel)]="field.Dcts" class="form-control" type="text" min="0"\r\n                                        [readonly]="readonly[i]" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.Dcts}}" placeholder="0.000" appNumbersOnly />\r\n                                </td>\r\n                            </ng-container>\r\n                            <td style="width:150px;">\r\n                                <h3 [(ngModel)]="field.NetWt" ngDefaultControl [ngModelOptions]="{standalone: true}"\r\n                                    class="align-middle">{{field.NetWt || "0.00" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <ng-Container *ngIf="EnableDisablePurPer">\r\n                                    <h3 [(ngModel)]="field.PurityPercent" ngDefaultControl\r\n                                        [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                        {{field.PurityPercent || "0.00" | number}}</h3>\r\n                                </ng-Container>\r\n                                <ng-Container *ngIf="!EnableDisablePurPer">\r\n                                    <input [(ngModel)]="field.PurityPercent" [readonly]="readonly[i]"\r\n                                        class="form-control" type="text" min="0" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.PurityPercent}}" (change)="GetMLLoss_MLPercentage(i);"\r\n                                        placeholder="0" appNumbersOnly />\r\n                                </ng-Container>\r\n                            </td>\r\n                            <td style="width:125px;">\r\n                                \x3c!-- <input [(ngModel)]="field.MeltingPercent" class="form-control" readonlytype="number" readonly\r\n                        [ngModelOptions]="{standalone: true}" name="{{field.MeltingPercent}}" placeholder="0.00" /> --\x3e\r\n\r\n                                <h3 [(ngModel)]="field.MeltingPercent" ngDefaultControl\r\n                                    [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                    {{field.MeltingPercent || "0.00" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:125px;">\r\n                                \x3c!-- <input [(ngModel)]="field.MeltingLoss" class="form-control" type="number" readonly readonly\r\n                        [ngModelOptions]="{standalone: true}" name="{{field.MeltingLoss}}" placeholder="0.00" /> --\x3e\r\n\r\n                                <h3 [(ngModel)]="field.MeltingLoss" ngDefaultControl\r\n                                    [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                    {{field.MeltingLoss || "0.000" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <ng-container\r\n                                    *ngIf="ItemType != \'OGPP\' && ItemType != \'OSSL\' && ItemType != \'OG22\' && EnablePurchaseRate">\r\n                                    <input [(ngModel)]="field.PurchaseRate" class="form-control" type="text"\r\n                                        [readonly]="readonly[i]" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.PurchaseRate}}" appNumbersOnly placeholder="0.00"\r\n                                        (change)="ItemAmountCalc(i);" />\r\n                                </ng-container>\r\n                                <ng-container *ngIf="ItemType == \'OGPP\' || ItemType == \'OSSL\'">\r\n                                    <input [(ngModel)]="field.PurchaseRate" class="form-control" type="text"\r\n                                        [readonly]="readonly[i]" [ngModelOptions]="{standalone: true}"\r\n                                        name="{{field.PurchaseRate}}" appNumbersOnly placeholder="0.00"\r\n                                        (change)="ItemAmountCalc(i);" />\r\n\r\n                                </ng-container>\r\n                                <ng-container\r\n                                    *ngIf="ItemType != \'OGPP\' && ItemType != \'OSSL\' && ItemType != \'OG22\' && !EnablePurchaseRate">\r\n                                    <h3 [(ngModel)]="field.PurchaseRate" ngDefaultControl\r\n                                        [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                        {{field.PurchaseRate || "0.00" | number}}</h3>\r\n                                </ng-container>\r\n                                <ng-container *ngIf="ItemType == \'OG22\'">\r\n                                    <h3 [(ngModel)]="field.PurchaseRate" ngDefaultControl\r\n                                        [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                        {{field.PurchaseRate || "0.00" | number}}</h3>\r\n                                </ng-container>\r\n                            </td>\r\n                            <td style="width:125px;">\r\n                                \x3c!-- <input [(ngModel)]="field.DiamondAmount" class="form-control" type="number" readonly\r\n                        [ngModelOptions]="{standalone: true}" name="{{field.DiamondAmount}}" placeholder="0.00" /> --\x3e\r\n                                <h3 [(ngModel)]="field.DiamondAmount" ngDefaultControl\r\n                                    [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                    {{field.DiamondAmount || "0.00" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:125px;">\r\n                                \x3c!-- <input [(ngModel)]="field.ItemAmount" class="form-control" type="number" readonly\r\n                        [ngModelOptions]="{standalone: true}" name="{{field.ItemAmount}}" placeholder="0.00" /> --\x3e\r\n                                <h3 [(ngModel)]="field.ItemAmount" ngDefaultControl\r\n                                    [ngModelOptions]="{standalone: true}" class="align-middle">\r\n                                    {{field.ItemAmount || "0.00" | number}}</h3>\r\n                            </td>\r\n                            <td style="width:150px;">\r\n                                <ng-container *ngIf="EnableDisablectrls">\r\n                                    <ng-container *ngIf="EnableEditDelbtn[i]">\r\n                                        <button class="btn btn-default btn-rounded" type="button"\r\n                                            (click)="editFieldValue(i)"><i class="fal fa-pencil-alt"></i> Edit</button>\r\n                                        <button class="btn btn-danger btn-rounded" type="button"\r\n                                            (click)="deleteFieldValue(i)"><i class="fal fa-trash-alt"></i>\r\n                                            Delete</button>\r\n                                    </ng-container>\r\n                                    <ng-container *ngIf="EnableSaveCnlbtn[i]">\r\n                                        <button class="btn btn-success btn-rounded" type="button"\r\n                                            (click)="saveDataFieldValue(i)"><i class="fal fa-save"></i> Save</button>\r\n                                        <button class="btn btn-warning btn-rounded" type="button"\r\n                                            (click)="cancelDataFieldValue(i)"><i class="far fa-window-close"></i>\r\n                                            Cancel</button>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan="11" class="hiddenRow" *ngIf="i === Index">\r\n                                <div class="collapse wrapper" id="collapse{{i}}" data-parent="#panels">\r\n                                    <app-diamond (diamondAmount)="receiveStoneDiamondAmt()"\r\n                                        (EnableDmdBtn)="EnableDisableDmdBtn($event)"\r\n                                        [PurchaseLinesDetails]="LinesDetails" [EnableDiamondTab]="EnableDiamondTab"\r\n                                        [EstNo]="SalesEstNo" [DmCarats]="DmCarats"></app-diamond>\r\n                                </div>\r\n                                <div class="collapse wrapper" id="collapseStone{{i}}" data-parent="#panels">\r\n                                    <app-stone (stoneAmount)="receiveStoneDiamondAmt()"\r\n                                        (EnableStnBtn)="EnableDisableStnBtn($event)"\r\n                                        [PurchaseLinesDetails]="LinesDetails" [EnableStoneTab]="EnableStoneTab"\r\n                                        [EstNo]="SalesEstNo" [StoneCarats]="StoneCarats"></app-stone>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <br>\r\n            \x3c!-- Row --\x3e\r\n            <div class="row">\r\n                \x3c!-- Column --\x3e\r\n                <div class="col-lg-4 col-md-6">\r\n                    <div class="card">\r\n                        <div class="row">\r\n                            <div class="col-12">\r\n                                <div class="social-widget">\r\n                                    <div class="soc-content">\r\n                                        <div class="col-6 b-r">\r\n                                            <h3 class="font-medium">{{GrossWtTotal(fieldArray) || "0.00" | number}}</h3>\r\n                                            <h5 class="text-muted">Total Gr. Wt.</h5>\r\n                                        </div>\r\n                                        <div class="col-6">\r\n                                            <h3 class="font-medium">{{StneWt(fieldArray) || "0.000" | number}}</h3>\r\n                                            <h5 class="text-muted">Total St. Wt.</h5>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \x3c!-- Column --\x3e\r\n                \x3c!-- Column --\x3e\r\n                <div class="col-lg-4 col-md-6">\r\n                    <div class="card">\r\n                        <div class="row">\r\n                            <div class="col-12">\r\n                                <div class="social-widget">\r\n                                    <div class="soc-content">\r\n                                        <div class="col-6 b-r">\r\n                                            <h3 class="font-medium">{{NetWt(fieldArray) || "0.00" | number}}</h3>\r\n                                            <h5 class="text-muted">Total Net Wt.</h5>\r\n                                        </div>\r\n                                        <div class="col-6">\r\n                                            <h3 class="font-medium">{{Dcts(fieldArray) || "0.00" | number}}</h3>\r\n                                            <h5 class="text-muted">Total Carats</h5>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \x3c!-- Column --\x3e\r\n                \x3c!-- Column --\x3e\r\n                <div class="col-lg-4 col-md-6">\r\n                    <div class="card">\r\n                        <div class="row">\r\n                            <div class="col-12">\r\n                                <div class="social-widget">\r\n                                    <div class="soc-content">\r\n                                        <div class="col-4 b-r">\r\n                                            <h3 class="font-medium">{{Amount(fieldArray) | number: \'1.2-2\'}}</h3>\r\n                                            <h5 class="text-muted">Item Total</h5>\r\n                                        </div>\r\n                                        <div class="col-4 b-r">\r\n                                            <h3 class="font-medium">{{rndoff | number: \'1.2-2\'}}</h3>\r\n                                            <h5 class="text-muted">Round Off</h5>\r\n                                        </div>\r\n                                        <div class="col-6 b-r">\r\n                                            <h3 class="font-medium">{{Amount(fieldArray) | currencyFormat}}</h3>\r\n                                            <h5 class="text-muted">Est. Total</h5>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf="EnableDisablectrls">\r\n                <div class="row pt-1">\r\n                    <div class="col-md-4">\r\n                        <button\r\n                            class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary "\r\n                            (click)="SavePurchaseEst()">\r\n                            <i class="far fa-save"></i> Submit</button>\r\n                        <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" type="button"\r\n                            (click)="cancelPurchaseEst()"><i class="far fa-window-close"></i>&nbsp;Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n            <ng-container *ngIf="EnableReprint">\r\n                <app-reprint-purchaseestimation></app-reprint-purchaseestimation>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</ng-container>\r\n\r\n\r\n<span *ngIf="ifPurchase" style="color: red;">Note : All weights are in grams and Amount in INR</span>\r\n\r\n\r\n\r\n\x3c!--         \r\n        <div class="row">\r\n    <div class="col-md-3">\r\n        <p>{{SalesEstNo}}</p>\r\n    </div>\r\n   \r\n    <div class="col-md-6">\r\n        <pre>{{fieldArray | json}}</pre>\r\n    </div>\r\n</div> --\x3e\r\n\r\n\x3c!-- Row --\x3e\r\n\r\n\x3c!-- <div class="col-md-3">\r\n            <pre>{{PurchaseLinesPost | json}}</pre>\r\n        </div> --\x3e\r\n\r\n\r\n\x3c!-- Added for Plain Text printing related to Purchase Estimation--\x3e\r\n\r\n\x3c!-- <div class="modal fade" id="PurchaseEstimationPlainTextTab" tabindex="-1" role="dialog" aria-labelledby="PurchaseEstimationPlainTextTabLabel"\r\naria-hidden="true">\r\n<div class="modal-dialog modal-lg" role="document" style="max-width: 900px">\r\n    <div class="modal-content">\r\n        <div class="modal-header">\r\n            <button type="button"\r\n                class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\r\n                id="PurchaseEstimationPlainTextTabLabel" (click)=printPurchaseEstimationPlainText()><i class="fal fa-print"></i> Print</button>\r\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                <span aria-hidden="true">&times;</span>\r\n            </button>\r\n        </div>\r\n        <div class="container invoice-box htmlPrint" id="print-closed-section" style="max-width: 900px;border-width: 2em">\r\n               <pre>{{purchaseEstimationPlainTextDetails}}</pre>                \r\n        </div>\r\n    </div>\r\n</div>\r\n</div> --\x3e\r\n\r\n\x3c!-- Ends here --\x3e'},aTHM:function(t,e,n){"use strict";n.r(e),e.default='<div class="row" style="display:block;margin: auto;width: 30%;" *ngIf="ShowHide">\n  <form class="form-horizontal">\n    <div class="col-md-12">\n      <div class="card">\n        <div class="card-body">\n          <div class="row">\n            <div class="col-md-12">\n              <div class="form-group">\n                <label for="exampleAccount">Purchase Est No:</label>\n                <div class="input-group">\n                  <input class="form-control" id="exampleAccount" placeholder="Est No" type="number" #estNo>\n                </div>\n              </div>\n              <div class="form-group">\n                <button class="printMe btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n                  (click)="getPurchaseEstimationDetails(estNo.value)"><i class="fal fa-print"></i>\n                  Reprint </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n\x3c!-- <div class="modal fade" id="PurchaseModal"  data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"\n  aria-hidden="true" *ngIf="EnablePurchaseReprintHeaders">\n  <div class="modal-dialog modal-lg" role="document" style="max-width: 1100px;">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n          id="exampleModalLabel" (click)=printPurchase()><i class="fal fa-print"></i> Print</button>\n        <button type="button" class="close" (click)="closePurEstTab()" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="container invoice-box htmlPrint" id="print-sectionPurchase"\n        style="max-width: 1100px;border-width: 2em">\n        <div class="invoice">\n          <h3 style="text-align:center">{{heading}}</h3>\n          <div class="card">\n            <div class="card-body">\n              <div class="row mb-4 ">\n                <div class="col-md-6 ">\n                  <h5 class="mb-3 "> CustName: <span>{{estPurchaseDetails.CustName}}</span></h5>\n                </div>\n                <div class="col-md-5 ">\n                  <h5 class="mb-3 ">Purchase Estimate: <span>{{estPurchaseDetails.EstNo}}</span></h5>\n                </div>\n                <div class="col-md-1">\n                </div>\n              </div>\n              <div class="row margin">\n                <div class="col-lg-12">\n                  <div class="table-responsive-sm">\n                    <table class="table table-bordered table-striped">\n                      <thead>\n                        <tr>\n                          <th class="classname">Description</th>\n                          <th class="classname">Rate</th>\n                          <th class="classname">Gr.Wt</th>\n                          <th class="classname">St.Wt</th>\n                          <th class="classname">Net Wt</th>\n                          <th class="classname">St.Amt</th>\n                          <th class="classname">Amount</th>\n                        </tr>\n                      </thead>\n                      <tbody *ngIf="PurchaseDetails">\n                        <tr *ngFor="let _PurchaseDetails of PurchaseDetails">\n                          <td class="classname">{{_PurchaseDetails.ItemDescription}}</td>\n                          <td class="classname">{{_PurchaseDetails.PurchaseRate | number : \'1.2-2\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.GrossWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.StneWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.NetWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.DiamondAmount | number : \'1.2-2\'}}</td>\n                          <td class="classname">{{_PurchaseDetails.ItemAmount | number : \'1.2-2\'}}</td>\n                        </tr>\n                        <tr *ngIf="getPurchaseTotForPrint">\n                          <td class="classname">Grand Total</td>\n                          <td class="classname"></td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].GrossWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].StneWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].NetWt | number : \'1.3-3\'}}</td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].DiamondAmount | number : \'1.2-2\'}}</td>\n                          <td class="classname">{{getPurchaseTotForPrint[0].ItemAmount | number : \'1.2-2\'}}</td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n              <div class="card-body">\n                <div class="row mb-4 margin">\n                  <div class="col-md-5">\n                    <h5 class="mb-3"> EstDate:\n                      <span>{{estPurchaseDetails.PDate | date :\'dd-MMM-yy h:mm:ss a \'}}</span></h5>\n                  </div>\n                  <div class="col-md-3">\n                    <h5 class="mb-3">SalCode: <span>{{PurchaseDetails[0].SalCode}}</span></h5>\n                  </div>\n                  <div class="col-md-2">\n                    <h5 class="mb-3"> OpCode: <span>{{estPurchaseDetails.OperatorCode}}</span></h5>\n                  </div>\n                  <div class="col-md-2">\n                  </div>\n                </div>\n              </div>\n              <div class="card-body">\n                <ng-container\n                  *ngFor="let _PurchaseStoneDetails of PurchaseDetails[0].lstPurchaseEstStoneDetailsVM;let i=index">\n                  <div class="row mb-2 margin">\n                    <div class="col-md-6">\n                      <h5 class="mb-3">\n                        # {{_PurchaseStoneDetails.Name}}\\{{_PurchaseStoneDetails.Rate | number : \'1.2-2\'}} *\n                        {{_PurchaseStoneDetails.Carrat | number : \'1.3-3\'}}</h5>\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                  </div>\n                </ng-container>\n                <ng-container\n                  *ngFor="let _PurchaseDiamondDetails of PurchaseDetails[0].lstPurchaseEstDiamondDetailsVM;let i=index">\n                  <div class="row mb-2 margin">\n                    <div class="col-md-6">\n                      <h5 class="mb-3">\n                        # {{_PurchaseDiamondDetails.Name}}\\{{_PurchaseDiamondDetails.Rate | number : \'1.2-2\'}} *\n                        {{_PurchaseDiamondDetails.Carrat | number : \'1.3-3\'}}</h5>\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                    <div class="col-md-2">\n                    </div>\n                  </div>\n                </ng-container>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div> --\x3e\n\n\n\n\x3c!-- Added for Plain Text printing--\x3e\n\n<div class="modal fade" id="PurEstPlainTextTab" tabindex="-1" role="dialog" aria-labelledby="PurEstPlainTextTabLabel"\n    aria-hidden="true">\n    <div class="modal-dialog modal-lg" role="document" style="max-width: 900px">\n        <div class="modal-content">\n            <<div class="modal-header">\n                <button type="button"\n                    class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"\n                    id="PurEstPlainTextTabLabel" (click)=printPurEstPlainText()><i class="fal fa-print"></i> Print</button>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="container invoice-box htmlPrint" id="print-closed-section" style="max-width: 900px;border-width: 2em">\n                   <pre>{{purEstPlainTextDetails}}</pre>                \n            </div>>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Ends here --\x3e\n\n\n\x3c!-- {{PurchaseDetails | json}} --\x3e'},esxm:function(t,e,n){"use strict";n.r(e),e.default=".hiddenRow {\r\n    padding: 0 !important;\r\n  }\r\n  \r\n  .wrapper{\r\n    margin: auto 3em auto 3em;\r\n  }\r\n  \r\n  .table-responsive {\r\n    display: block;\r\n    width: 99.9999% !important;\r\n    overflow-x: auto;\r\n}\r\n  \r\n  fieldset.scheduler-border {\r\n\tborder: 2px groove #ddd !important;\r\n\tpadding: 0 1.4em 1.4em 1.4em !important;\r\n\tmargin: 0 0 1.5em 0 !important;\r\n\tbox-shadow:  0px 0px 0px 0px #000;\r\n\t\tborder-radius: 15px;\r\n  }\r\n  \r\n  legend.scheduler-border {\r\n\t  font-size: 20px !important;\r\n\t  text-align: left !important;\r\n\t  width:auto;\r\n\t  padding:0 10px;\r\n\t  border-bottom:none;\r\n\t}\r\n  "},jCgZ:function(t,e,n){"use strict";n.r(e),e.default='<ng-container *ngIf="EnableDisablectrls">\n<button type="button"\n  class="btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\n  data-toggle="modal" data-target="#myOldGoldModal" (click)="openModal()">\n  Attach Old GOld Estimate\n</button>\n</ng-container>\n<br>\n<br>\n<div class="table-responsive">\n  <table class="table table-bordered">\n    <thead class="topbar">\n      <tr>\n        <th *ngIf="EnableDisablectrls">Action</th>\n        <th>S.No</th>\n        <th>Est No</th>\n        <th>Qty</th>\n        <th>Gr.Wt</th>\n        <th>Total Amt</th>\n      </tr>\n    </thead>\n\n    <tbody *ngFor="let _SelectOldGoldList of SelectedOldGoldList; let i = index;">\n      <tr>\n        <td *ngIf="EnableDisablectrls"><i class="far fa-trash-alt fa-1-5x pointer" style=\'color: red; font-size: 1.5em !important;\'\n            (click)="DeleteRow(i)"></i>\n        </td>\n        <td>{{i + 1 }}</td>\n        <td>{{_SelectOldGoldList.EstNo}}</td>\n        <td>{{_SelectOldGoldList.Qty}}</td>\n        <td>{{_SelectOldGoldList.GrossWt | number : \'1.3-3\'}}</td>\n        <td>{{_SelectOldGoldList.Amount | number : \'1.2-2\'}}</td>\n      </tr>\n    </tbody>\n    <tr>\n      <td *ngIf="EnableDisablectrls" class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none">No. of items:</td>\n      <td class="border-none"></td>\n      <td class="border-none"><b>Total:</b></td>\n      <td class="border-none">{{Amount(SelectedOldGoldList) | number : \'1.2-2\'}}</td>\n    </tr>\n  </table>\n</div>\n<ng-container *ngIf="EnableDisablectrls">\n<button class="btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pb-10p" style="margin-bottom: 25px;" type="button"\n  (click)="Submit()" [disabled]="EnableSubmitButton"><i class="fal fa-save"></i> Submit</button>\n</ng-container>  \n\n<form [formGroup]="AttachOldGoldForm" class="form-horizontal" (ngSubmit)="onSubmit()">\n  <div class="modal fade" id="myOldGoldModal">\n    <div class="modal-dialog " style="max-width: 900px;">\n      <div class="modal-content">\n\n        \x3c!-- Modal Header --\x3e\n        <div class="modal-header">\n          <h4 class="modal-title">Attach Old Gold Estimate</h4>\n          <button type="button" class="close" data-dismiss="modal">&times;</button>\n        </div>\n\n        \x3c!-- Modal body --\x3e\n        <div class="modal-body">\n          <div class="">\n            <div class="row">\n              <div class="col-md-4">\n                <div class="form-group">\n                  <label for="salesPerson">Search By</label>\n                  <div class="form-group">\n                    <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="searchby">\n                      <option [ngValue]="null">Select</option>\n                      <option *ngFor="let _searchParamsList of SearchParamsList" [value]="_searchParamsList.Key">\n                        {{_searchParamsList.Value}}\n                      </option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n              <div class="col-md-4">\n                <div class="form-group">\n                  <label for="searchText">Search Text</label>\n                  <div class="input-group">\n                    <input class="form-control" id="searchText" formControlName="searchText" placeholder="Search Text"\n                      type="text">\n                  </div>\n                </div>\n              </div>\n              <div class="col-md-4">\n                <div class="form-group">\n                  <label for="Search"></label>\n                  <div class="input-group">\n                    <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary"\n                      (click)="getSearchParams(AttachOldGoldForm)"><i class="fal fa-search"></i> Search</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-md-12">\n                <div class="table-responsive">\n                  <table class="table table-bordered">\n                    <thead class="topbar">\n                      <tr>\n                        <th>S.No</th>\n                        <th>EstNo</th>\n                        <th>Customer</th>\n                        <th>Date</th>\n                        <th>Amount</th>\n                        <th>Gross Wt</th>\n                        <th>Quantity</th>\n                        <th>CustId</th>\n                        <th>GSTAmount</th>\n                      </tr>\n                    </thead>\n\n                    <tbody *ngFor="let _OldGoldList of AttachOldGoldList | paginate: { itemsPerPage:top, totalItems:totalItems, currentPage: pagenumber }; let i = index;">\n                      <tr (click)="selectRecord(_OldGoldList)" class="pointer">\n                        <td>{{i + 1 }}</td>\n                        <td>{{_OldGoldList.EstNo}}</td>\n                        <td>{{_OldGoldList.Customer}}</td>\n                        <td>{{_OldGoldList.Date | date:\'MM/dd/yyyy\'}}</td>\n                        <td>{{_OldGoldList.Amount | number : \'1.2-2\'}}</td>\n                        <td>{{_OldGoldList.GrossWt | number : \'1.3-3\'}}</td>\n                        <td>{{_OldGoldList.Qty}}</td>\n                        <td>{{_OldGoldList.CustID}}</td>\n                        <td>{{_OldGoldList.GSTAmount | number : \'1.2-2\'}}</td>\n                      </tr>                      \n                    </tbody>\n                  </table>\n                </div>\n                <div >\n                  <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \x3c!-- Modal footer --\x3e\n        <div class="modal-footer">\n          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n\x3c!-- <pre>{{PostOldGoldAttchJson|json}}</pre> --\x3e'},jrbh:function(t,e,n){"use strict";n.r(e),e.default='body{\r\n    font-size: 5px;\r\n    line-height: 18px;\r\n}\r\n\r\n.modal {\r\n  overflow-y:auto;\r\n}\r\n\r\n.watermark {\r\n  transform: rotate(331deg);\r\n  font-size: 10em;\r\n  color: rgba(255, 5, 5, 0.37);\r\n  position: absolute;\r\n  text-transform:uppercase;\r\n  padding-left: 10%;\r\n}\r\n\r\n.center {\r\n  margin: auto;\r\n  width: 70%;\r\n  padding: 5px;\r\n}\r\n\r\nthead > tr {\r\n  color:black !important;\r\n  font-weight: 300;\r\n  background-color: blanchedalmond;\r\n}\r\n\r\n.modal-header{\r\npadding-left: 20rem !important;\r\n}\r\n\r\n.material-switch > input[type="checkbox"] {\r\ndisplay: none;   \r\n}\r\n\r\ntr.spaceUnder>td {\r\npadding-bottom: 0px;\r\n}\r\n\r\n.material-switch > label {\r\ncursor: pointer;\r\nheight: 0px;\r\nposition: relative; \r\nwidth: 40px;  \r\n}\r\n\r\n.material-switch > label::before {\r\nbackground: rgb(0, 0, 0);\r\nbox-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\r\nborder-radius: 8px;\r\ncontent: \'\';\r\nheight: 16px;\r\nmargin-top: -8px;\r\nposition:absolute;\r\nopacity: 0.3;\r\ntransition: all 0.4s ease-in-out;\r\nwidth: 40px;\r\n}\r\n\r\n.material-switch > label::after {\r\nbackground: rgb(255, 255, 255);\r\nborder-radius: 16px;\r\nbox-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\r\ncontent: \'\';\r\nheight: 24px;\r\nleft: -4px;\r\nmargin-top: -8px;\r\nposition: absolute;\r\ntop: -4px;\r\ntransition: all 0.3s ease-in-out;\r\nwidth: 24px;\r\n}\r\n\r\n.material-switch > input[type="checkbox"]:checked + label::before {\r\nbackground: inherit;\r\nopacity: 0.5;\r\n}\r\n\r\n.material-switch > input[type="checkbox"]:checked + label::after {\r\nbackground: inherit;\r\nleft: 20px;\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n  .columns {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n@media (min-width:2200px) and (max-width: 2440px) {\r\n  .table-responsive {\r\n   overflow-x: hidden !important;\r\n\r\n}\r\n}\r\n\r\n@media (min-width: 300px) and (max-width: 2200px) {\r\n  .table-responsive {\r\n  overflow-x: auto !important;\r\n\r\n}}'},"lo/J":function(t,e,n){"use strict";n.r(e),e.default='<ng-container *ngIf="EnableDiamondTab">\n  <fieldset class="scheduler-border">\n    <legend class="scheduler-border"><i class="fas fa-gem align-middle"></i> Diamond Details</legend>\n\n    <div class="table-responsive">\n      <table class="table" id=\'panels\' style="width: 1200px;">\n        <thead class="topbar">\n          <tr>\n            <th>GS Name</th>\n            <th>Item Name</th>\n            <th>Qty</th>\n            <th>Carats</th>\n            <th>Max Rate/Carat</th>\n            <th>Rate/Carat</th>\n            <th>Amount</th>\n            <th *ngIf="ShowHide">Action</th>\n            <th *ngIf="ShowHide"><button class="mt-2  btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\n              [disabled]="EnableAddRow" (click)="addrow()">\n              <i class="far fa-plus-circle"></i> Add</button></th>\n          </tr>\n        </thead>\n        <tbody *ngFor="let field of fieldArray; let i = index">\n          <tr>\n            <td style="width: 30%;">\n              <select class="form-control mr-auto mt-2 mt-lg-0">\n                <option [ngValue]="OD" [disabled]="readonly[i]">OLD DIAMOND</option>\n          </select>\n            </td>\n            <td style="width: 30%;">\n              <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="field.Name" (change)="GetItemName(ItemName.value);" #ItemName>\n                <option [ngValue]="null" [disabled]="readonly[i]">Select</option>\n                <option *ngFor="let _ItemList of ItemList" [value]="_ItemList.StoneName"\n                  [disabled]="readonly[i]">\n                  {{_ItemList.StoneName}}\n              </option>\n          </select>\n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.Qty" class="form-control" type="text" min="0" name="{{field.Qty}}" placeholder="0.00"\n                [readonly]="readonly[i]" appNumbersOnly/>\n            </td>\n            <td style="width: 10%;">\n              \x3c!-- <input [(ngModel)]="field.Carrat" class="form-control" type="text" min="0" [readonly]="readonly[i]"\n                name="{{field.Carrat}}" placeholder="0.00" (change)="GetAmount(i);" appNumbersOnly/> --\x3e\n                \x3c!-- (keydown.Tab)="validateCarat(i);" --\x3e\n            \x3c!-- </td> --\x3e\n            <input [(ngModel)]="field.Carrat" class="form-control" type="text" min="0" [readonly]="readonly[i]"\n                name="{{field.Carrat}}" placeholder="0.00" (change)="GetStnDmdRate(i);" appNumbersOnly/>                \n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.OrgRate" class="form-control" type="text" min="0" name="{{field.Rate}}" \n              placeholder="0.00" (change)="GetAmount(i);" readonly/>\n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.Rate" class="form-control" type="text" min="0" [readonly]="readonly[i]"\n                name="{{field.Rate}}" placeholder="0.00" (change)="GetAmount(i);" appNumbersOnly/>\n            </td>\n            <td style="width: 10%;">\n              \x3c!-- <input [(ngModel)]="field.Amount"  class="form-control" type="number"\n            name="{{field.Amount}}" placeholder="0.00" /> --\x3e\n              <h3 [(ngModel)]="field.Amount" [ngModelOptions]="{standalone: true}" class="align-middle">\n                {{field.Amount || "0.00" | number}}</h3>\n            </td>\n            <ng-container *ngIf="ShowHide">\n            <td colspan="2" style="width: 30%;">\n              <ng-container *ngIf="EnableEditDelbtn[i]">\n                <button class="btn btn-default btn-rounded" type="button" (click)="editFieldValue(i)"><i\n                    class="fal fa-pencil-alt"></i> Edit</button>\n                <button class="btn btn-danger btn-rounded" type="button" (click)="deleteFieldValue(i)"><i\n                    class="fal fa-trash-alt"></i> Delete</button>\n              </ng-container>\n              <ng-container *ngIf="EnableSaveCnlbtn[i]">\n                <button class="btn btn-success btn-rounded" type="button" (click)="saveDataFieldValue(i)"><i\n                    class="fal fa-save"></i> Save</button>\n                <button class="btn btn-warning btn-rounded" type="button" (click)="cancelDataFieldValue(i)"><i\n                    class="far fa-window-close"></i> Cancel</button>\n              </ng-container>\n            </td>\n            </ng-container>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    \x3c!-- <pre>{{PurchaseLinesDetails | json}}</pre>\n    <pre>{{fieldArray | json}}</pre> --\x3e\n  </fieldset>\n</ng-container>'},tt6M:function(t,e,n){"use strict";n.r(e),e.default='<ng-container *ngIf="EnableStoneTab">\n  <fieldset class="scheduler-border">\n    <legend class="scheduler-border"><i class="fas fa-gem align-middle"></i> Stone Details</legend>\n\n    <div class="table-responsive">\n      <table class="table" id=\'panels\' style="width: 1000px;">\n        <thead class="topbar">\n          <tr>\n            <th>Item Name</th>\n            <th>Qty</th>\n            <th>St.Wt</th>\n            <th>St Carat</th>\n            <th>Rate/Carat</th>\n            <th>Amount</th>\n            <th *ngIf="ShowHide">Action</th>\n            <th *ngIf="ShowHide">  <button class="mt-2  btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\n              [disabled]="EnableAddRow" (click)="addrow()">\n              <i class="far fa-plus-circle"></i> Add</button></th>\n          </tr>\n        </thead>\n        <tbody *ngFor="let field of fieldArray; let i = index">\n          <tr>\n            <td style="width: 30%;">\n              \x3c!-- <h3 class="align-middle">Old Stone</h3> --\x3e\n              <select class="form-control mr-auto mt-2 mt-lg-0">\n                <option [ngValue]="OST" [disabled]="readonly[i]">OLD STONE</option>\n                \x3c!-- <option *ngFor="let _OldStoneList of OldStoneList" [value]="_OldStoneList.GSCode"\n                  [disabled]="readonly[i]">\n                  {{_OldStoneList.ItemName}}\n              </option> --\x3e\n          </select>\n            </td>\n            <td style="width: 10%;"> \n              <input [(ngModel)]="field.Qty" class="form-control" type="text" min="0" name="{{field.Qty}}" placeholder="0.00"\n                [readonly]="readonly[i]" appNumbersOnly/>\n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.StWt" class="form-control" type="text" min="0" name="{{field.StWt}}" placeholder="0.00"\n                [readonly]="readonly[i]" (change)="GetStoneKarat(i);" appNumbersOnly/>\n            </td>\n            <td style="width: 5%;">\n              <h3 [(ngModel)]="field.Carrat" ngDefaultControl [ngModelOptions]="{standalone: true}"\n              class="align-middle">{{field.Carrat || "0.00" | number}}</h3>\n            </td>\n            <td style="width: 10%;">\n              <input [(ngModel)]="field.Rate" class="form-control" type="text" [readonly]="readonly[i]"\n                name="{{field.Rate}}" placeholder="0.00" (change)="GetAmount(i);" appNumbersOnly/>\n            </td>\n            <td style="width: 10%;">\n              <h3 [(ngModel)]="field.Amount" [ngModelOptions]="{standalone: true}" class="align-middle">\n                {{field.Amount || "0.00" | number}}</h3>\n            </td>\n            <ng-container *ngIf="ShowHide">\n            <td colspan="2" style="width: 25%;">\n              <ng-container *ngIf="EnableEditDelbtn[i]">\n                <button class="btn btn-default btn-rounded" type="button" (click)="editFieldValue(i)"><i\n                    class="fal fa-pencil-alt"></i> Edit</button>\n                <button class="btn btn-danger btn-rounded" type="button" (click)="deleteFieldValue(i)"><i\n                    class="fal fa-trash-alt"></i> Delete</button>\n              </ng-container>\n              <ng-container *ngIf="EnableSaveCnlbtn[i]">\n                <button class="btn btn-success btn-rounded" type="button" (click)="saveDataFieldValue(i)"><i\n                    class="fal fa-save"></i> Save</button>\n                <button class="btn btn-warning btn-rounded" type="button" (click)="cancelDataFieldValue(i)"><i\n                    class="far fa-window-close"></i> Cancel</button>\n              </ng-container>\n            </td>\n          </ng-container>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    \x3c!-- <pre>{{PurchaseLinesDetails | json}}</pre>\n    <pre>{{fieldArray | json}}</pre> --\x3e\n  </fieldset>\n</ng-container>'},vMFa:function(t,e,n){"use strict";n.r(e),e.default=""},x3mp:function(t,e,n){"use strict";n.r(e),e.default='<div style="color: brown; text-align: right; font-style: italic;">\n  <app-lastdocno></app-lastdocno>\n</div>\n\n\n<div class="card">\n  <div class="card-body">\n    <form class="form-horizontal">\n      <div class="row">\n        <div class="col-md-2 ">\n          <div class="form-group">\n            <label for="EstNo">Est No</label>\n            <input class="form-control" id="exampleAccount" placeholder="Est No" min="0" type="number" #estNo\n              (keyup.enter)="getPurchaseEstimationDetails(estNo.value)">\n          </div>\n        </div>\n        <div class="col-md-3">\n          <div class="form-group">\n            <label for="OrderNo">Sales Person</label>\n            <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="SalesPerson"\n              [ngModelOptions]="{standalone: true}">\n              <option [ngValue]="" [disabled]="true">Select</option>\n              <option *ngFor="let _salesman of SalesManList" [disabled]="true" [value]="_salesman.sal_code">\n                {{_salesman.CodeName}}\n              </option>\n            </select>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="form-group">\n            <div class="text-left"><i class="fal fa-calendar-alt"></i>&nbsp;\n              <span class="text-muted">Date</span>\n              <h2 class="font-light">{{ApplicationDate}}</h2>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-3">\n          <div class="form-group">\n            <label *ngFor="let radiobutton of radioItems" class="form-check-inline">\n              <input type="radio" name="option" (click)="OnRadioBtnChnge(radiobutton)" class="form-check-input"\n                [value]="radiobutton" [checked]="radiobutton === model.option">\n              <h3 style="margin-top: 5px;">{{radiobutton}}</h3>\n            </label>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n<div id="accordian" class="accordion">\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#Customer" (click)="ToggleCustomerData()"\n      [ngClass]="CollapseCustomerDetailsTab ? \'collapsed\' : \'\'"\n      [attr.data-toggle]="CollapseCustomerDetailsTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle Pointer" style="color:#0096FF">\n            <i class="fas fa-2x fa-users mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Customer Details</ins></span>\n          </a>\n        </div>\n        \x3c!-- <ng-container *ngIf=" ToggleCustomer"> --\x3e\n        <ng-container *ngIf="CollapseCustomerTab">\n          <div class="col-md-1 pull-right">\n            \x3c!-- <h4 ><span class="align-middle"> Total Items: {{SalesData.TotalItems}} </span></h4> --\x3e\n          </div>\n          <div class="col-md-2 pull-right" style="color:#0096FF">\n            <h4><span class="align-middle"></span></h4>\n          </div>\n          <div class="col-md-2 pull-right">\n            <h4><span class="align-middle"> ID: {{CustomerName.ID}}</span></h4>\n          </div>\n          <div class="col-md-3 pull-right">\n            <h4><span class="align-middle"> Customer: {{CustomerName.CustName}}</span></h4>\n          </div>\n        </ng-container>\n        \x3c!-- </ng-container> --\x3e\n      </div>\n    </div>\n    <div id="Customer" class="card-body collapse" [collapse]="CollapseCustomerDetailsTab">\n      <app-customer [filterRadioBtns]="filterRadioBtns">\n      </app-customer>\n    </div>\n  </div>\n  <br>\n  <div class="card mb-0">\n    <div class="card-header Pointer" href="#Purchase" (click)="TogglePurchaseData()"\n      [ngClass]="EnablePurchaseTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnablePurchaseTab ? \'\':\'collapse\'"\n      style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n      <div class="row">\n        <div class="col-md-2 ">\n          <a class="card-title align-middle Pointer" style="color:#FF00C5">\n            <i class="far fa-shopping-cart fa-2x mr-2 align-middle"></i>\n            <span class="align-middle Pointer"><ins>Purchase</ins></span>\n          </a>\n        </div>\n        <ng-container *ngIf="TogglePurchase">\n          <ng-container *ngIf="NoRecordsPurchase">\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> St. Wt:\n                  {{PurchaseData.StoneWt | number : \'1.2-2\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Gr. Wt:\n                  {{PurchaseData.GrossWt | number : \'1.3-3\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Net Wt: {{PurchaseData.NtWt | number : \'1.3-3\'}}</span>\n              </h4>\n            </div>\n            <div class="col-md-2 pull-right">\n              <h4><span class="align-middle"> Amt:\n                  {{PurchaseData.Amount | currencyFormat : PurchaseData.Amount}}</span>\n              </h4>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n    <div id="Purchase" class=" collapse" [collapse]="EnablePurchaseTab" style="padding:10px;">\n      <app-purchase (PurchaseAmountChange)=\'PurchaseTotalAmountCalculation($event)\'></app-purchase>\n    </div>\n  </div>\n  <br>\n  <ng-container *ngIf="EnableDisablePayment">\n    <div class="card mb-0">\n      <div class="card-header Pointer" href="#Payment" (click)="TogglePaymentData()"\n        [ngClass]="EnablePaymentsTab ? \'collapsed\' : \'\'" [attr.data-toggle]="EnablePaymentsTab ? \'\':\'collapse\'"\n        style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">\n        <div class="row">\n          <div class="col-md-2 ">\n            <a class="card-title align-middle" style="color:rgb(0, 204, 255)">\n              <i class="far fa-rupee-sign fa-2x mr-2 align-middle"></i>\n              <span class="align-middle"><ins>Payment Details</ins>\n                <div class="tooltipdesign"> <i class="fal fa-question-circle"></i>\n                  <span class="tooltiptext tooltip-top">Capture the Receipts\n                    ( Payment collection modes) information like Cash , Cheque , Card , Scheme Adj, Purchase Bill\n                    etc</span>\n                </div>\n              </span>\n            </a>\n          </div>\n        </div>\n      </div>\n      <div id="Payment" class="card-body collapse" [hidden]="EnablePaymentsTab"\n        [ngClass]="EnablePaymentsTab ? \'hide\' : \'show\'">\n        <app-payment (PaidAmountChange)="PaidTotalAmountCalculation($event)" [autoFillAmount]="autoFetchAmount"\n          [argPageName]="pageName"></app-payment>\n      </div>\n    </div>\n  </ng-container>\n  <br>\n  <ng-container *ngIf="EnableDisablePayment">\n    <div class="row">\n      <div class="col-lg-12 col-md-12">\n        <div class="card">\n          <div class="row">\n            <div class="col-12">\n              <div class="social-widget">\n                <div class="soc-header box-twitter" style="padding: 3px;">\n                  <h3 class="text-white">Purchase Summary</h3>\n                </div>\n                <div class="soc-content">\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"> <b>0.00</b>\n                    </h4>\n                    <h5 class="text-black">Total SGST</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"><b>0.00</b>\n                    </h4>\n                    <h5 class="text-black">Total CGST</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"><b>\n                        0.00</b>\n                    </h4>\n                    <h5 class="text-black">Total IGST</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"> <b>{{PurchaseTotAmount | number : \'1.2-2\'}}</b>\n                      <h1 class="float-right">-</h1>\n                    </h4>\n                    <h5 class="text-black">Trade in Amt</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"><b>{{PaidAmount | number : \'1.2-2\'}}</b>\n                      <h1 class="float-right">=</h1>\n                    </h4>\n                    <h5 class="text-black">Paid Amount</h5>\n                  </div>\n                  <div class="col-2 b-r">\n                    <h4 class="font-medium"><b>\n                        {{BalanceAmount() | number : \'1.2-2\'}}</b>\n                    </h4>\n                    <h5 class="text-black">Balance Amount</h5>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n  <br>\n  <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary" type="button" (click)="Submit()"\n    [hidden]="EnableSubmitButton"><i class="fal fa-save"></i> Submit</button>\n</div>\n\n<ng-container *ngIf="EnableReprint">\n  <app-reprint-purchasebill [BillNo]="BillNo"></app-reprint-purchasebill>\n</ng-container>\n\n\n<pre>{{PurchaseBilling | json}}</pre>'},yByz:function(t,e,n){"use strict";n.r(e),e.default='body{\r\n    font-size: 5px;\r\n    line-height: 18px;\r\n}\r\n.watermark {\r\n  transform: rotate(331deg);\r\n  font-size: 10em;\r\n  color: rgba(255, 5, 5, 0.37);\r\n  position: absolute;\r\n  text-transform:uppercase;\r\n  padding-left: 10%;\r\n}\r\nthead > tr {\r\n  color:black !important;\r\n  font-weight: 300;\r\n  background-color: blanchedalmond;\r\n}\r\n.modal-header{\r\npadding-left: 20rem !important;\r\n}\r\n.material-switch > input[type="checkbox"] {\r\ndisplay: none;   \r\n}\r\ntr.spaceUnder>td {\r\npadding-bottom: 0px;\r\n}\r\n.material-switch > label {\r\ncursor: pointer;\r\nheight: 0px;\r\nposition: relative; \r\nwidth: 40px;  \r\n}\r\n.material-switch > label::before {\r\nbackground: rgb(0, 0, 0);\r\nbox-shadow: inset 0px 0px 10px rgba(0, 0, 0, 0.5);\r\nborder-radius: 8px;\r\ncontent: \'\';\r\nheight: 16px;\r\nmargin-top: -8px;\r\nposition:absolute;\r\nopacity: 0.3;\r\ntransition: all 0.4s ease-in-out;\r\nwidth: 40px;\r\n}\r\n.material-switch > label::after {\r\nbackground: rgb(255, 255, 255);\r\nborder-radius: 16px;\r\nbox-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);\r\ncontent: \'\';\r\nheight: 24px;\r\nleft: -4px;\r\nmargin-top: -8px;\r\nposition: absolute;\r\ntop: -4px;\r\ntransition: all 0.3s ease-in-out;\r\nwidth: 24px;\r\n}\r\n.material-switch > input[type="checkbox"]:checked + label::before {\r\nbackground: inherit;\r\nopacity: 0.5;\r\n}\r\n.material-switch > input[type="checkbox"]:checked + label::after {\r\nbackground: inherit;\r\nleft: 20px;\r\n}'}}]);