<div class="row">
    <div class="col-sm-8">

    </div>
    <div class="col-sm-4">
        <app-lastdocno [routerUrl]="routerUrl" style="color: brown; text-align: right; font-style: italic;">
        </app-lastdocno>
    </div>
</div>
<div class="card mb-0">
    <div class="card-body">
        <form [formGroup]="barcodereceiptHeaderForm" class="form-horizontal">
            <div class="row">
                <div class="col-sm-3">
                    <div class="form-group">
                        <label class="control-label" for="no">Receipt From</label>
                        <select class="form-control" formControlName="frmCtrl_ReceiptFrom"
                            [(ngModel)]="barcodereceiptsHeaderFormModel.receiptfrom">
                            <option [ngValue]="null">Select</option>
                            <option *ngFor="let _receiptFrom of ReceiptFrom" [value]="_receiptFrom.Code">
                                {{_receiptFrom.Name}} </option>
                        </select>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="form-group">
                        <label class="control-label" for="no">Issue No </label>
                        <input type="text" class="form-control" placeholder="Enter Issue No"
                            formControlName="frmCtrl_IssueNo" [(ngModel)]="barcodereceiptsHeaderFormModel.issueno"
                            [readonly]="readonly">
                    </div>

                </div>
                <div class="col-sm-1">
                    <br>
                    <button type="submit" class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"
                        (click)="GetReceiptDetails()">&nbsp;
                        Go</button>
                </div>
                <div class="col-sm-1">
                    <br>
                    <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" (click)="cancel()"
                        type="button"><i class="far fa-window-close"></i>&nbsp;Cancel</button>
                </div>
                <div class="col-sm-2">
                    <div class="form-group">
                        <label class="control-label" for="no">Received By</label>
                        <!-- <input class="form-control" type="text" value="Admin" formControlName="frmCtrl_ReceivedBy"
                            [(ngModel)]="barcodereceiptsHeaderFormModel.receivedBY" readonly> -->
                        <input class="form-control" type="text" value="ADMIN" readonly>
                    </div>

                </div>
                <div class="col-sm-2">
                    <div class="form-group">
                        <label class="control-label" for="no">Date </label>
                        <input type="text" class="form-control" bsDatepicker [bsConfig]="datePickerConfig"
                            formControlName="frmCtrl_ReceiptDate" [(ngModel)]="applicationDate" readonly
                            value="{{applicationDate | date:'dd/MM/yyyy' }}" />
                    </div>

                </div>
            </div>
        </form>
    </div>
</div>

<br>
<div id="accordian" class="accordion">
    <div class="card mb-0">
        <div class="card-header Pointer" href="#ScannedBarcodes" (click)="ToggleScannedBarcodes()"
            [ngClass]="EnableScannedBarcodes ? 'collapsed' : ''"
            [attr.data-toggle]="EnableScannedBarcodes ? '':'collapse'"
            style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">
            <div class="row">
                <div class="col-md-4 ">
                    <a class="card-title align-middle" style="color:#005BFF">
                        <i class="fal fa-hand-receiving fa-2x mr-2 align-middle"></i>
                        <span class="align-middle Pointer"><ins>Scanned Barcodes</ins></span>
                    </a>
                </div>
            </div>
        </div>
        <div id="ScannedBarcodes" class="card-body collapse" [collapse]="EnableScannedBarcodes">
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label class="control-label" for="GS">Tag No</label>
                        <input class="form-control" type="text" (keyup.enter)="getDetails(Tagno.value)"
                            onkeypress='return (event.charCode > 96 && event.charCode < 123) || (event.charCode > 64 && event.charCode < 91) || (event.charCode >= 48 && event.charCode <= 57) || event.charCode <= 31'
                            maxlength="10" GreenBorder #Tagno placeholder="Barcode No">

                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="topbar">
                                <th style="text-align: center;">SNo</th>
                                <th style="text-align: center;">Tag No</th>
                                <th style="text-align: center;">Item</th>
                                <th style="text-align: center;">Counter</th>
                                <th style="text-align: center;">Qty </th>
                                <th style="text-align: center;">Gr.Wt(g)</th>
                                <th style="text-align: center;">St.Wt(g)</th>
                                <th style="text-align: center;">N.Wt(g)</th>
                                <th style="text-align: center;">D.Cts</th>
                                <th style="text-align: center;">Amount</th>
                               
                            </thead>
                            <tbody *ngFor="let _list of ItemDetails.ScannedBarcodes ;let i=index;">
                                <tr>
                                    <td>{{_list.SlNo}}</td>
                                    <td>{{_list.BarcodeNo}}</td>
                                    <td>{{_list.ItemCode}}</td>
                                    <td>{{_list.CounterCode}}</td>
                                    <td>{{_list.Qty}}</td>
                                    <td>{{_list.GrossWt}}</td>
                                    <td>{{_list.StoneWt}}</td>
                                    <td>{{_list.NetWt}}</td>
                                    <td>{{_list.Dcts}}</td>
                                    <td>{{_list.Amount}}</td>
                                   
                                </tr>
                            </tbody>
                            <tr *ngIf="finalBarcodeDetails.length > '0'">
                                <td class="border-none"></td>
                                <td class="border-none"></td>
                                <td class="border-none"><b>Total</b></td>
                                <td class="border-none"><b>{{totalItems(finalBarcodeDetails) | number}}</b></td>
                                <td class="border-none"><b>{{grossWT(finalBarcodeDetails) | number : '1.3-3' }}</b></td>
                                <td class="border-none"><b>{{stoneWt(finalBarcodeDetails) | number : '1.3-3' }}</b></td>
                                <td class="border-none"><b>{{netWT(finalBarcodeDetails) | number : '1.3-3' }}</b>
                                </td>
                                <td class="border-none"><b>{{dcts(finalBarcodeDetails) | number : '1.3-3' }}</b>
                                </td>
                                <td class="border-none"><b>{{amount(finalBarcodeDetails) | number : '1.2-2' }}</b>
                                </td>
                            </tr>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<br>
<div id="accordian" class="accordion">
    <div class="card mb-0">
        <div class="card-header Pointer" href="#ImportedBarcodes" (click)="ToggleImportedBarcodes()"
            [ngClass]="EnableImportedBarcodes ? 'collapsed' : ''"
            [attr.data-toggle]="EnableImportedBarcodes ? '':'collapse'"
            style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">
            <div class="row">
                <div class="col-md-5 ">
                    <a class="card-title align-middle" style="color:#005BFF">
                        <i class="fal fa-hand-receiving fa-2x mr-2 align-middle"></i>
                        <span class="align-middle Pointer"><ins>Imported Barcodes</ins></span>
                    </a>
                </div>
            </div>
        </div>
        <div id="ImportedBarcodes" class="card-body collapse" [collapse]="EnableImportedBarcodes">
            <div class="row">
                <div class="col-md-12">
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="topbar">
                                <th style="text-align: center;">SNo</th>
                                <th style="text-align: center;">Tag No</th>
                                <th style="text-align: center;">Item</th>
                                <th style="text-align: center;">Counter</th>
                                <th style="text-align: center;">Qty </th>
                                <th style="text-align: center;">Gr.Wt(g)</th>
                                <th style="text-align: center;">St.Wt(g)</th>
                                <th style="text-align: center;">N.Wt(g)</th>
                                <th style="text-align: center;">D.Cts</th>
                                <th style="text-align: center;"> Amount</th>
                            </thead>
                            <tbody *ngFor="let _list of ItemDetails.ReceiptDetails ;let i=index;">
                                <tr>
                                    <td>{{_list.SlNo}}</td>
                                    <td>{{_list.BarcodeNo}}</td>
                                    <td>{{_list.ItemCode}}</td>
                                    <td>{{_list.CounterCode}}</td>
                                    <td>{{_list.Qty}}</td>
                                    <td>{{_list.GrossWt}}</td>
                                    <td>{{_list.StoneWt}}</td>
                                    <td>{{_list.NetWt}}</td>
                                    <td>{{_list.Dcts}}</td>
                                    <td>{{_list.Amount}}</td>
                                </tr>
                            </tbody>
                            <tr *ngIf="ItemDetails">
                                <td class="border-none"></td>
                                <td class="border-none"></td>
                                <td class="border-none"></td>
                                <td class="border-none"><b>Total</b></td>
                                <td class="border-none"><b>{{ItemDetails.TotalQty | number}}</b></td>
                                <td class="border-none"><b>{{ItemDetails.TotalGrossWt | number :
                                        '1.3-3'}}</b></td>
                                <td class="border-none"><b>{{ItemDetails.TotalStoneWt | number :
                                        '1.3-3'}}</b></td>
                                <td class="border-none"><b>{{ItemDetails.TotalNetWt | number : '1.3-3'}}</b>
                                </td>
                                <td class="border-none"><b>{{ItemDetails.TotalDcts | number : '1.3-3'}}</b>
                                </td>
                                <td class="border-none"><b>{{ItemDetails.TotalAmount | number : '1.2-2'}}</b>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br>

<div id="accordian" class="accordion">
    <div class="card mb-0">
        <div class="card-header Pointer" href="#fittedstones" (click)="ToggleFittedStonesDetails()"
            [ngClass]="EnableStoneDmddtls ? 'collapsed' : ''" [attr.data-toggle]="EnableStoneDmddtls ? '':'collapse'"
            style="background-color: #fdfdfd; box-shadow: -1px 0px 2px 0px rgba(0, 0, 0, 0.36);color:black">
            <div class="row">
                <div class="col-md-5 ">
                    <a class="card-title align-middle" style="color:#FF00C5">
                        <i class="fas fa-2x fa-gem mr-2 align-middle"></i>
                        <span class="align-middle Pointer"><ins> Stone/Diamond Details</ins></span>
                    </a>
                </div>
            </div>
        </div>
        <div id="fittedstones" class="card-body collapse" [collapse]="EnableStoneDmddtls">
            <div class="col-md-12">
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="topbar">
                            <th>SNo</th>
                            <th>Type</th>
                            <th>Barcode No</th>
                            <th>Name </th>
                            <th>Qty </th>
                            <th>Carat</th>
                        </thead>
                        <tbody *ngFor="let _list of StoneDetails ;let i=index;">
                            <tr>
                                <!-- <td>{{_list.SlNo}}</td> -->
                                <td>{{i+1}}</td>
                                <td>{{_list.Type}}</td>
                                <td>{{_list.BarcodeNo}}</td>
                                <td>{{_list.Name}}</td>
                                <td>{{_list.Qty}}</td>
                                <td>{{_list.Carrat}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<br>
<div class="col-md-4">
    <button class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary "
        (click)="submit()">
        <i class="far fa-save"></i> Submit</button>
    <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" (click)="cancel()"
        type="button"><i class="far fa-window-close"></i>&nbsp;Cancel</button>
</div>
<br>


<div class="row">
    <div class="col-sm-3" style="padding-top:28px;">
        <a class="btn btn-success waves-effect waves-light btn-rounded btn-secondary MT-2" (click)="printPending()">
            <i class="fal fa-pencil"></i>
            Pending Summary
        </a>
    </div>
    <div class="col-sm-3" style="padding-top:28px;">
        <a class="btn btn-success waves-effect waves-light btn-rounded btn-secondary MT-2" (click)="printScanned()">
            <i class="fas fa-info-circle"></i>
            Scanned Summary
        </a>
    </div>
    <div class="col-sm-3" style="padding-top:28px;">
        <a class="btn btn-success waves-effect waves-light btn-rounded btn-secondary MT-2" href="javascript:void(0)"
            href="javascript:void(0)" (click)="printImported()">
            <i class="fas fa-info-circle"></i>
            Imported Summary
        </a>
    </div>
</div>

<!-- </div> -->


<br>
<div class="row" style="display:block;margin: auto;width: 30%;">
    <div class="modal fade" id="scannedTab" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button"
                        class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"
                        id="exampleModalLabel" (click)=printScannedData()><i class="fal fa-print"></i> Print</button>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="table-responsive" id="DisplaynScannedData">
                                <table id="elementsPeriodic">
                                    <thead class="topbar">
                                        <th>ItemCode</th>
                                        <th>Qty</th>
                                        <th>Gross.Wt</th>
                                        <th>Net.Wt</th>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let _list of printSacannedData ">
                                            <td>{{_list.ItemCode}}</td>
                                            <td>{{_list.Qty}}</td>
                                            <td>{{_list.GrossWt}}</td>
                                            <td>{{_list.NetWt}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br>
<div class="row" style="display:block;margin: auto;width: 30%;">
    <div class="modal fade" id="pendingTab" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button"
                        class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"
                        id="exampleModalLabel" (click)=printPendingData()><i class="fal fa-print"></i> Print</button>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="table-responsive" id="DisplayntPendingData">
                                <table id="elementsPeriodic">
                                    <thead class="topbar">
                                        <th>Sl No</th>
                                        <th>BarcodeNo</th>
                                        <th>Item</th>
                                        <th>GrossWt</th>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let _list of printPendingtData ">
                                            <td>{{_list.SlNo}}</td>
                                            <td>{{_list.BarcodeNo}}</td>
                                            <td>{{_list.Item}}</td>
                                            <td>{{_list.GrossWt}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<br>

<div class="modal fade" id="importTab" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document" style="max-width: 400px">
        <div class="modal-content">
            <div class="modal-header" style="position: sticky;">
                <h4 class="modal-title">Imported summary</h4>
                <button type="button"
                    class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"
                    id="exampleModalLabel" (click)=printImportedData()><i class="fal fa-print"></i> Print</button>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive" id="DisplayntprintImportedData">
                            <table id="elementsPeriodic">
                                <thead class="topbar">
                                    <th>ItemCode</th>
                                    <th>Qty</th>
                                    <th>Gross.Wt</th>
                                    <th>Net.Wt</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let _list of printImportData ">
                                        <td>{{_list.ItemCode}}</td>
                                        <td>{{_list.Qty}}</td>
                                        <td>{{_list.GrossWt}}</td>
                                        <td>{{_list.NetWt}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" style="display:block;margin: auto;width: 30%;">
    <div class="modal fade" id="NTReceiptsTab" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button"
                        class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"
                        id="exampleModalLabel" (click)=printNtreceipt()><i class="fal fa-print"></i> Print</button>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <ng-container *ngIf="PrintTypeBasedOnConfig">
                    <div class="container invoice-box htmlPrint" id="print-closed-section"
                        style="max-width: 900px;border-width: 2em" *ngIf="PrintTypeBasedOnConfig.PrintType == 'RAW'">
                        <pre>{{NTreceiptPrint}}</pre>
                    </div>
                    <span *ngIf="PrintTypeBasedOnConfig.PrintType == 'HTML'">
                        <div id="DisplayntreceiptData" class="center" [innerHTML]='NTreceiptPrint | safeHtml'></div>
                    </span>
                </ng-container>
            </div>
        </div>
    </div>
</div>

<ng-container *ngIf="EnableJson">
    <pre>
    {{ItemDetails | json}}
</pre>
</ng-container>