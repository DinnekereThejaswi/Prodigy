!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ng-keyboard-shortcuts",["exports","@angular/core","rxjs","rxjs/operators"],e):e(t["ng-keyboard-shortcuts"]={},t.ng.core,t.rxjs,t.rxjs.operators)}(this,function(t,e,r,n){"use strict";var u=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function o(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)u.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return u}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}var i=-1!==navigator.userAgent.indexOf("Mac OS"),a={backspace:8,tab:9,enter:13,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222,windows:91,"⇧":16,"⌥":18,"⌃":17,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46},c={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",cmd:i?"metaKey":"ctrlKey",command:i?"metaKey":"ctrlKey","left command":"metaKey","right command":"MetaRight","⌘":i?"metaKey":"ctrlKey",option:"altKey",ctl:"ctrlKey",control:"ctrlKey"},p=this;var l=function(t){return t},f=Symbol("OnDestroy"),y=function(){function t(){var o=this;this._shortcuts=[],this.throttleTime=0,this._pressed=new r.Subject,this.pressed$=this._pressed.asObservable(),this.disabled=!1,this._ignored=["INPUT","TEXTAREA","SELECT"],this.isAllowed=function(t){var e,r,n=t.event.target;return n===t.target||(t.allowIn.length?!(e=o._ignored,r=t.allowIn,e.filter(function(t){return!r.includes(t)})).includes(n.nodeName):!o._ignored.includes(n.nodeName))},this.mapEvent=function(e){return o._shortcuts.map(function(t){return Object.assign({},t,{predicates:function(t,e){for(var r=0;r<e.length;){if(t(e[r]))return!0;r+=1}return!1}(l,t.predicates.map(function(t){return o=t,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=o.length;r<n;){if(!o[r].apply(p,t))return!1;r+=1}return!0}(e);var o})),event:e})}).filter(function(t){return t.predicates}).reduce(function(t,e){return t.priority>e.priority?t:e},{priority:0})},this.keydown$=r.fromEvent(document,"keydown").pipe(n.filter(function(t){return!o.disabled}),n.map(this.mapEvent),n.filter(function(t){return!t.target||t.event.target===t.target}),n.filter(function(t){return"function"==typeof t.command}),n.filter(this.isAllowed),n.tap(function(t){return!t.preventDefault||t.event.preventDefault()}),n.debounce(function(t){return r.timer(t.throttleTime)}),n.tap(function(t){return t.command({event:t.event,key:t.key})}),n.tap(function(t){return o._pressed.next({event:t.event,key:t.key})}),n.catchError(function(t){return r.throwError(t)})),this.getKeys=function(t){return t.map(function(t){return t.trim()}).filter(function(t){return"+"!==t}).map(function(e){return c.hasOwnProperty(e)?function(t){return!!t[c[e]]}:function(t){return a[e]?t.keyCode===a[e]||t.key===e:t.keyCode===e.toUpperCase().charCodeAt(0)}})},this.subscription=this.keydown$.subscribe()}return Object.defineProperty(t.prototype,"shortcuts",{get:function(){return this._shortcuts},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.enable=function(){return this.disabled=!1,this},t.prototype.disable=function(){return this.disabled=!0,this},t.prototype.isDisabled=function(){return this.disabled},t.prototype.add=function(t,e){if(t=Array.isArray(t)?t:[t],e){var r=o(s(t.map(function(t){return t.key})),1)[0];this.bindOnDestroy(e,r)}return(n=this._shortcuts).push.apply(n,s(this.parseCommand(t))),this;var n},t.prototype.bindOnDestroy=function(e,r){e.ngOnDestroy&&(e[f]=e.ngOnDestroy);var n=this;return e.ngOnDestroy=function(){var t=e[f];t&&t.apply(this),n.remove(r)},this},t.prototype.remove=function(t){var r=Array.isArray(t)?t:[t];return this._shortcuts=this._shortcuts.filter(function(t){return!t.key.find(function(e){return 0<r.filter(function(t){return t===e}).length})}),this},t.prototype.select=function(e){return this.pressed$.pipe(n.filter(function(t){t.event;return!!t.key.find(function(t){return t===e})}))},t.prototype.parseCommand=function(t){var i=this;return(Array.isArray(t)?t:[t]).map(function(t){var e,r=Array.isArray(t.key)?t.key:[t.key],n=Math.max.apply(Math,s(r.map(function(t){return t.split(" ").length}))),o=r.map(function(t){return i.getKeys(t.split(" "))});return u({},t,{allowIn:t.allowIn||[],key:r,throttle:(e=t.throttleTime,null==e?i.throttleTime:t.throttleTime),priority:n,predicates:o})})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[]},t}(),d=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[],declarations:[],exports:[]}]}],t}();t.KeyboardShortcutsService=y,t.KeyboardShortcutsModule=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-keyboard-shortcuts.umd.min.js.map