function _createForOfIteratorHelper(e,t){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return r=e.done,e},e:function(e){l=!0,o=e},f:function(){try{r||null==s.return||s.return()}finally{if(l)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{KoPZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s("mrSG"),n=s("fXoL"),o=s("tk/3"),r=function e(t){_classCallCheck(this,e),this._http=t};r.ctorParameters=function(){return[{type:o.b}]},r=a.a([Object(n.Injectable)({providedIn:"root"}),a.c("design:paramtypes",[o.b])],r)},YHdl:function(e,t,s){"use strict";s.r(t),t.default='.card-title {\r\n  margin-bottom: -0.3rem !important;\r\n}\r\n\r\n.table-responsive {\r\n  display: block;\r\n  width: 99.9% !important;\r\n  overflow-x: auto;\r\n  -ms-overflow-style: -ms-autohiding-scrollbar;\r\n}\r\n\r\n.hiddenRow {\r\n  padding: 0 !important;\r\n}\r\n\r\n.wrapper{\r\n  margin: auto 3em auto 3em;\r\n}\r\n\r\n@media (min-width:2200px) and (max-width: 2440px) {\r\n  .table-responsive {\r\n   overflow-x: hidden !important;\r\n\r\n}\r\n}\r\n\r\n@media (min-width: 300px) and (max-width: 2200px) {\r\n  .table-responsive {\r\n  overflow-x: auto !important;\r\n\r\n}}\r\n\r\n.card-header{\r\n  border-radius: 15px !important;\r\n}\r\n\r\n.card{\r\n  border-radius: 15px !important;  \r\n}\r\n\r\n.card-body{ \r\n  padding: 10px 30px 0px 30px !important; \r\n  border-bottom: 2px solid black;\r\n  border-radius: 15px;\r\n}\r\n\r\n.p-38 { height: 38px; }\r\n\r\n.text-white { color: white;}\r\n\r\n.Pointer { cursor: pointer; }\r\n\r\n.footer {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.hide{\r\n display: hide;\r\n}\r\n\r\n.show{\r\n  display: block;\r\n}\r\n\r\n.accordion .card-header.collapsed:after {\r\n  /* symbol for "collapsed" panels */\r\n  content: "\\f067"; \r\n  position: absolute;\r\n  right: 20px;\r\n  font-size: 20px;\r\n  font-weight: 400;\r\n\r\n  line-height: 1;\r\n  margin-top: -25px;\r\n  transition: .3s transform ease-in-out;\r\n}\r\n\r\n.accordion .card-header:after {\r\n  font-family: \'FontAwesome\';  \r\n  content: "\\f068";\r\n  position: absolute;\r\n  right: 20px;\r\n  font-size: 20px;\r\n  font-weight: 400;\r\n  line-height: 1;\r\n  margin-top: -25px;\r\n}\r\n\r\n.text-red{\r\n  color:red;\r\n}\r\n\r\n.text-green{\r\ncolor:#16d616; \r\n}\r\n\r\n.center {\r\n  margin: auto;\r\n  width: 70%;\r\n  padding: 5px;\r\n}'},ezid:function(e,t,s){"use strict";s.r(t),t.default='\x3c!-- {{CustomerDets | json}} --\x3e\n<form [formGroup]="SalesForm" class="form-horizontal" (ngSubmit)="onSubmit()">\n  <div class="row" *ngIf="EnableDisablectrls">\n    <div class="col-md-3 ">\n      <div class="form-group">\n        <label for="salesPerson">Sales Person</label>\n        <div class="form-group">\n          <select class="form-control mr-auto mt-2 mt-lg-0" Autofocus formControlName="salesPerson"\n            [(ngModel)]="SalesPersonModel.salesPerson">\n            <option [ngValue]="null">Select</option>\n            <option *ngFor="let _salesman of SalesManList" [value]="_salesman.sal_code">\n              {{_salesman.CodeName}}\n            </option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-3 ">\n      <div class="form-group">\n        <label for="barcode">Barcode/Tag No.</label>\n        <div class="input-group">\n          \x3c!-- <input class="form-control" id="barcode" formControlName="barcode" [(ngModel)]="SalesPersonModel.barcode"\n            placeholder="Search by Barcode" type="text" (keyup.enter)="getDetails(SalesForm)"> --\x3e\n          <input class="form-control" id="barcode" formControlName="barcode" [(ngModel)]="SalesPersonModel.barcode"\n            placeholder="Search by Barcode" type="text" onKeyPress="if(this.value.length==10) return false;"\n            (keyup.enter)="getDetails(SalesForm)">\n        </div>\n      </div>\n    </div>\n    <div class="col-md-2">\n      <div class="form-group">\n        <label for="barcode"></label>\n        <div class="input-group">\n          <a href="javascript:void(0)" class="btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\n            (click)="AddBarcode(SalesForm)"><i class="fas fa-barcode"></i> Add Barcode</a>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-3 ">\n      <div class="form-group">\n        <label for="salesPerson">Place of Supply</label>\n        <div class="form-group">\n          <select class="form-control" formControlName="StateCode" [(ngModel)]="SalesLinesPost.Pos"\n            (change)="SetInterState(SalesLinesPost.Pos)">\n            <option [ngValue]="null" [disabled]="EnablePos">Select State</option>\n            <option *ngFor="let State of StateList" [ngValue]="State.TINNo" [disabled]="EnablePos">\n              {{State.StateName}}\n            </option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-1">\n      <div class="text-right">&nbsp;\n        <button class="btn btn-success btn-rounded" type="button" (click)="EditPos()"><i\n            class="fal fa-edit"></i>Edit</button>\n      </div>\n    </div>\n  </div>\n</form>\n<div class="table-responsive" *ngIf="ToggleCalculation">\n  <table class="table" id="panels">\n    <thead class="topbar">\n      <tr>\n        <th *ngIf="EnableDisablectrls">Action</th>\n        <th>Barcode</th>\n        <th>Item </th>\n        <th>Qty</th>\n        <th>Gr.Wt</th>\n        <th>Nt.Wt</th>\n        <th>Rate/gram</th>\n        <th>Metal Amt</th>\n        <th>St Amt</th>\n        <th>Dia Amt</th>\n        <th>VA Amt</th>\n        <th>Item Total</th>\n        <th>SGST</th>\n        <th>CGST</th>\n        <th>IGST</th>\n        <th>Sales Total</th>\n      </tr>\n    </thead>\n    <tbody *ngFor="let _GetBarcodeList of GetBarcodeList; let i = index">\n      <tr>\n        <td *ngIf="EnableDisablectrls">\n          \x3c!-- <i class="far fa-eye fa-1-5x pointer" aria-hidden="true" style=\'color: #009688; font-size: 1.5em !important;\'\n            data-toggle="modal" data-target="#myModal" (click)="GetBarcodeInfo(_GetBarcodeList)"></i> --\x3e\n          <i class="far fa-pen fa-1-5x pointer" style=\'color: orange; font-size: 1.5em !important;\'\n            (click)="EditTagRow(i,_GetBarcodeList)"></i>\n          <i class="far fa-trash-alt fa-1-5x pointer" style=\'color: red; font-size: 1.5em !important;\'\n            (click)="DeleteTagRow(i,_GetBarcodeList)"></i>\n        </td>\n        <td>{{_GetBarcodeList.BarcodeNo}}</td>\n        <td>{{_GetBarcodeList.ItemName}}</td>\n        <td>{{_GetBarcodeList.ItemQty}}</td>\n        \x3c!-- <td>{{_GetBarcodeList.Grosswt | number : \'1.3-3\' }}</td>\n        <td>{{_GetBarcodeList.Netwt | number : \'1.3-3\'}}</td> --\x3e\n        <td>{{ _GetBarcodeList.Grosswt +  _GetBarcodeList.AddWt - _GetBarcodeList.DeductWt  | number : \'1.3-3\' }}</td>\n        <td>\n          {{_GetBarcodeList.Grosswt +  _GetBarcodeList.AddWt - _GetBarcodeList.Stonewt - _GetBarcodeList.DeductWt | number : \'1.3-3\'}}\n        </td>\n        <td>{{_GetBarcodeList.Rate | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.GoldValue | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.StoneCharges | number : \'1.2-2\' }}</td>\n        <td>{{_GetBarcodeList.DiamondCharges | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.VaAmount | number : \'1.2-2\' }}</td>\n        <td>{{_GetBarcodeList.ItemTotalAfterDiscount | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.SGSTAmount | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.CGSTAmount | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.IGSTAmount | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.ItemFinalAmount | number : \'1.2-2\'}}</td>\n      </tr>\n    </tbody>\n    <tr>\n      <td *ngIf="EnableDisablectrls" class="border-none"><b>Grand Total</b></td>\n      <td class="border-none"></td>\n      <td class="border-none">No. of items:</td>\n      <td class="border-none">{{total_items(GetBarcodeList) | number}}</td>\n      <td class="border-none">{{grossWT(GetBarcodeList) | number : \'1.3-3\'}}</td>\n      <td class="border-none">{{netWT(GetBarcodeList) | number : \'1.3-3\'}}</td>\n      <td class="border-none"></td>\n      \x3c!-- <td class="border-none">{{Rate(GetBarcodeList) | number : \'1.2-2\'}}</td> --\x3e\n      <td class="border-none">{{metal_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none">{{stone_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none"></td>\n      <td class="border-none">{{va_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none">{{taxable_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n    </tr>\n    <tr>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none Heading"></td>\n      <td class="border-none Heading"><span class="Heading">Taxable Amt</span></td>\n      <td class="border-none">{{taxable_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n\n    </tr>\n    <tr style=" border: none;">\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none Heading"><span class="Heading">SGST </span> (1.5%) :</td>\n      <td class="border-none">{{SGST_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none Heading"><span class="Heading">CGST </span> (1.5%) :</td>\n      <td class="border-none">{{CGST_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none Heading"><span class="Heading">IGST:</span> (3.0%):</td>\n      <td class="border-none">{{IGST_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none Heading"><span class="Heading">Sales Total:</span></td>\n      <td class="border-none">{{SalesTotal_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n    </tr>\n  </table>\n</div>\n\n<div class="modal" id="myModal" *ngIf="Toggle">\n  <div class="modal-dialog modal-lg" style="max-width: 1000px;">\n    <div class="modal-content">\n\n      <div class="modal-header">\n        <h4 class="modal-title"> BarcodeNo : {{modalPopUPBarcode.BarcodeNo}} </h4>\n        <button type="button" class="close" data-dismiss="modal">&times;</button>\n      </div>\n\n      <div class="modal-body">\n        <div>\n          <div class="row">\n            <div class="col-md-8">\n              <div class="columns">\n                <div class="row">\n                  <div class="col-md-5">\n                    <ul class="price">\n                      <li>\n                        <span class="float-left">Item Qty</span>\n                        <span class="float-right">{{modalPopUPBarcode.ItemQty}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Gr. Wt(g)</span>\n                        <span class="float-right">{{modalPopUPBarcode.Grosswt | number : \'1.3-3\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">St Wt(g)</span>\n                        <span class="float-right">{{modalPopUPBarcode.Stonewt | number : \'1.3-3\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">N wt(g)</span>\n                        <span class="float-right">{{modalPopUPBarcode.Netwt | number : \'1.3-3\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Bill Qty</span>\n                        <span class="float-right">{{modalPopUPBarcode.ItemQty}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Bill Gr Wt</span>\n                        <span class="float-right">{{modalPopUPBarcode.Grosswt | number : \'1.3-3\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left font">Rate</span>\n                        <span class="float-right">{{modalPopUPBarcode.Rate | number : \'1.2-2\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Karat</span>\n                        <span class="float-right">{{modalPopUPBarcode.Karat}}</span>\n                      </li>\n                    </ul>\n                  </div>\n                  \x3c!-- <pre>{{SalesPersonModel | json}}</pre> --\x3e\n                  <div class="col-md-7">\n                    <form [formGroup]="SalesGSForm" class="form-horizontal">\n\n                      <div class="form-group">\n                        <label for="GS">GS</label>\n                        <div class="form-group">\n                          <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="GS"\n                            [(ngModel)]="SalesPersonModel.GS">\n                            <option *ngFor="let _GSList of GSList" [value]="_GSList.gs_code" [disabled]="readonly">\n                              {{_GSList.GSName}}\n                            </option>\n                          </select>\n                        </div>\n                      </div>\n                      <div class="form-group">\n                        <label for="ItemName">Item</label>\n                        <div class="form-group">\n                          <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="ItemName"\n                            [(ngModel)]="SalesPersonModel.ItemName">\n                            <option *ngFor="let _ItemName of ItemName" [value]="_ItemName.item_name"\n                              [disabled]="readonly">\n                              {{_ItemName.CodeName}}\n                            </option>\n                          </select>\n                        </div>\n                      </div>\n                    </form>\n                    <ul class="price">\n                      <li>\n                        <span class="float-left">Design</span>\n                        <span class="float-right">{{modalPopUPBarcode.DesignName}}</span>\n                      </li>\n\n                      <li>\n                        <span class="float-left">Counter</span>\n                        <span class="float-right">{{modalPopUPBarcode.CounterCode}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Size</span>\n                        <span class="float-right">{{modalPopUPBarcode.ItemSize}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Piece Item</span>\n                        <span class="float-right">{{modalPopUPBarcode.PieceRate}}</span>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n                <br>\n                <div class="row">\n                  <div class="col-md-4">\n                    <ul class="price">\n                      <li>\n                        <span class="float-left font">Order No</span>\n                        <span class="float-right"></span>\n                      </li>\n                    </ul>\n                  </div>\n                  <div class="col-md-4">\n                    <ul class="price">\n                      <li>\n                        <span class="float-left font">Order Rate</span>\n                        <span class="float-right"></span>\n                      </li>\n                    </ul>\n                  </div>\n                  <div class="col-md-4">\n                    <ul class="price">\n                      <li>\n                        <span class="float-left font">Order Karat</span>\n                        <span class="float-right"></span>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n                <br>\n                <div class="row">\n                  <div class="col-md-12">\n                    <h4 class="modal-title">MC Details of BarcodeNo : {{modalPopUPBarcode.BarcodeNo}} </h4>\n                    <div class="table-responsive">\n                      <table class="table table-bordered">\n                        <thead class="topbar">\n                          <tr>\n                            <th>MC Type</th>\n                            <th>MC/Gram</th>\n                            <th>MC/Piece</th>\n                            <th>MC%</th>\n                            <th>Wast.%</th>\n                            <th>MC Amt</th>\n                            <th>Wastage Grams</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr>\n                            <td>{{McType}}</td>\n                            <td></td>\n                            <td>{{modalPopUPBarcode.McPerPiece | number : \'1.2-2\'}}</td>\n                            <td>{{modalPopUPBarcode.McPercent | number : \'1.2-2\'}}</td>\n                            <td>{{modalPopUPBarcode.WastPercent | number : \'1.2-2\'}}</td>\n                            <td>{{modalPopUPBarcode.McAmount | number : \'1.2-2\'}}</td>\n                            <td>{{modalPopUPBarcode.WastageGrms | number : \'1.3-3\'}}</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n\n                </div>\n                <div class="row">\n                  <div class="col-md-12">\n                    <h4 class="modal-title">Stone Details of BarcodeNo : {{modalPopUPBarcode.BarcodeNo}} </h4>\n                    <div class="table-responsive">\n                      <table class="table table-bordered">\n                        <thead class="topbar">\n                          <tr>\n                            <th>Name</th>\n                            <th>Qty</th>\n                            <th>Carat</th>\n                            <th>Stone Wt</th>\n                            <th>Rate/gram</th>\n                            <th>Amount</th>\n                          </tr>\n                        </thead>\n                        <tbody *ngIf="!NoRecords">\n                          <tr>\n                            <td colspan="10">\n                              <h6 style="text-align: center">No Stone Records Found</h6>\n                            </td>\n                          </tr>\n                        </tbody>\n                        <tbody *ngIf="NoRecords">\n                          <tr *ngFor="let _stoneList of GetStoneList">\n                            <td>{{_stoneList.Name}}</td>\n                            <td>{{_stoneList.Qty}}</td>\n                            <td>{{_stoneList.Carrat}}</td>\n                            <td>{{_stoneList.StoneWt | number : \'1.3-3\'}}</td>\n                            <td>{{_stoneList.Rate | number : \'1.2-2\'}}</td>\n                            <td>{{_stoneList.Amount | number : \'1.2-2\'}}</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class="col-md-4">\n              <div class="columns">\n                <ul class="price">\n                  <li>\n                    <span class="float-left font">Billing N.Wt</span>\n                    <span class="float-right">{{modalPopUPBarcode.Netwt | number : \'1.3-3\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Discount MC%</span>\n                    <span class="float-right">{{modalPopUPBarcode.DiscountMc | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Total Sales Mc</span>\n                    <span class="float-right">{{modalPopUPBarcode.TotalSalesMc | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Mc Discount Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.McDiscountAmt | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Metal Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.GoldValue | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">MC Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.VaAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Stone Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.StoneCharges | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Diamond Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.DiamondCharges | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Item Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.ItemTotalAfterDiscount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left font">SGST Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.SGSTAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left font">CGST Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.CGSTAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left font">IGST Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.IGSTAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left font">CESS Amt</span>\n                    <span class="float-right"></span>\n                  </li>\n                </ul>\n                <ul class="price mt-3">\n                  <li>\n                    <span class="float-left font">Total Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.ItemFinalAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                </ul>\n                <ul class="price mt-3">\n                  <li>\n                    <span class="float-left">Discount</span>\n                    <span class="float-right">{{modalPopUPBarcode.ItemAdditionalDiscount | number : \'1.2-2\'}}</span>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>\n        <br>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade " id="addBarcode" data-backdrop="static" data-keyboard="false" style="overflow-y: scroll;\noverflow-x: hidden;">\n  <div class="modal-dialog" style="max-width: 1360px;">\n    <div class="modal-content">\n      \x3c!-- Modal Header --\x3e\n      <div class="modal-header">\n        <h3 class="modal-title">BarCode Details <div class="tooltipdesign"> <i class="fal fa-question-circle"></i>\n            <span class="tooltiptext ">BarCode Details.</span>\n          </div>\n        </h3>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      \x3c!-- Modal body --\x3e\n      <div class="modal-body">\n        <div class="container-fluid">\n          <div class="row">\n            <div class="col-md-12">\n              <app-add-barcode [BarCodeNo]="BarCodeNo"></app-add-barcode>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-container *ngIf="EnableDisablectrls">\n  <div class="row" *ngIf="ToggleCalculation">\n    <div class="col-md-3 ">\n      <button class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary "\n        style="margin-top: 1.8rem !important;" (click)="Submit()">\n        <i class="far fa-save"></i> Submit</button>\n    </div>\n  </div>\n</ng-container>\n<br>\n\x3c!--   --\x3e\n\n\x3c!-- <pre>{{SalesLinesPost | json}}</pre> --\x3e\n\n<div id="PermissonModalPos" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">\n  <div class="modal-dialog">\n    \x3c!-- Modal content--\x3e\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title">Prodigy</h4>\n        <button type="button" class="close" (click)="closePos()" aria-label="Close">\n          <span aria-hidden="true">&times;</span></button>\n      </div>\n      <div class="modal-body">\n        <div class="form-group">\n          <label for="OrderNo">90. Password</label>\n          <input type="password" min="0" class="form-control" name="pwd" placeholder="Password"\n            (keyup.enter)="passWordPos(PwdInterState.value)" #PwdInterState>\n        </div>\n        <div class="form-group">\n          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n            (click)="passWordPos(PwdInterState.value)">Submit</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n<div id="PermissonModalAddbarcode" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">\n  <div class="modal-dialog">\n\n    \x3c!-- Modal content--\x3e\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title">Prodigy</h4>\n        <button type="button" class="close" (click)="closeAddbarcode()" aria-label="Close">\n          <span aria-hidden="true">&times;</span></button>\n      </div>\n      <div class="modal-body">\n        <div class="form-group">\n          <label for="OrderNo">40. Password</label>\n          <input type="password" min="0" class="form-control" name="pwd" placeholder="Password"\n            (keyup.enter)="passWordAddbarcode(PwdAddBarcode.value)" #PwdAddBarcode>\n        </div>\n        <div class="form-group">\n          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n            (click)="passWordAddbarcode(PwdAddBarcode.value)">Submit</button>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n\n\x3c!--Group Barcoding--\x3e\n\n<div class="modal overlay" id="GroupBarcodingModal" role="dialog" data-backdrop="static" data-keyboard="false">\n\n  <div class="modal-dialog modal-lg" style="max-width: 1000px">\n    <div class="modal-content ">\n\n      \x3c!-- Modal Header --\x3e\n      <div class="modal-header">\n        <h4 class="modal-title">Barcode Details</h4>\n        <button type="button" class="close" data-dismiss="modal">&times;</button>\n      </div>\n\n      \x3c!-- Modal body --\x3e\n      <div class="modal-body">\n        <form [formGroup]="GroupBarcodingForm">\n          <table class="table">\n            <tbody>\n              <tr>\n                <td class="float-rt">Barcode No</td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.BarcodeNo"\n                    formControlName="BarcodeNo" readonly>\n                </td>\n                <td class="float-rt">\n                  Item Name\n                </td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.ItemName"\n                    formControlName="ItemName" readonly>\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available Qty</td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.ItemQty"\n                    formControlName="ItemQty" readonly>\n                </td>\n                <td class="float-rt">Billing Qty</td>\n                <td><input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.Quantity"\n                    formControlName="Quantity">\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available Gwt</td>\n                <td><input type="text" class="form-control" formControlName="Grosswt"\n                    [(ngModel)]="groupBarcodingModel.Grosswt" readonly>\n                </td>\n                <td class="float-rt">Billing Gwt</td>\n                <td><input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.BillingGrossWt"\n                    formControlName="BillingGrossWt" (change)="CalNtWt()">\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available Swt</td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.Stonewt"\n                    formControlName="Stonewt" readonly>\n                </td>\n                <td class="float-rt">Billing Swt</td>\n                <td><input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.BillingStoneWt"\n                    formControlName="BillingStoneWt" (change)="CalNtWt()">\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available Nwt</td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.Netwt"\n                    formControlName="Netwt" readonly>\n                </td>\n                <td class="float-rt">Billing Nwt</td>\n                <td><input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.BillingNetWt"\n                    formControlName="BillingNetWt" readonly>\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available St.Amt</td>\n                <td>\n                  <input type="text" class="form-control" readonly>\n                </td>\n                <td class="float-rt">Stone Amt</td>\n                <td><input type="text" class="form-control" readonly>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </form>\n      </div>\n      \x3c!-- Modal footer --\x3e\n      <div class="modal-footer">\n        <div class="input-group">\n          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary" (click)="Save()"\n            type="button"><i class="fal fa-save"></i> Save</button>\n          <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" type="button"\n            data-dismiss="modal"><i class="far fa-window-close"></i>\n            Exit</button>\n        </div>\n      </div>\n      \x3c!-- <pre>{{groupBarcodingModel | json}}</pre> --\x3e\n    </div>\n  </div>\n</div>'},rJ0g:function(e,t,s){"use strict";s.r(t);var a=s("mrSG"),n=s("mFkx"),o=s("fXoL"),r=s("ofXK"),l=s("5nbR"),i=s("tyNb"),d=s("f3Qm"),c=s("E2Nj"),u=s("NQ5e"),m=s("SlBg"),p=s("3Pt+"),h=s("GUC0"),f=s.n(h),S=s("KoPZ"),b=s("giQ8"),v=s("eya4"),g=s("NFKh"),P=s("5eHb"),y=s("qlSq"),B=function(){function e(t,s,a,n,r,l,i,d,c,u,m){_classCallCheck(this,e),this.formBuilder=t,this._salesService=s,this._CustomerService=a,this._estimationService=n,this._addBarcodeService=r,this._barcodedetailsService=l,this._orderservice=i,this._masterService=d,this._router=c,this.toastr=u,this._appConfigService=m,this.EnableDisablectrls=!0,this.submitted=!1,this.OrderNoFromEstComp=0,this.GetBarcodeList=[],this.ArrayList=[],this.OrderList=[],this.hasErrors=!1,this.id=0,this.readonly=!0,this.valueChange=new o.EventEmitter,this.ccode="",this.bcode="",this.GST=0,this.IGST=0,this.SalesSummaryData={Grwt:null,NtWt:null,SGst:null,CGst:null,IGst:null,TotalItems:null,Amount:null,taxable_Amt:null},this.SalesLinesPost={CompanyCode:this.ccode,BranchCode:this.bcode,CustID:0,GSType:"",EstNo:0,MobileNo:null,OperatorCode:null,OrderNo:0,Pos:null,IsOfferApplied:!1,IsOfferSkipped:!1,DiscountAmount:0,salesEstimatonVM:[]},this.CustomerDets=[],this.SalesEstNo=null,this.BarCodeNo="",this.arrayObj=[],this.GetAddBarcodeList=[],this.GetReservedBarcodeList=[],this.groupBarcodingModel={ObjID:null,ItemQty:null,CompanyCode:this.ccode,BranchCode:this.bcode,EstNo:null,SlNo:null,BillNo:null,BarcodeNo:this.BarCodeNo,SalCode:null,CounterCode:null,ItemName:null,ItemNo:null,Grosswt:null,Stonewt:null,Netwt:null,AddWt:null,BillQty:null,DeductWt:null,MakingChargePerRs:null,WastPercent:null,GoldValue:null,VaAmount:null,StoneCharges:null,DiamondCharges:null,TotalAmount:null,Hallmarkarges:null,McAmount:null,WastageGrms:null,McPercent:null,AddQty:null,DeductQty:null,OfferValue:null,UpdateOn:null,GsCode:null,Rate:null,Karat:null,AdBarcode:null,AdCounter:null,AdItem:null,IsEDApplicable:null,McType:null,Fin_Year:null,NewBillNo:null,ItemTotalAfterDiscount:null,ItemAdditionalDiscount:null,TaxPercentage:null,TaxAmount:null,ItemFinalAmount:null,SupplierCode:null,ItemSize:null,ImgID:null,DesignCode:null,DesignName:null,BatchID:null,Rf_ID:null,McPerPiece:null,DiscountMc:null,TotalSalesMc:null,McDiscountAmt:null,purchaseMc:null,GSTGroupCode:null,SGSTPercent:null,SGSTAmount:null,CGSTPercent:null,CGSTAmount:null,IGSTPercent:null,IGSTAmount:null,HSN:null,PieceRate:null,DeductSWt:null,OrdDiscountAmt:null,DedCounter:null,DedItem:null,isInterstate:0,TaggingType:null,Quantity:null,BillingGrossWt:null,BillingStoneWt:null,BillingNetWt:null,salesEstStoneVM:[]},this.interState=0,this.SalesPersonModel={CustID:null,salesPerson:null,barcode:null,GS:null,ItemName:null},this.ReprintData={EstNo:null,EstType:null},this.OrderNo=0,this.DiffMetalCheck=[],this.salesPerson="",this.Toggle=!1,this.ToggleCalculation=!1,this.NoRecords=!1,this.GetStoneList=[],this.GetStonearray=[],this.EditMode=!1,this.SalesAmount=0,this.SalesTotalAmount=0,this.SalesAmountChange=new o.EventEmitter,this.DelCoinOffer=new o.EventEmitter,this.EnablePos=!0,this.permissonModel={CompanyCode:null,BranchCode:null,PermissionID:null,PermissionData:null},this.EnableAddBarcode=!0,this.PlaceOfSupplyEdit=this._appConfigService.RateEditCode.PlaceOfSupplyEdit,this.AddBarcodePermission=this._appConfigService.RateEditCode.AddBarcodePermission,this.GST=Number(this._appConfigService.GST/100),this.IGST=Number(this._appConfigService.IGST/100),this.password=this._appConfigService.Pwd,this.getCB()}return _createClass(e,[{key:"getCB",value:function(){this.ccode=g.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(g.enc.Utf8),this.bcode=g.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(g.enc.Utf8)}},{key:"findErrorByField",value:function(e,t){var s=this.modelErrors.find((function(s){return s.field===e&&s.index===t}));return null!=s?s.description:""}},{key:"ngOnInit",value:function(){var e=this;this.GroupBarcodingForm=this.formBuilder.group({BarcodeNo:["",p.Validators.required],ItemName:["",p.Validators.required],ItemQty:["",p.Validators.required],Quantity:["",p.Validators.required],Grosswt:["",p.Validators.required],BillingGrossWt:["",p.Validators.required],Stonewt:["",p.Validators.required],BillingStoneWt:["",p.Validators.required],Netwt:["",p.Validators.required],BillingNetWt:["",p.Validators.required],ObjStatus:["",p.Validators.required],GSSeqNo:["",p.Validators.required],SchemeCode:["",p.Validators.required],VATID:["",p.Validators.required],OdLimit:["",p.Validators.required],UpdateOn:["",p.Validators.required],JFlag:["",p.Validators.required],PANCard:["",p.Validators.required],TIN:["",p.Validators.required],LedgerType:["",p.Validators.required],Address1:["",p.Validators.required],Address2:["",p.Validators.required],Address3:["",p.Validators.required],City:["",p.Validators.required],State:["",p.Validators.required],District:["",p.Validators.required],Country:["",p.Validators.required],PinCode:["",p.Validators.required],Phone:["",p.Validators.required],Mobile:["",p.Validators.required],FaxNo:["",p.Validators.required],WebSite:["",p.Validators.required],CSTNo:["",p.Validators.required],BudgetAmt:["",p.Validators.required],TDSID:["",p.Validators.required],EmailID:["",p.Validators.required],HSN:["",p.Validators.required],GSTGoodsGroupCode:["",p.Validators.required],GSTServicesGroupCode:["",p.Validators.required],StateCode:["",p.Validators.required],VTYPE:["",p.Validators.required],UniqRowID:["",p.Validators.required],TransType:["",p.Validators.required],IsAutomatic:["",p.Validators.required],Schedule_Name:["",p.Validators.required],NewAccCode:["",p.Validators.required],PartyACNo:["",p.Validators.required],PartyACName:["",p.Validators.required],PartyMICR_No:["",p.Validators.required],PartyBankName:["",p.Validators.required],PartyBankBranch:["",p.Validators.required],PartyBankAddress:["",p.Validators.required],PartyRTGScode:["",p.Validators.required],PartyNEFTcode:["",p.Validators.required],PartyIFSCcode:["",p.Validators.required],swiftcode:["",p.Validators.required]}),this.SalesSummaryData={Grwt:null,NtWt:null,SGst:null,CGst:null,IGst:null,TotalItems:null,Amount:null,taxable_Amt:null},this.SalesForm=this.formBuilder.group({salesPerson:[null,p.Validators.required],barcode:[null,p.Validators.required],orderNo:[null,p.Validators.required],GS:[null,p.Validators.required],StateCode:[null,p.Validators.required]}),this.SalesGSForm=this.formBuilder.group({GS:[null,p.Validators.required],ItemName:[null,p.Validators.required]}),this.Unsubscribe_obj=this._CustomerService.cast.subscribe((function(t){e.CustomerDets=t,null!=e.CustomerDets&&0!=e.CustomerDets?(e.SalesLinesPost.CustID=e.CustomerDets.ID,e.SalesLinesPost.MobileNo=e.CustomerDets.MobileNo,e.SalesLinesPost.OperatorCode=localStorage.getItem("Login"),e.SalesLinesPost.CompanyCode=e.ccode,e.SalesLinesPost.BranchCode=e.bcode):(e.SalesLinesPost.CustID=null,e.SalesLinesPost.OperatorCode=localStorage.getItem("Login"),e.SalesLinesPost.CompanyCode=e.ccode,e.SalesLinesPost.BranchCode=e.bcode)})),this.Unsubscribe_obj=this._estimationService.SubjectEstNo.subscribe((function(t){e.SalesEstNo=t,null!=e.SalesEstNo&&"0"!=e.SalesEstNo&&"/purchase"!=e._router.url&&e._salesService.castSalesDtls.subscribe((function(t){if(e.arrayObj=t,null!=e.arrayObj){e.SalesPersonModel.salesPerson=e.arrayObj.salesEstimatonVM[0].SalCode,e.SalesLinesPost.GSType=e.arrayObj.GSType,e.SalesLinesPost.OrderNo=e.arrayObj.OrderNo,e.SalesLinesPost.EstNo=e.SalesEstNo,e.SalesLinesPost.DiscountAmount=e.arrayObj.DiscountAmount,e.GetBarcodeList=e.arrayObj.salesEstimatonVM,e.SalesLinesPost.salesEstimatonVM=e.arrayObj.salesEstimatonVM,e.ToggleCalculation=!0,e.SendSalesDataToEstComp();for(var s=0;s<e.SalesLinesPost.salesEstimatonVM.length;s++)""==e.SalesLinesPost.salesEstimatonVM[s].BarcodeNo&&e.getGstPercent(e.SalesLinesPost.salesEstimatonVM[s].GsCode,e.SalesLinesPost.salesEstimatonVM[s].ItemName)}}))})),this.Unsubscribe_obj=this._addBarcodeService.cast.subscribe((function(t){if(e.GetAddBarcodeList=t,null!=e.SalesEstNo&&"0"!=e.SalesEstNo&&0==e.isEmptyObject(e.GetAddBarcodeList)&&null!=e.isEmptyObject(e.GetAddBarcodeList))if(0==e.SalesLinesPost.salesEstimatonVM.length){1==e.EditMode&&(e.GetBarcodeList.splice(e.IndexNo,1),e.EditMode=!1),e.GetBarcodeList.push(e.GetAddBarcodeList);for(var s=0;s<e.SalesLinesPost.salesEstimatonVM.length;s++)e.getGstPercent(e.SalesLinesPost.salesEstimatonVM[s].GsCode,e.SalesLinesPost.salesEstimatonVM[s].ItemName);e._addBarcodeService.SendBarcodeDataToSalesComp(null),e.GetAddBarcodeList=[],e.ToggleCalculation=!0}else if(1==e.EditMode){e.GetBarcodeList.splice(e.IndexNo,1),e.EditMode=!1,e.GetBarcodeList.push(e.GetAddBarcodeList);for(var a=0;a<e.SalesLinesPost.salesEstimatonVM.length;a++)e.getGstPercent(e.SalesLinesPost.salesEstimatonVM[a].GsCode,e.SalesLinesPost.salesEstimatonVM[a].ItemName);e.GetAddBarcodeList=[],e.ToggleCalculation=!0,e._addBarcodeService.SendBarcodeDataToSalesComp(null)}else e._salesService.BarcodeValidation(e.SalesLinesPost,e.GetAddBarcodeList.BarcodeNo,e.GetAddBarcodeList.GsCode).subscribe((function(t){if(e.DiffMetalValid=t,0==e.DiffMetalCheck.length){e.GetBarcodeList.push(e.GetAddBarcodeList);for(var s=0;s<e.SalesLinesPost.salesEstimatonVM.length;s++)e.getGstPercent(e.SalesLinesPost.salesEstimatonVM[s].GsCode,e.SalesLinesPost.salesEstimatonVM[s].ItemName);e.GetAddBarcodeList=[],e.ToggleCalculation=!0,e._addBarcodeService.SendBarcodeDataToSalesComp(null)}}),(function(e){$("#addBarcode").modal("hide")}));$("#addBarcode").modal("hide")})),this.Unsubscribe_obj=this._addBarcodeService.cast.subscribe((function(t){if(e.GetAddBarcodeList=t,(null==e.SalesEstNo||"0"==e.SalesEstNo)&&0==e.isEmptyObject(e.GetAddBarcodeList)&&null!=e.isEmptyObject(e.GetAddBarcodeList))if(0==e.SalesLinesPost.salesEstimatonVM.length){1==e.EditMode?(e.GetBarcodeList.splice(e.IndexNo,1),e.GetBarcodeList.push(e.GetAddBarcodeList),e.SalesLinesPost.salesEstimatonVM.splice(e.IndexNo,1),e.SalesLinesPost.salesEstimatonVM.push(e.GetAddBarcodeList),e.EditMode=!1):""!=e.SalesLinesPost.GSType?(e.GetBarcodeList.push(e.GetAddBarcodeList),e.SalesLinesPost.salesEstimatonVM.push(e.GetAddBarcodeList)):(e.SalesLinesPost.GSType=e.GetAddBarcodeList.GsCode,e.GetBarcodeList.push(e.GetAddBarcodeList),e.SalesLinesPost.salesEstimatonVM.push(e.GetAddBarcodeList));for(var s=0;s<e.SalesLinesPost.salesEstimatonVM.length;s++)e.getGstPercent(e.SalesLinesPost.salesEstimatonVM[s].GsCode,e.SalesLinesPost.salesEstimatonVM[s].ItemName);e._addBarcodeService.SendBarcodeDataToSalesComp(null),e.GetAddBarcodeList=[],e.ToggleCalculation=!0}else if(1==e.EditMode){e.GetBarcodeList.splice(e.IndexNo,1),e.GetBarcodeList.push(e.GetAddBarcodeList),e.SalesLinesPost.salesEstimatonVM.splice(e.IndexNo,1),e.SalesLinesPost.salesEstimatonVM.push(e.GetAddBarcodeList),e.EditMode=!1;for(var a=0;a<e.SalesLinesPost.salesEstimatonVM.length;a++)e.getGstPercent(e.SalesLinesPost.salesEstimatonVM[a].GsCode,e.SalesLinesPost.salesEstimatonVM[a].ItemName);e._addBarcodeService.SendBarcodeDataToSalesComp(null),e.GetAddBarcodeList=[],e.ToggleCalculation=!0}else e._salesService.BarcodeValidation(e.SalesLinesPost,e.GetAddBarcodeList.BarcodeNo,e.GetAddBarcodeList.GsCode).subscribe((function(t){if(e.DiffMetalValid=t,0==e.DiffMetalCheck.length){""!=e.SalesLinesPost.GSType?(e.GetBarcodeList.push(e.GetAddBarcodeList),e.SalesLinesPost.salesEstimatonVM.push(e.GetAddBarcodeList)):(e.SalesLinesPost.GSType=e.GetAddBarcodeList.GsCode,e.GetBarcodeList.push(e.GetAddBarcodeList),e.SalesLinesPost.salesEstimatonVM.push(e.GetAddBarcodeList));for(var s=0;s<e.SalesLinesPost.salesEstimatonVM.length;s++)e.getGstPercent(e.SalesLinesPost.salesEstimatonVM[s].GsCode,e.SalesLinesPost.salesEstimatonVM[s].ItemName);e._addBarcodeService.SendBarcodeDataToSalesComp(null),e.GetAddBarcodeList=[],e.ToggleCalculation=!0}}),(function(e){$("#addBarcode").modal("hide")}));$("#addBarcode").modal("hide")})),this.Unsubscribe_obj=this._estimationService.SubjectOrderNo.subscribe((function(t){e.OrderNoFromEstComp=t,0!=e.OrderNoFromEstComp&&e._salesService.castSalesDtls.subscribe((function(t){if(e.arrayObj=t,null!=e.arrayObj&&(e.SalesLinesPost.OrderNo=e.arrayObj.OrderNo,null!=e.arrayObj.salesEstimatonVM&&(e.GetBarcodeList=e.arrayObj.salesEstimatonVM,e.SalesLinesPost.salesEstimatonVM=e.arrayObj.salesEstimatonVM,e.ToggleCalculation=!0,e.SendSalesDataToEstComp(),e.SalesLinesPost.salesEstimatonVM.length>0)))for(var s=0;s<e.SalesLinesPost.salesEstimatonVM.length;s++)e.SalesLinesPost.salesEstimatonVM[s].SalCode="A",e.getGstPercent(e.SalesLinesPost.salesEstimatonVM[s].GsCode,e.SalesLinesPost.salesEstimatonVM[s].ItemName)}))})),this.Unsubscribe_obj=this._orderservice.castReservedOrderDetsToSalesComp.subscribe((function(t){if(e.GetReservedBarcodeList=t,e.GetReservedBarcodeList.length>0)for(var s=0;s<e.GetReservedBarcodeList.length;s++)e.GetBarcodeList.push(e.GetReservedBarcodeList[s]),e.SalesLinesPost.salesEstimatonVM.push(e.GetReservedBarcodeList[s])})),this.getStateList(),this.getSalesMan(),this.getGSList(),this.errors=[],this.modelErrors=[],this.hasErrors=!1,"/sales-billing"==this._router.url&&(this.EnableDisablectrls=!1),"/estimation"==this._router.url&&(this.EnableDisablectrls=!0),this.Unsubscribe_obj=this._estimationService.castCoinOfferDatatoSales.subscribe((function(t){e.CoinOfferBarcodeList=t,0==e.isEmptyObject(e.CoinOfferBarcodeList)&&null!=e.isEmptyObject(e.CoinOfferBarcodeList)&&(null!=e.CoinOfferBarcodeList.BarcodeNo&&e.getBarcodeDetails(e.CoinOfferBarcodeList.BarcodeNo,"",1),e.SalesLinesPost.DiscountAmount=e.CoinOfferBarcodeList.DisAmount,e.SalesLinesPost.IsOfferApplied=!0,e.SalesLinesPost.IsOfferSkipped=!1)}))}},{key:"getItem",value:function(){var e=this;this._masterService.getItemName(this.SalesGSForm.value.GS).subscribe((function(t){e.ItemName=t}))}},{key:"getStateList",value:function(){var e=this;this._CustomerService.getStateCode().subscribe((function(t){e.StateList=t,e._masterService.getCompanyMaster().subscribe((function(t){e.CompanyMaster=t,e.SalesLinesPost.Pos=e.CompanyMaster.StateCode}))}))}},{key:"SetInterState",value:function(e){if(this.EnablePos=!0,null!=this.GetBarcodeList)if(e!=this.CompanyMaster.StateCode)for(var t=0;t<this.GetBarcodeList.length;t++)this.GetBarcodeList[t].interState=1,this.GetBarcodeList[t].isInterstate=1,this.GetBarcodeList[t].IGSTAmount=Math.abs(this.GetBarcodeList[t].ItemTotalAfterDiscount*this.IGST).toFixed(2),this.GetBarcodeList[t].IGSTPercent=3,this.GetBarcodeList[t].SGSTAmount=0,this.GetBarcodeList[t].CGSTAmount=0,this.GetBarcodeList[t].CGSTPercent=0,this.GetBarcodeList[t].SGSTPercent=0;else for(var s=0;s<this.GetBarcodeList.length;s++)this.GetBarcodeList[s].interState=0,this.GetBarcodeList[s].isInterstate=0,this.GetBarcodeList[s].SGSTAmount=Math.abs(this.GetBarcodeList[s].ItemTotalAfterDiscount*this.GST).toFixed(2),this.GetBarcodeList[s].CGSTAmount=Math.abs(this.GetBarcodeList[s].ItemTotalAfterDiscount*this.GST).toFixed(2),this.GetBarcodeList[s].CGSTPercent=1.5,this.GetBarcodeList[s].SGSTPercent=1.5,this.GetBarcodeList[s].IGSTPercent=0,this.GetBarcodeList[s].IGSTAmount=0;e!=this.CompanyMaster.StateCode?this.interState=1:this.interState=0}},{key:"getSalesMan",value:function(){var e=this;this._masterService.getSalesMan().subscribe((function(t){e.SalesManList=t}))}},{key:"getMc",value:function(){var e=this;this._masterService.getMCTypes().subscribe((function(t){e.MCList=t}))}},{key:"getGSList",value:function(){var e=this;this._masterService.getGsList("S").subscribe((function(t){e.GSList=t}))}},{key:"getDetails",value:function(e){null==e.value.salesPerson?alert("Please select Sales Person"):null==e.value.barcode||""==e.value.barcode?alert("Please enter barcode"):null!=e.value.barcode&&""!=e.value.barcode&&(0==this.AlphaNumericValidations(e.value.barcode)?alert("Please enter valid Barcode No"):(this.addBarCode(e),this.SalesPersonModel.barcode="",this.getGSList(),this.getMc()))}},{key:"AlphaNumericValidations",value:function(e){return null==e||""==e||/^[a-zA-Z0-9]+$/g.test(e)}},{key:"ngAfterContentChecked",value:function(){this.PwdAddBarcode.nativeElement.focus(),this.PwdInterState.nativeElement.focus()}},{key:"AddBarcode",value:function(e){null==e.value.salesPerson?alert("Please select Sales Person"):(this._addBarcodeService.SendInterStateDataToAddBarCodeComp(this.SalesLinesPost),null==e.value.barcode||""==e.value.barcode?(this.PwdAddBarcode.nativeElement.value="",$("#PermissonModalAddbarcode").modal("show")):(this.getDetails(e),$("#addBarcode").modal("hide"),$("#PermissonModalAddbarcode").modal("hide")))}},{key:"addBarCode",value:function(e){null!=this.GetBarcodeList?null==this.GetBarcodeList.find((function(t){return t.BarcodeNo==e.value.barcode}))?(this.getBarcodeDetails(e.value.barcode,e.value.salesPerson,0),this.SalesPersonModel.barcode=""):f()("Warning!","Barcode number already added","warning"):(this.GetBarcodeList=[],this.getBarcodeDetails(e.value.barcode,e.value.salesPerson,0),this.SalesPersonModel.barcode="")}},{key:"validateDiffMetal",value:function(){}},{key:"getOrderBarcodeDetails",value:function(e){var t=this;this._salesService.getOrderEst(e).subscribe((function(e){t.OrderList.push(e);for(var s=0;s<t.OrderList.length;s++)t.ArrayList.push(t.OrderList[0][s]);t.GetBarcodeList.push(t.ArrayList[0]),null==t.SalesEstNo&&(t.SalesLinesPost.salesEstimatonVM.push(t.ArrayList[0]),t.SalesLinesPost.GSType=t.ArrayList[0].GsCode),t.ToggleCalculation=!0,t.ArrayList=[],t.OrderList=[]}),(function(e){if(400===e.status){var s=e.error;alert(s.description)}else t.errors.push("something went wrong!")}))}},{key:"getBarcodeDetails",value:function(e,t,s){var a=this;this._estimationService.SubjectOrderNo.subscribe((function(e){a.OrderNo=e,0!=a.OrderNo&&(a.SalesEstNo=null,a.SalesLinesPost.OrderNo=a.OrderNo)})),this.salesPerson=t,this._salesService.getBarcodefromAPI(e,this.OrderNo,this.interState,s).subscribe((function(t){a.DiffMetalCheck.push(t),"G"==a.DiffMetalCheck[0].TaggingType?($("#GroupBarcodingModal").modal("show"),a.groupBarcodingModel=a.DiffMetalCheck[0]):($("#GroupBarcodingModal").modal("hide"),a._salesService.BarcodeValidation(a.SalesLinesPost,e,a.DiffMetalCheck[0].GsCode).subscribe((function(e){a.ArrayList=a.DiffMetalCheck,a.ArrayList[0].SalCode=a.salesPerson,a.getGstPercent(a.ArrayList[0].GsCode,a.ArrayList[0].ItemName),a.GetBarcodeList.push(a.ArrayList[0]),null==a.SalesEstNo&&a.SalesLinesPost.salesEstimatonVM.push(a.ArrayList[0]),a.SalesLinesPost.GSType=a.ArrayList[0].GsCode,a.ToggleCalculation=!0,a.SendSalesDataToEstComp(),a.ArrayList=[],a.DiffMetalCheck=[]})))}),(function(e){400===e.status?e.error:a.errors.push("something went wrong!")}))}},{key:"GetBarcodeInfo",value:function(e){var t=this;this.Toggle=!0,this.modalPopUPBarcode=null,this.modalPopUPBarcode=e,this.getGSList(),this.SalesPersonModel.GS=this.modalPopUPBarcode.GsCode,this._masterService.getItemName(this.SalesPersonModel.GS).subscribe((function(e){t.ItemName=e,t.SalesPersonModel.ItemName=t.modalPopUPBarcode.ItemName})),this.getGetStoneListDetails(e),this.getMCTypes(this.modalPopUPBarcode.McType)}},{key:"getMCTypes",value:function(e){var t=this;this._orderservice.getMCTypes().subscribe((function(s){t.MCTypeList=s,t.McType=t.MCTypeList.filter((function(t){return t.MC_ID===e})),t.McType=t.McType[0].MC_NAME}))}},{key:"getGetStoneListDetails",value:function(e){this.GetStoneList=[],this.GetStonearray=e.salesEstStoneVM;for(var t=0;t<this.GetStonearray.length;t++)this.GetStoneList.push(this.GetStonearray[t]);0==this.isEmptyObject(this.GetStoneList)?this.NoRecords=!0:this.NoRecords=!1}},{key:"SendSalesDataToEstComp",value:function(){this._salesService.SendSalesDataToEstComp(this.SalesSummaryData)}},{key:"isEmptyObject",value:function(e){return e&&0===Object.keys(e).length}},{key:"onSubmit",value:function(){this.submitted=!0,this.SalesForm.invalid}},{key:"EditTagRow",value:function(e,t){"G"==t.TaggingType?f()("Warning!","Group Barcode cannot be edited","warning"):""==t.IsEDApplicable||null==t.IsEDApplicable?(this.IndexNo=e,this._salesService.SendSalesDataToAddBarcode(null),this._salesService.SendSalesDataToAddBarcode(t),this._estimationService.SendOrderNoToSalesComp(this.SalesLinesPost.OrderNo),$("#addBarcode").modal("show"),this.EditMode=!0):f()("Warning!","Offer coins cannot be edited","warning")}},{key:"Submit",value:function(){var e,t=this;null==this.SalesLinesPost.Pos?this.toastr.warning("Please select Pos","Alert!"):this.SalesLinesPost.salesEstimatonVM.length<=0?this.toastr.warning("Please enter Sales Details","Alert!"):(this.Duplicateobject=null,this.removeDuplicates(),null!=this.Duplicateobject?this.toastr.warning("Please remove the duplicate barcode","Alert!"):confirm("Do you want to save??")&&(this.SendSalesDataToEstComp(),null==this.SalesLinesPost.EstNo||0==this.SalesLinesPost.EstNo?this._salesService.post(this.SalesLinesPost).subscribe((function(s){e=s,f()("Saved!","Estimation number "+e.EstMationNo+" Created","success"),t._salesService.SendEstNo_To_Purchase(e.EstMationNo),t._estimationService.SendEstNo(e.EstMationNo),t._salesService.salesDetails(t.SalesLinesPost),t.SalesLinesPost.EstNo=e.EstMationNo,t.ReprintData={EstNo:e.EstMationNo,EstType:"S"},t._estimationService.SendReprintData(t.ReprintData)}),(function(s){if(403===s.status){var a=s.error;confirm("Estimation is Eligible for Free Gift. Do You Want to Issue??")?t._estimationService.SendTotalCoinOffer(a.Value):confirm("Do you want to save Sales Estimation??")&&(t.SalesLinesPost.IsOfferApplied=!1,t.SalesLinesPost.IsOfferSkipped=!0,t.SendSalesDataToEstComp(),null!=t.SalesLinesPost.EstNo&&0!=t.SalesLinesPost.EstNo||t._salesService.post(t.SalesLinesPost).subscribe((function(s){e=s,f()("Saved!","Estimation number "+e.EstMationNo+" Created","success"),t._salesService.SendEstNo_To_Purchase(e.EstMationNo),t._estimationService.SendEstNo(e.EstMationNo),t._salesService.salesDetails(t.SalesLinesPost),t.SalesLinesPost.EstNo=e.EstMationNo,t.ReprintData={EstNo:e.EstMationNo,EstType:"S"},t._estimationService.SendReprintData(t.ReprintData)})))}})):this._salesService.put(this.SalesLinesPost,this.SalesLinesPost.EstNo).subscribe((function(s){e=s,f()("Updated!","Estimation number "+e.EstMationNo+" Updated","success"),t._salesService.SendEstNo_To_Purchase(e.EstMationNo),t._estimationService.SendEstNo(e.EstMationNo),t._salesService.salesDetails(t.SalesLinesPost),t.ReprintData={EstNo:e.EstMationNo,EstType:"S"},t._estimationService.SendReprintData(t.ReprintData)}),(function(s){if(403===s.status){var a=s.error;confirm("Estimation is Eligible for Free Gift. Do You Want to Issue??")?t._estimationService.SendTotalCoinOffer(a.Value):confirm("Do you want to save Sales Estimation??")&&(t.SalesLinesPost.IsOfferApplied=!1,t.SalesLinesPost.IsOfferSkipped=!0,t.SendSalesDataToEstComp(),t._salesService.put(t.SalesLinesPost,t.SalesLinesPost.EstNo).subscribe((function(s){e=s,f()("Updated!","Estimation number "+e.EstMationNo+" Updated","success"),t._salesService.SendEstNo_To_Purchase(e.EstMationNo),t._estimationService.SendEstNo(e.EstMationNo),t._salesService.salesDetails(t.SalesLinesPost),t.ReprintData={EstNo:e.EstMationNo,EstType:"S"},t._estimationService.SendReprintData(t.ReprintData)})))}}))))}},{key:"ngOnDestroy",value:function(){this._salesService.SaveSalesEstNo(null),this._CustomerService.SendCustDataToEstComp(null),this._salesService.salesDetails(null)}},{key:"valueChanged",value:function(e){this.SalesAmount=e,this.valueChange.emit(this.SalesAmount)}},{key:"SalesAmountChanged",value:function(e){this.SalesTotalAmount=e,this.SalesAmountChange.emit(this.SalesTotalAmount)}},{key:"DeleteDiscountCoinOffer",value:function(e){this.DelCoinOffer.emit(e)}},{key:"removeDuplicates",value:function(){var e,t=_createForOfIteratorHelper(this.SalesLinesPost.salesEstimatonVM);try{for(t.s();!(e=t.n()).done;){var s,a=e.value,n=_createForOfIteratorHelper(this.SalesLinesPost.salesEstimatonVM);try{for(n.s();!(s=n.n()).done;){var o=s.value;if(a!=o&&""!=a.BarcodeNo&&o.BarcodeNo===a.BarcodeNo){this.Duplicateobject=a;break}}}catch(r){n.e(r)}finally{n.f()}}}catch(r){t.e(r)}finally{t.f()}}},{key:"DeleteTagRow",value:function(e,t){""!=this.GetBarcodeList[e].IsEDApplicable&&null!=this.GetBarcodeList[e].IsEDApplicable?confirm("Do you want to delete")&&confirm("All gift items are removed,Re-issue the gift items.Do you want to continue?")&&(this.DeleteDiscountCoinOffer(1),this.GetBarcodeList.splice(e,1),this.SalesLinesPost.salesEstimatonVM.splice(e,1),this.ClearBarcodeDets(),this.SalesLinesPost.IsOfferApplied=!1,this.SalesLinesPost.IsOfferSkipped=!0):confirm("Do you want to delete")&&(this.DeleteDiscountCoinOffer(0),this.valueChanged(this.GetBarcodeList[e].ItemFinalAmount),this.GetBarcodeList.splice(e,1),this.SalesLinesPost.salesEstimatonVM.splice(e,1),this.ClearBarcodeDets())}},{key:"ClearBarcodeDets",value:function(){this.GetBarcodeList.length<=0&&(this.SalesLinesPost.GSType="")}},{key:"total_items",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){t+=parseInt(e.ItemQty)})),this.SalesSummaryData.TotalItems=t,t}},{key:"grossWT",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){t+=e.Grosswt})),this.SalesSummaryData.Grwt=t,t}},{key:"netWT",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){t+=e.Netwt})),this.SalesSummaryData.NtWt=t,t}},{key:"getGstPercent",value:function(e,t){var s=this;this._masterService.getGSTPercent(e,t).subscribe((function(e){s.GstPercentList=e,s.CGSTPer=s.GstPercentList[0].GSTPercent,s.SGSTPer=s.GstPercentList[1].GSTPercent,s.IGSTPer=s.GstPercentList[2].GSTPercent}))}},{key:"Rate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){t+=e.Rate})),t}},{key:"metal_amount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){""!=e.IsEDApplicable&&null!=e.IsEDApplicable||(t+=e.GoldValue)})),t}},{key:"stone_amount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){""!=e.IsEDApplicable&&null!=e.IsEDApplicable||(t+=e.StoneCharges)})),t}},{key:"va_amount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){""!=e.IsEDApplicable&&null!=e.IsEDApplicable||(t+=e.VaAmount)})),t}},{key:"taxable_amount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){""!=e.IsEDApplicable&&null!=e.IsEDApplicable||(t+=e.ItemTotalAfterDiscount)})),this.SalesSummaryData.taxable_Amt=t,t}},{key:"SGST_amount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){null!=e.SGSTAmount&&0!=e.SGSTAmount&&(""!=e.IsEDApplicable&&null!=e.IsEDApplicable||(t+=Number(e.SGSTAmount)))})),this.SalesSummaryData.SGst=t,t}},{key:"CGST_amount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){null!=e.CGSTAmount&&0!=e.CGSTAmount&&(""!=e.IsEDApplicable&&null!=e.IsEDApplicable||(t+=Number(e.CGSTAmount)))})),this.SalesSummaryData.CGst=t,t}},{key:"IGST_amount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){null!=e.IGSTAmount&&0!=e.IGSTAmount&&(""!=e.IsEDApplicable&&null!=e.IsEDApplicable||(t+=Number(e.IGSTAmount)))})),this.SalesSummaryData.IGst=t,t}},{key:"SalesTotal_amount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.forEach((function(e){""!=e.IsEDApplicable&&null!=e.IsEDApplicable||(t+=Number(e.ItemFinalAmount))})),this.SalesSummaryData.Amount=t,this.SalesAmountChanged(t),t}},{key:"EditPos",value:function(){$("#PermissonModalPos").modal("show"),this.PwdInterState.nativeElement.value=""}},{key:"passWordPos",value:function(e){var t=this;""==e?(this.toastr.warning("Please Enter the Password","Alert!"),$("#PermissonModalPos").modal("show"),this.EnablePos=!0):(this.permissonModel.CompanyCode=this.ccode,this.permissonModel.BranchCode=this.bcode,this.permissonModel.PermissionID=this.PlaceOfSupplyEdit,this.permissonModel.PermissionData=btoa(e),this._masterService.postelevatedpermission(this.permissonModel).subscribe((function(e){t.EnablePos=!1,$("#PermissonModalPos").modal("hide")}),(function(e){401===e.status&&($("#PermissonModalPos").modal("show"),t.EnablePos=!0)})))}},{key:"passWordAddbarcode",value:function(e){var t=this;""==e?(this.toastr.warning("Please Enter the Password","Alert!"),$("#PermissonModalAddbarcode").modal("show"),this.EnableAddBarcode=!0):(this.permissonModel.CompanyCode=this.ccode,this.permissonModel.BranchCode=this.bcode,this.permissonModel.PermissionID=this.AddBarcodePermission,this.permissonModel.PermissionData=btoa(e),this._masterService.postelevatedpermission(this.permissonModel).subscribe((function(e){t.EnableAddBarcode=!1,$("#PermissonModalAddbarcode").modal("hide"),$("#addBarcode").modal("show"),t._salesService.SendSalesBarcode("true"),t.EditMode=!1,t.PwdAddBarcode.nativeElement.value=""}),(function(e){401===e.status&&($("#PermissonModalAddbarcode").modal("show"),t.EnableAddBarcode=!0)})))}},{key:"closePos",value:function(){$("#PermissonModalPos").modal("hide")}},{key:"closeAddbarcode",value:function(){$("#PermissonModalAddbarcode").modal("hide")}},{key:"Save",value:function(){var e=this;this._addBarcodeService.calculateBarcode(this.groupBarcodingModel).subscribe((function(t){e.GroupBarcodeDets=t,e.ArrayList.push(e.GroupBarcodeDets),e.ArrayList[0].SalCode=e.salesPerson,e.getGstPercent(e.ArrayList[0].GsCode,e.ArrayList[0].ItemName),e.GetBarcodeList.push(e.ArrayList[0]),null==e.SalesEstNo&&e.SalesLinesPost.salesEstimatonVM.push(e.ArrayList[0]),e.SalesLinesPost.GSType=e.ArrayList[0].GsCode,e.ToggleCalculation=!0,e.SendSalesDataToEstComp(),e.ArrayList=[],e.DiffMetalCheck=[],e.GroupBarcodeDets=null,$("#GroupBarcodingModal").modal("hide")}))}},{key:"CalNtWt",value:function(){this.groupBarcodingModel.BillingNetWt=this.groupBarcodingModel.BillingGrossWt-this.groupBarcodingModel.BillingStoneWt}},{key:"f",get:function(){return this.SalesForm.controls}}]),e}();B.ctorParameters=function(){return[{type:p.FormBuilder},{type:u.a},{type:c.a},{type:m.a},{type:d.a},{type:S.a},{type:b.a},{type:v.a},{type:i.c},{type:P.b},{type:y.a}]},a.a([Object(o.ViewChild)("PwdInterState",{static:!0}),a.c("design:type",o.ElementRef)],B.prototype,"PwdInterState",void 0),a.a([Object(o.ViewChild)("PwdAddBarcode",{static:!0}),a.c("design:type",o.ElementRef)],B.prototype,"PwdAddBarcode",void 0),a.a([Object(o.Output)(),a.c("design:type",Object)],B.prototype,"valueChange",void 0),a.a([Object(o.Output)(),a.c("design:type",Object)],B.prototype,"SalesAmountChange",void 0),a.a([Object(o.Output)(),a.c("design:type",Object)],B.prototype,"DelCoinOffer",void 0),B=a.a([Object(o.Component)({selector:"app-sales",template:a.b(s("ezid")).default,styles:[a.b(s("YHdl")).default]}),a.c("design:paramtypes",[p.FormBuilder,u.a,c.a,m.a,d.a,S.a,b.a,v.a,i.c,P.b,y.a])],B);var G=[{path:"",canActivate:[l.a],canActivateChild:[l.a],component:B,data:{title:"Sales",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Sales"}]}}],L=function e(){_classCallCheck(this,e)};L=a.a([Object(o.NgModule)({imports:[i.d.forChild(G)],exports:[i.d]})],L),s.d(t,"SalesModule",(function(){return C}));var C=function e(){_classCallCheck(this,e)};C=a.a([Object(o.NgModule)({declarations:[B],imports:[r.CommonModule,L,p.ReactiveFormsModule,p.FormsModule,n.AddBarcodeModule],exports:[B],schemas:[o.CUSTOM_ELEMENTS_SCHEMA]})],C)}}]);