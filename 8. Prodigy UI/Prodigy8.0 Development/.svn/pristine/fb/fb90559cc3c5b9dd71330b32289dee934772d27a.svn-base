(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{KoPZ:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var a=s("mrSG"),o=s("fXoL"),n=s("tk/3");let i=class{constructor(t){this._http=t}};i.ctorParameters=()=>[{type:n.b}],i=a.a([Object(o.Injectable)({providedIn:"root"}),a.c("design:paramtypes",[n.b])],i)},YHdl:function(t,e,s){"use strict";s.r(e),e.default='.card-title {\r\n  margin-bottom: -0.3rem !important;\r\n}\r\n\r\n.table-responsive {\r\n  display: block;\r\n  width: 99.9% !important;\r\n  overflow-x: auto;\r\n  -ms-overflow-style: -ms-autohiding-scrollbar;\r\n}\r\n\r\n.hiddenRow {\r\n  padding: 0 !important;\r\n}\r\n\r\n.wrapper{\r\n  margin: auto 3em auto 3em;\r\n}\r\n\r\n@media (min-width:2200px) and (max-width: 2440px) {\r\n  .table-responsive {\r\n   overflow-x: hidden !important;\r\n\r\n}\r\n}\r\n\r\n@media (min-width: 300px) and (max-width: 2200px) {\r\n  .table-responsive {\r\n  overflow-x: auto !important;\r\n\r\n}}\r\n\r\n.card-header{\r\n  border-radius: 15px !important;\r\n}\r\n\r\n.card{\r\n  border-radius: 15px !important;  \r\n}\r\n\r\n.card-body{ \r\n  padding: 10px 30px 0px 30px !important; \r\n  border-bottom: 2px solid black;\r\n  border-radius: 15px;\r\n}\r\n\r\n.p-38 { height: 38px; }\r\n\r\n.text-white { color: white;}\r\n\r\n.Pointer { cursor: pointer; }\r\n\r\n.footer {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.hide{\r\n display: hide;\r\n}\r\n\r\n.show{\r\n  display: block;\r\n}\r\n\r\n.accordion .card-header.collapsed:after {\r\n  /* symbol for "collapsed" panels */\r\n  content: "\\f067"; \r\n  position: absolute;\r\n  right: 20px;\r\n  font-size: 20px;\r\n  font-weight: 400;\r\n\r\n  line-height: 1;\r\n  margin-top: -25px;\r\n  transition: .3s transform ease-in-out;\r\n}\r\n\r\n.accordion .card-header:after {\r\n  font-family: \'FontAwesome\';  \r\n  content: "\\f068";\r\n  position: absolute;\r\n  right: 20px;\r\n  font-size: 20px;\r\n  font-weight: 400;\r\n  line-height: 1;\r\n  margin-top: -25px;\r\n}\r\n\r\n.text-red{\r\n  color:red;\r\n}\r\n\r\n.text-green{\r\ncolor:#16d616; \r\n}\r\n\r\n.center {\r\n  margin: auto;\r\n  width: 70%;\r\n  padding: 5px;\r\n}'},ezid:function(t,e,s){"use strict";s.r(e),e.default='\x3c!-- {{CustomerDets | json}} --\x3e\n<form [formGroup]="SalesForm" class="form-horizontal" (ngSubmit)="onSubmit()">\n  <div class="row" *ngIf="EnableDisablectrls">\n    <div class="col-md-3 ">\n      <div class="form-group">\n        <label for="salesPerson">Sales Person</label>\n        <div class="form-group">\n          <select class="form-control mr-auto mt-2 mt-lg-0" Autofocus formControlName="salesPerson"\n            [(ngModel)]="SalesPersonModel.salesPerson">\n            <option [ngValue]="null">Select</option>\n            <option *ngFor="let _salesman of SalesManList" [value]="_salesman.sal_code">\n              {{_salesman.CodeName}}\n            </option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-3 ">\n      <div class="form-group">\n        <label for="barcode">Barcode/Tag No.</label>\n        <div class="input-group">\n          \x3c!-- <input class="form-control" id="barcode" formControlName="barcode" [(ngModel)]="SalesPersonModel.barcode"\n            placeholder="Search by Barcode" type="text" (keyup.enter)="getDetails(SalesForm)"> --\x3e\n          <input class="form-control" id="barcode" formControlName="barcode" [(ngModel)]="SalesPersonModel.barcode"\n            placeholder="Search by Barcode" type="text" onKeyPress="if(this.value.length==10) return false;"\n            (keyup.enter)="getDetails(SalesForm)">\n        </div>\n      </div>\n    </div>\n    <div class="col-md-2">\n      <div class="form-group">\n        <label for="barcode"></label>\n        <div class="input-group">\n          <a href="javascript:void(0)" class="btn waves-effect waves-light btn-rounded btn-outline-secondary pull-right"\n            (click)="AddBarcode(SalesForm)"><i class="fas fa-barcode"></i> Add Barcode</a>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-3 ">\n      <div class="form-group">\n        <label for="salesPerson">Place of Supply</label>\n        <div class="form-group">\n          <select class="form-control" formControlName="StateCode" [(ngModel)]="SalesLinesPost.Pos"\n            (change)="SetInterState(SalesLinesPost.Pos)">\n            <option [ngValue]="null" [disabled]="EnablePos">Select State</option>\n            <option *ngFor="let State of StateList" [ngValue]="State.TINNo" [disabled]="EnablePos">\n              {{State.StateName}}\n            </option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-1">\n      <div class="text-right">&nbsp;\n        <button class="btn btn-success btn-rounded" type="button" (click)="EditPos()"><i\n            class="fal fa-edit"></i>Edit</button>\n      </div>\n    </div>\n  </div>\n</form>\n<div class="table-responsive" *ngIf="ToggleCalculation">\n  <table class="table" id="panels">\n    <thead class="topbar">\n      <tr>\n        <th *ngIf="EnableDisablectrls">Action</th>\n        <th>Barcode</th>\n        <th>Item </th>\n        <th>Qty</th>\n        <th>Gr.Wt</th>\n        <th>Nt.Wt</th>\n        <th>Rate/gram</th>\n        <th>Metal Amt</th>\n        <th>St Amt</th>\n        <th>Dia Amt</th>\n        <th>VA Amt</th>\n        <th>Item Total</th>\n        <th>SGST</th>\n        <th>CGST</th>\n        <th>IGST</th>\n        <th>Sales Total</th>\n      </tr>\n    </thead>\n    <tbody *ngFor="let _GetBarcodeList of GetBarcodeList; let i = index">\n      <tr>\n        <td *ngIf="EnableDisablectrls">\n          \x3c!-- <i class="far fa-eye fa-1-5x pointer" aria-hidden="true" style=\'color: #009688; font-size: 1.5em !important;\'\n            data-toggle="modal" data-target="#myModal" (click)="GetBarcodeInfo(_GetBarcodeList)"></i> --\x3e\n          <i class="far fa-pen fa-1-5x pointer" style=\'color: orange; font-size: 1.5em !important;\'\n            (click)="EditTagRow(i,_GetBarcodeList)"></i>\n          <i class="far fa-trash-alt fa-1-5x pointer" style=\'color: red; font-size: 1.5em !important;\'\n            (click)="DeleteTagRow(i,_GetBarcodeList)"></i>\n        </td>\n        <td>{{_GetBarcodeList.BarcodeNo}}</td>\n        <td>{{_GetBarcodeList.ItemName}}</td>\n        <td>{{_GetBarcodeList.ItemQty}}</td>\n        \x3c!-- <td>{{_GetBarcodeList.Grosswt | number : \'1.3-3\' }}</td>\n        <td>{{_GetBarcodeList.Netwt | number : \'1.3-3\'}}</td> --\x3e\n        <td>{{ _GetBarcodeList.Grosswt +  _GetBarcodeList.AddWt - _GetBarcodeList.DeductWt  | number : \'1.3-3\' }}</td>\n        <td>\n          {{_GetBarcodeList.Grosswt +  _GetBarcodeList.AddWt - _GetBarcodeList.Stonewt - _GetBarcodeList.DeductWt | number : \'1.3-3\'}}\n        </td>\n        <td>{{_GetBarcodeList.Rate | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.GoldValue | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.StoneCharges | number : \'1.2-2\' }}</td>\n        <td>{{_GetBarcodeList.DiamondCharges | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.VaAmount | number : \'1.2-2\' }}</td>\n        <td>{{_GetBarcodeList.ItemTotalAfterDiscount | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.SGSTAmount | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.CGSTAmount | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.IGSTAmount | number : \'1.2-2\'}}</td>\n        <td>{{_GetBarcodeList.ItemFinalAmount | number : \'1.2-2\'}}</td>\n      </tr>\n    </tbody>\n    <tr>\n      <td *ngIf="EnableDisablectrls" class="border-none"><b>Grand Total</b></td>\n      <td class="border-none"></td>\n      <td class="border-none">No. of items:</td>\n      <td class="border-none">{{total_items(GetBarcodeList) | number}}</td>\n      <td class="border-none">{{grossWT(GetBarcodeList) | number : \'1.3-3\'}}</td>\n      <td class="border-none">{{netWT(GetBarcodeList) | number : \'1.3-3\'}}</td>\n      <td class="border-none"></td>\n      \x3c!-- <td class="border-none">{{Rate(GetBarcodeList) | number : \'1.2-2\'}}</td> --\x3e\n      <td class="border-none">{{metal_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none">{{stone_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none"></td>\n      <td class="border-none">{{va_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none">{{taxable_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n    </tr>\n    <tr>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none Heading"></td>\n      <td class="border-none Heading"><span class="Heading">Taxable Amt</span></td>\n      <td class="border-none">{{taxable_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n\n    </tr>\n    <tr style=" border: none;">\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none Heading"><span class="Heading">SGST </span> (1.5%) :</td>\n      <td class="border-none">{{SGST_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none Heading"><span class="Heading">CGST </span> (1.5%) :</td>\n      <td class="border-none">{{CGST_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none Heading"><span class="Heading">IGST:</span> (3.0%):</td>\n      <td class="border-none">{{IGST_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none Heading"><span class="Heading">Sales Total:</span></td>\n      <td class="border-none">{{SalesTotal_amount(GetBarcodeList) | number : \'1.2-2\'}}</td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n      <td class="border-none"></td>\n    </tr>\n  </table>\n</div>\n\n<div class="modal" id="myModal" *ngIf="Toggle">\n  <div class="modal-dialog modal-lg" style="max-width: 1000px;">\n    <div class="modal-content">\n\n      <div class="modal-header">\n        <h4 class="modal-title"> BarcodeNo : {{modalPopUPBarcode.BarcodeNo}} </h4>\n        <button type="button" class="close" data-dismiss="modal">&times;</button>\n      </div>\n\n      <div class="modal-body">\n        <div>\n          <div class="row">\n            <div class="col-md-8">\n              <div class="columns">\n                <div class="row">\n                  <div class="col-md-5">\n                    <ul class="price">\n                      <li>\n                        <span class="float-left">Item Qty</span>\n                        <span class="float-right">{{modalPopUPBarcode.ItemQty}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Gr. Wt(g)</span>\n                        <span class="float-right">{{modalPopUPBarcode.Grosswt | number : \'1.3-3\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">St Wt(g)</span>\n                        <span class="float-right">{{modalPopUPBarcode.Stonewt | number : \'1.3-3\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">N wt(g)</span>\n                        <span class="float-right">{{modalPopUPBarcode.Netwt | number : \'1.3-3\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Bill Qty</span>\n                        <span class="float-right">{{modalPopUPBarcode.ItemQty}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Bill Gr Wt</span>\n                        <span class="float-right">{{modalPopUPBarcode.Grosswt | number : \'1.3-3\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left font">Rate</span>\n                        <span class="float-right">{{modalPopUPBarcode.Rate | number : \'1.2-2\'}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Karat</span>\n                        <span class="float-right">{{modalPopUPBarcode.Karat}}</span>\n                      </li>\n                    </ul>\n                  </div>\n                  \x3c!-- <pre>{{SalesPersonModel | json}}</pre> --\x3e\n                  <div class="col-md-7">\n                    <form [formGroup]="SalesGSForm" class="form-horizontal">\n\n                      <div class="form-group">\n                        <label for="GS">GS</label>\n                        <div class="form-group">\n                          <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="GS"\n                            [(ngModel)]="SalesPersonModel.GS">\n                            <option *ngFor="let _GSList of GSList" [value]="_GSList.gs_code" [disabled]="readonly">\n                              {{_GSList.GSName}}\n                            </option>\n                          </select>\n                        </div>\n                      </div>\n                      <div class="form-group">\n                        <label for="ItemName">Item</label>\n                        <div class="form-group">\n                          <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="ItemName"\n                            [(ngModel)]="SalesPersonModel.ItemName">\n                            <option *ngFor="let _ItemName of ItemName" [value]="_ItemName.item_name"\n                              [disabled]="readonly">\n                              {{_ItemName.CodeName}}\n                            </option>\n                          </select>\n                        </div>\n                      </div>\n                    </form>\n                    <ul class="price">\n                      <li>\n                        <span class="float-left">Design</span>\n                        <span class="float-right">{{modalPopUPBarcode.DesignName}}</span>\n                      </li>\n\n                      <li>\n                        <span class="float-left">Counter</span>\n                        <span class="float-right">{{modalPopUPBarcode.CounterCode}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Size</span>\n                        <span class="float-right">{{modalPopUPBarcode.ItemSize}}</span>\n                      </li>\n                      <li>\n                        <span class="float-left">Piece Item</span>\n                        <span class="float-right">{{modalPopUPBarcode.PieceRate}}</span>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n                <br>\n                <div class="row">\n                  <div class="col-md-4">\n                    <ul class="price">\n                      <li>\n                        <span class="float-left font">Order No</span>\n                        <span class="float-right"></span>\n                      </li>\n                    </ul>\n                  </div>\n                  <div class="col-md-4">\n                    <ul class="price">\n                      <li>\n                        <span class="float-left font">Order Rate</span>\n                        <span class="float-right"></span>\n                      </li>\n                    </ul>\n                  </div>\n                  <div class="col-md-4">\n                    <ul class="price">\n                      <li>\n                        <span class="float-left font">Order Karat</span>\n                        <span class="float-right"></span>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n                <br>\n                <div class="row">\n                  <div class="col-md-12">\n                    <h4 class="modal-title">MC Details of BarcodeNo : {{modalPopUPBarcode.BarcodeNo}} </h4>\n                    <div class="table-responsive">\n                      <table class="table table-bordered">\n                        <thead class="topbar">\n                          <tr>\n                            <th>MC Type</th>\n                            <th>MC/Gram</th>\n                            <th>MC/Piece</th>\n                            <th>MC%</th>\n                            <th>Wast.%</th>\n                            <th>MC Amt</th>\n                            <th>Wastage Grams</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr>\n                            <td>{{McType}}</td>\n                            <td></td>\n                            <td>{{modalPopUPBarcode.McPerPiece | number : \'1.2-2\'}}</td>\n                            <td>{{modalPopUPBarcode.McPercent | number : \'1.2-2\'}}</td>\n                            <td>{{modalPopUPBarcode.WastPercent | number : \'1.2-2\'}}</td>\n                            <td>{{modalPopUPBarcode.McAmount | number : \'1.2-2\'}}</td>\n                            <td>{{modalPopUPBarcode.WastageGrms | number : \'1.3-3\'}}</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n\n                </div>\n                <div class="row">\n                  <div class="col-md-12">\n                    <h4 class="modal-title">Stone Details of BarcodeNo : {{modalPopUPBarcode.BarcodeNo}} </h4>\n                    <div class="table-responsive">\n                      <table class="table table-bordered">\n                        <thead class="topbar">\n                          <tr>\n                            <th>Name</th>\n                            <th>Qty</th>\n                            <th>Carat</th>\n                            <th>Stone Wt</th>\n                            <th>Rate/gram</th>\n                            <th>Amount</th>\n                          </tr>\n                        </thead>\n                        <tbody *ngIf="!NoRecords">\n                          <tr>\n                            <td colspan="10">\n                              <h6 style="text-align: center">No Stone Records Found</h6>\n                            </td>\n                          </tr>\n                        </tbody>\n                        <tbody *ngIf="NoRecords">\n                          <tr *ngFor="let _stoneList of GetStoneList">\n                            <td>{{_stoneList.Name}}</td>\n                            <td>{{_stoneList.Qty}}</td>\n                            <td>{{_stoneList.Carrat}}</td>\n                            <td>{{_stoneList.StoneWt | number : \'1.3-3\'}}</td>\n                            <td>{{_stoneList.Rate | number : \'1.2-2\'}}</td>\n                            <td>{{_stoneList.Amount | number : \'1.2-2\'}}</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class="col-md-4">\n              <div class="columns">\n                <ul class="price">\n                  <li>\n                    <span class="float-left font">Billing N.Wt</span>\n                    <span class="float-right">{{modalPopUPBarcode.Netwt | number : \'1.3-3\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Discount MC%</span>\n                    <span class="float-right">{{modalPopUPBarcode.DiscountMc | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Total Sales Mc</span>\n                    <span class="float-right">{{modalPopUPBarcode.TotalSalesMc | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Mc Discount Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.McDiscountAmt | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Metal Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.GoldValue | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">MC Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.VaAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Stone Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.StoneCharges | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Diamond Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.DiamondCharges | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left">Item Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.ItemTotalAfterDiscount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left font">SGST Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.SGSTAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left font">CGST Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.CGSTAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left font">IGST Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.IGSTAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                  <li>\n                    <span class="float-left font">CESS Amt</span>\n                    <span class="float-right"></span>\n                  </li>\n                </ul>\n                <ul class="price mt-3">\n                  <li>\n                    <span class="float-left font">Total Amt</span>\n                    <span class="float-right">{{modalPopUPBarcode.ItemFinalAmount | number : \'1.2-2\'}}</span>\n                  </li>\n                </ul>\n                <ul class="price mt-3">\n                  <li>\n                    <span class="float-left">Discount</span>\n                    <span class="float-right">{{modalPopUPBarcode.ItemAdditionalDiscount | number : \'1.2-2\'}}</span>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n        <br>\n        <br>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal fade " id="addBarcode" data-backdrop="static" data-keyboard="false" style="overflow-y: scroll;\noverflow-x: hidden;">\n  <div class="modal-dialog" style="max-width: 1360px;">\n    <div class="modal-content">\n      \x3c!-- Modal Header --\x3e\n      <div class="modal-header">\n        <h3 class="modal-title">BarCode Details <div class="tooltipdesign"> <i class="fal fa-question-circle"></i>\n            <span class="tooltiptext ">BarCode Details.</span>\n          </div>\n        </h3>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      \x3c!-- Modal body --\x3e\n      <div class="modal-body">\n        <div class="container-fluid">\n          <div class="row">\n            <div class="col-md-12">\n              <app-add-barcode [BarCodeNo]="BarCodeNo"></app-add-barcode>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-container *ngIf="EnableDisablectrls">\n  <div class="row" *ngIf="ToggleCalculation">\n    <div class="col-md-3 ">\n      <button class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary "\n        style="margin-top: 1.8rem !important;" (click)="Submit()">\n        <i class="far fa-save"></i> Submit</button>\n    </div>\n  </div>\n</ng-container>\n<br>\n\x3c!--   --\x3e\n\n\x3c!-- <pre>{{SalesLinesPost | json}}</pre> --\x3e\n\n<div id="PermissonModalPos" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">\n  <div class="modal-dialog">\n    \x3c!-- Modal content--\x3e\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title">Prodigy</h4>\n        <button type="button" class="close" (click)="closePos()" aria-label="Close">\n          <span aria-hidden="true">&times;</span></button>\n      </div>\n      <div class="modal-body">\n        <div class="form-group">\n          <label for="OrderNo">90. Password</label>\n          <input type="password" min="0" class="form-control" name="pwd" placeholder="Password"\n            (keyup.enter)="passWordPos(PwdInterState.value)" #PwdInterState>\n        </div>\n        <div class="form-group">\n          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n            (click)="passWordPos(PwdInterState.value)">Submit</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n<div id="PermissonModalAddbarcode" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">\n  <div class="modal-dialog">\n\n    \x3c!-- Modal content--\x3e\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title">Prodigy</h4>\n        <button type="button" class="close" (click)="closeAddbarcode()" aria-label="Close">\n          <span aria-hidden="true">&times;</span></button>\n      </div>\n      <div class="modal-body">\n        <div class="form-group">\n          <label for="OrderNo">40. Password</label>\n          <input type="password" min="0" class="form-control" name="pwd" placeholder="Password"\n            (keyup.enter)="passWordAddbarcode(PwdAddBarcode.value)" #PwdAddBarcode>\n        </div>\n        <div class="form-group">\n          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"\n            (click)="passWordAddbarcode(PwdAddBarcode.value)">Submit</button>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n\n\x3c!--Group Barcoding--\x3e\n\n<div class="modal overlay" id="GroupBarcodingModal" role="dialog" data-backdrop="static" data-keyboard="false">\n\n  <div class="modal-dialog modal-lg" style="max-width: 1000px">\n    <div class="modal-content ">\n\n      \x3c!-- Modal Header --\x3e\n      <div class="modal-header">\n        <h4 class="modal-title">Barcode Details</h4>\n        <button type="button" class="close" data-dismiss="modal">&times;</button>\n      </div>\n\n      \x3c!-- Modal body --\x3e\n      <div class="modal-body">\n        <form [formGroup]="GroupBarcodingForm">\n          <table class="table">\n            <tbody>\n              <tr>\n                <td class="float-rt">Barcode No</td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.BarcodeNo"\n                    formControlName="BarcodeNo" readonly>\n                </td>\n                <td class="float-rt">\n                  Item Name\n                </td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.ItemName"\n                    formControlName="ItemName" readonly>\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available Qty</td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.ItemQty"\n                    formControlName="ItemQty" readonly>\n                </td>\n                <td class="float-rt">Billing Qty</td>\n                <td><input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.Quantity"\n                    formControlName="Quantity">\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available Gwt</td>\n                <td><input type="text" class="form-control" formControlName="Grosswt"\n                    [(ngModel)]="groupBarcodingModel.Grosswt" readonly>\n                </td>\n                <td class="float-rt">Billing Gwt</td>\n                <td><input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.BillingGrossWt"\n                    formControlName="BillingGrossWt" (change)="CalNtWt()">\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available Swt</td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.Stonewt"\n                    formControlName="Stonewt" readonly>\n                </td>\n                <td class="float-rt">Billing Swt</td>\n                <td><input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.BillingStoneWt"\n                    formControlName="BillingStoneWt" (change)="CalNtWt()">\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available Nwt</td>\n                <td>\n                  <input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.Netwt"\n                    formControlName="Netwt" readonly>\n                </td>\n                <td class="float-rt">Billing Nwt</td>\n                <td><input type="text" class="form-control" [(ngModel)]="groupBarcodingModel.BillingNetWt"\n                    formControlName="BillingNetWt" readonly>\n                </td>\n              </tr>\n              <tr>\n                <td class="float-rt">Available St.Amt</td>\n                <td>\n                  <input type="text" class="form-control" readonly>\n                </td>\n                <td class="float-rt">Stone Amt</td>\n                <td><input type="text" class="form-control" readonly>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </form>\n      </div>\n      \x3c!-- Modal footer --\x3e\n      <div class="modal-footer">\n        <div class="input-group">\n          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary" (click)="Save()"\n            type="button"><i class="fal fa-save"></i> Save</button>\n          <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" type="button"\n            data-dismiss="modal"><i class="far fa-window-close"></i>\n            Exit</button>\n        </div>\n      </div>\n      \x3c!-- <pre>{{groupBarcodingModel | json}}</pre> --\x3e\n    </div>\n  </div>\n</div>'},rJ0g:function(t,e,s){"use strict";s.r(e);var a=s("mrSG"),o=s("mFkx"),n=s("fXoL"),i=s("ofXK"),l=s("5nbR"),r=s("tyNb"),d=s("f3Qm"),c=s("E2Nj"),h=s("NQ5e"),u=s("SlBg"),m=s("3Pt+"),p=s("GUC0"),S=s.n(p),b=s("KoPZ"),f=s("giQ8"),g=s("eya4"),P=s("NFKh"),B=s("5eHb"),G=s("qlSq");let v=class{constructor(t,e,s,a,o,i,l,r,d,c,h){this.formBuilder=t,this._salesService=e,this._CustomerService=s,this._estimationService=a,this._addBarcodeService=o,this._barcodedetailsService=i,this._orderservice=l,this._masterService=r,this._router=d,this.toastr=c,this._appConfigService=h,this.EnableDisablectrls=!0,this.submitted=!1,this.OrderNoFromEstComp=0,this.GetBarcodeList=[],this.ArrayList=[],this.OrderList=[],this.hasErrors=!1,this.id=0,this.readonly=!0,this.valueChange=new n.EventEmitter,this.ccode="",this.bcode="",this.GST=0,this.IGST=0,this.SalesSummaryData={Grwt:null,NtWt:null,SGst:null,CGst:null,IGst:null,TotalItems:null,Amount:null,taxable_Amt:null},this.SalesLinesPost={CompanyCode:this.ccode,BranchCode:this.bcode,CustID:0,GSType:"",EstNo:0,MobileNo:null,OperatorCode:null,OrderNo:0,Pos:null,IsOfferApplied:!1,IsOfferSkipped:!1,DiscountAmount:0,salesEstimatonVM:[]},this.CustomerDets=[],this.SalesEstNo=null,this.BarCodeNo="",this.arrayObj=[],this.GetAddBarcodeList=[],this.GetReservedBarcodeList=[],this.groupBarcodingModel={ObjID:null,ItemQty:null,CompanyCode:this.ccode,BranchCode:this.bcode,EstNo:null,SlNo:null,BillNo:null,BarcodeNo:this.BarCodeNo,SalCode:null,CounterCode:null,ItemName:null,ItemNo:null,Grosswt:null,Stonewt:null,Netwt:null,AddWt:null,BillQty:null,DeductWt:null,MakingChargePerRs:null,WastPercent:null,GoldValue:null,VaAmount:null,StoneCharges:null,DiamondCharges:null,TotalAmount:null,Hallmarkarges:null,McAmount:null,WastageGrms:null,McPercent:null,AddQty:null,DeductQty:null,OfferValue:null,UpdateOn:null,GsCode:null,Rate:null,Karat:null,AdBarcode:null,AdCounter:null,AdItem:null,IsEDApplicable:null,McType:null,Fin_Year:null,NewBillNo:null,ItemTotalAfterDiscount:null,ItemAdditionalDiscount:null,TaxPercentage:null,TaxAmount:null,ItemFinalAmount:null,SupplierCode:null,ItemSize:null,ImgID:null,DesignCode:null,DesignName:null,BatchID:null,Rf_ID:null,McPerPiece:null,DiscountMc:null,TotalSalesMc:null,McDiscountAmt:null,purchaseMc:null,GSTGroupCode:null,SGSTPercent:null,SGSTAmount:null,CGSTPercent:null,CGSTAmount:null,IGSTPercent:null,IGSTAmount:null,HSN:null,PieceRate:null,DeductSWt:null,OrdDiscountAmt:null,DedCounter:null,DedItem:null,isInterstate:0,TaggingType:null,Quantity:null,BillingGrossWt:null,BillingStoneWt:null,BillingNetWt:null,salesEstStoneVM:[]},this.interState=0,this.SalesPersonModel={CustID:null,salesPerson:null,barcode:null,GS:null,ItemName:null},this.ReprintData={EstNo:null,EstType:null},this.OrderNo=0,this.DiffMetalCheck=[],this.salesPerson="",this.Toggle=!1,this.ToggleCalculation=!1,this.NoRecords=!1,this.GetStoneList=[],this.GetStonearray=[],this.EditMode=!1,this.SalesAmount=0,this.SalesTotalAmount=0,this.SalesAmountChange=new n.EventEmitter,this.DelCoinOffer=new n.EventEmitter,this.EnablePos=!0,this.permissonModel={CompanyCode:null,BranchCode:null,PermissionID:null,PermissionData:null},this.EnableAddBarcode=!0,this.PlaceOfSupplyEdit=this._appConfigService.RateEditCode.PlaceOfSupplyEdit,this.AddBarcodePermission=this._appConfigService.RateEditCode.AddBarcodePermission,this.GST=Number(this._appConfigService.GST/100),this.IGST=Number(this._appConfigService.IGST/100),this.password=this._appConfigService.Pwd,this.getCB()}getCB(){this.ccode=P.AES.decrypt(localStorage.getItem("ccode"),this.password.trim()).toString(P.enc.Utf8),this.bcode=P.AES.decrypt(localStorage.getItem("bcode"),this.password.trim()).toString(P.enc.Utf8)}findErrorByField(t,e){const s=this.modelErrors.find(s=>s.field===t&&s.index===e);return null!=s?s.description:""}ngOnInit(){this.GroupBarcodingForm=this.formBuilder.group({BarcodeNo:["",m.Validators.required],ItemName:["",m.Validators.required],ItemQty:["",m.Validators.required],Quantity:["",m.Validators.required],Grosswt:["",m.Validators.required],BillingGrossWt:["",m.Validators.required],Stonewt:["",m.Validators.required],BillingStoneWt:["",m.Validators.required],Netwt:["",m.Validators.required],BillingNetWt:["",m.Validators.required],ObjStatus:["",m.Validators.required],GSSeqNo:["",m.Validators.required],SchemeCode:["",m.Validators.required],VATID:["",m.Validators.required],OdLimit:["",m.Validators.required],UpdateOn:["",m.Validators.required],JFlag:["",m.Validators.required],PANCard:["",m.Validators.required],TIN:["",m.Validators.required],LedgerType:["",m.Validators.required],Address1:["",m.Validators.required],Address2:["",m.Validators.required],Address3:["",m.Validators.required],City:["",m.Validators.required],State:["",m.Validators.required],District:["",m.Validators.required],Country:["",m.Validators.required],PinCode:["",m.Validators.required],Phone:["",m.Validators.required],Mobile:["",m.Validators.required],FaxNo:["",m.Validators.required],WebSite:["",m.Validators.required],CSTNo:["",m.Validators.required],BudgetAmt:["",m.Validators.required],TDSID:["",m.Validators.required],EmailID:["",m.Validators.required],HSN:["",m.Validators.required],GSTGoodsGroupCode:["",m.Validators.required],GSTServicesGroupCode:["",m.Validators.required],StateCode:["",m.Validators.required],VTYPE:["",m.Validators.required],UniqRowID:["",m.Validators.required],TransType:["",m.Validators.required],IsAutomatic:["",m.Validators.required],Schedule_Name:["",m.Validators.required],NewAccCode:["",m.Validators.required],PartyACNo:["",m.Validators.required],PartyACName:["",m.Validators.required],PartyMICR_No:["",m.Validators.required],PartyBankName:["",m.Validators.required],PartyBankBranch:["",m.Validators.required],PartyBankAddress:["",m.Validators.required],PartyRTGScode:["",m.Validators.required],PartyNEFTcode:["",m.Validators.required],PartyIFSCcode:["",m.Validators.required],swiftcode:["",m.Validators.required]}),this.SalesSummaryData={Grwt:null,NtWt:null,SGst:null,CGst:null,IGst:null,TotalItems:null,Amount:null,taxable_Amt:null},this.SalesForm=this.formBuilder.group({salesPerson:[null,m.Validators.required],barcode:[null,m.Validators.required],orderNo:[null,m.Validators.required],GS:[null,m.Validators.required],StateCode:[null,m.Validators.required]}),this.SalesGSForm=this.formBuilder.group({GS:[null,m.Validators.required],ItemName:[null,m.Validators.required]}),this.Unsubscribe_obj=this._CustomerService.cast.subscribe(t=>{this.CustomerDets=t,null!=this.CustomerDets&&0!=this.CustomerDets?(this.SalesLinesPost.CustID=this.CustomerDets.ID,this.SalesLinesPost.MobileNo=this.CustomerDets.MobileNo,this.SalesLinesPost.OperatorCode=localStorage.getItem("Login"),this.SalesLinesPost.CompanyCode=this.ccode,this.SalesLinesPost.BranchCode=this.bcode):(this.SalesLinesPost.CustID=null,this.SalesLinesPost.OperatorCode=localStorage.getItem("Login"),this.SalesLinesPost.CompanyCode=this.ccode,this.SalesLinesPost.BranchCode=this.bcode)}),this.Unsubscribe_obj=this._estimationService.SubjectEstNo.subscribe(t=>{this.SalesEstNo=t,null!=this.SalesEstNo&&"0"!=this.SalesEstNo&&"/purchase"!=this._router.url&&this._salesService.castSalesDtls.subscribe(t=>{if(this.arrayObj=t,null!=this.arrayObj){this.SalesPersonModel.salesPerson=this.arrayObj.salesEstimatonVM[0].SalCode,this.SalesLinesPost.GSType=this.arrayObj.GSType,this.SalesLinesPost.OrderNo=this.arrayObj.OrderNo,this.SalesLinesPost.EstNo=this.SalesEstNo,this.SalesLinesPost.DiscountAmount=this.arrayObj.DiscountAmount,this.GetBarcodeList=this.arrayObj.salesEstimatonVM,this.SalesLinesPost.salesEstimatonVM=this.arrayObj.salesEstimatonVM,this.ToggleCalculation=!0,this.SendSalesDataToEstComp();for(let t=0;t<this.SalesLinesPost.salesEstimatonVM.length;t++)""==this.SalesLinesPost.salesEstimatonVM[t].BarcodeNo&&this.getGstPercent(this.SalesLinesPost.salesEstimatonVM[t].GsCode,this.SalesLinesPost.salesEstimatonVM[t].ItemName)}})}),this.Unsubscribe_obj=this._addBarcodeService.cast.subscribe(t=>{if(this.GetAddBarcodeList=t,null!=this.SalesEstNo&&"0"!=this.SalesEstNo&&0==this.isEmptyObject(this.GetAddBarcodeList)&&null!=this.isEmptyObject(this.GetAddBarcodeList))if(0==this.SalesLinesPost.salesEstimatonVM.length){1==this.EditMode&&(this.GetBarcodeList.splice(this.IndexNo,1),this.EditMode=!1),this.GetBarcodeList.push(this.GetAddBarcodeList);for(let t=0;t<this.SalesLinesPost.salesEstimatonVM.length;t++)this.getGstPercent(this.SalesLinesPost.salesEstimatonVM[t].GsCode,this.SalesLinesPost.salesEstimatonVM[t].ItemName);this._addBarcodeService.SendBarcodeDataToSalesComp(null),this.GetAddBarcodeList=[],this.ToggleCalculation=!0}else if(1==this.EditMode){this.GetBarcodeList.splice(this.IndexNo,1),this.EditMode=!1,this.GetBarcodeList.push(this.GetAddBarcodeList);for(let t=0;t<this.SalesLinesPost.salesEstimatonVM.length;t++)this.getGstPercent(this.SalesLinesPost.salesEstimatonVM[t].GsCode,this.SalesLinesPost.salesEstimatonVM[t].ItemName);this.GetAddBarcodeList=[],this.ToggleCalculation=!0,this._addBarcodeService.SendBarcodeDataToSalesComp(null)}else this._salesService.BarcodeValidation(this.SalesLinesPost,this.GetAddBarcodeList.BarcodeNo,this.GetAddBarcodeList.GsCode).subscribe(t=>{if(this.DiffMetalValid=t,0==this.DiffMetalCheck.length){this.GetBarcodeList.push(this.GetAddBarcodeList);for(let t=0;t<this.SalesLinesPost.salesEstimatonVM.length;t++)this.getGstPercent(this.SalesLinesPost.salesEstimatonVM[t].GsCode,this.SalesLinesPost.salesEstimatonVM[t].ItemName);this.GetAddBarcodeList=[],this.ToggleCalculation=!0,this._addBarcodeService.SendBarcodeDataToSalesComp(null)}},t=>{$("#addBarcode").modal("hide")});$("#addBarcode").modal("hide")}),this.Unsubscribe_obj=this._addBarcodeService.cast.subscribe(t=>{if(this.GetAddBarcodeList=t,(null==this.SalesEstNo||"0"==this.SalesEstNo)&&0==this.isEmptyObject(this.GetAddBarcodeList)&&null!=this.isEmptyObject(this.GetAddBarcodeList))if(0==this.SalesLinesPost.salesEstimatonVM.length){1==this.EditMode?(this.GetBarcodeList.splice(this.IndexNo,1),this.GetBarcodeList.push(this.GetAddBarcodeList),this.SalesLinesPost.salesEstimatonVM.splice(this.IndexNo,1),this.SalesLinesPost.salesEstimatonVM.push(this.GetAddBarcodeList),this.EditMode=!1):""!=this.SalesLinesPost.GSType?(this.GetBarcodeList.push(this.GetAddBarcodeList),this.SalesLinesPost.salesEstimatonVM.push(this.GetAddBarcodeList)):(this.SalesLinesPost.GSType=this.GetAddBarcodeList.GsCode,this.GetBarcodeList.push(this.GetAddBarcodeList),this.SalesLinesPost.salesEstimatonVM.push(this.GetAddBarcodeList));for(let t=0;t<this.SalesLinesPost.salesEstimatonVM.length;t++)this.getGstPercent(this.SalesLinesPost.salesEstimatonVM[t].GsCode,this.SalesLinesPost.salesEstimatonVM[t].ItemName);this._addBarcodeService.SendBarcodeDataToSalesComp(null),this.GetAddBarcodeList=[],this.ToggleCalculation=!0}else if(1==this.EditMode){this.GetBarcodeList.splice(this.IndexNo,1),this.GetBarcodeList.push(this.GetAddBarcodeList),this.SalesLinesPost.salesEstimatonVM.splice(this.IndexNo,1),this.SalesLinesPost.salesEstimatonVM.push(this.GetAddBarcodeList),this.EditMode=!1;for(let t=0;t<this.SalesLinesPost.salesEstimatonVM.length;t++)this.getGstPercent(this.SalesLinesPost.salesEstimatonVM[t].GsCode,this.SalesLinesPost.salesEstimatonVM[t].ItemName);this._addBarcodeService.SendBarcodeDataToSalesComp(null),this.GetAddBarcodeList=[],this.ToggleCalculation=!0}else this._salesService.BarcodeValidation(this.SalesLinesPost,this.GetAddBarcodeList.BarcodeNo,this.GetAddBarcodeList.GsCode).subscribe(t=>{if(this.DiffMetalValid=t,0==this.DiffMetalCheck.length){""!=this.SalesLinesPost.GSType?(this.GetBarcodeList.push(this.GetAddBarcodeList),this.SalesLinesPost.salesEstimatonVM.push(this.GetAddBarcodeList)):(this.SalesLinesPost.GSType=this.GetAddBarcodeList.GsCode,this.GetBarcodeList.push(this.GetAddBarcodeList),this.SalesLinesPost.salesEstimatonVM.push(this.GetAddBarcodeList));for(let t=0;t<this.SalesLinesPost.salesEstimatonVM.length;t++)this.getGstPercent(this.SalesLinesPost.salesEstimatonVM[t].GsCode,this.SalesLinesPost.salesEstimatonVM[t].ItemName);this._addBarcodeService.SendBarcodeDataToSalesComp(null),this.GetAddBarcodeList=[],this.ToggleCalculation=!0}},t=>{$("#addBarcode").modal("hide")});$("#addBarcode").modal("hide")}),this.Unsubscribe_obj=this._estimationService.SubjectOrderNo.subscribe(t=>{this.OrderNoFromEstComp=t,0!=this.OrderNoFromEstComp&&this._salesService.castSalesDtls.subscribe(t=>{if(this.arrayObj=t,null!=this.arrayObj&&(this.SalesLinesPost.OrderNo=this.arrayObj.OrderNo,null!=this.arrayObj.salesEstimatonVM&&(this.GetBarcodeList=this.arrayObj.salesEstimatonVM,this.SalesLinesPost.salesEstimatonVM=this.arrayObj.salesEstimatonVM,this.ToggleCalculation=!0,this.SendSalesDataToEstComp(),this.SalesLinesPost.salesEstimatonVM.length>0)))for(let e=0;e<this.SalesLinesPost.salesEstimatonVM.length;e++)this.SalesLinesPost.salesEstimatonVM[e].SalCode="A",this.getGstPercent(this.SalesLinesPost.salesEstimatonVM[e].GsCode,this.SalesLinesPost.salesEstimatonVM[e].ItemName)})}),this.Unsubscribe_obj=this._orderservice.castReservedOrderDetsToSalesComp.subscribe(t=>{if(this.GetReservedBarcodeList=t,this.GetReservedBarcodeList.length>0)for(let e=0;e<this.GetReservedBarcodeList.length;e++)this.GetBarcodeList.push(this.GetReservedBarcodeList[e]),this.SalesLinesPost.salesEstimatonVM.push(this.GetReservedBarcodeList[e])}),this.getStateList(),this.getSalesMan(),this.getGSList(),this.errors=[],this.modelErrors=[],this.hasErrors=!1,"/sales-billing"==this._router.url&&(this.EnableDisablectrls=!1),"/estimation"==this._router.url&&(this.EnableDisablectrls=!0),this.Unsubscribe_obj=this._estimationService.castCoinOfferDatatoSales.subscribe(t=>{this.CoinOfferBarcodeList=t,0==this.isEmptyObject(this.CoinOfferBarcodeList)&&null!=this.isEmptyObject(this.CoinOfferBarcodeList)&&(null!=this.CoinOfferBarcodeList.BarcodeNo&&this.getBarcodeDetails(this.CoinOfferBarcodeList.BarcodeNo,"",1),this.SalesLinesPost.DiscountAmount=this.CoinOfferBarcodeList.DisAmount,this.SalesLinesPost.IsOfferApplied=!0,this.SalesLinesPost.IsOfferSkipped=!1)})}getItem(){this._masterService.getItemName(this.SalesGSForm.value.GS).subscribe(t=>{this.ItemName=t})}getStateList(){this._CustomerService.getStateCode().subscribe(t=>{this.StateList=t,this._masterService.getCompanyMaster().subscribe(t=>{this.CompanyMaster=t,this.SalesLinesPost.Pos=this.CompanyMaster.StateCode})})}SetInterState(t){if(this.EnablePos=!0,null!=this.GetBarcodeList)if(t!=this.CompanyMaster.StateCode)for(let e=0;e<this.GetBarcodeList.length;e++)this.GetBarcodeList[e].interState=1,this.GetBarcodeList[e].isInterstate=1,this.GetBarcodeList[e].IGSTAmount=Math.abs(this.GetBarcodeList[e].ItemTotalAfterDiscount*this.IGST).toFixed(2),this.GetBarcodeList[e].IGSTPercent=3,this.GetBarcodeList[e].SGSTAmount=0,this.GetBarcodeList[e].CGSTAmount=0,this.GetBarcodeList[e].CGSTPercent=0,this.GetBarcodeList[e].SGSTPercent=0;else for(let e=0;e<this.GetBarcodeList.length;e++)this.GetBarcodeList[e].interState=0,this.GetBarcodeList[e].isInterstate=0,this.GetBarcodeList[e].SGSTAmount=Math.abs(this.GetBarcodeList[e].ItemTotalAfterDiscount*this.GST).toFixed(2),this.GetBarcodeList[e].CGSTAmount=Math.abs(this.GetBarcodeList[e].ItemTotalAfterDiscount*this.GST).toFixed(2),this.GetBarcodeList[e].CGSTPercent=1.5,this.GetBarcodeList[e].SGSTPercent=1.5,this.GetBarcodeList[e].IGSTPercent=0,this.GetBarcodeList[e].IGSTAmount=0;t!=this.CompanyMaster.StateCode?this.interState=1:this.interState=0}get f(){return this.SalesForm.controls}getSalesMan(){this._masterService.getSalesMan().subscribe(t=>{this.SalesManList=t})}getMc(){this._masterService.getMCTypes().subscribe(t=>{this.MCList=t})}getGSList(){this._masterService.getGsList("S").subscribe(t=>{this.GSList=t})}getDetails(t){null==t.value.salesPerson?alert("Please select Sales Person"):null==t.value.barcode||""==t.value.barcode?alert("Please enter barcode"):null!=t.value.barcode&&""!=t.value.barcode&&(0==this.AlphaNumericValidations(t.value.barcode)?alert("Please enter valid Barcode No"):(this.addBarCode(t),this.SalesPersonModel.barcode="",this.getGSList(),this.getMc()))}AlphaNumericValidations(t){if(null!=t&&""!=t){return/^[a-zA-Z0-9]+$/g.test(t)}return!0}ngAfterContentChecked(){this.PwdAddBarcode.nativeElement.focus(),this.PwdInterState.nativeElement.focus()}AddBarcode(t){null==t.value.salesPerson?alert("Please select Sales Person"):(this._addBarcodeService.SendInterStateDataToAddBarCodeComp(this.SalesLinesPost),null==t.value.barcode||""==t.value.barcode?(this.PwdAddBarcode.nativeElement.value="",$("#PermissonModalAddbarcode").modal("show")):(this.getDetails(t),$("#addBarcode").modal("hide"),$("#PermissonModalAddbarcode").modal("hide")))}addBarCode(t){if(null!=this.GetBarcodeList){null==this.GetBarcodeList.find(e=>e.BarcodeNo==t.value.barcode)?(this.getBarcodeDetails(t.value.barcode,t.value.salesPerson,0),this.SalesPersonModel.barcode=""):S()("Warning!","Barcode number already added","warning")}else this.GetBarcodeList=[],this.getBarcodeDetails(t.value.barcode,t.value.salesPerson,0),this.SalesPersonModel.barcode=""}validateDiffMetal(){}getOrderBarcodeDetails(t){this._salesService.getOrderEst(t).subscribe(t=>{this.OrderList.push(t);for(let e=0;e<this.OrderList.length;e++)this.ArrayList.push(this.OrderList[0][e]);this.GetBarcodeList.push(this.ArrayList[0]),null==this.SalesEstNo&&(this.SalesLinesPost.salesEstimatonVM.push(this.ArrayList[0]),this.SalesLinesPost.GSType=this.ArrayList[0].GsCode),this.ToggleCalculation=!0,this.ArrayList=[],this.OrderList=[]},t=>{if(400===t.status){const e=t.error;alert(e.description)}else this.errors.push("something went wrong!")})}getBarcodeDetails(t,e,s){this._estimationService.SubjectOrderNo.subscribe(t=>{this.OrderNo=t,0!=this.OrderNo&&(this.SalesEstNo=null,this.SalesLinesPost.OrderNo=this.OrderNo)}),this.salesPerson=e,this._salesService.getBarcodefromAPI(t,this.OrderNo,this.interState,s).subscribe(e=>{this.DiffMetalCheck.push(e),"G"==this.DiffMetalCheck[0].TaggingType?($("#GroupBarcodingModal").modal("show"),this.groupBarcodingModel=this.DiffMetalCheck[0]):($("#GroupBarcodingModal").modal("hide"),this._salesService.BarcodeValidation(this.SalesLinesPost,t,this.DiffMetalCheck[0].GsCode).subscribe(t=>{this.ArrayList=this.DiffMetalCheck,this.ArrayList[0].SalCode=this.salesPerson,this.getGstPercent(this.ArrayList[0].GsCode,this.ArrayList[0].ItemName),this.GetBarcodeList.push(this.ArrayList[0]),null==this.SalesEstNo&&this.SalesLinesPost.salesEstimatonVM.push(this.ArrayList[0]),this.SalesLinesPost.GSType=this.ArrayList[0].GsCode,this.ToggleCalculation=!0,this.SendSalesDataToEstComp(),this.ArrayList=[],this.DiffMetalCheck=[]}))},t=>{if(400===t.status){t.error}else this.errors.push("something went wrong!")})}GetBarcodeInfo(t){this.Toggle=!0,this.modalPopUPBarcode=null,this.modalPopUPBarcode=t,this.getGSList(),this.SalesPersonModel.GS=this.modalPopUPBarcode.GsCode,this._masterService.getItemName(this.SalesPersonModel.GS).subscribe(t=>{this.ItemName=t,this.SalesPersonModel.ItemName=this.modalPopUPBarcode.ItemName}),this.getGetStoneListDetails(t),this.getMCTypes(this.modalPopUPBarcode.McType)}getMCTypes(t){this._orderservice.getMCTypes().subscribe(e=>{this.MCTypeList=e,this.McType=this.MCTypeList.filter(e=>e.MC_ID===t),this.McType=this.McType[0].MC_NAME})}getGetStoneListDetails(t){this.GetStoneList=[],this.GetStonearray=t.salesEstStoneVM;for(let e=0;e<this.GetStonearray.length;e++)this.GetStoneList.push(this.GetStonearray[e]);0==this.isEmptyObject(this.GetStoneList)?this.NoRecords=!0:this.NoRecords=!1}SendSalesDataToEstComp(){this._salesService.SendSalesDataToEstComp(this.SalesSummaryData)}isEmptyObject(t){return t&&0===Object.keys(t).length}onSubmit(){this.submitted=!0,this.SalesForm.invalid}EditTagRow(t,e){"G"==e.TaggingType?S()("Warning!","Group Barcode cannot be edited","warning"):""==e.IsEDApplicable||null==e.IsEDApplicable?(this.IndexNo=t,this._salesService.SendSalesDataToAddBarcode(null),this._salesService.SendSalesDataToAddBarcode(e),this._estimationService.SendOrderNoToSalesComp(this.SalesLinesPost.OrderNo),$("#addBarcode").modal("show"),this.EditMode=!0):S()("Warning!","Offer coins cannot be edited","warning")}Submit(){let t;if(null==this.SalesLinesPost.Pos)this.toastr.warning("Please select Pos","Alert!");else if(this.SalesLinesPost.salesEstimatonVM.length<=0)this.toastr.warning("Please enter Sales Details","Alert!");else{if(this.Duplicateobject=null,this.removeDuplicates(),null!=this.Duplicateobject)this.toastr.warning("Please remove the duplicate barcode","Alert!");else confirm("Do you want to save??")&&(this.SendSalesDataToEstComp(),null==this.SalesLinesPost.EstNo||0==this.SalesLinesPost.EstNo?this._salesService.post(this.SalesLinesPost).subscribe(e=>{t=e,S()("Saved!","Estimation number "+t.EstMationNo+" Created","success"),this._salesService.SendEstNo_To_Purchase(t.EstMationNo),this._estimationService.SendEstNo(t.EstMationNo),this._salesService.salesDetails(this.SalesLinesPost),this.SalesLinesPost.EstNo=t.EstMationNo,this.ReprintData={EstNo:t.EstMationNo,EstType:"S"},this._estimationService.SendReprintData(this.ReprintData)},e=>{if(403===e.status){const s=e.error;if(confirm("Estimation is Eligible for Free Gift. Do You Want to Issue??"))this._estimationService.SendTotalCoinOffer(s.Value);else confirm("Do you want to save Sales Estimation??")&&(this.SalesLinesPost.IsOfferApplied=!1,this.SalesLinesPost.IsOfferSkipped=!0,this.SendSalesDataToEstComp(),null!=this.SalesLinesPost.EstNo&&0!=this.SalesLinesPost.EstNo||this._salesService.post(this.SalesLinesPost).subscribe(e=>{t=e,S()("Saved!","Estimation number "+t.EstMationNo+" Created","success"),this._salesService.SendEstNo_To_Purchase(t.EstMationNo),this._estimationService.SendEstNo(t.EstMationNo),this._salesService.salesDetails(this.SalesLinesPost),this.SalesLinesPost.EstNo=t.EstMationNo,this.ReprintData={EstNo:t.EstMationNo,EstType:"S"},this._estimationService.SendReprintData(this.ReprintData)}))}}):this._salesService.put(this.SalesLinesPost,this.SalesLinesPost.EstNo).subscribe(e=>{t=e,S()("Updated!","Estimation number "+t.EstMationNo+" Updated","success"),this._salesService.SendEstNo_To_Purchase(t.EstMationNo),this._estimationService.SendEstNo(t.EstMationNo),this._salesService.salesDetails(this.SalesLinesPost),this.ReprintData={EstNo:t.EstMationNo,EstType:"S"},this._estimationService.SendReprintData(this.ReprintData)},e=>{if(403===e.status){const s=e.error;if(confirm("Estimation is Eligible for Free Gift. Do You Want to Issue??"))this._estimationService.SendTotalCoinOffer(s.Value);else confirm("Do you want to save Sales Estimation??")&&(this.SalesLinesPost.IsOfferApplied=!1,this.SalesLinesPost.IsOfferSkipped=!0,this.SendSalesDataToEstComp(),this._salesService.put(this.SalesLinesPost,this.SalesLinesPost.EstNo).subscribe(e=>{t=e,S()("Updated!","Estimation number "+t.EstMationNo+" Updated","success"),this._salesService.SendEstNo_To_Purchase(t.EstMationNo),this._estimationService.SendEstNo(t.EstMationNo),this._salesService.salesDetails(this.SalesLinesPost),this.ReprintData={EstNo:t.EstMationNo,EstType:"S"},this._estimationService.SendReprintData(this.ReprintData)}))}}))}}ngOnDestroy(){this._salesService.SaveSalesEstNo(null),this._CustomerService.SendCustDataToEstComp(null),this._salesService.salesDetails(null)}valueChanged(t){this.SalesAmount=t,this.valueChange.emit(this.SalesAmount)}SalesAmountChanged(t){this.SalesTotalAmount=t,this.SalesAmountChange.emit(this.SalesTotalAmount)}DeleteDiscountCoinOffer(t){this.DelCoinOffer.emit(t)}removeDuplicates(){for(let t of this.SalesLinesPost.salesEstimatonVM)for(let e of this.SalesLinesPost.salesEstimatonVM)if(t!=e&&""!=t.BarcodeNo&&e.BarcodeNo===t.BarcodeNo){this.Duplicateobject=t;break}}DeleteTagRow(t,e){""!=this.GetBarcodeList[t].IsEDApplicable&&null!=this.GetBarcodeList[t].IsEDApplicable?confirm("Do you want to delete")&&confirm("All gift items are removed,Re-issue the gift items.Do you want to continue?")&&(this.DeleteDiscountCoinOffer(1),this.GetBarcodeList.splice(t,1),this.SalesLinesPost.salesEstimatonVM.splice(t,1),this.ClearBarcodeDets(),this.SalesLinesPost.IsOfferApplied=!1,this.SalesLinesPost.IsOfferSkipped=!0):confirm("Do you want to delete")&&(this.DeleteDiscountCoinOffer(0),this.valueChanged(this.GetBarcodeList[t].ItemFinalAmount),this.GetBarcodeList.splice(t,1),this.SalesLinesPost.salesEstimatonVM.splice(t,1),this.ClearBarcodeDets())}ClearBarcodeDets(){this.GetBarcodeList.length<=0&&(this.SalesLinesPost.GSType="")}total_items(t=[]){let e=0;return t.forEach(t=>{e+=parseInt(t.ItemQty)}),this.SalesSummaryData.TotalItems=e,e}grossWT(t=[]){let e=0;return t.forEach(t=>{e+=t.Grosswt}),this.SalesSummaryData.Grwt=e,e}netWT(t=[]){let e=0;return t.forEach(t=>{e+=t.Netwt}),this.SalesSummaryData.NtWt=e,e}getGstPercent(t,e){this._masterService.getGSTPercent(t,e).subscribe(t=>{this.GstPercentList=t,this.CGSTPer=this.GstPercentList[0].GSTPercent,this.SGSTPer=this.GstPercentList[1].GSTPercent,this.IGSTPer=this.GstPercentList[2].GSTPercent})}Rate(t=[]){let e=0;return t.forEach(t=>{e+=t.Rate}),e}metal_amount(t=[]){let e=0;return t.forEach(t=>{""!=t.IsEDApplicable&&null!=t.IsEDApplicable||(e+=t.GoldValue)}),e}stone_amount(t=[]){let e=0;return t.forEach(t=>{""!=t.IsEDApplicable&&null!=t.IsEDApplicable||(e+=t.StoneCharges)}),e}va_amount(t=[]){let e=0;return t.forEach(t=>{""!=t.IsEDApplicable&&null!=t.IsEDApplicable||(e+=t.VaAmount)}),e}taxable_amount(t=[]){let e=0;return t.forEach(t=>{""!=t.IsEDApplicable&&null!=t.IsEDApplicable||(e+=t.ItemTotalAfterDiscount)}),this.SalesSummaryData.taxable_Amt=e,e}SGST_amount(t=[]){let e=0;return t.forEach(t=>{null!=t.SGSTAmount&&0!=t.SGSTAmount&&(""!=t.IsEDApplicable&&null!=t.IsEDApplicable||(e+=Number(t.SGSTAmount)))}),this.SalesSummaryData.SGst=e,e}CGST_amount(t=[]){let e=0;return t.forEach(t=>{null!=t.CGSTAmount&&0!=t.CGSTAmount&&(""!=t.IsEDApplicable&&null!=t.IsEDApplicable||(e+=Number(t.CGSTAmount)))}),this.SalesSummaryData.CGst=e,e}IGST_amount(t=[]){let e=0;return t.forEach(t=>{null!=t.IGSTAmount&&0!=t.IGSTAmount&&(""!=t.IsEDApplicable&&null!=t.IsEDApplicable||(e+=Number(t.IGSTAmount)))}),this.SalesSummaryData.IGst=e,e}SalesTotal_amount(t=[]){let e=0;return t.forEach(t=>{""!=t.IsEDApplicable&&null!=t.IsEDApplicable||(e+=Number(t.ItemFinalAmount))}),this.SalesSummaryData.Amount=e,this.SalesAmountChanged(e),e}EditPos(){$("#PermissonModalPos").modal("show"),this.PwdInterState.nativeElement.value=""}passWordPos(t){""==t?(this.toastr.warning("Please Enter the Password","Alert!"),$("#PermissonModalPos").modal("show"),this.EnablePos=!0):(this.permissonModel.CompanyCode=this.ccode,this.permissonModel.BranchCode=this.bcode,this.permissonModel.PermissionID=this.PlaceOfSupplyEdit,this.permissonModel.PermissionData=btoa(t),this._masterService.postelevatedpermission(this.permissonModel).subscribe(t=>{this.EnablePos=!1,$("#PermissonModalPos").modal("hide")},t=>{401===t.status&&($("#PermissonModalPos").modal("show"),this.EnablePos=!0)}))}passWordAddbarcode(t){""==t?(this.toastr.warning("Please Enter the Password","Alert!"),$("#PermissonModalAddbarcode").modal("show"),this.EnableAddBarcode=!0):(this.permissonModel.CompanyCode=this.ccode,this.permissonModel.BranchCode=this.bcode,this.permissonModel.PermissionID=this.AddBarcodePermission,this.permissonModel.PermissionData=btoa(t),this._masterService.postelevatedpermission(this.permissonModel).subscribe(t=>{this.EnableAddBarcode=!1,$("#PermissonModalAddbarcode").modal("hide"),$("#addBarcode").modal("show"),this._salesService.SendSalesBarcode("true"),this.EditMode=!1,this.PwdAddBarcode.nativeElement.value=""},t=>{401===t.status&&($("#PermissonModalAddbarcode").modal("show"),this.EnableAddBarcode=!0)}))}closePos(){$("#PermissonModalPos").modal("hide")}closeAddbarcode(){$("#PermissonModalAddbarcode").modal("hide")}Save(){this._addBarcodeService.calculateBarcode(this.groupBarcodingModel).subscribe(t=>{this.GroupBarcodeDets=t,this.ArrayList.push(this.GroupBarcodeDets),this.ArrayList[0].SalCode=this.salesPerson,this.getGstPercent(this.ArrayList[0].GsCode,this.ArrayList[0].ItemName),this.GetBarcodeList.push(this.ArrayList[0]),null==this.SalesEstNo&&this.SalesLinesPost.salesEstimatonVM.push(this.ArrayList[0]),this.SalesLinesPost.GSType=this.ArrayList[0].GsCode,this.ToggleCalculation=!0,this.SendSalesDataToEstComp(),this.ArrayList=[],this.DiffMetalCheck=[],this.GroupBarcodeDets=null,$("#GroupBarcodingModal").modal("hide")})}CalNtWt(){this.groupBarcodingModel.BillingNetWt=this.groupBarcodingModel.BillingGrossWt-this.groupBarcodingModel.BillingStoneWt}};v.ctorParameters=()=>[{type:m.FormBuilder},{type:h.a},{type:c.a},{type:u.a},{type:d.a},{type:b.a},{type:f.a},{type:g.a},{type:r.c},{type:B.b},{type:G.a}],a.a([Object(n.ViewChild)("PwdInterState",{static:!0}),a.c("design:type",n.ElementRef)],v.prototype,"PwdInterState",void 0),a.a([Object(n.ViewChild)("PwdAddBarcode",{static:!0}),a.c("design:type",n.ElementRef)],v.prototype,"PwdAddBarcode",void 0),a.a([Object(n.Output)(),a.c("design:type",Object)],v.prototype,"valueChange",void 0),a.a([Object(n.Output)(),a.c("design:type",Object)],v.prototype,"SalesAmountChange",void 0),a.a([Object(n.Output)(),a.c("design:type",Object)],v.prototype,"DelCoinOffer",void 0),v=a.a([Object(n.Component)({selector:"app-sales",template:a.b(s("ezid")).default,styles:[a.b(s("YHdl")).default]}),a.c("design:paramtypes",[m.FormBuilder,h.a,c.a,u.a,d.a,b.a,f.a,g.a,r.c,B.b,G.a])],v);const L=[{path:"",canActivate:[l.a],canActivateChild:[l.a],component:v,data:{title:"Sales",urls:[{title:"Dashboard",url:"/dashboard"},{title:"Sales"}]}}];let C=class{};C=a.a([Object(n.NgModule)({imports:[r.d.forChild(L)],exports:[r.d]})],C),s.d(e,"SalesModule",(function(){return y}));let y=class{};y=a.a([Object(n.NgModule)({declarations:[v],imports:[i.CommonModule,C,m.ReactiveFormsModule,m.FormsModule,o.AddBarcodeModule],exports:[v],schemas:[n.CUSTOM_ELEMENTS_SCHEMA]})],y)}}]);