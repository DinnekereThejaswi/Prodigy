<div id="accordian" class="accordion">
  <div class="card mb-0">
    <div id="header" class="card-body show">
      <form class="form-horizontal">
        <div class="row">
          <div class="col-lg-12">
            <div class="form-body">
              <div class="row">
                <div class="col-md-2">
                  <div class="form-group">
                    <label class="control-label">Search Ledger</label>
                    <div class="m-b-10">

                      <input class="form-control" type="text" name="search" [(ngModel)]="searchText" autocomplete="off">

                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <!-- <div class="form-group" style="display: inline-block;padding-top: 1.5rem;">
                    <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary" type="submit"
                      ><i class="fal fa-search"></i> Search</button>
                  </div> -->
                </div>
                <div class="col-md-6">
                  <!-- <div class="form-group float-right" style="display: inline-block;padding-top: 1.5rem;">
                    <button class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary "
                      (click)="submitPost(SRHeaderForm)">ADD</button>
                  </div> -->
                  <div class="form-group float-right" style="display: inline-block;padding-top: 1.5rem;">
                    <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary MT-2"
                      (click)="getHtmlPrint()" type="submit"><i class="fal fa-print"></i> Print</button>
                  </div>
                  <div class="form-group float-right" style="display: inline-block;padding-top: 1.5rem;">
                    <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary" type="submit"
                      (click)="Add()"><i class="fal fa-add"></i> Add</button>
                  </div>
                  <div class="form-group float-right" style="display: inline-block;padding-top: 1.5rem;">
                    <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary" type="submit"
                      (click)="Refresh()"><i class="fas fa-sync"></i> Refresh Ledger</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <ng-container *ngIf="EnableJson">
          <pre>{{ SRHeaderForm | json }}</pre>
        </ng-container>
      </form>
    </div>
  </div>
</div>
<br>
<div class="col-md-12">
  <div class="card">
    <div class="card-body">
      <div class="table-responsive" style="height: 500px;">
        <table class="table table-bordered">
          <thead class="topbar">
            <tr>
              <th colspan="2">AccCode</th>
              <th colspan="2">Account Name</th>
              <th colspan="2">Type</th>
              <th colspan="2">Sub-Group</th>
              <th colspan="2">Opn Bal.</th>
              <th colspan="2">B.Type</th>
              <th colspan="2">Cls Bal.</th>
              <th colspan="2">Cls Bal.</th>
              <th colspan="2">Budget</th>
              <th colspan="2">Status</th>
              <th colspan="2">Edit</th>
              <th colspan="2">Open</th>
              <th colspan="2">Close</th>
            </tr>
          </thead>
          <tbody *ngFor="let _ledgerList of LedgerList | filter:searchText">
            <tr>
              <td colspan="2">{{_ledgerList.AccountCode}}</td>
              <td colspan="2">{{_ledgerList.AccountName}}</td>
              <td colspan="2">{{_ledgerList.Type}}</td>
              <td colspan="2">{{_ledgerList.GroupName}}</td>
              <td colspan="2">{{_ledgerList.Opening}}</td>
              <td colspan="2">{{_ledgerList.BalanceType}}</td>
              <td colspan="2">{{_ledgerList.closingBalance}}</td>
              <td colspan="2">{{_ledgerList.ClosingType}}</td>
              <td colspan="2">{{_ledgerList.BudgAmt}}</td>
              <td colspan="2">{{_ledgerList.obj_status}}</td>
              <td colspan="2">
                <i class="fas fa-edit" title="edit" (click)="editField(_ledgerList.AccountCode)"></i>
              </td>
              <td colspan="2">
                <i class="fas fa-lock-open" title="open" (click)="openField(_ledgerList)"></i>
              <td colspan="2">
                <i class="fas fa-lock" title="close" (click)="closeField(_ledgerList)"></i>
              </td>
            </tr>
            <tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="modal overlay" id="Ledger" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-lg" style="max-width: 1100px">
    <div class="modal-content ">
      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Ledger Entry</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <!-- Modal body -->
      <div class="modal-body">
        <form [formGroup]="LedgerEntryForm">
          <table class="table">
            <tbody>
              <tr>
                <td class="float-rt">Ledger Type</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="ledgerModel.LedgerType"
                    formControlName="LedgerType">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _LedgerType of LedgerType" [value]="_LedgerType.Code" [disabled]="disabled">
                      {{_LedgerType.Name}}
                    </option>
                  </select>
                </td>



                <button *ngIf="EnableValidatePermission"
                  class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"
                  (click)="ValidatePermission()">Change Ledger Type</button>


                <ng-container *ngIf="ledgerModel.LedgerType !='CR'">
                  <td class="float-rt">Scheme Code</td>
                  <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.SchemeCode"
                      formControlName="SchemeCode"></td>
                </ng-container>
              </tr>
              <tr>
                <td class="float-rt">Ledger Name</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.AccName" formControlName="AccName">
                </td>
                <ng-container *ngIf="ledgerModel.LedgerType == 'CR'">
                  <td class="float-rt">Party Code</td>
                  <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.PartyCode"
                      formControlName="PartyCode"></td>
                </ng-container>
              </tr>
              <tr>
                <td class="float-rt">Subgroup</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="ledgerModel.GroupID"
                    formControlName="GroupID" (change)="GetGroup(ledgerModel.GroupID)">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _SubGroup of SubGroup" [value]="_SubGroup.GroupID">
                      {{_SubGroup.GroupName}}
                    </option>
                  </select>
                </td>
                <td class="float-rt">Group</td>
                <td><input type="text" class="form-control" formControlName="GroupName" [(ngModel)]="GroupName"
                    readonly></td>
              </tr>
              <tr>
                <td class="float-rt">Ledger Category</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="ledgerModel.AccType"
                    formControlName="AccType" (change)="EnableOD()">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _LedgerCategory of LedgerCategory" [value]="_LedgerCategory.Value">
                      {{_LedgerCategory.Name}}
                    </option>
                  </select>
                </td>
                <td class="float-rt">Balance Type</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="ledgerModel.OpnBalType"
                    formControlName="OpnBalType">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _BalanceType of BalanceType" [value]="_BalanceType.Value">
                      {{_BalanceType.Name}}
                    </option>
                  </select>
                </td>
                <td class="float-rt">Open Bal</td>
                <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.OpeBal" formControlName="OpeBal">
                </td>
              </tr>
              <tr>
                <ng-container *ngIf="ledgerModel.LedgerType == 'CR'">
                  <td class="float-rt">GSTIN</td>
                  <td>
                    <input type="text" class="form-control" [(ngModel)]="ledgerModel.TIN" formControlName="TIN">
                  </td>
                </ng-container>
                <ng-container *ngIf="EnableDisableODLimit">
                  <td class="float-rt">OD Limit</td>
                  <td>
                    <input type="text" class="form-control" [(ngModel)]="ledgerModel.OdLimit" formControlName="OdLimit">
                  </td>
                </ng-container>
              </tr>
              <tr *ngIf="ledgerModel.LedgerType == 'CR'">
                <td class="float-rt">Address1</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.Address1" formControlName="Address1">
                </td>
                <td class="float-rt">Ph No</td>
                <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.Phone" formControlName="Phone">
                </td>
              </tr>
              <tr *ngIf="ledgerModel.LedgerType == 'CR'">
                <td class="float-rt">Address2</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.Address2" formControlName="Address2">
                </td>
                <td class="float-rt">Mob No</td>
                <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.Mobile" formControlName="Mobile">
                </td>
              </tr>
              <tr *ngIf="ledgerModel.LedgerType == 'CR'">
                <td class="float-rt">Address3</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.Address3" formControlName="Address3">
                </td>
                <td class="float-rt">Email ID</td>
                <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.EmailID" formControlName="EmailID">
                </td>
              </tr>
              <tr *ngIf="ledgerModel.LedgerType == 'CR'">
                <td class="float-rt">City</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.City" formControlName="City">
                </td>
                <td class="float-rt">Website</td>
                <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.WebSite" formControlName="WebSite">
                </td>
              </tr>
              <tr *ngIf="ledgerModel.LedgerType == 'CR'">
                <td class="float-rt">District</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.District" formControlName="District">
                </td>
                <td class="float-rt">PAN</td>
                <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.PANCard" formControlName="PANCard">
                </td>
                <td *ngIf=" ledgerModel.LedgerType=='CR'" class=" float-rt">PIN Code</td>
                <td *ngIf="ledgerModel.LedgerType == 'CR'">
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.PinCode" formControlName="PinCode">
                </td>
              </tr>
              <tr>
                <h2><b>
                    <p style="color:rgb(28, 87, 121);">GST Details</p>
                  </b>

                </h2>
              </tr>
              <tr style=" border-style: solid;border-color:rgb(13, 13, 14); border-width:initial;">
                
                <td class="float-rt">Group Code</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" (change)="getHsnSac(GroupCode.value)"
                    [(ngModel)]="ledgerModel.GSTGoodsGroupCode" formControlName="GSTGoodsGroupCode" #GroupCode>
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _GSTGroup of GSTGroup" [value]="_GSTGroup.Code">
                      {{_GSTGroup.Type}}
                    </option>
                  </select>
                </td>
                <td class="float-rt">Type</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="ledgerModel.GSTServicesGroupCode"
                    formControlName="GSTServicesGroupCode">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _GSTServiceGroup of GSTServiceGroup" [value]="_GSTServiceGroup.Code">
                      {{_GSTServiceGroup.Type}}
                    </option>
                  </select>
                </td>
                <td class="float-rt">HSN/SAC</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="ledgerModel.HSN" formControlName="HSN">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _HSNSAC of HSNSAC" [value]="_HSNSAC.Code">
                      {{_HSNSAC.Type}}
                    </option>
                  </select>
                </td>
              </tr>
              <tr *ngIf="ledgerModel.LedgerType == 'CR'">
                <td class="float-rt">Country</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.Country" formControlName="Country">
                </td>
                <td class="float-rt">TDS</td>
                <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.TDSID" formControlName="TDSID">
                </td>
              </tr>
              <tr>
                <td class="float-rt">Budget Amount</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.BudgetAmt"
                    formControlName="BudgetAmt">
                </td>
                <td class="float-rt">Schedule Type</td>
                <td><input type="text" class="form-control" [(ngModel)]="ledgerModel.LedgerType"
                    formControlName="LedgerType"></td>
              </tr>
              <tr *ngIf="ledgerModel.LedgerType == 'CR'">
                <td class="float-rt">State</td>
                <td>
                  <input type="text" class="form-control" [(ngModel)]="ledgerModel.State" formControlName="State">
                </td>
              </tr>
              <tr>
                <td class="float-rt">Trans Type</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="ledgerModel.TransType"
                    formControlName="TransType">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _TransactionType of TransactionType" [value]="_TransactionType.Code">
                      {{_TransactionType.Name}}
                    </option>
                  </select>
                </td>
                <td class="float-rt">V Type</td>
                <td>
                  <select class="form-control mr-auto mt-2 mt-lg-0" [(ngModel)]="ledgerModel.VTYPE"
                    formControlName="VTYPE">
                    <option [ngValue]="null">Select</option>
                    <option *ngFor="let _VType of VType" [value]="_VType.Code">
                      {{_VType.Name}}
                    </option>
                  </select>
                </td>
              </tr>
            </tbody>
          </table>
        </form>
      </div>
      <!-- Modal footer -->
      <div class="modal-footer">
        <div class="input-group">
          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary" (click)="Save()"
            type="button"><i class="fal fa-save"></i> Save</button>
          <button class="btn btn-danger waves-effect waves-light btn-rounded btn-secondary" type="button"
            data-dismiss="modal"><i class="far fa-window-close"></i>
            Exit</button>
        </div>
      </div>
      <ng-container *ngIf="EnableJson">
        <pre>{{ledgerModel | json}}</pre>
      </ng-container>
    </div>
  </div>
</div>

<div class="modal fade" id="ReprintModal" tabindex="-1" data-backdrop="static" data-keyboard="false" role="dialog"
  aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document" style="max-width: 1400px">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"
          id="exampleModalLabel" (click)=print()><i class="fal fa-print"></i> Print</button>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <span>
        <div id="DisplayData" class="center" [innerHTML]='PrintDetails'></div>
      </span>
    </div>
  </div>
</div>

<div id="PermissonModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Prodigy</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="PassWord">Password</label>
          <input type="password" min="0" class="form-control" name="pwd" placeholder="Password"
            (keyup.enter)="passWord(Pwd.value)" IntegerDecimalFieldValidator #Pwd />{{ Pwd.focus() }}
        </div>
        <div class="form-group">
          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"
            (click)="passWord(Pwd.value)">Submit</button>
        </div>
      </div>
    </div>
  </div>
</div>