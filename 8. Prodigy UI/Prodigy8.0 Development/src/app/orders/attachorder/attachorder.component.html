<ng-container *ngIf="EnableDisablectrls">
  <button type="button"
    class="btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pull-right"
    data-target="#myOrderModal" (click)="openModal()">
    Customer Orders
  </button>
</ng-container>
<br>
<br>
<div class="table-responsive">
  <table class="table table-bordered">
    <thead class="topbar">
      <tr>
        <th *ngIf="EnableDisablectrls">Action</th>
        <th>S.No</th>
        <th>Order No</th>
        <th>Ref No</th>
        <th>Customer</th>
        <th>Fixed Wt</th>
        <th>Amount</th>
        <th>Type</th>
        <th>Rate/Gram</th>
        <th>Karat</th>
      </tr>
    </thead>
    <tbody *ngFor="let _SelectOrderList of SelectedOrderList; let i = index;">
      <tr>
        <td *ngIf="EnableDisablectrls"><i class="far fa-trash-alt fa-1-5x pointer"
            style='color: red; font-size: 1.5em !important;' (click)="DeleteRow(i)"></i>
        </td>
        <td>{{i + 1 }}</td>
        <td>{{_SelectOrderList.OrderNo}}</td>
        <td>{{_SelectOrderList.RefNo}}</td>
        <td>{{_SelectOrderList.Customer}}</td>
        <td>{{_SelectOrderList.FixedWt | number : '1.3-3'}}</td>
        <td>{{_SelectOrderList.Amount | number : '1.2-2'}}</td>
        <td>{{_SelectOrderList.Type}}</td>
        <td>{{_SelectOrderList.GoldRate | number : '1.2-2'}}</td>
        <td>{{_SelectOrderList.Karat}}</td>
      </tr>
    </tbody>
    <tr>
      <td *ngIf="EnableDisablectrls" class="border-none"></td>
      <td class="border-none"></td>
      <td class="border-none"></td>
      <td class="border-none"></td>
      <td class="border-none"></td>
      <td class="border-none"><b>Total:</b></td>
      <td class="border-none">{{Amount(SelectedOrderList) | number : '1.2-2'}}</td>
      <td class="border-none"></td>
      <td class="border-none"></td>
    </tr>
  </table>
</div>
<ng-container *ngIf="EnableDisablectrls">
  <button class="btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pb-10p"
    style="margin-bottom: 25px;" type="button" (click)="Submit()"><i class="fal fa-save"></i> Submit</button>
</ng-container>

<form [formGroup]="AttachOrderForm" class="form-horizontal" (ngSubmit)="onSubmit()">
  <div class="modal fade" id="myOrderModal">
    <div class="modal-dialog " style="max-width: 900px;">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Attach Customer Orders</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="salesPerson">Search By</label>
                  <div class="form-group">
                    <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="searchby">
                      <option [ngValue]="null">Select</option>
                      <option value="OrderNo">Order No</option>
                      <option value="Customer">Customer</option>
                      <option value="Date">Date</option>
                      <option value="Amount">Amount</option>
                      <option value="GoldRate">Rate/Gram</option>
                      <option value="Type">Type</option>
                      <option value="CustomerID">ID</option>
                      <option value="Staff">Staff</option>
                      <option value="Karat">Karat</option>
                      <option value="FixedWt">Fixed Wt</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="searchText">Search Text</label>
                  <div class="input-group">
                    <input class="form-control" id="searchText" formControlName="searchText" placeholder="Search Text"
                      GreenBorder>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="Search"></label>
                  <div class="input-group">
                    <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary"
                      (click)="getSearchParams(AttachOrderForm)"><i class="fal fa-search"></i> Search</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="table-responsive">
                  <table class="table table-bordered">
                    <thead class="topbar">
                      <tr>
                        <th>S.No</th>
                        <th>Order No</th>
                        <th>Ref No</th>
                        <th>Customer</th>
                        <th>Date</th>
                        <th>Amount</th>
                        <th>Rate/Gram</th>
                        <th>Type</th>
                        <th>ID</th>
                        <th>Staff</th>
                        <th>Karat</th>
                        <th>Fixed Wt</th>
                      </tr>
                    </thead>
                    <tbody
                      *ngFor="let _OrderList of AttachOrderList | paginate: { itemsPerPage:top, totalItems:totalItems, currentPage: pagenumber }; let i = index;">
                      <tr (click)="selectRecord(_OrderList,i)" class="pointer">
                        <td>{{i + 1 }}</td>
                        <td>{{_OrderList.OrderNo}}</td>
                        <td>{{_OrderList.RefNo}}</td>
                        <td>{{_OrderList.Customer}}</td>
                        <td>{{_OrderList.Date | date:'dd-MMM-yyyy'}}</td>
                        <td>{{_OrderList.Amount | number : '1.2-2'}}</td>
                        <td>{{_OrderList.GoldRate | number : '1.2-2'}}</td>
                        <td>{{_OrderList.Type}}</td>
                        <td>{{_OrderList.CustomerID}}</td>
                        <td>{{_OrderList.Staff}}</td>
                        <td>{{_OrderList.Karat}}</td>
                        <td>{{_OrderList.FixedWt | number : '1.3-3'}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div>
                  <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</form>
<ng-container *ngIf="EnableJson">
  <pre>{{PostOrderAttchJson|json}}</pre>
</ng-container>

<div id="OrderAttachmentPermissonModal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Prodigy</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="OrderNo">20. Password</label>
          <input type="password" min="0" class="form-control" name="pwd" placeholder="Password"
            (keyup.enter)="passWordOrderAttachment(pwdOrderAttach.value)" #pwdOrderAttach>
        </div>
        <div class="form-group">
          <button class="btn btn-success waves-effect waves-light btn-rounded btn-secondary"
            (click)="passWordOrderAttachment(pwdOrderAttach.value)">Submit</button>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Added for Plain Text printing related to Sales Estimation-->

<div class="modal fade" id="OrderSalesEstimationPlainTextTab" data-backdrop="static" data-keyboard="false" tabindex="-1"
  role="dialog" aria-labelledby="OrderSalesEstimationPlainTextTabLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document" style="max-width: 900px">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn btn-outline-success waves-effect waves-light btn-rounded btn-outline-secondary"
          id="OrderSalesEstimationPlainTextTabLabel" (click)=printOrderSalesEstimationPlainText()><i
            class="fal fa-print"></i>
          Print</button>
        <button type="button" class="close" (click)="Close()" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="container invoice-box htmlPrint" id="print-closed-section" style="max-width: 900px;border-width: 2em">
        <pre>{{OrdersalesEstimationPlainTextDetails}}</pre>
      </div>
    </div>
  </div>
</div>

<!-- Ends here -->