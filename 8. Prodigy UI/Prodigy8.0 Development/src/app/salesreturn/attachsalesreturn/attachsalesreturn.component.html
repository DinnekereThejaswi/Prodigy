<ng-container *ngIf="EnableDisablectrls">
  <button type="button"
    class="btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pull-right"
    data-toggle="modal" (click)="openModal()">
    Attach SR Estimate
  </button>
</ng-container>

<br>
<br>
<div class="table-responsive">
  <table class="table table-bordered">
    <thead class="topbar">
      <tr>
        <th *ngIf="EnableDisablectrls">Action</th>
        <th>S.No</th>
        <th>Est No</th>
        <th>Qty</th>
        <th>Gr.Wt</th>
        <th>Tax Amt</th>
        <th>Total Amt</th>
      </tr>
    </thead>

    <tbody *ngFor="let _SelectSalesReturnList of SelectedSalesReturnList; let i = index;">
      <tr>
        <td *ngIf="EnableDisablectrls"><i class="far fa-trash-alt fa-1-5x pointer"
            style='color: red; font-size: 1.5em !important;' (click)="DeleteRow(i)"></i>
        </td>
        <td>{{i + 1 }}</td>
        <td>{{_SelectSalesReturnList.SrEstNo}}</td>
        <td>{{_SelectSalesReturnList.Quantity}}</td>
        <td>{{_SelectSalesReturnList.GrossWt | number : '1.3-3'}}</td>
        <td>{{_SelectSalesReturnList.TaxAmount | number : '1.2-2'}}</td>
        <td>{{_SelectSalesReturnList.Amount | number : '1.2-2'}}</td>
      </tr>
    </tbody>
    <tr>
      <td *ngIf="EnableDisablectrls" class="border-none"></td>
      <td class="border-none"></td>
      <td class="border-none">No. of items:</td>
      <td class="border-none">{{Quantity(SelectedSalesReturnList)}}</td>
      <td class="border-none"></td>
      <td class="border-none"><b>Total:</b></td>
      <td class="border-none">{{Amount(SelectedSalesReturnList) | number : '1.2-2'}}</td>
    </tr>
  </table>
</div>
<ng-container *ngIf="EnableDisablectrls">
  <button class="btn btn-outline-default waves-effect waves-light btn-rounded btn-outline-secondary pb-10p"
    style="margin-bottom: 25px;" type="button" (click)="Submit()"><i class="fal fa-save"></i> Submit</button>
</ng-container>
<form [formGroup]="AttachSalesReturnForm" class="form-horizontal" (ngSubmit)="onSubmit()">
  <div class="modal fade" id="mySalesReturnModal">
    <div class="modal-dialog " style="max-width: 900px;">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Attach SR Estimate</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="salesPerson">Search By</label>
                  <div class="form-group">
                    <select class="form-control mr-auto mt-2 mt-lg-0" formControlName="searchby">
                      <option [ngValue]="null">Select</option>
                      <option *ngFor="let _searchParamsList of SearchParamsList" [value]="_searchParamsList.Key">
                        {{_searchParamsList.Value}}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="searchText">Search Text</label>
                  <div class="input-group">
                    <input class="form-control" id="searchText" formControlName="searchText" placeholder="Search Text"
                      type="text" GreenBorder>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="Search"></label>
                  <div class="input-group">
                    <button class="btn waves-effect waves-light btn-rounded btn-outline-secondary"
                      (click)="getSearchParams(AttachSalesReturnForm)"><i class="fal fa-search"></i> Search</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="table-responsive">
                  <table class="table table-bordered">
                    <thead class="topbar">
                      <tr>
                        <th>S.No</th>
                        <th>SR EstNo</th>
                        <th>Date</th>
                        <th>Amount</th>
                        <th>GrossWt</th>
                        <th>Quantity</th>
                        <th>TaxAmount</th>
                        <th>CustId</th>
                      </tr>
                    </thead>
                    <tbody
                      *ngFor="let _SalesReturnList of AttachSalesReturnList | paginate: { itemsPerPage:top, totalItems:totalItems, currentPage: pagenumber }; let i = index;">
                      <tr (click)="selectRecord(_SalesReturnList)" class="pointer">
                        <td>{{i + 1 }}</td>
                        <td>{{_SalesReturnList.SrEstNo}}</td>
                        <td>{{_SalesReturnList.Date}}</td>
                        <td>{{_SalesReturnList.Amount | number : '1.2-2'}}</td>
                        <td>{{_SalesReturnList.GrossWt | number : '1.3-3'}}</td>
                        <td>{{_SalesReturnList.Quantity}}</td>
                        <td>{{_SalesReturnList.TaxAmount | number : '1.2-2'}}</td>
                        <td>{{_SalesReturnList.CustID}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div>
                  <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</form>
<ng-container *ngIf="EnableJson">
  <pre>{{PostSalesReturnAttchJson|json}}</pre>
</ng-container>